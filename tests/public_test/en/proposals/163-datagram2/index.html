<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Datagram2 Protocol | I2P - The Invisible Internet Project</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Datagram2 Protocol | I2P - The Invisible Internet Project">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/en/proposals/163-datagram2/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta Site Now Live E-Mail issues to stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Close banner" title="Close banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../en/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../en/about/" class="">About</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../en/about/">Overview</a></li>
                            <li><a href="../../../en/papers/">Research Papers</a></li>
                            <li><a href="../../../en/about/media/">Press</a></li>
                            <li><a href="../../../en/contact/">Contact Us</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../en/docs/" class="">Docs</a></li>
                    <li><a href="../../../en/downloads/" class="">Downloads</a></li>
                    <li><a href="../../../en/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../en/get-involved/" class="">Get Involved</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../en/get-involved/">Overview</a></li>
                            <li><a href="../../../en/feedback/">Feature Suggestions</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">en</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/163-datagram2/"
                                class="lang-option active">English</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/163-datagram2/"
                                class="lang-option">Spanish</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/163-datagram2/"
                                class="lang-option">Korean</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/163-datagram2/"
                                class="lang-option">Chinese</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/163-datagram2/"
                                class="lang-option">Russian</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/163-datagram2/"
                                class="lang-option">Czech</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/163-datagram2/"
                                class="lang-option">German</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/163-datagram2/"
                                class="lang-option">French</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/163-datagram2/"
                                class="lang-option">Turkish</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/163-datagram2/"
                                class="lang-option">Vietnamese</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/163-datagram2/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/163-datagram2/"
                                class="lang-option">Arabic</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/163-datagram2/"
                                class="lang-option">Portuguese</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../en/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../en/downloads/" class="btn btn-primary">Get I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../en/">Home</a>
            <span class="separator">/</span>
            <a href="../../../en/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Datagram2 Protocol</span>
        </nav>

        


        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Datagram2 Protocol</h1>
                <div class="proposal-number">Proposal 163</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-closed">
                    Closed
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz, orignal, drzed, eyedeekay</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2023-01-24</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2025-04-16</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.66</span>
                    </div>
                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#status">Status</a></li>
    <li><a href="#overview">Overview</a></li>
    <li><a href="#goals">Goals</a></li>
    <li><a href="#non-goals">Non-Goals</a></li>
    <li><a href="#motivation">Motivation</a></li>
    <li><a href="#repliable-datagram-spec">Repliable Datagram Spec</a></li>
    <li><a href="#design">Design</a></li>
    <li><a href="#specification">Specification</a>
      <ul>
        <li><a href="#protocol">Protocol</a></li>
        <li><a href="#datagram2-format">Datagram2 Format</a></li>
        <li><a href="#signatures">Signatures</a></li>
        <li><a href="#tohash-verification">ToHash Verification</a></li>
        <li><a href="#datagram3-format">Datagram3 Format</a></li>
        <li><a href="#sam">SAM</a></li>
        <li><a href="#overhead">Overhead</a></li>
      </ul>
    </li>
    <li><a href="#security-analysis">Security Analysis</a></li>
    <li><a href="#notes">Notes</a></li>
    <li><a href="#compatibility">Compatibility</a></li>
    <li><a href="#migration">Migration</a>
      <ul>
        <li><a href="#bittorrent">Bittorrent</a></li>
        <li><a href="#others">Others</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="status">Status</h2>
<p>Approved at review 2025-04-15.
Changes incorporated into specs.
Implementated in Java I2P as of API 0.9.66.
Check implementation documentation for status.</p>
<h2 id="overview">Overview</h2>
<p>Pulled out from <a href="../../../en/proposals/123-new-netdb-entries/">Prop123</a>
 as a separate proposal.</p>
<p>Offline signatures cannot be verified in the repliable datagram processing.
Needs a flag to indicate offline signed but there&rsquo;s no place to put a flag.</p>
<p>Will require a completely new I2CP protocol number and format,
to be added to the <a href="../../../en/docs/api/datagrams/">DATAGRAMS</a>
 specification.
Let&rsquo;s call it &ldquo;Datagram2&rdquo;.</p>
<h2 id="goals">Goals</h2>
<ul>
<li>Add support for offline signatures</li>
<li>Add replay resistance</li>
<li>Add flavor without signatures</li>
<li>Add flags and options fields for extensibility</li>
</ul>
<h2 id="non-goals">Non-Goals</h2>
<p>Full end-to-end protocol support for congestion control, etc.
That would be build on top of, or an alternative to, Datagram2, which is a low-level protocol.
It would not make sense to design a high-performance protocol solely atop
Datagram2, because of the from field and signature overhead.
Any such protocol should do an initial handshake with Datagram2 and then
switch to RAW datagrams.</p>
<h2 id="motivation">Motivation</h2>
<p>Left over from LS2 work otherwise completed in 2019.</p>
<p>The first application to use Datagram2 is expected to be
bittorrent UDP announces, as implemented in i2psnark and zzzot,
see <a href="../../../en/proposals/160-udp-trackers/">Prop160</a>
.</p>
<h2 id="repliable-datagram-spec">Repliable Datagram Spec</h2>
<p>For reference,
following is a review of the specification for repliable datagrams,
copied from <a href="../../../en/docs/api/datagrams/">Datagrams</a>
.
The standard I2CP protocol number for repliable datagrams is PROTO_DATAGRAM (17).</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  | from                                  |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  | signature                             |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  | payload...
</span></span><span style="display:flex;"><span>  +----+----+----+----//
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  from :: a `Destination`
</span></span><span style="display:flex;"><span>          length: 387+ bytes
</span></span><span style="display:flex;"><span>          The originator and signer of the datagram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  signature :: a `Signature`
</span></span><span style="display:flex;"><span>               Signature type must match the signing public key type of $from
</span></span><span style="display:flex;"><span>               length: 40+ bytes, as implied by the Signature type.
</span></span><span style="display:flex;"><span>               For the default DSA_SHA1 key type:
</span></span><span style="display:flex;"><span>                  The DSA `Signature` of the SHA-256 hash of the payload.
</span></span><span style="display:flex;"><span>               For other key types:
</span></span><span style="display:flex;"><span>                  The `Signature` of the payload.
</span></span><span style="display:flex;"><span>               The signature may be verified by the signing public key of $from
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload ::  The data
</span></span><span style="display:flex;"><span>              Length: 0 to about 31.5 KB (see notes)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Total length: Payload length + 423+
</span></span></code></pre></div><h2 id="design">Design</h2>
<ul>
<li>Define new protocol 19 - Repliable datagram with options.</li>
<li>Define new protocol 20 - Repliable datagram without signature.</li>
<li>Add flags field for offline signatures and future expansion</li>
<li>Move signature after the payload for easier processing</li>
<li>New signature specification different from repliable datagram or streaming, so that
signature verification will fail if interpreted as repliable datagram or streaming.
This is accomplished by moving the signature after the payload,
and by including the destination hash in the signature function.</li>
<li>Add replay prevention for datagrams, as was done in <a href="../../../en/proposals/164-streaming/">Prop164</a>
 for streaming.</li>
<li>Add section for arbitrary options</li>
<li>Reuse offline signature format from <a href="../../../en/docs/specs/common-structures/">Common</a>
 and <a href="../../../en/docs/specs/streaming/">Streaming</a>
.</li>
<li>Offline signature section must be before the variable-length
payload and signature sections, as it specifies the length
of the signature.</li>
</ul>
<h2 id="specification">Specification</h2>
<h3 id="protocol">Protocol</h3>
<p>The new I2CP protocol number for Datagram2 is 19.
Add it as PROTO_DATAGRAM2 to <a href="../../../en/docs/specs/i2cp/">I2CP</a>
.</p>
<p>The new I2CP protocol number for Datagram3 is 20.
Add it as PROTO_DATAGRAM2 to <a href="../../../en/docs/specs/i2cp/">I2CP</a>
.</p>
<h3 id="datagram2-format">Datagram2 Format</h3>
<p>Add Datagram2 to <a href="../../../en/docs/api/datagrams/">DATAGRAMS</a>
 as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~            from                       ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |  flags  |     options (optional)      |
</span></span><span style="display:flex;"><span>  +----+----+                             +
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~     offline_signature (optional)      ~
</span></span><span style="display:flex;"><span>  ~   expires, sigtype, pubkey, offsig    ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~            payload                    ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~            signature                  ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  from :: a `Destination`
</span></span><span style="display:flex;"><span>          length: 387+ bytes
</span></span><span style="display:flex;"><span>          The originator and (unless offline signed) signer of the datagram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  flags :: (2 bytes)
</span></span><span style="display:flex;"><span>           Bit order: 15 14 ... 3 2 1 0
</span></span><span style="display:flex;"><span>           Bits 3-0: Version: 0x02 (0 0 1 0)
</span></span><span style="display:flex;"><span>           Bit 4: If 0, no options; if 1, options mapping is included
</span></span><span style="display:flex;"><span>           Bit 5: If 0, no offline sig; if 1, offline signed
</span></span><span style="display:flex;"><span>           Bits 15-6: unused, set to 0 for compatibility with future uses
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  options :: (2+ bytes if present)
</span></span><span style="display:flex;"><span>           If flag indicates options are present, a `Mapping`
</span></span><span style="display:flex;"><span>           containing arbitrary text options
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  offline_signature ::
</span></span><span style="display:flex;"><span>               If flag indicates offline keys, the offline signature section,
</span></span><span style="display:flex;"><span>               as specified in the Common Structures Specification,
</span></span><span style="display:flex;"><span>               with the following 4 fields. Length: varies by online and offline
</span></span><span style="display:flex;"><span>               sig types, typically 102 bytes for Ed25519
</span></span><span style="display:flex;"><span>               This section can, and should, be generated offline.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    expires :: Expires timestamp
</span></span><span style="display:flex;"><span>               (4 bytes, big endian, seconds since epoch, rolls over in 2106)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    sigtype :: Transient sig type (2 bytes, big endian)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    pubkey :: Transient signing public key (length as implied by sig type),
</span></span><span style="display:flex;"><span>              typically 32 bytes for Ed25519 sig type.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    offsig :: a `Signature`
</span></span><span style="display:flex;"><span>              Signature of expires timestamp, transient sig type,
</span></span><span style="display:flex;"><span>              and public key, by the destination public key,
</span></span><span style="display:flex;"><span>              length: 40+ bytes, as implied by the Signature type, typically
</span></span><span style="display:flex;"><span>              64 bytes for Ed25519 sig type.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload ::  The data
</span></span><span style="display:flex;"><span>              Length: 0 to about 61 KB (see notes)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  signature :: a `Signature`
</span></span><span style="display:flex;"><span>               Signature type must match the signing public key type of $from
</span></span><span style="display:flex;"><span>               (if no offline signature) or the transient sigtype
</span></span><span style="display:flex;"><span>               (if offline signed)
</span></span><span style="display:flex;"><span>               length: 40+ bytes, as implied by the Signature type, typically
</span></span><span style="display:flex;"><span>               64 bytes for Ed25519 sig type.
</span></span><span style="display:flex;"><span>               The `Signature` of the payload and other fields as specified below.
</span></span><span style="display:flex;"><span>               The signature is verified by the signing public key of $from
</span></span><span style="display:flex;"><span>               (if no offline signature) or the transient pubkey
</span></span><span style="display:flex;"><span>               (if offline signed)
</span></span></code></pre></div><p>Total length: minimum 433 + payload length;
typical length for X25519 senders and without offline signatures:
457 + payload length.
Note that the message will typically be compressed with gzip at the I2CP layer,
which will result in significant savings if the from destination is compressible.</p>
<p>Note: The offline signature format is the same as in the Common Structures spec <a href="../../../en/docs/specs/common-structures/">Common</a>
 and <a href="../../../en/docs/specs/streaming/">Streaming</a>
.</p>
<h3 id="signatures">Signatures</h3>
<p>The signature is over the following fields.</p>
<ul>
<li>Prelude: The 32-byte hash of the target destination (not included in the datagram)</li>
<li>flags</li>
<li>options (if present)</li>
<li>offline_signature (if present)</li>
<li>payload</li>
</ul>
<p>In repliable datagram, for the DSA_SHA1 key type, the signature was over the
SHA-256 hash of the payload, not the payload itself; here, the signature is
always over the fields above (NOT the hash), regardless of key type.</p>
<h3 id="tohash-verification">ToHash Verification</h3>
<p>Receivers must verify the signature (using their destination hash)
and discard the datagram on failure, for replay prevention.</p>
<h3 id="datagram3-format">Datagram3 Format</h3>
<p>Add Datagram3 to <a href="../../../en/docs/api/datagrams/">DATAGRAMS</a>
 as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~            fromhash                   ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |  flags  |     options (optional)      |
</span></span><span style="display:flex;"><span>  +----+----+                             +
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  ~            payload                    ~
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  fromhash :: a `Hash`
</span></span><span style="display:flex;"><span>              length: 32 bytes
</span></span><span style="display:flex;"><span>              The originator of the datagram
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  flags :: (2 bytes)
</span></span><span style="display:flex;"><span>           Bit order: 15 14 ... 3 2 1 0
</span></span><span style="display:flex;"><span>           Bits 3-0: Version: 0x03 (0 0 1 1)
</span></span><span style="display:flex;"><span>           Bit 4: If 0, no options; if 1, options mapping is included
</span></span><span style="display:flex;"><span>           Bits 15-5: unused, set to 0 for compatibility with future uses
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  options :: (2+ bytes if present)
</span></span><span style="display:flex;"><span>           If flag indicates options are present, a `Mapping`
</span></span><span style="display:flex;"><span>           containing arbitrary text options
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload ::  The data
</span></span><span style="display:flex;"><span>              Length: 0 to about 61 KB (see notes)
</span></span></code></pre></div><p>Total length: minimum 34 + payload length.</p>
<h3 id="sam">SAM</h3>
<p>Add STYLE=DATAGRAM2 and STYLE=DATAGRAM3 to the SAMv3 specification.
Update the information on offline signatures.</p>
<h3 id="overhead">Overhead</h3>
<p>This design adds 2 bytes of overhead to repliable datagrams for flags.
This is acceptable.</p>
<h2 id="security-analysis">Security Analysis</h2>
<p>Including the target hash in the signature should be effective at preventing replay attacks.</p>
<p>The Datagram3 format lacks signatures, so the sender cannot be verified,
and replay attacks are possible. Any required validation must be done at the application layer,
or by the router at the ratchet layer.</p>
<h2 id="notes">Notes</h2>
<ul>
<li>The practical length is limited by lower layers of protocols - the tunnel
message spec <a href="../../../en/docs/specs/implementation/">TUNMSG</a>
 limits messages to about 61.2 KB and the transports
currently limit messages to about 64 KB, so the data length here
is limited to about 61 KB.</li>
<li>See important notes about the reliability of large datagrams <a href="../../../en/docs/">API</a>
. For
best results, limit the payload to about 10 KB or less.</li>
</ul>
<h2 id="compatibility">Compatibility</h2>
<p>None. Applications must be rewritten to route Datagram2 I2CP messages
based on protocol and/or port.
Datagram2 messages that are misrouted and interpreted as
Repliable datagram or streaming messages will fail based on signature, format, or both.</p>
<h2 id="migration">Migration</h2>
<p>Each UDP application must separately detect support and migrate.
The most prominent UDP application is bittorrent.</p>
<h3 id="bittorrent">Bittorrent</h3>
<p>Bittorrent DHT: Needs extension flag probably,
e.g. i2p_dg2, coordinate with BiglyBT</p>
<p>Bittorrent UDP Announces <a href="../../../en/proposals/160-udp-trackers/">Prop160</a>
: Design in from the beginning.
Coordindate with BiglyBT, i2psnark, zzzot</p>
<h3 id="others">Others</h3>
<p>Bote: Unlikely to migrate, not actively maintained</p>
<p>Streamr: Nobody&rsquo;s using it, no migration planned</p>
<p>SAM UDP apps: None known</p>
<h2 id="references">References</h2>
<ul>
<li><a href="../../../en/docs/api/datagrams/">API</a>
</li>
<li><a href="../../../en/docs/applications/bittorrent/">BT-SPEC</a>
</li>
<li><a href="../../../en/docs/specs/common-structures/">Common</a>
</li>
<li><a href="../../../en/docs/api/datagrams/">DATAGRAMS</a>
</li>
<li><a href="../../../en/docs/specs/i2cp/">I2CP</a>
</li>
<li><a href="../../../en/proposals/123-new-netdb-entries/">Prop123</a>
</li>
<li><a href="../../../en/proposals/160-udp-trackers/">Prop160</a>
</li>
<li><a href="../../../en/proposals/164-streaming/">Prop164</a>
</li>
<li><a href="../../../en/docs/specs/streaming/">Streaming</a>
</li>
<li><a href="../../../en/docs/overview/transport/">TRANSPORT</a>
</li>
<li><a href="../../../en/docs/specs/implementation/#notes">TUNMSG</a>
</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../en/proposals/" class="page-nav-link">
                        ‚Üê Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/163-datagram2.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Stay updated with I2P news:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Enter your email" required>
                            <button type="submit">Subscribe</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="../../../en/financial-support/">Donate</a></li>
                    <li><a href="../../../en/docs/overview/intro/">I2P Introduction</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Community</h3>
                <ul>
                    <li><a href="../../../en/get-involved/">Get Involved</a></li>
                    <li><a href="../../../en/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Official Forums</a></li>
                    <li><a href="../../../en/contact/">Contact</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Resources</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metrics</a></li>
                    <li><a href="../../../en/papers/">Research</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 The Invisible Internet Project. Licensed under Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../en/privacy/">Privacy</a>
                <a href="../../../en/terms/">Terms</a>
                <a href="../../../en/about/media/">Press</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Community Poll</h2>
            <p class="modal-subtitle">We&#39;d love to hear from you</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Your vote helps shape the future of I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
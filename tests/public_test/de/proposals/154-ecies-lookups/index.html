<!DOCTYPE html>
<html lang="de" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Datenbank-Abfragen von ECIES-Zielen | I2P - Das unsichtbare Internet-Projekt</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Datenbank-Abfragen von ECIES-Zielen | I2P - Das unsichtbare Internet-Projekt">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/de/proposals/154-ecies-lookups/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta-Seite jetzt live E-Mail-Probleme an stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Banner schließen" title="Banner schließen">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../de/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../de/about/" class="">Über</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/about/">Übersicht</a></li>
                            <li><a href="../../../de/papers/">Forschungspapiere</a></li>
                            <li><a href="../../../de/about/media/">Presse</a></li>
                            <li><a href="../../../de/contact/">Kontakt</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../de/docs/" class="">Dokumente</a></li>
                    <li><a href="../../../de/downloads/" class="">Downloads</a></li>
                    <li><a href="../../../de/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../de/get-involved/" class="">Mitmachen</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/get-involved/">Übersicht</a></li>
                            <li><a href="../../../de/feedback/">Funktionsvorschläge</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">de</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/154-ecies-lookups/"
                                class="lang-option">Englisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/154-ecies-lookups/"
                                class="lang-option">Spanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/154-ecies-lookups/"
                                class="lang-option">Koreanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/154-ecies-lookups/"
                                class="lang-option">Chinesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/154-ecies-lookups/"
                                class="lang-option">Russisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/154-ecies-lookups/"
                                class="lang-option">Tschechisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/154-ecies-lookups/"
                                class="lang-option active">Deutsch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/154-ecies-lookups/"
                                class="lang-option">Französisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/154-ecies-lookups/"
                                class="lang-option">Türkisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/154-ecies-lookups/"
                                class="lang-option">Vietnamesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/154-ecies-lookups/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/154-ecies-lookups/"
                                class="lang-option">Arabisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/154-ecies-lookups/"
                                class="lang-option">Portugiesisch</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../de/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../de/downloads/" class="btn btn-primary">I2P Herunterladen</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../de/">Home</a>
            <span class="separator">/</span>
            <a href="../../../de/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Datenbank-Abfragen von ECIES-Zielen</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Diese Übersetzung wurde mittels maschinellem Lernen erstellt und ist möglicherweise nicht 100% korrekt.</span>
    
    
    <a href="../../../en/proposals/154-ecies-lookups/" class="disclaimer-link">Englische Version anzeigen</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Datenbank-Abfragen von ECIES-Zielen</h1>
                <div class="proposal-number">Proposal 154</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-geschlossen">
                    Geschlossen
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-03-23</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2021-01-08</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Implemented In</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#hinweis">Hinweis</a></li>
    <li><a href="#überblick">Überblick</a>
      <ul>
        <li><a href="#definitionen">Definitionen</a></li>
        <li><a href="#zusammenfassung">Zusammenfassung</a></li>
        <li><a href="#ziele">Ziele</a></li>
        <li><a href="#nicht-ziele">Nicht-Ziele</a></li>
      </ul>
    </li>
    <li><a href="#alternativen">Alternativen</a></li>
    <li><a href="#design">Design</a></li>
    <li><a href="#spezifikation">Spezifikation</a>
      <ul>
        <li><a href="#elg-zu-elg">ElG zu ElG</a></li>
        <li><a href="#ecies-zu-elg">ECIES zu ElG</a></li>
        <li><a href="#ecies-zu-ecies-0949">ECIES zu ECIES (0.9.49)</a></li>
        <li><a href="#ecies-zu-ecies-zukünftig">ECIES zu ECIES (zukünftig)</a></li>
        <li><a href="#antwortformat">Antwortformat</a></li>
      </ul>
    </li>
    <li><a href="#begründung">Begründung</a></li>
    <li><a href="#anmerkungen">Anmerkungen</a></li>
    <li><a href="#probleme">Probleme</a></li>
    <li><a href="#migration">Migration</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="hinweis">Hinweis</h2>
<p>ECIES zu ElG wurde in 0.9.46 implementiert und die Vorschlagsphase ist abgeschlossen.
Siehe <a href="../../../de/docs/specs/i2np/">I2NP</a>
 für die offizielle Spezifikation.
Dieser Vorschlag kann dennoch für Hintergrundinformation herangezogen werden.
ECIES zu ECIES mit enthaltenen Schlüsseln ist ab Version 0.9.48 implementiert.
Der Abschnitt ECIES-zu-ECIES (abgeleitete Schlüssel) kann in einem zukünftigen Vorschlag
wiedereröffnet oder integriert werden.</p>
<h2 id="überblick">Überblick</h2>
<h3 id="definitionen">Definitionen</h3>
<ul>
<li>AEAD: ChaCha20/Poly1305</li>
<li>DLM: I2NP Database Lookup Message</li>
<li>DSM: I2NP Database Store Message</li>
<li>DSRM: I2NP Database Search Reply Message</li>
<li>ECIES: ECIES-X25519-AEAD-Ratchet (Vorschlag 144)</li>
<li>ElG: ElGamal</li>
<li>ENCRYPT(k, n, payload, ad): Wie definiert in <a href="../../../de/docs/specs/ecies/">ECIES</a>
</li>
<li>LS: Leaseset</li>
<li>lookup: I2NP DLM</li>
<li>reply: I2NP DSM oder DSRM</li>
</ul>
<h3 id="zusammenfassung">Zusammenfassung</h3>
<p>Beim Senden eines DLM für ein LS an einen Floodfill gibt das DLM in der Regel an,
dass die Antwort markiert, AES-verschlüsselt und über einen Tunnel zum Ziel gesendet
werden soll. Unterstützung für AES-verschlüsselte Antworten wurde in 0.9.7 hinzugefügt.</p>
<p>AES-verschlüsselte Antworten wurden in 0.9.7 spezifiziert, um den großen Krypto-Overhead von ElG zu minimieren, da sie die Tags/AES-Funktionalität in ElGamal/AES+SessionTags wieder verwendeten. Allerdings können AES-Antworten am IBEP manipuliert werden, da es keine Authentifizierung gibt, und die Antworten sind nicht vorwärtsgeheim.</p>
<p>Mit <a href="../../../de/docs/specs/ecies/">ECIES</a>
 Zielen ist die Absicht von Vorschlag 144, dass
die Ziele keine 32-Byte-Tags und AES-Entschlüsselung mehr unterstützen.
Die Einzelheiten wurden in diesem Vorschlag absichtlich nicht enthalten.</p>
<p>Dieser Vorschlag dokumentiert eine neue Option im DLM, um ECIES-verschlüsselte Antworten anzufordern.</p>
<h3 id="ziele">Ziele</h3>
<ul>
<li>Neue Flags für DLM, wenn eine verschlüsselte Antwort über einen Tunnel zu einem ECIES-Ziel angefordert wird</li>
<li>Für die Antwort, Hinzufügen von Vorwärtsgeheimnis und Senderauthentifizierung, die gegen
die Kompromittierung des Schlüssels des Anfragenden (Ziel) resistent ist (KCI).</li>
<li>Anonymität des Anfragenden aufrechterhalten</li>
<li>Minimierung des Krypto-Overheads</li>
</ul>
<h3 id="nicht-ziele">Nicht-Ziele</h3>
<ul>
<li>Keine Änderung der Verschlüsselungs- oder Sicherheitsmerkmale der Abfrage (DLM).
Die Abfrage hat Vorwärtsgeheimnis nur für die Kompromittierung des Anfragerschlüssels.
Die Verschlüsselung erfolgt mit dem statischen Schlüssel des Floodfills.</li>
<li>Keine Vorwärtsgeheimnis- oder Senderauthentifizierungsprobleme, die resistent sind gegen
die Kompromittierung des Schlüssels des Antwortenden (Floodfill) (KCI).
Der Floodfill ist eine öffentliche Datenbank und wird auf Anfragen von jedem antworten.</li>
<li>Keine Gestaltung von ECIES-Routern in diesem Vorschlag.
Wohin der X25519-öffentliche Schlüssel eines Routers geht, ist noch zu bestimmen.</li>
</ul>
<h2 id="alternativen">Alternativen</h2>
<p>In Ermangelung eines definierten Weges, um Antworten an ECIES-Ziele zu verschlüsseln, gibt es mehrere Alternativen:</p>
<ol>
<li>
<p>Keine verschlüsselten Antworten anfordern. Antworten werden unverschlüsselt sein.
Java I2P verwendet derzeit diesen Ansatz.</p>
</li>
<li>
<p>Unterstützung für 32-Byte-Tags und AES-verschlüsselte Antworten zu ausschließlich ECIES-Zielen hinzufügen
und AES-verschlüsselte Antworten wie gewohnt anfordern. i2pd verwendet derzeit diesen Ansatz.</p>
</li>
<li>
<p>AES-verschlüsselte Antworten wie gewohnt anfordern, sie jedoch über
Erkundungstunnel zurück zum Router leiten.
Java I2P verwendet diesen Ansatz derzeit in einigen Fällen.</p>
</li>
<li>
<p>Für duale ElG- und ECIES-Ziele,
AES-verschlüsselte Antworten wie gewohnt anfordern. Java I2P verwendet diesen Ansatz derzeit.
i2pd hat duale Krypto-Ziele noch nicht implementiert.</p>
</li>
</ol>
<h2 id="design">Design</h2>
<ul>
<li>
<p>Neues DLM-Format wird ein Bit zum Flags-Feld hinzufügen, um ECIES-verschlüsselte Antworten zu spezifizieren.
ECIES-verschlüsselte Antworten werden das <a href="../../../de/docs/specs/ecies/">ECIES</a>
 Existing Session Nachrichtenformat verwenden,
mit einem vorangestellten Tag und einer ChaCha/Poly-Nutzlast und MAC.</p>
</li>
<li>
<p>Zwei Varianten definieren. Eine für ElG-Router, wo ein DH-Vorgang nicht möglich ist,
und eine für zukünftige ECIES-Router, bei denen ein DH-Vorgang möglich ist und zusätzliche Sicherheit bieten kann. Für weitere Studien.</p>
</li>
</ul>
<p>DH ist nicht für Antworten von ElG-Routern möglich, da sie keinen
X25519-öffentlichen Schlüssel veröffentlichen.</p>
<h2 id="spezifikation">Spezifikation</h2>
<p>Im <a href="../../../de/docs/specs/i2np/">I2NP</a>
 DLM (DatabaseLookup) Spezifikation folgende Änderungen vornehmen.</p>
<p>Bit 4 &ldquo;ECIESFlag&rdquo; für die neuen Verschlüsselungsoptionen hinzufügen.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>flags ::
</span></span><span style="display:flex;"><span>       bit 4: ECIESFlag
</span></span><span style="display:flex;"><span>               vor Veröffentlichung 0.9.46 ignoriert
</span></span><span style="display:flex;"><span>               ab Veröffentlichung 0.9.46:
</span></span><span style="display:flex;"><span>               0  =&gt; unverschlüsselte oder ElGamal-Antwort senden
</span></span><span style="display:flex;"><span>               1  =&gt; ChaCha/Poly-verschlüsselte Antwort mit eingeschlossenem Schlüssel senden
</span></span><span style="display:flex;"><span>                     (ob Tag eingeschlossen ist, hängt von Bit 1 ab)
</span></span></code></pre></div><p>Flag-Bit 4 wird in Kombination mit Bit 1 verwendet, um den Antwort-Verschlüsselungsmodus zu bestimmen.
Flag-Bit 4 darf nur beim Senden an Router mit Version 0.9.46 oder höher gesetzt werden.</p>
<p>In der untenstehenden Tabelle bedeutet
&ldquo;DH n/a&rdquo;, dass die Antwort nicht verschlüsselt ist.
&ldquo;DH nein&rdquo; bedeutet, dass die Antwortschlüssel in der Anfrage enthalten sind.
&ldquo;DH ja&rdquo; bedeutet, dass die Antwortschlüssel aus dem DH-Vorgang abgeleitet sind.</p>
<table>
  <thead>
      <tr>
          <th>Flag-Bits 4,1</th>
          <th>Von Ziel</th>
          <th>Zu Router</th>
          <th>Antwort</th>
          <th>DH?</th>
          <th>Anmerkungen</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0 0</td>
          <td>Beliebig</td>
          <td>Beliebig</td>
          <td>keine</td>
          <td>n/a</td>
          <td>aktuell</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ElG</td>
          <td>ElG</td>
          <td>AES</td>
          <td>nein</td>
          <td>aktuell</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AES</td>
          <td>nein</td>
          <td>i2pd-Workaround</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AEAD</td>
          <td>nein</td>
          <td>dieser Vorschlag</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>nein</td>
          <td>0.9.49</td>
      </tr>
      <tr>
          <td>1 1</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>ja</td>
          <td>zukünftig</td>
      </tr>
  </tbody>
</table>
<h3 id="elg-zu-elg">ElG zu ElG</h3>
<p>ElG-Ziel sendet eine Abfrage an einen ElG-Router.</p>
<p>Geringfügige Änderungen an der Spezifikation, um auf das neue Bit 4 zu achten.
Keine Änderungen am bestehenden Binärformat.</p>
<p>Schlüsselerzeugung des Anfragenden (Klarstellung):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 Byte Zufallsdaten
</span></span><span style="display:flex;"><span>  reply_tags :: Jeder ist CSRNG(32) 32 Byte Zufallsdaten
</span></span></code></pre></div><p>Nachrichtenformat (Prüfung auf ECIESFlag hinzufügen):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 Byte `SessionKey` Big-Endian
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 1 UND ECIESFlag == 0, nur ab Veröffentlichung 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 Byte `Integer`
</span></span><span style="display:flex;"><span>       gültiger Bereich: 1-32 (typischerweise 1)
</span></span><span style="display:flex;"><span>       die Anzahl der folgenden Antwort-Tags
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 1 UND ECIESFlag == 0, nur ab Veröffentlichung 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       eines oder mehrere 32 Byte `SessionTag`s (typischerweise eines)
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 1 UND ECIESFlag == 0, nur ab Veröffentlichung 0.9.7
</span></span></code></pre></div><h3 id="ecies-zu-elg">ECIES zu ElG</h3>
<p>ECIES-Ziel sendet eine Abfrage an einen ElG-Router.
Unterstützt ab 0.9.46.</p>
<p>Die Felder reply_key und reply_tags sind für eine ECIES-verschlüsselte Antwort neu definiert.</p>
<p>Schlüsselerzeugung des Anfragenden:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 Byte Zufallsdaten
</span></span><span style="display:flex;"><span>  reply_tags :: Jeder ist CSRNG(8) 8 Byte Zufallsdaten
</span></span></code></pre></div><p>Nachrichtenformat:
Felder reply_key und reply_tags wie folgt neu definieren:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 Byte ECIES `SessionKey` Big-Endian
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 0 UND ECIESFlag == 1, nur ab Veröffentlichung 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 Byte `Integer`
</span></span><span style="display:flex;"><span>       erforderlicher Wert: 1
</span></span><span style="display:flex;"><span>       die Anzahl der folgenden Antwort-Tags
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 0 UND ECIESFlag == 1, nur ab Veröffentlichung 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       ein 8 Byte ECIES `SessionTag`
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 0 UND ECIESFlag == 1, nur ab Veröffentlichung 0.9.46
</span></span></code></pre></div><p>Die Antwort ist eine ECIES Existing Session Nachricht, wie definiert in <a href="../../../de/docs/specs/ecies/">ECIES</a>
.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>tag :: 8 Byte reply_tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: 32 Byte Sitzungsschlüssel
</span></span><span style="display:flex;"><span>     Der reply_key.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: Das 8 Byte reply_tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Klartextdaten, das DSM oder DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="ecies-zu-ecies-0949">ECIES zu ECIES (0.9.49)</h3>
<p>ECIES-Ziel oder -Router sendet eine Abfrage an einen ECIES-Router, mit gebündelten Antwortschlüsseln.
Unterstützt ab 0.9.49.</p>
<p>ECIES-Router wurden in 0.9.48 eingeführt, siehe <a href="../../../de/proposals/156-ecies-routers/">Prop156</a>
.
Ab 0.9.49 können ECIES-Ziele und -Router dasselbe Format wie im
Abschnitt &ldquo;ECIES zu ElG&rdquo; oben verwenden, mit Antwortschlüsseln, die in der Anfrage enthalten sind.
Die Abfrage wird das &ldquo;one time format&rdquo; in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 verwenden,
da der Anfragende anonym ist.</p>
<p>Für eine neue Methode mit abgeleiteten Schlüsseln, siehe den nächsten Abschnitt.</p>
<h3 id="ecies-zu-ecies-zukünftig">ECIES zu ECIES (zukünftig)</h3>
<p>ECIES-Ziel oder -Router sendet eine Abfrage an einen ECIES-Router, und die Antwortschlüssel werden aus dem DH abgeleitet.
Nicht vollständig definiert oder unterstützt, Implementierung noch festzulegen.</p>
<p>Die Abfrage wird das &ldquo;one time format&rdquo; in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 verwenden,
da der Anfragende anonym ist.</p>
<p>Feld reply_key wie folgt neu definieren. Es gibt keine zugehörigen Tags.
Die Tags werden im untenstehenden KDF generiert.</p>
<p>Dieser Abschnitt ist unvollständig und erfordert weitere Untersuchungen.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 Byte X25519 ephemerer `PublicKey` des Anfragenden, Little-Endian
</span></span><span style="display:flex;"><span>       nur enthalten, wenn encryptionFlag == 1 UND ECIESFlag == 1, nur ab Veröffentlichung 0.9.TBD
</span></span></code></pre></div><p>Die Antwort ist eine ECIES Existing Session Nachricht, wie definiert in <a href="../../../de/docs/specs/ecies/">ECIES</a>
.
Siehe <a href="../../../de/docs/specs/ecies/">ECIES</a>
 für alle Definitionen.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// Alices X25519 ephemere Schlüssel
</span></span><span style="display:flex;"><span>  // aesk = Alice ephemerer privater Schlüssel
</span></span><span style="display:flex;"><span>  aesk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // aepk = Alice ephemerer öffentlicher Schlüssel
</span></span><span style="display:flex;"><span>  aepk = DERIVE_PUBLIC(aesk)
</span></span><span style="display:flex;"><span>  // Bobs X25519 statische Schlüssel
</span></span><span style="display:flex;"><span>  // bsk = Bob privater statischer Schlüssel
</span></span><span style="display:flex;"><span>  bsk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // bpk = Bob öffentlicher statischer Schlüssel
</span></span><span style="display:flex;"><span>  // bpk ist entweder Teil von RouterIdentity oder in RouterInfo veröffentlicht (TBD)
</span></span><span style="display:flex;"><span>  bpk = DERIVE_PUBLIC(bsk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // (DH()
</span></span><span style="display:flex;"><span>  //[chainKey, k] = MixKey(sharedSecret)
</span></span><span style="display:flex;"><span>  // chainKey from ???
</span></span><span style="display:flex;"><span>  sharedSecret = DH(aesk, bpk) = DH(bsk, aepk)
</span></span><span style="display:flex;"><span>  keydata = HKDF(chainKey, sharedSecret, &#34;ECIES-DSM-Reply1&#34;, 32)
</span></span><span style="display:flex;"><span>  chainKey = keydata[0:31]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  1) rootKey = chainKey from Payload Section
</span></span><span style="display:flex;"><span>  2) k from the New Session KDF or split()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // KDF_RK(rk, dh_out)
</span></span><span style="display:flex;"><span>  keydata = HKDF(rootKey, k, &#34;KDFDHRatchetStep&#34;, 64)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Output 1: unused
</span></span><span style="display:flex;"><span>  unused = keydata[0:31]
</span></span><span style="display:flex;"><span>  // Output 2: Der Ketten-Schlüssel zur Initialisierung des neuen
</span></span><span style="display:flex;"><span>  // Sitzungstag- und symmetrischen Schlüssel-Ratchetes
</span></span><span style="display:flex;"><span>  // für Alice zu Bob Übertragungen
</span></span><span style="display:flex;"><span>  ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Sitzungstag- und symmetrische Schlüssel-Ratchet Schlüssel
</span></span><span style="display:flex;"><span>  keydata = HKDF(ck, ZEROLEN, &#34;TagAndKeyGenKeys&#34;, 64)
</span></span><span style="display:flex;"><span>  sessTag_ck = keydata[0:31]
</span></span><span style="display:flex;"><span>  symmKey_ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tag :: 8 Byte Tag wie generiert von RATCHET_TAG() in [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: 32 Byte Schlüssel wie generiert von RATCHET_KEY() in [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: Der Index des Tags. Typischerweise 0.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: Der 8 Byte Tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Klartextdaten, das DSM oder DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="antwortformat">Antwortformat</h3>
<p>Dies ist die vorhandene Sitzungsnachricht,
gleich wie in <a href="../../../de/docs/specs/ecies/">ECIES</a>
, unten zur Referenz kopiert.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |       Session Tag                     |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +            Payload Section            +
</span></span><span style="display:flex;"><span>  |       ChaCha20 encrypted data         |
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |  Poly1305 Message Authentication Code |
</span></span><span style="display:flex;"><span>  +              (MAC)                    +
</span></span><span style="display:flex;"><span>  |             16 bytes                  |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Session Tag :: 8 bytes, cleartext
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Payload Section encrypted data :: remaining data minus 16 bytes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  MAC :: Poly1305 message authentication code, 16 bytes
</span></span></code></pre></div><h2 id="begründung">Begründung</h2>
<p>Die Antwortverschlüsselungsparameter in der Abfrage, die erstmals in 0.9.7 eingeführt wurden,
sind etwas von einer Schichtverletzung. Es wird auf diese Weise gemacht, aus Effizienzgründen.
Aber auch weil die Abfrage anonym ist.</p>
<p>Wir könnten das Abfrageformat generisch gestalten, wie mit einem Verschlüsselungstyp-Feld,
aber das wäre wahrscheinlich mehr Aufwand als es wert ist.</p>
<p>Der obige Vorschlag ist der einfachste und minimiert die Änderungen am Abfrageformat.</p>
<h2 id="anmerkungen">Anmerkungen</h2>
<p>Datenbankabfragen und Speichern zu ElG-Routern müssen wie gewohnt ElGamal/AESSessionTag-verschlüsselt sein.</p>
<h2 id="probleme">Probleme</h2>
<p>Weitere Analysen zur Sicherheit der beiden ECIES-Antwortoptionen sind erforderlich.</p>
<h2 id="migration">Migration</h2>
<p>Keine Kompatibilitätsprobleme mit älteren Versionen. Router, die eine router.version von 0.9.46 oder höher
in ihrem RouterInfo angeben, müssen diese Funktion unterstützen.
Router dürfen keine DatabaseLookup mit den neuen Flags an Router mit einer Version von weniger als 0.9.46 senden.
Wenn eine Datenbank-Abfragenachricht mit Bit 4 gesetzt und Bit 1 nicht gesetzt irrtümlich an
einen Router ohne Unterstützung gesendet wird, wird dieser wahrscheinlich den bereitgestellten Schlüssel und Tag ignorieren und
die Antwort unverschlüsselt senden.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../de/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/154-ecies-lookups.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Bleiben Sie über I2P-Neuigkeiten informiert:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Geben Sie Ihre E-Mail ein" required>
                            <button type="submit">Abonnieren</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Schnellzugriff</h3>
                <ul>
                    <li><a href="../../../de/financial-support/">Spenden</a></li>
                    <li><a href="../../../de/docs/overview/intro/">I2P Einführung</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Gemeinschaft</h3>
                <ul>
                    <li><a href="../../../de/get-involved/">Mitmachen</a></li>
                    <li><a href="../../../de/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Offizielle Foren</a></li>
                    <li><a href="../../../de/contact/">Kontakt</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ressourcen</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metriken</a></li>
                    <li><a href="../../../de/papers/">Forschung</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Das Invisible Internet Project. Lizenziert unter Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../de/privacy/">Datenschutz</a>
                <a href="../../../de/terms/">Bedingungen</a>
                <a href="../../../de/about/media/">Presse</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Schließen">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Community-Umfrage</h2>
            <p class="modal-subtitle">Wir würden uns freuen, von Ihnen zu hören</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Ihre Stimme hilft dabei, die Zukunft von I2P zu gestalten.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
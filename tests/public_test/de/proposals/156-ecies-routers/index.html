<!DOCTYPE html>
<html lang="de" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ECIES-Router | I2P - Das unsichtbare Internet-Projekt</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="ECIES-Router | I2P - Das unsichtbare Internet-Projekt">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/de/proposals/156-ecies-routers/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta-Seite jetzt live E-Mail-Probleme an stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Banner schließen" title="Banner schließen">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../de/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../de/about/" class="">Über</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/about/">Übersicht</a></li>
                            <li><a href="../../../de/papers/">Forschungspapiere</a></li>
                            <li><a href="../../../de/about/media/">Presse</a></li>
                            <li><a href="../../../de/contact/">Kontakt</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../de/docs/" class="">Dokumente</a></li>
                    <li><a href="../../../de/downloads/" class="">Downloads</a></li>
                    <li><a href="../../../de/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../de/get-involved/" class="">Mitmachen</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/get-involved/">Übersicht</a></li>
                            <li><a href="../../../de/feedback/">Funktionsvorschläge</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">de</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/156-ecies-routers/"
                                class="lang-option">Englisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/156-ecies-routers/"
                                class="lang-option">Spanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/156-ecies-routers/"
                                class="lang-option">Koreanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/156-ecies-routers/"
                                class="lang-option">Chinesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/156-ecies-routers/"
                                class="lang-option">Russisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/156-ecies-routers/"
                                class="lang-option">Tschechisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/156-ecies-routers/"
                                class="lang-option active">Deutsch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/156-ecies-routers/"
                                class="lang-option">Französisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/156-ecies-routers/"
                                class="lang-option">Türkisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/156-ecies-routers/"
                                class="lang-option">Vietnamesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/156-ecies-routers/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/156-ecies-routers/"
                                class="lang-option">Arabisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/156-ecies-routers/"
                                class="lang-option">Portugiesisch</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../de/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../de/downloads/" class="btn btn-primary">I2P Herunterladen</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../de/">Home</a>
            <span class="separator">/</span>
            <a href="../../../de/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">ECIES-Router</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Diese Übersetzung wurde mittels maschinellem Lernen erstellt und ist möglicherweise nicht 100% korrekt.</span>
    
    
    <a href="../../../en/proposals/156-ecies-routers/" class="disclaimer-link">Englische Version anzeigen</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">ECIES-Router</h1>
                <div class="proposal-number">Proposal </div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-geschlossen">
                    Geschlossen
                </div>

                
                <div class="proposal-info-grid">
                    

                    

                    

                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#hinweis">Hinweis</a></li>
    <li><a href="#übersicht">Übersicht</a>
      <ul>
        <li><a href="#zusammenfassung">Zusammenfassung</a></li>
        <li><a href="#ziele">Ziele</a></li>
        <li><a href="#nicht-ziele">Nicht-Ziele</a></li>
      </ul>
    </li>
    <li><a href="#design">Design</a>
      <ul>
        <li><a href="#schlüsselposition-und-kryptotyp">Schlüsselposition und Kryptotyp</a></li>
        <li><a href="#tunnelaufbau-nachricht">Tunnelaufbau-Nachricht</a></li>
        <li><a href="#end-to-end-verschlüsselung">End-to-End-Verschlüsselung</a></li>
      </ul>
    </li>
    <li><a href="#spezifikation">Spezifikation</a>
      <ul>
        <li><a href="#anfragenverschlüsselung">Anfragenverschlüsselung</a></li>
        <li><a href="#antwortverschlüsselung">Antwortverschlüsselung</a></li>
      </ul>
    </li>
    <li><a href="#rechtfertigung">Rechtfertigung</a></li>
    <li><a href="#implementierungsnotizen">Implementierungsnotizen</a></li>
    <li><a href="#probleme">Probleme</a></li>
    <li><a href="#migration">Migration</a>
      <ul>
        <li><a href="#grundlagen-point-to-point">Grundlagen Point-to-Point</a></li>
        <li><a href="#netdb-kompatibilität">NetDB-Kompatibilität</a></li>
        <li><a href="#tunnelaufbau">Tunnelaufbau</a></li>
        <li><a href="#ratchet-nachrichten-an-ecies-floodfills">Ratchet-Nachrichten an ECIES-Floodfills</a></li>
        <li><a href="#umstellung-und-neue-installationen">Umstellung und Neue Installationen</a></li>
        <li><a href="#neue-tunnelaufbau-nachricht-phase-2">Neue Tunnelaufbau-Nachricht (Phase 2)</a></li>
        <li><a href="#umstellung-abgeschlossen">Umstellung abgeschlossen</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="hinweis">Hinweis</h2>
<p>Netzwerkbereitstellung und -test in Arbeit.
Änderungen vorbehalten.
Status:</p>
<ul>
<li>ECIES-Router implementiert ab 0.9.48, siehe <a href="../../../de/docs/specs/common-structures/">Common</a>
.</li>
<li>Tunnelaufbau implementiert ab 0.9.48, siehe <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
.</li>
<li>Verschlüsselte Nachrichten an ECIES-Router implementiert ab 0.9.49, siehe <a href="../../../de/docs/specs/ecies/">ECIES-ROUTERS</a>
.</li>
<li>Neue Tunnel-Build-Nachrichten implementiert ab 0.9.51.</li>
</ul>
<h2 id="übersicht">Übersicht</h2>
<h3 id="zusammenfassung">Zusammenfassung</h3>
<p>Router-Identitäten enthalten derzeit einen ElGamal-Verschlüsselungsschlüssel.
Dies war seit den Anfängen von I2P der Standard.
ElGamal ist langsam und muss an allen Stellen, an denen es verwendet wird, ersetzt werden.</p>
<p>Die Vorschläge für LS2 <a href="../../../de/proposals/123-new-netdb-entries/">Prop123</a>
 und ECIES-X25519-AEAD-Ratchet <a href="../../../de/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>

(jetzt spezifiziert in <a href="../../../de/docs/specs/ecies/">ECIES</a>
) definierten den Ersatz von ElGamal durch ECIES
für Destinationen.</p>
<p>Dieser Vorschlag definiert den Ersatz von ElGamal durch ECIES-X25519 für Router.
Dieser Vorschlag bietet einen Überblick über die notwendigen Änderungen.
Die meisten Details finden sich in anderen Vorschlägen und Spezifikationen.
Siehe den Referenzabschnitt für Links.</p>
<h3 id="ziele">Ziele</h3>
<p>Siehe <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 für zusätzliche Ziele.</p>
<ul>
<li>Ersetze ElGamal durch ECIES-X25519 in Router-Identitäten</li>
<li>Wiederverwendung vorhandener kryptografischer Primitive</li>
<li>Verbesserung der Sicherheit von Tunnelaufbau-Nachrichten, wo möglich, bei gleichzeitiger Wahrung der Kompatibilität</li>
<li>Unterstützung von Tunneln mit gemischten ElGamal/ECIES-Peers</li>
<li>Maximierung der Kompatibilität mit dem aktuellen Netzwerk</li>
<li>Kein Upgrade des gesamten Netzwerks am &ldquo;Flag Day&rdquo; erforderlich</li>
<li>Schrittweise Einführung zur Risikominimierung</li>
<li>Neue, kleinere Tunnelaufbau-Nachricht</li>
</ul>
<h3 id="nicht-ziele">Nicht-Ziele</h3>
<p>Siehe <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 für zusätzliche Nicht-Ziele.</p>
<ul>
<li>Keine Anforderungen für Dual-Key-Router</li>
<li>Schichtverschlüsselungsänderungen, hierzu siehe <a href="../../../de/proposals/153-chacha20-layer-encryption/">Prop153</a>
</li>
</ul>
<h2 id="design">Design</h2>
<h3 id="schlüsselposition-und-kryptotyp">Schlüsselposition und Kryptotyp</h3>
<p>Für Destinationen befindet sich der Schlüssel im Leaseset, nicht in der Destination, und
wir unterstützen mehrere Verschlüsselungstypen im selben Leaseset.</p>
<p>All das ist für Router nicht erforderlich. Der Verschlüsselungsschlüssel des Routers
befindet sich in seiner Router-Identität. Siehe die Spezifikation der allgemeinen Strukturen <a href="../../../de/docs/specs/common-structures/">Common</a>
.</p>
<p>Für Router ersetzen wir den 256 Byte ElGamal-Schlüssel in der Router-Identität
durch einen 32 Byte X25519-Schlüssel und 224 Byte Padding.
Dies wird durch den Kryptotyp im Schlüsselzertifikat angezeigt.
Der Kryptotyp (wie im LS2 verwendet) ist 4.
Dies zeigt einen Little-Endian-32-Byte-X25519-Public-Key an.
Dies ist die Standardkonstruktion, wie sie in der Spezifikation der allgemeinen Strukturen definiert ist <a href="../../../de/docs/specs/common-structures/">Common</a>
.</p>
<p>Dies ist identisch mit der Methode, die für ECIES-P256
für Kryptotypen 1-3 im Vorschlag 145 <a href="../../../de/proposals/145-ecies/">Prop145</a>
 vorgeschlagen wurde.
Obwohl dieser Vorschlag nie angenommen wurde, bereiteten sich die Entwickler der Java-Implementierung vor,
indem sie an mehreren Stellen in der Codebasis Prüfungen hinzufügten. Die meisten dieser Arbeiten wurden Mitte 2019 abgeschlossen.</p>
<h3 id="tunnelaufbau-nachricht">Tunnelaufbau-Nachricht</h3>
<p>Um ECIES anstelle von ElGamal zu verwenden, sind mehrere Änderungen an der Tunnel-Erstellungsspezifikation <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>

erforderlich. Darüber hinaus werden wir Verbesserungen an den Tunnelaufbau-Nachrichten vornehmen,
um die Sicherheit zu erhöhen.</p>
<p>In Phase 1 werden wir das Format und die Verschlüsselung der
Build-Request-Record und Build-Response-Record für ECIES-Schritte ändern.
Diese Änderungen sind mit vorhandenen ElGamal-Routern kompatibel.
Diese Änderungen sind in Vorschlag 152 <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 definiert.</p>
<p>In Phase 2 fügen wir eine neue Version der
Build-Request-Message, Build-Reply-Message,
Build-Request-Record und Build-Response-Record hinzu.
Die Größe wird zur Effizienzreduzierung verkleinert.
Diese Änderungen müssen von allen Schritten in einem Tunnel unterstützt werden, und alle Schritte müssen ECIES sein.
Diese Änderungen sind in Vorschlag 157 <a href="../../../de/proposals/157-new-tbm/">Prop157</a>
 definiert.</p>
<h3 id="end-to-end-verschlüsselung">End-to-End-Verschlüsselung</h3>
<h4 id="geschichte">Geschichte</h4>
<p>Im ursprünglichen Design von Java I2P gab es einen einzigen ElGamal-Session-Key-Manager (SKM),
der vom Router und all seinen lokalen Destinationen gemeinsam genutzt wurde.
Da ein gemeinsamer SKM Informationen durchsickern konnte und Korrelationen durch Angreifer ermöglichte,
wurde das Design geändert, um separate ElGamal-SKM für den Router und jede Destination zu unterstützen.
Das ElGamal-Design unterstützte nur anonyme Absender;
der Absender sendete nur einmalige Schlüssel, keinen statischen Schlüssel.
Die Nachricht war nicht an die Identität des Absenders gebunden.</p>
<p>Dann entwarfen wir den ECIES-Ratchet-SKM in
ECIES-X25519-AEAD-Ratchet <a href="../../../de/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
, jetzt spezifiziert in <a href="../../../de/docs/specs/ecies/">ECIES</a>
.
Dieses Design wurde unter Verwendung des Noise &ldquo;IK&rdquo;-Musters spezifiziert, das den statischen Schlüssel des Absenders in der ersten Nachricht einschloss. Dieses Protokoll wird für ECIES (Typ 4) Destinationen verwendet.
Das IK-Muster erlaubt keine anonymen Absender.</p>
<p>Daher nahmen wir in den Vorschlag eine Möglichkeit auf, auch anonyme Nachrichten
an einen Ratchet-SKM zu senden, indem ein nullgefüllter statischer Schlüssel verwendet wird. Dies simulierte ein Noise &ldquo;N&rdquo;-Muster,
jedoch auf eine kompatible Weise, sodass ein ECIES-SKM sowohl anonyme als auch nicht-anonyme Nachrichten empfangen konnte.
Die Absicht war es, den Nullschlüssel für ECIES-Router zu verwenden.</p>
<h4 id="anwendungsfälle-und-bedrohungsmodelle">Anwendungsfälle und Bedrohungsmodelle</h4>
<p>Der Anwendungsfall und das Bedrohungsmodell für Nachrichten, die an Router gesendet werden, unterscheiden sich wesentlich von
denen für End-to-End-Nachrichten zwischen Destinationen.</p>
<p>Anwendungsfall und Bedrohungsmodell der Destination:</p>
<ul>
<li>Nicht-anonym von/zu Destinationen (Absender schließt statischen Schlüssel ein)</li>
<li>Effiziente Unterstützung von anhaltendem Datenverkehr zwischen Destinationen (voller Handshake, Streaming und Tags)</li>
<li>Immer durch ausgehende und eingehende Tunnel gesendet</li>
<li>Verbergen alle identifizierenden Merkmale vor OBEP und IBGW, was Elligator2-Codierung von Ephermeralschlüsseln erfordert.</li>
<li>Beide Teilnehmer müssen denselben Verschlüsselungstyp verwenden</li>
</ul>
<p>Anwendungsfall und Bedrohungsmodell des Routers:</p>
<ul>
<li>Anonyme Nachrichten von Routern oder Destinationen (Absender schließt keinen statischen Schlüssel ein)</li>
<li>Nur für verschlüsselte Datenbankabfragen und -speicherungen, in der Regel für Floodfills</li>
<li>Gelegentliche Nachrichten</li>
<li>Mehrere Nachrichten sollten nicht korreliert werden</li>
<li>Immer durch ausgehenden Tunnel direkt zu einem Router gesendet. Keine eingehenden Tunnel verwendet</li>
<li>OBEP weiß, dass es die Nachricht an einen Router weiterleitet und kennt dessen Verschlüsselungstyp</li>
<li>Die beiden Teilnehmer können unterschiedliche Verschlüsselungstypen haben</li>
<li>Antworten auf Datenbankabfragen sind einmalige Nachrichten, die den Antwortschlüssel und das Tag in der Datenbankabfrage-Nachricht verwenden</li>
<li>Bestätigungen von Datenbankspeicherungen sind einmalige Nachrichten, die eine gebündelte Lieferstatusnachricht verwenden</li>
</ul>
<p>Nicht-Ziele des Router-Anwendungsfalls:</p>
<ul>
<li>Keine Notwendigkeit für nicht-anonyme Nachrichten</li>
<li>Keine Notwendigkeit, Nachrichten durch eingehende Erkundungstunnel zu senden (ein Router veröffentlicht keine Erkundungsleasese)</li>
<li>Keine Notwendigkeit für anhaltenden Nachrichtenverkehr unter Verwendung von Tags</li>
<li>Keine Notwendigkeit, &ldquo;dual key&rdquo; Session Key Manager laufen zu lassen, wie in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 für Destinationen beschrieben. Router haben nur einen öffentlichen Schlüssel.</li>
</ul>
<h4 id="design-schlussfolgerungen">Design-Schlussfolgerungen</h4>
<p>Der ECIES-Router-SKM benötigt nicht einen vollständigen Ratchet-SKM, wie für Destinationen in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 spezifiziert.
Es gibt keine Anforderungen für nicht-anonyme Nachrichten im IK-Muster.
Das Bedrohungsmodell erfordert keine Elligator2-codierten Ephermeralschlüssel.</p>
<p>Daher wird der Router-SKM das Noise-&ldquo;N&rdquo;-Muster verwenden, das gleiche, das in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 für den Tunnelaufbau spezifiziert ist.
Er wird dasselbe Nutzlastformat verwenden, wie in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 für Destinationen spezifiziert.
Der Nullstatikschlüssel (kein Binding oder Sitzung) Modus von IK, wie in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 spezifiziert, wird nicht verwendet.</p>
<p>Antworten auf Abfragen werden mit einem Ratchet-Tag verschlüsselt, falls in der Abfrage angefordert.
Dies ist dokumentiert in <a href="../../../de/proposals/154-ecies-lookups/">Prop154</a>
, jetzt spezifiziert in <a href="../../../de/docs/specs/i2np/">I2NP</a>
.</p>
<p>Das Design ermöglicht es dem Router, einen einzigen ECIES-Session-Key-Manager zu haben.
Es besteht keine Notwendigkeit, &ldquo;dual key&rdquo; Session Key Manager laufen zu lassen, wie
in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 für Destinationen beschrieben.
Router haben nur einen öffentlichen Schlüssel.</p>
<p>Ein ECIES-Router hat keinen ElGamal-Statischen-Schlüssel.
Der Router benötigt trotzdem eine Implementierung von ElGamal, um Tunnel
durch ElGamal-Router zu bauen und verschlüsselte Nachrichten an ElGamal-Router zu senden.</p>
<p>Ein ECIES-Router KANN einen Teil-ElGamal-Session-Key-Manager benötigen, um
ElGamal-getaggte Nachrichten, die als Antworten auf NetDB-Suchen
von pre-0.9.46-Floodfill-Routern gesendet wurden, zu empfangen, da diese Router
keine Implementierung von ECIES-getaggten Antworten, wie in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 spezifiziert, haben.
Andernfalls darf ein ECIES-Router keine verschlüsselte Antwort von einem
pre-0.9.46-Floodfill-Router anfordern.</p>
<p>Dies ist optional. Entscheidungen können bei verschiedenen I2P-Implementierungen
unterschiedlich ausfallen und können von der Menge des Netzwerks abhängen, die auf
0.9.46 oder höher aktualisiert wurde.
Zum aktuellen Zeitpunkt sind etwa 85% des Netzwerks auf 0.9.46 oder höher.</p>
<h2 id="spezifikation">Spezifikation</h2>
<p>X25519: Siehe <a href="../../../de/docs/specs/ecies/">ECIES</a>
.</p>
<p>Router-Identität und Schlüsselzertifikat: Siehe <a href="../../../de/docs/specs/common-structures/">Common</a>
.</p>
<p>Tunnelaufbau: Siehe <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<p>Neue Tunnelaufbau-Nachrichten: Siehe <a href="../../../de/proposals/157-new-tbm/">Prop157</a>
.</p>
<h3 id="anfragenverschlüsselung">Anfragenverschlüsselung</h3>
<p>Die Anfragenverschlüsselung ist die gleiche wie die, die in <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 und <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 spezifiziert ist,
unter Verwendung des Noise-&ldquo;N&rdquo;-Musters.</p>
<p>Antworten auf Abfragen werden mit einem Ratchet-Tag verschlüsselt, falls in der Abfrage angefordert.
Datenbankabfrage-Anforderungsnachrichten enthalten den 32-Byte-Antwortschlüssel und das 8-Byte-Antwort-Tag
wie in <a href="../../../de/docs/specs/i2np/">I2NP</a>
 und <a href="../../../de/proposals/154-ecies-lookups/">Prop154</a>
 spezifiziert. Der Schlüssel und das Tag werden verwendet, um die Antwort zu verschlüsseln.</p>
<p>Tag-Sets werden nicht erstellt.
Das Zero Static Key Schema, das in
ECIES-X25519-AEAD-Ratchet <a href="../../../de/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
 und <a href="../../../de/docs/specs/ecies/">ECIES</a>
 spezifiziert ist, wird nicht verwendet.
Ephemerschlüssel werden nicht Elligator2-codiert.</p>
<p>Im Allgemeinen werden dies Neue Sitzungsnachrichten sein und mit einem Nullstatikschlüssel
(kein Binding oder Sitzung) gesendet, da der Absender der Nachricht anonym ist.</p>
<h4 id="kdf-für-initiale-ck-und-h">KDF für Initiale ck und h</h4>
<p>Dies ist Standard <a href="https://noiseprotocol.org/noise.html">NOISE</a>
 für Muster &ldquo;N&rdquo; mit einem Standardprotokollnamen.
Dies ist dasselbe wie in <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 und <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 für Tunnelaufbau-Nachrichten spezifiziert.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Dies ist das &#34;e&#34;-Nachrichtenmuster:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Protokollname definieren.
</span></span><span style="display:flex;"><span>Setze protocol_name = &#34;Noise_N_25519_ChaChaPoly_SHA256&#34;
</span></span><span style="display:flex;"><span>(31 Bytes, US-ASCII kodiert, keine NULL-Beendigung).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Hash h = 32 Bytes definieren
</span></span><span style="display:flex;"><span>// Auf 32 Bytes auffüllen. NICHT hashieren, da es nicht mehr als 32 Bytes sind.
</span></span><span style="display:flex;"><span>h = protocol_name || 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Chaining-Key ck = 32 Byte definieren. Kopiere die h-Daten nach ck.
</span></span><span style="display:flex;"><span>Setze chainKey = h
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// MixHash(null-Prequel)
</span></span><span style="display:flex;"><span>h = SHA256(h);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// bis hierhin können alle Router vorkalkulieren.
</span></span></code></pre></div><h4 id="kdf-für-nachricht">KDF für Nachricht</h4>
<p>Nachrichtenersteller generieren für jede Nachricht ein ephemeres X25519-Schlüsselpaar.
Ephemerschlüssel müssen pro Nachricht einzigartig sein.
Dies ist dasselbe wie in <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 und <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 für Tunnelaufbau-Nachrichten spezifiziert.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">

// Statisches Schlüsselpaar (hesk, hepk) des Zielrouters von der Router-Identität
hesk = GENERATE_PRIVATE()
hepk = DERIVE_PUBLIC(hesk)

// MixHash(hepk)
// || unten bedeutet anfügen
h = SHA256(h || hepk);

// bis hierhin können alle Router für alle eingehenden Nachrichten vorkalkulieren

// Absender generiert ein ephemeres X25519-Schlüsselpaar
sesk = GENERATE_PRIVATE()
sepk = DERIVE_PUBLIC(sesk)

// MixHash(sepk)
h = SHA256(h || sepk);

Ende vom &#34;e&#34;-Nachrichtenmuster.

Dies ist das &#34;es&#34;-Nachrichtenmuster:

// Noise es
// Absender führt ein X25519-DH mit dem statischen öffentlichen Schlüssel des Empfängers durch.
// Der Zielrouter extrahiert den einmaligen Schlüssel des Absenders vor dem verschlüsselten Datensatz.
sharedSecret = DH(sesk, hepk) = DH(hesk, sepk)

// MixKey(DH())
//[chainKey, k] = MixKey(sharedSecret)
// ChaChaPoly-Parameter zur Ver-/Entschlüsselung
keydata = HKDF(chainKey, sharedSecret, &#34;&#34;, 64)
// Chain-Key wird nicht verwendet
//chainKey = keydata[0:31]

// AEAD-Parameter
k = keydata[32:63]
n = 0
Klartext = 464-Byte-Build-Anforderungsdatensatz
ad = h
ciphertext = ENCRYPT(k, n, plaintext, ad)

Ende vom &#34;es&#34;-Nachrichtenmuster.

// MixHash(ciphertext) ist nicht erforderlich
//h = SHA256(h || ciphertext)
</code></pre><h4 id="nutzlast">Nutzlast</h4>
<p>Die Nutzlast ist dasselbe Blockformat, wie in <a href="../../../de/docs/specs/ecies/">ECIES</a>
 und <a href="../../../de/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
 definiert.
Alle Nachrichten müssen einen DateTime-Block zur Wiederholungsprävention enthalten.</p>
<h3 id="antwortverschlüsselung">Antwortverschlüsselung</h3>
<p>Antworten auf Datenbankabfrage-Nachrichten sind Datenbankspeicher- oder Datenbanksuchantwort-Nachrichten.
Sie sind als Bestehende-Sitzungs-Nachrichten verschlüsselt mit
dem 32-Byte-Antwortschlüssel und 8-Byte-Antwort-Tag,
wie in <a href="../../../de/docs/specs/i2np/">I2NP</a>
 und <a href="../../../de/proposals/154-ecies-lookups/">Prop154</a>
 spezifiziert.</p>
<p>Es gibt keine expliziten Antworten auf Datenbankspeicher-Nachrichten. Der Absender kann seine
eigene Antwort als Knoblauch-Nachricht an sich selbst bündeln, die eine Lieferstatusnachricht enthält.</p>
<h2 id="rechtfertigung">Rechtfertigung</h2>
<p>Dieses Design maximiert die Wiederverwendung bestehender kryptografischer Primitive, Protokolle und Codes.</p>
<p>Dieses Design minimiert das Risiko.</p>
<h2 id="implementierungsnotizen">Implementierungsnotizen</h2>
<p>Ältere Router überprüfen den Verschlüsselungstyp des Routers nicht und senden ElGamal-verschlüsselte
Aufbaudatensätze oder Netznachrichten.
Einige neuere Router sind fehlerhaft und senden verschiedene Typen fehlerhafter Aufbaudatensätze.
Einige neuere Router können nicht-anonyme (volle Ratchet) Netzdb-Nachrichten senden.
Implementierer sollten diese Datensätze und Nachrichten
so früh wie möglich erkennen und zurückweisen, um die CPU-Auslastung zu reduzieren.</p>
<h2 id="probleme">Probleme</h2>
<p>Vorschlag 145 <a href="../../../de/proposals/145-ecies/">Prop145</a>
 könnte eventuell umgeschrieben werden, um größtenteils
kompatibel mit Vorschlag 152 <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 zu sein.</p>
<h2 id="migration">Migration</h2>
<p>Die Implementierung, das Testen und die Einführung werden mehrere Veröffentlichungen und
etwa ein Jahr in Anspruch nehmen. Die Phasen sind wie folgt. Die Zuordnung
jeder Phase zu einer bestimmten Veröffentlichung ist TBD und hängt vom
Entwicklungstempo ab.</p>
<p>Details der Implementierung und Migration können für
jede I2P-Implementierung variieren.</p>
<h3 id="grundlagen-point-to-point">Grundlagen Point-to-Point</h3>
<p>ECIES-Router können Verbindungen zu und Verbindungen von ElGamal-Routern empfangen.
Dies sollte jetzt möglich sein, da mehrere Prüfungen Mitte 2019 zum Abschluss des Vorschlags 145 <a href="../../../de/proposals/145-ecies/">Prop145</a>

in die Java-Codebasis integriert wurden.
Sicherstellen, dass in den Codebasen nichts vorhanden ist,
was Punkt-zu-Punkt-Verbindungen zu Nicht-ElGamal-Routern verhindert.</p>
<p>Korrektheitsprüfungen des Codes:</p>
<ul>
<li>Sicherstellen, dass ElGamal-Router keine AEAD-verschlüsselten Antworten auf Datenbankabfrage-Nachrichten anfordern
(wenn die Antwort zurück durch einen Erkundungstunnel zum Router kommt)</li>
<li>Sicherstellen, dass ECIES-Router keine AES-verschlüsselten Antworten auf Datenbankabfragen anfordern
(wenn die Antwort zurück durch einen Erkundungstunnel zum Router kommt)</li>
</ul>
<p>Bis zu späteren Phasen, wenn Spezifikationen und Implementierungen vollständig sind:</p>
<ul>
<li>Sicherstellen, dass Tunnelaufbauten nicht von ElGamal-Routern durch ECIES-Router versucht werden.</li>
<li>Sicherstellen, dass ElGamal-verschlüsselte Nachrichten nicht von ElGamal-Routern an ECIES-Floodfill-Router gesendet werden.
(Datenbankabfragen und -speicher)</li>
<li>Sicherstellen, dass ECIES-verschlüsselte Nachrichten nicht von ECIES-Routern an ElGamal-Floodfill-Router gesendet werden.
(Datenbankabfragen und -speicher)</li>
<li>Sicherstellen, dass ECIES-Router nicht automatisch Floodfill werden.</li>
</ul>
<p>Es sollten keine Änderungen erforderlich sein.
Zielveröffentlichung, falls Änderungen erforderlich: 0.9.48</p>
<h3 id="netdb-kompatibilität">NetDB-Kompatibilität</h3>
<p>Sicherstellen, dass ECIES-Routerinfos bei ElGamal-Floodfills gespeichert und von ihnen abgerufen werden können.
Dies sollte jetzt möglich sein, da Mitte 2019 mehrere Prüfungen in die Java-Codebasis integriert wurden
zum Abschluss von Vorschlag 145 <a href="../../../de/proposals/145-ecies/">Prop145</a>
.
Sicherstellen, dass in den Codebasen nichts vorhanden ist,
was die Speicherung von Nicht-ElGamal-RouterInfos in der Netzwerkdatenbank verhindert.</p>
<p>Es sollten keine Änderungen erforderlich sein.
Zielveröffentlichung, falls Änderungen erforderlich: 0.9.48</p>
<h3 id="tunnelaufbau">Tunnelaufbau</h3>
<p>Implementieren des Tunnelaufbaus, wie im Vorschlag 152 <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 definiert.
Beginnen Sie damit, dass ein ECIES-Router Tunnel mit allen ElGamal-Schritten baut;
verwendet seinen eigenen Aufbauanfrage-Datensatz für einen eingehenden Tunnel zum Testen und Debuggen.</p>
<p>Dann Test und Unterstützung von ECIES-Routern, die Tunnel mit einer Mischung aus
ElGamal- und ECIES-Schritten bauen.</p>
<p>Dann den Tunnelaufbau durch ECIES-Router ermöglichen.
Es sollte keine minimale Versionsprüfung notwendig sein, es sei denn, es wurden nach einer Veröffentlichung inkompatible Änderungen
am Vorschlag 152 vorgenommen.</p>
<p>Zielveröffentlichung: 0.9.48, Ende 2020</p>
<h3 id="ratchet-nachrichten-an-ecies-floodfills">Ratchet-Nachrichten an ECIES-Floodfills</h3>
<p>Implementieren und Testen des Empfangs von ECIES-Nachrichten (mit nullstatischem Schlüssel) durch ECIES-Floodfills,
wie im Vorschlag 144 <a href="../../../de/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
 definiert.
Implementieren und Testen des Empfangs von AEAD-Antworten auf Datenbankabfragen durch ECIES-Router.</p>
<p>Aktivieren Sie automatisch Floodfill durch ECIES-Router.
Dann ermöglichen Sie das Senden von ECIES-Nachrichten an ECIES-Router.
Es sollte keine minimale Versionsprüfung notwendig sein, es sei denn, es wurden nach einer Veröffentlichung inkompatible Änderungen
an Vorschlag 152 vorgenommen.</p>
<p>Zielveröffentlichung: 0.9.49, Anfang 2021.
ECIES-Router können automatisch Floodfill werden.</p>
<h3 id="umstellung-und-neue-installationen">Umstellung und Neue Installationen</h3>
<p>Neue Installationen werden als Standard ab der Veröffentlichung 0.9.49 auf ECIES eingestellt.</p>
<p>Allmähliches Umstellen aller Router, um das Risiko und die Störung des Netzwerks zu minimieren.
Verwenden Sie vorhandene Codes, die für die Sig-Type-Migration vor einigen Jahren erstellt wurden.
Dieser Code gibt jedem Router eine kleine zufällige Wahrscheinlichkeit, sich bei jedem Neustart umzustellen.
Nach mehreren Neustarts wird ein Router wahrscheinlich auf ECIES umgestellt haben.</p>
<p>Das Kriterium für den Beginn der Umstellung ist, dass ein ausreichender Teil des Netzwerks,
vielleicht 50%, Tunnel durch ECIES-Router bauen kann (0.9.48 oder höher).</p>
<p>Bevor aggressiv das gesamte Netzwerk umgestellt wird, muss die überwiegende Mehrheit
(vielleicht 90% oder mehr) in der Lage sein, Tunnel durch ECIES-Router zu bauen (0.9.48 oder höher)
UND Nachrichten an ECIES-Floodfills zu senden (0.9.49 oder höher).
Dieses Ziel wird wahrscheinlich für die Veröffentlichung der Version 0.9.52 erreicht.</p>
<p>Die Umstellung wird mehrere Veröffentlichungen dauern.</p>
<p>Zielveröffentlichung:
0.9.49 für neue Router, die standardmäßig auf ECIES eingestellt sind;
0.9.49, um langsam mit der Umstellung zu beginnen;
0.9.50 - 0.9.52, um die Umstellungsrate wiederholt zu erhöhen;
Ende 2021, damit der Großteil des Netzwerks umgestellt ist.</p>
<h3 id="neue-tunnelaufbau-nachricht-phase-2">Neue Tunnelaufbau-Nachricht (Phase 2)</h3>
<p>Implementieren und Testen der neuen Tunnelaufbau-Nachricht, wie im Vorschlag 157 <a href="../../../de/proposals/157-new-tbm/">Prop157</a>
 definiert.
Rollen Sie die Unterstützung in der Veröffentlichung 0.9.51 aus.
Führen Sie zusätzliche Tests durch, und aktivieren Sie die Funktion anschließend in der Veröffentlichung 0.9.52.</p>
<p>Das Testen wird schwierig sein.
Bevor dies weitgehend getestet werden kann, muss ein guter Teil des Netzwerks es unterstützen.
Bevor es breit nützlich ist, muss die Mehrheit des Netzwerks es unterstützen.
Falls nach dem Testen Änderungen an Spezifikationen oder Implementierungen erforderlich sind,
könnte dies die Einführung um eine zusätzliche Veröffentlichung verzögern.</p>
<p>Zielveröffentlichung: 0.9.52, Ende 2021.</p>
<h3 id="umstellung-abgeschlossen">Umstellung abgeschlossen</h3>
<p>Zu diesem Zeitpunkt werden Router, die älter als eine bestimmte Version TBD sind,
nicht in der Lage sein, Tunnel durch die meisten Peers zu bauen.</p>
<p>Zielveröffentlichung: 0.9.53, Anfang 2022.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../de/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Bleiben Sie über I2P-Neuigkeiten informiert:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Geben Sie Ihre E-Mail ein" required>
                            <button type="submit">Abonnieren</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Schnellzugriff</h3>
                <ul>
                    <li><a href="../../../de/financial-support/">Spenden</a></li>
                    <li><a href="../../../de/docs/overview/intro/">I2P Einführung</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Gemeinschaft</h3>
                <ul>
                    <li><a href="../../../de/get-involved/">Mitmachen</a></li>
                    <li><a href="../../../de/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Offizielle Foren</a></li>
                    <li><a href="../../../de/contact/">Kontakt</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ressourcen</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metriken</a></li>
                    <li><a href="../../../de/papers/">Forschung</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Das Invisible Internet Project. Lizenziert unter Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../de/privacy/">Datenschutz</a>
                <a href="../../../de/terms/">Bedingungen</a>
                <a href="../../../de/about/media/">Presse</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Schließen">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Community-Umfrage</h2>
            <p class="modal-subtitle">Wir würden uns freuen, von Ihnen zu hören</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Ihre Stimme hilft dabei, die Zukunft von I2P zu gestalten.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
<!DOCTYPE html>
<html lang="de" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Kleinere Tunnel-Nachrichten | I2P - Das unsichtbare Internet-Projekt</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Kleinere Tunnel-Nachrichten | I2P - Das unsichtbare Internet-Projekt">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/de/proposals/157-new-tbm/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta-Seite jetzt live E-Mail-Probleme an stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Banner schließen" title="Banner schließen">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../de/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../de/about/" class="">Über</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/about/">Übersicht</a></li>
                            <li><a href="../../../de/papers/">Forschungspapiere</a></li>
                            <li><a href="../../../de/about/media/">Presse</a></li>
                            <li><a href="../../../de/contact/">Kontakt</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../de/docs/" class="">Dokumente</a></li>
                    <li><a href="../../../de/downloads/" class="">Downloads</a></li>
                    <li><a href="../../../de/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../de/get-involved/" class="">Mitmachen</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../de/get-involved/">Übersicht</a></li>
                            <li><a href="../../../de/feedback/">Funktionsvorschläge</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">de</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/157-new-tbm/"
                                class="lang-option">Englisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/157-new-tbm/"
                                class="lang-option">Spanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/157-new-tbm/"
                                class="lang-option">Koreanisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/157-new-tbm/"
                                class="lang-option">Chinesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/157-new-tbm/"
                                class="lang-option">Russisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/157-new-tbm/"
                                class="lang-option">Tschechisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/157-new-tbm/"
                                class="lang-option active">Deutsch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/157-new-tbm/"
                                class="lang-option">Französisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/157-new-tbm/"
                                class="lang-option">Türkisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/157-new-tbm/"
                                class="lang-option">Vietnamesisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/157-new-tbm/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/157-new-tbm/"
                                class="lang-option">Arabisch</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/157-new-tbm/"
                                class="lang-option">Portugiesisch</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../de/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../de/downloads/" class="btn btn-primary">I2P Herunterladen</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../de/">Home</a>
            <span class="separator">/</span>
            <a href="../../../de/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Kleinere Tunnel-Nachrichten</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Diese Übersetzung wurde mittels maschinellem Lernen erstellt und ist möglicherweise nicht 100% korrekt.</span>
    
    
    <a href="../../../en/proposals/157-new-tbm/" class="disclaimer-link">Englische Version anzeigen</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Kleinere Tunnel-Nachrichten</h1>
                <div class="proposal-number">Proposal 157</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-geschlossen">
                    Geschlossen
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz, original</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-10-09</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2021-07-31</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.51</span>
                    </div>
                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#hinweis">Hinweis</a></li>
    <li><a href="#übersicht">Übersicht</a>
      <ul>
        <li><a href="#zusammenfassung">Zusammenfassung</a></li>
        <li><a href="#ziele">Ziele</a></li>
        <li><a href="#nicht-ziele">Nicht-Ziele</a></li>
      </ul>
    </li>
    <li><a href="#design">Design</a>
      <ul>
        <li><a href="#datensätze">Datensätze</a></li>
        <li><a href="#tunnel-baunachrichten">Tunnel-Baunachrichten</a></li>
        <li><a href="#nachrichtenfluss">Nachrichtenfluss</a></li>
        <li><a href="#datensatzverschlüsselung">Datensatzverschlüsselung</a></li>
        <li><a href="#schichtverschlüsselung">Schichtverschlüsselung</a></li>
        <li><a href="#neue-tunnel-daten-nachricht">Neue Tunnel-Daten-Nachricht</a></li>
      </ul>
    </li>
    <li><a href="#spezifikation">Spezifikation</a>
      <ul>
        <li><a href="#kurzer-anforderungsdatensatz">Kurzer Anforderungsdatensatz</a></li>
        <li><a href="#kurzer-antwortdatensatz">Kurzer Antwortdatensatz</a></li>
        <li><a href="#kdf">KDF</a></li>
        <li><a href="#shorttunnelbuild">ShortTunnelBuild</a></li>
        <li><a href="#outboundtunnelbuildreply">OutboundTunnelBuildReply</a></li>
        <li><a href="#kdf-1">KDF</a></li>
      </ul>
    </li>
    <li><a href="#begründung">Begründung</a></li>
    <li><a href="#implementierungs-hinweise">Implementierungs-Hinweise</a></li>
    <li><a href="#probleme">Probleme</a></li>
    <li><a href="#migration">Migration</a></li>
    <li><a href="#anhang">Anhang</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="hinweis">Hinweis</h2>
<p>Implementiert ab API-Version 0.9.51.
Netzwerkbereitstellung und -test im Gange.
Unterliegt geringfügigen Überarbeitungen.
Siehe <a href="../../../de/docs/specs/i2np/">I2NP</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 für die endgültige Spezifikation.</p>
<h2 id="übersicht">Übersicht</h2>
<h3 id="zusammenfassung">Zusammenfassung</h3>
<p>Die aktuelle Größe der verschlüsselten Tunnel-Bauanfrage- und Antwortdatensätze beträgt 528.
Für typische Variable Tunnel-Bau- und Variable Tunnel-Bau-Antwortnachrichten
beträgt die Gesamtgröße 2113 Byte. Diese Nachricht wird in drei 1KB-Tunnel-Nachrichten für den Rückweg fragmentiert.</p>
<p>Änderungen des 528-Byte-Datensatzformats für ECIES-X25519-Router sind in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 angegeben.
Für einen Mix aus ElGamal- und ECIES-X25519-Routern in einem Tunnel muss die Datensatzgröße
bei 528 Byte bleiben. Wenn jedoch alle Router in einem Tunnel ECIES-X25519 sind, ist ein neuer, kleinerer
Baudatensatz möglich, da die ECIES-X25519-Verschlüsselung erheblich weniger Overhead hat als ElGamal.</p>
<p>Kleinere Nachrichten würden Bandbreite sparen. Auch wenn die Nachrichten in eine
einzelne Tunnel-Nachricht passen könnten, wäre der Rückweg dreimal effizienter.</p>
<p>Dieser Vorschlag definiert neue Anforderungs- und Antwortdatensätze sowie neue Bauanforderungs- und Bauantwortnachrichten.</p>
<p>Der Tunnel-Ersteller und alle Hops im erstellten Tunnel müssen ECIES-X25519 und mindestens Version 0.9.51 sein.
Dieser Vorschlag wird nicht nützlich sein, bis die Mehrheit der Router im Netzwerk ECIES-X25519 ist.
Dies soll bis Ende 2021 geschehen.</p>
<h3 id="ziele">Ziele</h3>
<p>Siehe <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/proposals/156-ecies-routers/">Prop156</a>
 für zusätzliche Ziele.</p>
<ul>
<li>Kleinere Datensätze und Nachrichten</li>
<li>Genügend Platz für zukünftige Optionen bereitstellen, wie in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
</li>
<li>In eine Tunnel-Nachricht für den Rückweg passen</li>
<li>Nur ECIES-Hops unterstützen</li>
<li>Verbesserungen beibehalten, die in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 implementiert wurden</li>
<li>Maximale Kompatibilität mit aktuellem Netzwerk</li>
<li>Eingehende Bau-Nachrichten vom OBEP verbergen</li>
<li>Ausgehende Bau-Antwortnachrichten vom IBGW verbergen</li>
<li>Kein Upgrade des gesamten Netzwerks auf einen &ldquo;Stichtag&rdquo; benötigen</li>
<li>Schrittweise Einführung zur Minimierung von Risiken</li>
<li>Bestehende kryptografische Primitiven wiederverwenden</li>
</ul>
<h3 id="nicht-ziele">Nicht-Ziele</h3>
<p>Siehe <a href="../../../de/proposals/156-ecies-routers/">Prop156</a>
 für zusätzliche Nicht-Ziele.</p>
<ul>
<li>Keine Anforderung für gemischte ElGamal/ECIES-Tunnel</li>
<li>Schichtverschlüsselungsänderungen, siehe <a href="../../../de/proposals/153-chacha20-layer-encryption/">Prop153</a>
</li>
<li>Keine Beschleunigungen von Krypto-Operationen. Es wird angenommen, dass ChaCha20 und AES ähnlich sind,
selbst mit AESNI, zumindest für die in Frage kommenden kleinen Datenmengen.</li>
</ul>
<h2 id="design">Design</h2>
<h3 id="datensätze">Datensätze</h3>
<p>Siehe Anhang für Berechnungen.</p>
<p>Verschlüsselte Anforderungs- und Antwortdatensätze werden 218 Byte groß sein, verglichen mit 528 Byte jetzt.</p>
<p>Die unverschlüsselten Anforderungssätze werden 154 Byte sein,
verglichen mit 222 Byte für ElGamal-Datensätze,
und 464 Byte für ECIES-Datensätze, wie in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 definiert.</p>
<p>Die unverschlüsselten Antwortsätze werden 202 Byte sein,
verglichen mit 496 Byte für ElGamal-Datensätze,
und 512 Byte für ECIES-Datensätze, wie in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 definiert.</p>
<p>Die Antwortverschlüsselung wird ChaCha20 (NICHT ChaCha20/Poly1305) sein,
sodass die Klartextdatensätze nicht ein Vielfaches von 16 Byte sein müssen.</p>
<p>Anforderungsdatensätze werden durch die Verwendung von HKDF zur Erstellung der
Schicht- und Antwortschlüssel kleiner gemacht, damit sie nicht ausdrücklich in die Anfrage aufgenommen werden müssen.</p>
<h3 id="tunnel-baunachrichten">Tunnel-Baunachrichten</h3>
<p>Beide werden &ldquo;variabel&rdquo; mit einem einbyte-großen Datensatzzahlen-Feld sein,
wie bei den bestehenden Variablen-Nachrichten.</p>
<h4 id="shorttunnelbuild-typ-25">ShortTunnelBuild: Typ 25</h4>
<p>Typische Länge (mit 4 Datensätzen): 873 Byte</p>
<p>Wenn für eingehende Tunnelbauten verwendet,
wird empfohlen (aber nicht erforderlich), dass diese Nachricht vom Urheber knoblauchverschlüsselt wird,
zielt auf das eingehende Gateway (Lieferanweisungen ROUTER ab),
um eingehende Bau-Nachrichten vom OBEP zu verbergen.
Der IBGW entschlüsselt die Nachricht,
setzt die Antwort in den richtigen Slot und sendet die ShortTunnelBuildMessage
zum nächsten Hop.</p>
<p>Die Datensatzlänge wird so gewählt, dass ein knoblauchverschlüsseltes STBM
in eine einzelne Tunnel-Nachricht passt. Siehe den Anhang unten.</p>
<h4 id="outboundtunnelbuildreply-typ-26">OutboundTunnelBuildReply: Typ 26</h4>
<p>Wir definieren eine neue OutboundTunnelBuildReply-Nachricht.
Diese wird nur für ausgehende Tunnelbauten verwendet.
Der Zweck ist, ausgehende Bau-Antwortnachrichten vom IBGW zu verbergen.
Sie muss vom OBEP knoblauchverschlüsselt werden, zielt auf den Urheber
(Lieferanweisungen TUNNEL ab).
Der OBEP entschlüsselt die Tunnel-Baunachricht,
konstruiert eine OutboundTunnelBuildReply-Nachricht
und setzt die Antwort in das Klartextfeld.
Die anderen Datensätze gehen in die anderen Slots.
Dann knoblauchverschlüsselt es die Nachricht an den Urheber mit den abgeleiteten symmetrischen Schlüsseln.</p>
<h4 id="hinweise">Hinweise</h4>
<p>Durch das Knoblauchverschlüsseln der OTBRM und STBM vermeiden wir auch potenzielle
Kompatibilitätsprobleme beim IBGW und OBEP der gepaarten Tunnel.</p>
<h3 id="nachrichtenfluss">Nachrichtenfluss</h3>
<pre tabindex="0"><code>STBM: Kurze Tunnel-Baunachricht (Typ 25)
OTBRM: Ausgehende Tunnel-Bau-Antwortnachricht (Typ 26)

Ausgehender Bau A-B-C
Antwort über bestehenden eingehenden D-E-F


                Neuer Tunnel
         STBM      STBM      STBM
Ersteller ------&gt; A ------&gt; B ------&gt; C ---\
                                   OBEP   \
                                          | Knoblauch eingewickelt
                                          | OTBRM
                                          | (TUNNEL-Lieferung)
                                          | von OBEP zu
                                          | Ersteller
              Bestehender Tunnel             /
Ersteller &lt;-------F---------E-------- D &lt;--/
                                   IBGW


Eingehender Aufbau D-E-F
Gesendet durch bestehenden ausgehenden A-B-C


              Bestehender Tunnel
Ersteller ------&gt; A ------&gt; B ------&gt; C ---\
                                  OBEP    \
                                          | Knoblauch eingewickelt (optional)
                                          | STBM
                                          | (ROUTER-Lieferung)
                                          | vom Ersteller
                Neuer Tunnel                | zu IBGW
          STBM      STBM      STBM        /
Ersteller &lt;------ F &lt;------ E &lt;------ D &lt;--/
                                   IBGW
</code></pre><h3 id="datensatzverschlüsselung">Datensatzverschlüsselung</h3>
<p>Anforderungs- und Antwortdatensatzverschlüsselung: wie in <a href="../../../de/proposals/152-ecies-tunnels/">Prop152</a>
 und <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 definiert.</p>
<p>Antwortdatensatzverschlüsselung für andere Slots: ChaCha20.</p>
<h3 id="schichtverschlüsselung">Schichtverschlüsselung</h3>
<p>Derzeit gibt es keinen Plan, die Schichtverschlüsselung für Tunnel, die mit
dieser Spezifikation gebaut wurden, zu ändern; sie würde AES bleiben, wie derzeit für alle Tunnel verwendet.</p>
<p>Eine Änderung der Schichtverschlüsselung zu ChaCha20 ist ein Thema für weitere Forschung.</p>
<h3 id="neue-tunnel-daten-nachricht">Neue Tunnel-Daten-Nachricht</h3>
<p>Derzeit gibt es keinen Plan, die 1KB-Tunnel-Daten-Nachricht, die für Tunnel gebaut mit
dieser Spezifikation verwendet wird, zu ändern.</p>
<p>Es könnte nützlich sein, eine neue I2NP-Nachricht einzuführen, die größer oder variabel groß ist, parallel zu diesem Vorschlag,
für die Nutzung über diese Tunnel.
Dies würde den Overhead für große Nachrichten reduzieren.
Dies ist ein Thema für weitere Forschung.</p>
<h2 id="spezifikation">Spezifikation</h2>
<h3 id="kurzer-anforderungsdatensatz">Kurzer Anforderungsdatensatz</h3>
<h4 id="kurzer-anforderungsdatensatz-unverschlüsselt">Kurzer Anforderungsdatensatz Unverschlüsselt</h4>
<p>Dies ist die vorgeschlagene Spezifikation des Tunnel-Bauanforderungsdatensatzes für ECIES-X25519-Router.
Zusammenfassung der Änderungen von <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
:</p>
<ul>
<li>Unverschlüsselte Länge von 464 auf 154 Bytes ändern</li>
<li>Verschlüsselte Länge von 528 auf 218 Bytes ändern</li>
<li>Schicht- und Antwortschlüssel und IVs entfernen, sie werden aus split() und einem KDF generiert</li>
</ul>
<p>Der Anforderungsdatensatz enthält keine ChaCha-Antwortschlüssel.
Diese Schlüssel werden aus einem KDF abgeleitet. Siehe unten.</p>
<p>Alle Felder sind Big-Endian.</p>
<p>Unverschlüsselte Größe: 154 Byte.</p>
<pre tabindex="0"><code>bytes     0-3: Tunnel-ID zum Empfangen von Nachrichten als, ungleich null
bytes     4-7: nächste Tunnel-ID, ungleich null
bytes    8-39: nächster Router-Identitätshash
byte       40: Flags
bytes   41-42: mehr Flags, ungenutzt, aus Kompatibilitätsgründen auf 0 setzen
byte       43: Schichtverschlüsselungstyp
bytes   44-47: Anforderungszeit (in Minuten seit der Epoche, abgerundet)
bytes   48-51: Ablauf der Anforderung (in Sekunden seit der Erstellung)
bytes   52-55: nächste Nachrichten-ID
bytes    56-x: Tunnel-Bauoptionen (Mapping)
bytes     x-x: andere Daten wie durch Flags oder Optionen impliziert
bytes   x-153: zufällige Auffüllung (siehe unten)
</code></pre><p>Das Flags-Feld ist dasselbe wie in <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>
 definiert und enthält die folgenden::</p>
<p>Bit-Reihenfolge: 76543210 (Bit 7 ist MSB)
bit 7: wenn gesetzt, Nachrichten von allen zulassen
bit 6: wenn gesetzt, Nachrichten an alle zulassen und die Antwort
zum angegebenen nächsten Hop in einer Tunnel-Bau-Antwortnachricht senden
bits 5-0: Undefiniert, muss aus Kompatibilitätsgründen mit zukünftigen Optionen auf 0 gesetzt werden</p>
<p>Bit 7 zeigt an, dass der Hop ein eingehendes Gateway (IBGW) sein wird. Bit 6
zeigt an, dass der Hop ein ausgehender Endpunkt (OBEP) sein wird. Wenn weder das eine noch das andere Bit
gesetzt ist, wird der Hop ein Zwischen-Teilnehmer sein. Beide können nicht gleichzeitig gesetzt werden.</p>
<p>Schichtverschlüsselungstyp: 0 für AES (wie in aktuellen Tunneln);
1 für die Zukunft (ChaCha?)</p>
<p>Das Ablaufdatum der Anfrage ist für zukünftige variable Tunneldauer.
Für jetzt ist der einzige unterstützte Wert 600 (10 Minuten).</p>
<p>Der ephemere öffentliche Schlüssel des Erstellers ist ein ECIES-Schlüssel, Big-Endian.
Er wird für das KDF für die IBGW-Schicht und Antwortschlüssel und IVs verwendet.
Dies ist nur im unverschlüsselten Datensatz in einer eingehenden Tunnel-Baunachricht enthalten.
Es ist erforderlich, da es in dieser Schicht für den Baudatensatz keine DH gibt.</p>
<p>Die Tunnel-Bauoptionen sind eine Mapping-Struktur, wie in <a href="../../../de/docs/specs/common-structures/">Common</a>
 definiert.
Dies ist für zukünftige Nutzung. Derzeit sind keine Optionen definiert.
Wenn die Mapping-Struktur leer ist, ist dies zwei Bytes 0x00 0x00.
Die maximale Größe des Mappings (einschließlich des Längenfeldes) beträgt 98 Bytes,
und der maximale Wert des Längenfeldes des Mappings beträgt 96.</p>
<h4 id="kurzer-anforderungsdatensatz-verschlüsselt">Kurzer Anforderungsdatensatz Verschlüsselt</h4>
<p>Alle Felder sind Big-Endian außer dem ephemeren öffentlichen Schlüssel, der Little-Endian ist.</p>
<p>Verschlüsselte Größe: 218 Byte</p>
<pre tabindex="0"><code>bytes    0-15: Trunkierter Identitätshash des Hops
bytes   16-47: Ephemerer X25519-Öffentlichschlüssel des Absenders
bytes  48-201: ChaCha20-verschlüsselter ShortBuildRequestRecord
bytes 202-217: Poly1305-MAC
</code></pre><h3 id="kurzer-antwortdatensatz">Kurzer Antwortdatensatz</h3>
<h4 id="kurzer-antwortdatensatz-unverschlüsselt">Kurzer Antwortdatensatz Unverschlüsselt</h4>
<p>Dies ist die vorgeschlagene Spezifikation des Tunnel-ShortBuildReplyRecord für ECIES-X25519-Router.
Zusammenfassung der Änderungen von <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
:</p>
<ul>
<li>Unverschlüsselte Länge von 512 auf 202 Bytes ändern</li>
<li>Verschlüsselte Länge von 528 auf 218 Bytes ändern</li>
</ul>
<p>ECIES-Antworten werden mit ChaCha20/Poly1305 verschlüsselt.</p>
<p>Alle Felder sind Big-Endian.</p>
<p>Unverschlüsselte Größe: 202 Byte.</p>
<pre tabindex="0"><code>bytes    0-x: Tunnel-Bauoptionen (Mapping)
bytes    x-x: andere Daten wie durch Optionen impliziert
bytes  x-200: Zufällige Auffüllung (siehe unten)
byte     201: Antwort-Byte
</code></pre><p>Die Tunnel-Bauoptionen sind eine Mapping-Struktur, wie in <a href="../../../de/docs/specs/common-structures/">Common</a>
 definiert.
Dies ist für zukünftige Nutzung. Derzeit sind keine Optionen definiert.
Wenn die Mapping-Struktur leer ist, ist dies zwei Bytes 0x00 0x00.
Die maximale Größe des Mappings (einschließlich des Längenfeldes) beträgt 201 Bytes,
und der maximale Wert des Längenfeldes des Mappings beträgt 199.</p>
<p>Das Antwort-Byte ist einer der folgenden Werte
wie in <a href="../../../de/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>
 definiert, um Fingerprinting zu vermeiden:</p>
<ul>
<li>0x00 (akzeptieren)</li>
<li>30 (TUNNEL_REJECT_BANDWIDTH)</li>
</ul>
<h4 id="kurzer-antwortdatensatz-verschlüsselt">Kurzer Antwortdatensatz Verschlüsselt</h4>
<p>Verschlüsselte Größe: 218 Byte</p>
<pre tabindex="0"><code>bytes   0-201: ChaCha20-verschlüsselter ShortBuildReplyRecord
bytes 202-217: Poly1305-MAC
</code></pre><h3 id="kdf">KDF</h3>
<p>Siehe KDF-Abschnitt unten.</p>
<h3 id="shorttunnelbuild">ShortTunnelBuild</h3>
<p>I2NP Typ 25</p>
<p>Diese Nachricht wird an mittlere Hops, OBEP und IBEP (Ersteller) gesendet.
Sie darf nicht an den IBGW gesendet werden (verwenden Sie stattdessen Knoblauch eingewickeltes InboundTunnelBuild).
Wenn sie vom OBEP empfangen wird, wird sie in eine OutboundTunnelBuildReply umgewandelt,
Knoblauch eingewickelt, und an den Urheber gesendet.</p>
<pre tabindex="0"><code>+----+----+----+----+----+----+----+----+
| num| ShortBuildRequestRecords...
+----+----+----+----+----+----+----+----+

num ::
       1 Byte `Integer`
       Gültige Werte: 1-8

Datensatzgröße: 218 Byte
Gesamtgröße: 1+$num*218
</code></pre><h4 id="hinweise-1">Hinweise</h4>
<ul>
<li>Typische Anzahl der Datensätze ist 4, für eine Gesamtgröße von 873.</li>
</ul>
<h3 id="outboundtunnelbuildreply">OutboundTunnelBuildReply</h3>
<p>I2NP Typ 26</p>
<p>Diese Nachricht wird nur vom OBEP an den IBEP (Ersteller) über einen bestehenden eingehenden Tunnel gesendet.
Sie darf nicht an einen anderen Hop gesendet werden.
Sie ist immer Knoblauch verschlüsselt.</p>
<pre tabindex="0"><code>+----+----+----+----+----+----+----+----+
| num|                                  |
+----+                                  +
|      ShortBuildReplyRecords...        |
+----+----+----+----+----+----+----+----+

num ::
       Gesamtanzahl der Datensätze,
       1 Byte `Integer`
       Gültige Werte: 1-8

ShortBuildReplyRecords ::
       Verschlüsselte Datensätze
       Länge: num * 218

Verschlüsselte Datensatzgröße: 218 Byte
Gesamtgröße: 1+$num*218
</code></pre><h4 id="hinweise-2">Hinweise</h4>
<ul>
<li>Typische Anzahl der Datensätze ist 4, für eine Gesamtgröße von 873.</li>
<li>Diese Nachricht sollte Knoblauch verschlüsselt werden.</li>
</ul>
<h3 id="kdf-1">KDF</h3>
<p>Wir verwenden ck aus dem Noise-Zustand nach der Tunnel-Baudatensatzverschlüsselung/-entschlüsselung, um folgende Schlüssel abzuleiten: Antwortschlüssel, AES-Schlüssel, AES-IV-Schlüssel und Knoblauch-Antwortschlüssel/Tag für OBEP.</p>
<p>Antwortschlüssel:
Im Gegensatz zu langen Datensätzen können wir nicht den linken Teil von ck für den Antwortschlüssel verwenden, da er nicht der letzte ist und später verwendet wird.
Der Antwortschlüssel wird verwendet, um den Antwortdatensatz mit AEAD/Chaha20/Poly1305 und Chacha20 zu antworten, um andere Datensätze zu antworten.
Beide verwenden denselben Schlüssel, Nonce ist die Position des Datensatzes in der Nachricht, beginnend bei 0.</p>
<pre tabindex="0"><code>keydata = HKDF(ck, ZEROLEN, &#34;SMTunnelReplyKey&#34;, 64)
replyKey = keydata[32:63]
ck = keydata[0:31]

Schichtschlüssel:
Der Schichtschlüssel ist derzeit immer AES, aber derselbe KDF kann für Chacha20 verwendet werden

keydata = HKDF(ck, ZEROLEN, &#34;SMTunnelLayerKey&#34;, 64)
layerKey = keydata[32:63]

IV-Schlüssel für nicht-OBEP-Datensatz:
ivKey = keydata[0:31]
weil es das letzte ist

IV-Schlüssel für OBEP-Datensatz:
ck = keydata[0:31]
keydata = HKDF(ck, ZEROLEN, &#34;TunnelLayerIVKey&#34;, 64)
ivKey = keydata[32:63]
ck = keydata[0:31]

OBEP-Knoblauch-Antwortschlüssel/Tag:
keydata = HKDF(ck, ZEROLEN, &#34;RGarlicKeyAndTag&#34;, 64)
replyKey = keydata[32:63]
replyTag = keydata[0:7]
</code></pre><h2 id="begründung">Begründung</h2>
<p>Dieses Design maximiert die Wiederverwendung bestehender kryptografischer Primitiven, Protokolle und Codes.</p>
<p>Dieses Design minimiert das Risiko.</p>
<p>ChaCha20 ist in Java-Tests für kleine Datensätze etwas schneller als AES.
ChaCha20 vermeidet eine Anforderung an die Datengröße, Vielfache von 16 zu sein.</p>
<h2 id="implementierungs-hinweise">Implementierungs-Hinweise</h2>
<ul>
<li>Wie bei der bestehenden variablen Tunnel-Baunachricht,
werden Nachrichten mit weniger als 4 Datensätzen nicht empfohlen.
Die typische Standardeinstellung sind 3 Hops.
Eingehende Tunnel müssen mit einem zusätzlichen Datensatz für
den Urheber gebaut werden, sodass der letzte Hop nicht weiß, dass er der letzte ist.
Damit mittlere Hops nicht wissen, ob ein Tunnel eingehend oder ausgehend ist,
sollten ausgehende Tunnel auch mit 4 Datensätzen gebaut werden.</li>
</ul>
<h2 id="probleme">Probleme</h2>
<h2 id="migration">Migration</h2>
<p>Die Implementierung, das Testen und die Einführung werden mehrere Releases
und etwa ein Jahr dauern. Die Phasen sind wie folgt. Zuordnung jeder Phase zu einer bestimmten Version ist TBD und hängt vom
Entwicklungstempo ab.</p>
<p>Einzelheiten der Implementierung und Migration können
für jede I2P-Implementierung variieren.</p>
<p>Der Tunnel-Ersteller muss sicherstellen, dass alle Hops im erstellten Tunnel ECIES-X25519 sind UND mindestens Version TBD.
Der Tunnel-Ersteller muss NICHT ECIES-X25519 sein; er kann ElGamal sein.
Wenn der Ersteller jedoch ElGamal ist, offenbart er dem nächsten Hop, dass er der Ersteller ist.
In der Praxis sollten diese Tunnel daher nur von ECIES-Routern erstellt werden.</p>
<p>Es sollte NICHT erforderlich sein, dass der gepaarte Tunnel OBEP oder IBGW ECIES ist oder
einer bestimmten Version entspricht.
Die neuen Nachrichten sind Knoblauch-verschlüsselt und nicht sichtbar beim OBEP oder IBGW
des gepaarten Tunnels.</p>
<p>Phase 1: Implementierung, nicht standardmäßig aktiviert</p>
<p>Phase 2 (nächste Veröffentlichung): Standardmäßig aktivieren</p>
<p>Es gibt keine Rückwärtskompatibilitätsprobleme. Die neuen Nachrichten dürfen nur an Router gesendet werden, die sie unterstützen.</p>
<h2 id="anhang">Anhang</h2>
<p>Ohne Knoblauch-Overhead für unverschlüsseltes eingehendes STBM,
wenn wir kein ITBM verwenden:</p>
<pre tabindex="0"><code>Aktuelle Größe mit 4 Slots: 4 * 528 + Overhead = 3 Tunnel Nachrichten

Bau Nachricht mit 4 Slots, die in eine Tunnel Nachricht passt, nur ECIES:

1024
- 21 Fragment-Header
----
1003
- 35 unfragmentierte ROUTER-Lieferanweisungen
----
968
- 16 I2NP-Header
----
952
- 1 Anzahl der Slots
----
951
/ 4 Slots
----
237 Neue verschlüsselte Bau-Datensatzgröße (vs. 528 jetzt)
- 16 verkürzter Hash
- 32 ephem. Schlüssel
- 16 MAC
----
173 maximaler Klartext-Baudatensatz (vs. 222 jetzt)
</code></pre><p>Mit Knoblauch-Overhead für &lsquo;N&rsquo;-Noise-Pattern zur Verschlüsselung von eingehendem STBM,
wenn wir kein ITBM verwenden:</p>
<pre tabindex="0"><code>Aktuelle Größe mit 4 Slots: 4 * 528 + Overhead = 3 Tunnel Nachrichten

Bau-Nachricht mit 4 Slots, die Knoblauch-verschlüsselt in eine Tunnel-Nachricht passt, nur ECIES:

1024
- 21 Fragment-Header
----
1003
- 35 unfragmentierte ROUTER-Lieferanweisungen
----
968
- 16 I2NP-Header
-  4 Länge
----
948
- 32 Byte ephem. Schlüssel
----
916
- 7 Byte DateTime-Block
----
909
- 3 Byte Knoblauch-Block-Overhead
----
906
- 9 Byte I2NP-Header
----
897
- 1 Byte Knoblauch-LOKAL-Lieferanweisungen
----
896
- 16 Byte Poly1305-MAC
----
880
- 1 Anzahl der Slots
----
879
/ 4 Slots
----
219 Neue verschlüsselte Bau-Datensatzgröße (vs. 528 jetzt)
- 16 verkürzter Hash
- 32 ephem. Schlüssel
- 16 MAC
----
155 maximaler Klartext-Baudatensatz (vs. 222 jetzt)
</code></pre><p>Hinweise:</p>
<p>Aktuelle Größe des Bau-Datensatzes vor ungenutztem Padding: 193</p>
<p>Das Entfernen des vollständigen Router-Hashes und die HKDF-Erzeugung von Schlüsseln/IVs würde viel Platz für zukünftige Optionen frei machen.
Wenn alles HKDF ist, beträgt der erforderliche Klartext-Raum etwa 58 Byte (ohne Optionen).</p>
<p>Der Knoblauch-verpackte OTBRM wird etwas kleiner sein als der Knoblauch-verpackte STBM,
weil die Lieferanweisungen LOKAL statt ROUTER sind,
kein DATETIME-Block enthalten ist und
es einen 8-Byte-Tag anstelle des 32-Byte-ephemeren Schlüssels für eine volle &lsquo;N&rsquo;-Nachricht verwendet.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../de/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/157-new-tbm.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Bleiben Sie über I2P-Neuigkeiten informiert:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Geben Sie Ihre E-Mail ein" required>
                            <button type="submit">Abonnieren</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Schnellzugriff</h3>
                <ul>
                    <li><a href="../../../de/financial-support/">Spenden</a></li>
                    <li><a href="../../../de/docs/overview/intro/">I2P Einführung</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Gemeinschaft</h3>
                <ul>
                    <li><a href="../../../de/get-involved/">Mitmachen</a></li>
                    <li><a href="../../../de/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Offizielle Foren</a></li>
                    <li><a href="../../../de/contact/">Kontakt</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ressourcen</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metriken</a></li>
                    <li><a href="../../../de/papers/">Forschung</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Das Invisible Internet Project. Lizenziert unter Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../de/privacy/">Datenschutz</a>
                <a href="../../../de/terms/">Bedingungen</a>
                <a href="../../../de/about/media/">Presse</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Schließen">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Community-Umfrage</h2>
            <p class="modal-subtitle">Wir würden uns freuen, von Ihnen zu hören</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Ihre Stimme hilft dabei, die Zukunft von I2P zu gestalten.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
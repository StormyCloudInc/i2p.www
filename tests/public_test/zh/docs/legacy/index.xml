<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Legacy on I2P - 隐形互联网项目</title>
    <link>/zh/docs/legacy/</link>
    <description>Recent content in Legacy on I2P - 隐形互联网项目</description>
    <generator>Hugo</generator>
    <language>zh-CN</language>
    <atom:link href="/zh/docs/legacy/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>BOB – 基本开放桥</title>
      <link>/zh/docs/legacy/bob/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/bob/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;警告：&lt;/strong&gt; BOB 仅支持旧版 DSA-SHA1 签名类型。Java I2P 自 1.7.0（2022-02）起不再随附 BOB；它仅在最初从 1.6.1 或更早版本开始的安装中，以及某些 i2pd 构建中仍然存在。新的应用程序必须使用 &lt;a href=&#34;../../../zh/docs/api/samv3/&#34;&gt;SAM v3&lt;/a&gt;&#xA;。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;语言绑定&#34;&gt;语言绑定&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Go 语言 – &lt;a href=&#34;https://bitbucket.org/kallevedin/ccondom&#34;&gt;ccondom&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Python – &lt;a href=&#34;http://git.repo.i2p/w/i2py-bob.git&#34;&gt;&lt;code&gt;i2py-bob&lt;/code&gt;&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;Twisted – &lt;a href=&#34;https://pypi.python.org/pypi/txi2p&#34;&gt;&lt;code&gt;txi2p&lt;/code&gt;&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;C++ – &lt;a href=&#34;https://gitlab.com/rszibele/bobcpp&#34;&gt;&lt;code&gt;bobcpp&lt;/code&gt;&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;协议说明&#34;&gt;协议说明&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;KEYS&lt;/code&gt; 表示一个 base64 destination（目标地址，公钥 + 私钥）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;KEY&lt;/code&gt; 是一个 base64 公钥。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;ERROR&lt;/code&gt; 响应的格式为 &lt;code&gt;ERROR &amp;lt;description&amp;gt;\n&lt;/code&gt;。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;OK&lt;/code&gt; 表示命令已完成；可选数据紧随其后，位于同一行。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;DATA&lt;/code&gt; 行会在最终的 &lt;code&gt;OK&lt;/code&gt; 之前流式输出额外内容。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;&lt;code&gt;help&lt;/code&gt; 命令是唯一的例外：它可能什么也不返回，以表示“无此命令”。&lt;/p&gt;&#xA;&lt;h2 id=&#34;连接横幅&#34;&gt;连接横幅&lt;/h2&gt;&#xA;&lt;p&gt;BOB 使用以换行符结尾的 ASCII 行（LF 或 CRLF）。建立连接时它会输出：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;BOB &amp;lt;version&amp;gt;&#xA;OK&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;当前版本：&lt;code&gt;00.00.10&lt;/code&gt;。早期构建使用大写十六进制数字和非标准编号。&lt;/p&gt;&#xA;&lt;table style=&#34;width:100%; border-collapse:collapse; margin-bottom:1.5rem;&#34;&gt;&#xA;  &lt;thead&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;&#34;&gt;BOB Version&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;&#34;&gt;Router Version&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;&#34;&gt;Notes&lt;/th&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;    &lt;tr&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;00.00.10&lt;/td&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;0.9.8&lt;/td&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;Latest defined version&lt;/td&gt;&lt;/tr&gt;&#xA;    &lt;tr&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;00.00.00 – 00.00.0F&lt;/td&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;—&lt;/td&gt;&lt;td style=&#34;border:1px solid var(--color-border); padding:0.5rem;&#34;&gt;Development builds&lt;/td&gt;&lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;## 核心命令&#xA;&lt;blockquote&gt;&#xA;&lt;p&gt;如需完整的命令详情，请使用 &lt;code&gt;telnet localhost 2827&lt;/code&gt; 进行连接并运行 &lt;code&gt;help&lt;/code&gt;。&lt;/p&gt;</description>
    </item>
    <item>
      <title>ElGamal/AES &#43; SessionTag（会话标签）加密</title>
      <link>/zh/docs/legacy/elgamal-aes/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/elgamal-aes/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;状态：&lt;/strong&gt; 本文档描述的是遗留的 ElGamal/AES+SessionTag 加密协议（ElGamal/AES+SessionTag，使用会话标签的加密方案）。它仅为保持向后兼容而继续受支持，因为现代 I2P 版本（2.10.0+）使用 &lt;a href=&#34;../../../zh/docs/specs/ecies/&#34;&gt;ECIES-X25519-AEAD-Ratchet&lt;/a&gt;&#xA;（基于 X25519 的 ECIES，采用 AEAD 棘轮）。ElGamal 协议已弃用，仅为历史与互操作性目的而保留。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;概述&#34;&gt;概述&lt;/h2&gt;&#xA;&lt;p&gt;ElGamal/AES+SessionTag 是 I2P 最初用于蒜式消息的端到端加密机制。它结合了：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;ElGamal (2048-bit)&lt;/strong&gt; — 用于密钥交换&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;AES-256/CBC&lt;/strong&gt; — 用于负载加密&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;SHA-256&lt;/strong&gt; — 用于哈希与 IV（初始化向量）推导&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;Session Tags (32 bytes)&lt;/strong&gt;（会话标签） — 用于一次性消息标识符&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;该协议允许 routers 和 Destination（目标标识）在无需维持持久连接的情况下进行安全通信。每个会话使用非对称的 ElGamal 交换来建立对称的 AES 密钥，随后使用轻量的“带标签”的消息来引用该会话。&lt;/p&gt;&#xA;&lt;h2 id=&#34;协议运行机制&#34;&gt;协议运行机制&lt;/h2&gt;&#xA;&lt;h3 id=&#34;会话建立新会话&#34;&gt;会话建立（新会话）&lt;/h3&gt;&#xA;&lt;p&gt;一个新会话以一条包含两个部分的消息开始：&lt;/p&gt;&#xA;&lt;table style=&#34;width:100%; border-collapse:collapse; margin-bottom:1.5rem;&#34;&gt;&#xA;  &lt;thead&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Section&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Size&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Contents&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Purpose&lt;/th&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;ElGamal-encrypted block&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;514 bytes&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;222 bytes of plaintext encrypted using the recipient&#39;s ElGamal public key&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Establishes the AES session key and IV seed&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;AES-encrypted block&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Variable (≥128 bytes typical)&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Payload data, integrity hash, and session tags&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Carries the actual message and new tags&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;ElGamal 块内的明文由以下组成：&#xA;&lt;table style=&#34;width:100%; border-collapse:collapse; margin-bottom:1.5rem;&#34;&gt;&#xA;  &lt;thead&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Field&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Size&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Description&lt;/th&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Session Key&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;32 bytes&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;AES-256 key for the session&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Pre-IV&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;32 bytes&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Material for deriving the AES initialization vector (&lt;code&gt;IV = first 16 bytes of SHA-256(Pre-IV)&lt;/code&gt;)&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Random Padding&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;158 bytes&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Filler to reach required ElGamal plaintext length&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;### 现有会话消息&#xA;&lt;p&gt;一旦会话建立，发送方就可以使用缓存的会话标签发送&lt;strong&gt;existing-session&lt;/strong&gt;（指“现有会话”的消息类型）消息：&lt;/p&gt;</description>
    </item>
    <item>
      <title>GeoIP 文件格式</title>
      <link>/zh/docs/legacy/geoip-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/geoip-%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F/</guid>
      <description>&lt;h2 id=&#34;概述&#34;&gt;概述&lt;/h2&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：已过时&lt;/strong&gt; - 我们现在支持三种格式，按优先顺序排列：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Maxmind 的 geoip2（GeoLite2-Country.mmdb）随所有安装一起打包提供，Debian 软件包和 Android 除外&lt;/li&gt;&#xA;&lt;li&gt;Maxmind 的 geoip1（GeoIP.dat）位于 Debian 的 geoip-database 软件包中&lt;/li&gt;&#xA;&lt;li&gt;如下文所述的 IPv4 Tor 格式（geoip.txt）以及自定义的 IPv6 格式（geoipv6.dat.gz）仍受支持，但未使用&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;本页说明了各种 GeoIP 文件的格式，这些文件由 router 用于为某个 IP 查询所属国家/地区。&lt;/p&gt;&#xA;&lt;h2 id=&#34;国家名称countriestxt格式&#34;&gt;国家名称（countries.txt）格式&lt;/h2&gt;&#xA;&lt;p&gt;该格式可从许多公共来源提供的数据文件轻松生成。例如：&lt;/p&gt;&#xA;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ wget http://geolite.maxmind.com/download/geoip/database/GeoIPCountryCSV.zip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ unzip GeoIPCountryCSV.zip&#xA;&lt;/span&gt;&lt;/span&gt;&lt;span style=&#34;display:flex;&#34;&gt;&lt;span&gt;$ cut -d, -f5,6 &amp;lt; GeoIPCountryWhois.csv | sed &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#39;s/&amp;#34;//g&amp;#39;&lt;/span&gt; | sort | uniq &amp;gt; countries.txt&#xA;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;格式规范：&lt;/strong&gt;&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;编码为 UTF-8&lt;/li&gt;&#xA;&lt;li&gt;第 1 列中的 &amp;lsquo;#&amp;rsquo; 表示注释行&lt;/li&gt;&#xA;&lt;li&gt;条目行为 CountryCode,CountryName&lt;/li&gt;&#xA;&lt;li&gt;CountryCode 为 ISO 两位字母代码，使用大写&lt;/li&gt;&#xA;&lt;li&gt;CountryName 为英文&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;ipv4-geoiptxt-格式&#34;&gt;IPv4 (geoip.txt) 格式&lt;/h2&gt;&#xA;&lt;p&gt;此格式借鉴自 Tor，并且可以从许多公开来源提供的数据文件轻松生成。例如：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Ministreaming（精简流式传输）库</title>
      <link>/zh/docs/legacy/ministreaming/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/ministreaming/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;已弃用：&lt;/strong&gt; ministreaming 库（简化的流式库）早于如今的&lt;a href=&#34;../../../zh/docs/specs/streaming/&#34;&gt;流式库&lt;/a&gt;&#xA;。现代应用程序必须使用完整的流式 API 或 SAM v3。以下信息仅为审阅随 &lt;code&gt;ministreaming.jar&lt;/code&gt; 提供的遗留源代码的开发者而保留。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;概述&#34;&gt;概述&lt;/h2&gt;&#xA;&lt;p&gt;Ministreaming（轻量级流式传输协议）构建在 &lt;a href=&#34;../../../zh/docs/specs/i2cp/&#34;&gt;I2CP&lt;/a&gt;&#xA; 之上，为 I2P 的消息层提供可靠、按序的传递——就像运行在 IP 之上的 TCP 一样。它最初从早期的 &lt;strong&gt;I2PTunnel&lt;/strong&gt; 应用（BSD 许可）中拆分出来，以便替代性传输机制能够独立演进。&lt;/p&gt;&#xA;&lt;p&gt;关键设计约束:&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;经典的两阶段（SYN/ACK/FIN）连接建立流程，借鉴自 TCP&lt;/li&gt;&#xA;&lt;li&gt;固定窗口大小为 &lt;strong&gt;1&lt;/strong&gt; 个数据包&lt;/li&gt;&#xA;&lt;li&gt;无每个数据包的 ID 或选择性确认&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这些选择使实现保持精简，但也限制了吞吐量——每个数据包在发送下一个之前通常要等待将近两个往返时延（RTT）。对于长生命周期的流，这种开销尚可接受，但短的 HTTP 风格交互会明显受影响。&lt;/p&gt;&#xA;&lt;h2 id=&#34;与流式传输库的关系&#34;&gt;与流式传输库的关系&lt;/h2&gt;&#xA;&lt;p&gt;当前的 streaming 库沿用同一 Java 包（&lt;code&gt;net.i2p.client.streaming&lt;/code&gt;）。已弃用的类和方法仍保留在 Javadoc 文档中，并有清晰标注，以便开发者识别 ministreaming（早期精简版流式库）时代的 API。当 streaming 库取代 ministreaming 时，它新增了：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;更智能的连接建立，往返次数更少&lt;/li&gt;&#xA;&lt;li&gt;自适应拥塞窗口与重传逻辑&lt;/li&gt;&#xA;&lt;li&gt;在易丢包的 tunnels 上具有更佳性能&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;ministreaming-曾在何时有用&#34;&gt;Ministreaming 曾在何时有用？&lt;/h2&gt;&#xA;&lt;p&gt;尽管存在局限，ministreaming（精简型流式传输）在最早的部署中仍提供了可靠的传输。该 API 刻意保持精简并具有前瞻性，以便可以在不破坏调用方的情况下替换为其他流式传输引擎。Java 应用直接链接使用；非 Java 客户端则通过 &lt;a href=&#34;../../../zh/docs/legacy/sam/&#34;&gt;SAM&lt;/a&gt;&#xA; 对流式传输会话的支持来获取同等功能。&lt;/p&gt;&#xA;&lt;p&gt;目前，&lt;code&gt;ministreaming.jar&lt;/code&gt; 仅作为兼容层使用。新的开发应当：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;选用完整的流式库（Java）或 SAM v3（&lt;code&gt;STREAM&lt;/code&gt; 风格）&lt;/li&gt;&#xA;&lt;li&gt;在现代化代码时，移除所有残留的固定窗口假设&lt;/li&gt;&#xA;&lt;li&gt;优先使用更大的窗口大小和优化的连接握手，以改进对延迟敏感的工作负载&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h2 id=&#34;参考&#34;&gt;参考&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;../../../zh/docs/specs/streaming/&#34;&gt;Streaming 库文档&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;http://idk.i2p/javadoc-i2p/net/i2p/client/streaming/package-summary.html&#34;&gt;Streaming Javadoc&lt;/a&gt;&#xA; – 包含已弃用的 ministreaming 类&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;../../../zh/docs/api/samv3/&#34;&gt;SAM v3 规范&lt;/a&gt;&#xA; – 为非 Java 应用程序提供流式传输支持&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;如果你遇到仍然依赖于 ministreaming（I2P 早期的简化流式库）的代码，请计划将其移植到现代的 Streaming API——网络及其工具链都期望较新的行为。&lt;/p&gt;</description>
    </item>
    <item>
      <title>SAM v1</title>
      <link>/zh/docs/legacy/sam/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/sam/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;已弃用：&lt;/strong&gt; SAM v1 仅保留用于历史参考。新应用应使用 &lt;a href=&#34;../../../zh/docs/api/samv3/&#34;&gt;SAM v3&lt;/a&gt;&#xA; 或 &lt;a href=&#34;../../../zh/docs/legacy/bob/&#34;&gt;BOB&lt;/a&gt;&#xA;。原始桥接程序仅支持 DSA-SHA1 Destination（目标地址）以及有限的选项集。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;库&#34;&gt;库&lt;/h2&gt;&#xA;&lt;p&gt;Java I2P 源代码树仍包含面向 C、C#、Perl 和 Python 的遗留绑定。它们已不再维护，主要为了归档兼容性而随发行版提供。&lt;/p&gt;&#xA;&lt;h2 id=&#34;版本协商&#34;&gt;版本协商&lt;/h2&gt;&#xA;&lt;p&gt;客户端通过 TCP（默认 &lt;code&gt;127.0.0.1:7656&lt;/code&gt;）连接并交换：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Client → HELLO VERSION MIN=1 MAX=1&#xA;Bridge → HELLO REPLY RESULT=OK VERSION=1.0&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;自 Java I2P 0.9.14 起，&lt;code&gt;MIN&lt;/code&gt; 参数是可选的，并且 &lt;code&gt;MIN&lt;/code&gt;/&lt;code&gt;MAX&lt;/code&gt; 都接受一位数字形式（&lt;code&gt;&amp;quot;3&amp;quot;&lt;/code&gt; 等），适用于已升级的桥接。&lt;/p&gt;&#xA;&lt;h2 id=&#34;会话创建&#34;&gt;会话创建&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SESSION CREATE STYLE={STREAM|DATAGRAM|RAW} DESTINATION={name|TRANSIENT} [DIRECTION={BOTH|RECEIVE|CREATE}] [option=value]*&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;DESTINATION=name&lt;/code&gt; 会在 &lt;code&gt;sam.keys&lt;/code&gt; 中加载或创建一个条目；&lt;code&gt;TRANSIENT&lt;/code&gt; 始终创建一个临时 Destination（目标地址）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;STYLE&lt;/code&gt; 用于选择虚拟流（类似 TCP）、签名数据报，或原始数据报。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;DIRECTION&lt;/code&gt; 仅适用于流会话；默认为 &lt;code&gt;BOTH&lt;/code&gt;。&lt;/li&gt;&#xA;&lt;li&gt;其他键/值对将作为 I2CP 选项传递（例如，&lt;code&gt;tunnels.quantityInbound=3&lt;/code&gt;）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;网桥回复：&lt;/p&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SESSION STATUS RESULT=OK DESTINATION=name&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;失败会返回 &lt;code&gt;DUPLICATED_DEST&lt;/code&gt;、&lt;code&gt;I2P_ERROR&lt;/code&gt; 或 &lt;code&gt;INVALID_KEY&lt;/code&gt;，并可附带一条可选消息。&lt;/p&gt;</description>
    </item>
    <item>
      <title>SAM v2（Simple Anonymous Messaging，I2P 的简单匿名消息接口）</title>
      <link>/zh/docs/legacy/samv2/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/samv2/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;已弃用：&lt;/strong&gt; 随 I2P 0.6.1.31 一同发布的 SAM v2 已不再维护。新开发请使用 &lt;a href=&#34;../../../zh/docs/api/samv3/&#34;&gt;SAM v3&lt;/a&gt;&#xA;。v2 相比 v1 的唯一改进是支持在单个 SAM 连接上复用多个套接字。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;版本说明&#34;&gt;版本说明&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;上报的版本字符串仍为 &lt;code&gt;&amp;quot;2.0&amp;quot;&lt;/code&gt;。&lt;/li&gt;&#xA;&lt;li&gt;自 0.9.14 起，&lt;code&gt;HELLO VERSION&lt;/code&gt; 消息接受一位数的 &lt;code&gt;MIN&lt;/code&gt;/&lt;code&gt;MAX&lt;/code&gt; 值，并且 &lt;code&gt;MIN&lt;/code&gt; 参数是可选的。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;DEST GENERATE&lt;/code&gt; 支持 &lt;code&gt;SIGNATURE_TYPE&lt;/code&gt;，因此可以创建 Ed25519（椭圆曲线签名算法）目的地。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;会话基础&#34;&gt;会话基础&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;SESSION CREATE STYLE={STREAM|DATAGRAM|RAW} DESTINATION={name|TRANSIENT} [DIRECTION={BOTH|RECEIVE|CREATE}] [option=value]&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;&#xA;&lt;li&gt;每个 Destination（I2P 目标标识）只能有一个活动的 SAM 会话（streams、datagrams 或 raw）。&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;STYLE&lt;/code&gt; 用于选择虚拟流、已签名的数据报，或原始数据报。&lt;/li&gt;&#xA;&lt;li&gt;其他选项会传递给 I2CP（例如，&lt;code&gt;tunnels.quantityInbound=3&lt;/code&gt;）。&lt;/li&gt;&#xA;&lt;li&gt;响应与 v1 相同：&lt;code&gt;SESSION STATUS RESULT=OK|DUPLICATED_DEST|I2P_ERROR|INVALID_KEY&lt;/code&gt;。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;消息编码&#34;&gt;消息编码&lt;/h2&gt;&#xA;&lt;p&gt;按行组织的 ASCII，使用空格分隔的 &lt;code&gt;key=value&lt;/code&gt; 键值对（值可以用引号括起）。通信类型与 v1 相同：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;通过 I2P streaming library (I2P 流式传输库) 提供的流&lt;/li&gt;&#xA;&lt;li&gt;可回复数据报 (&lt;code&gt;PROTO_DATAGRAM&lt;/code&gt;)&lt;/li&gt;&#xA;&lt;li&gt;原始数据报 (&lt;code&gt;PROTO_DATAGRAM_RAW&lt;/code&gt;)&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;何时使用&#34;&gt;何时使用&lt;/h2&gt;&#xA;&lt;p&gt;仅适用于无法迁移的遗留客户端。SAM v3 提供：&lt;/p&gt;</description>
    </item>
    <item>
      <title>SSU (旧版)</title>
      <link>/zh/docs/legacy/ssu/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/ssu/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;已弃用：&lt;/strong&gt; SSU 已被 SSU2（第二代 SSU 协议）取代。在 i2pd 2.44.0（API 0.9.56，2022 年 11 月）以及 Java I2P 2.4.0（API 0.9.61，2023 年 12 月）中已移除对 SSU 的支持。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;p&gt;SSU 提供了基于 UDP、带有拥塞控制、NAT 穿越以及对 introducer（引荐者）支持的半可靠传输。它通过为位于 NAT/防火墙之后的 routers 提供支持并协调进行 IP 发现，与 NTCP 形成互补。&lt;/p&gt;&#xA;&lt;h2 id=&#34;地址元素&#34;&gt;地址元素&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;code&gt;transport&lt;/code&gt;: &lt;code&gt;SSU&lt;/code&gt;&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;caps&lt;/code&gt;: 能力标志 (&lt;code&gt;B&lt;/code&gt;, &lt;code&gt;C&lt;/code&gt;, &lt;code&gt;4&lt;/code&gt;, &lt;code&gt;6&lt;/code&gt; 等)&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;host&lt;/code&gt; / &lt;code&gt;port&lt;/code&gt;: IPv4 或 IPv6 监听（当被防火墙阻挡时可选）&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;key&lt;/code&gt;: Base64 引入密钥&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;mtu&lt;/code&gt;: 可选；默认 1484 (IPv4) / 1488 (IPv6)&lt;/li&gt;&#xA;&lt;li&gt;&lt;code&gt;ihost/ikey/iport/itag/iexp&lt;/code&gt;: 当 router 被防火墙阻挡时的 introducer（引入者）条目&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;功能&#34;&gt;功能&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;使用 introducers（引介者）的协作式 NAT 穿越&lt;/li&gt;&#xA;&lt;li&gt;通过对等节点测试和检查入站数据包来检测本地 IP&lt;/li&gt;&#xA;&lt;li&gt;自动将防火墙状态中继到其他传输和 router 控制台&lt;/li&gt;&#xA;&lt;li&gt;半可靠传递：消息在达到重传上限后被丢弃&lt;/li&gt;&#xA;&lt;li&gt;使用加性增加/乘性减少和分片 ACK 位字段的拥塞控制&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;SSU 还处理元数据任务，如定时信标和 MTU 协商。所有功能现由 &lt;a href=&#34;../../../zh/docs/specs/ssu2/&#34;&gt;SSU2&lt;/a&gt;&#xA; 提供（采用现代密码学）。&lt;/p&gt;</description>
    </item>
    <item>
      <title>SSU 传输 (已弃用)</title>
      <link>/zh/docs/legacy/ssu/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/ssu/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;已弃用：&lt;/strong&gt; SSU (Secure Semi-Reliable UDP，安全的半可靠 UDP) 已被 &lt;a href=&#34;../../../zh/docs/specs/ssu2/&#34;&gt;SSU2&lt;/a&gt;&#xA; 取代。Java I2P 在 2.4.0 版（API 0.9.61）中移除了 SSU，i2pd 在 2.44.0（API 0.9.56）中也将其移除。本文档仅保留作历史参考。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;亮点&#34;&gt;亮点&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;UDP 传输，提供加密、认证的 I2NP 消息点对点投递。&lt;/li&gt;&#xA;&lt;li&gt;依赖 2048 位 Diffie–Hellman 握手（与 ElGamal 使用相同的素数）。&lt;/li&gt;&#xA;&lt;li&gt;每个数据报携带一个 16 字节的 HMAC-MD5（非标准的截断变体）+ 16 字节的 IV，随后是经 AES-256-CBC 加密的有效载荷。&lt;/li&gt;&#xA;&lt;li&gt;重放防护与会话状态在加密的有效载荷内进行跟踪。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;消息头&#34;&gt;消息头&lt;/h2&gt;&#xA;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;[16-byte MAC][16-byte IV][encrypted payload]&#xA;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;使用的 MAC 计算：&lt;code&gt;HMAC-MD5(ciphertext || IV || (len ^ version ^ ((netid-2)&amp;lt;&amp;lt;8)))&lt;/code&gt;，使用 32 字节的 MAC 密钥。负载长度以大端序 16 位表示，并在 MAC 计算中附加。协议版本默认为 &lt;code&gt;0&lt;/code&gt;；netId 默认为 &lt;code&gt;2&lt;/code&gt;（主网络）。&lt;/p&gt;&#xA;&lt;h2 id=&#34;会话与-mac-密钥&#34;&gt;会话与 MAC 密钥&lt;/h2&gt;&#xA;&lt;p&gt;派生自 DH 共享秘密：&lt;/p&gt;</description>
    </item>
    <item>
      <title>Tunnel 讨论</title>
      <link>/zh/docs/legacy/tunnel/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/tunnel/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;注意：&lt;/strong&gt; 此归档收录了早于 I2P 0.9.41 的探索性设计工作。有关生产级实现，请参阅 &lt;a href=&#34;../../../zh/docs/specs/implementation/&#34;&gt;tunnel 文档&lt;/a&gt;&#xA;。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;替代的配置方案&#34;&gt;替代的配置方案&lt;/h2&gt;&#xA;&lt;p&gt;针对未来的 tunnel 可调参数，所考虑的想法包括：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;用于消息投递的频率限流机制&lt;/li&gt;&#xA;&lt;li&gt;填充策略（包括 chaff injection（诱饵流量注入））&lt;/li&gt;&#xA;&lt;li&gt;Tunnel 生命周期控制&lt;/li&gt;&#xA;&lt;li&gt;用于有效载荷分发的批处理与队列策略&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;这些选项未随遗留实现提供。&lt;/p&gt;&#xA;&lt;h2 id=&#34;填充策略&#34;&gt;填充策略&lt;/h2&gt;&#xA;&lt;p&gt;已讨论的潜在填充方案：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;不进行任何填充&lt;/li&gt;&#xA;&lt;li&gt;随机长度填充&lt;/li&gt;&#xA;&lt;li&gt;固定长度填充&lt;/li&gt;&#xA;&lt;li&gt;填充到最接近的千字节&lt;/li&gt;&#xA;&lt;li&gt;填充到 2 的幂（&lt;code&gt;2^n&lt;/code&gt; 字节）&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;早期的测量（0.4 版本）促成了当前固定的 1024 字节 tunnel 消息大小。更高层的 garlic 消息（I2P 中将多个消息打包在一起的消息格式）可能会添加其自身的填充。&lt;/p&gt;&#xA;&lt;h2 id=&#34;分片&#34;&gt;分片&lt;/h2&gt;&#xA;&lt;p&gt;为防止通过消息长度进行的标记攻击，tunnel 消息固定为 1024 字节。更大的 I2NP 负载会由网关分片；端点会在短暂的超时时间内重组这些分片。router 可能会在发送前重新排列分片，以最大化填充效率。&lt;/p&gt;&#xA;&lt;h2 id=&#34;其他替代方案&#34;&gt;其他替代方案&lt;/h2&gt;&#xA;&lt;h3 id=&#34;中途调整-tunnel-处理&#34;&gt;中途调整 Tunnel 处理&lt;/h3&gt;&#xA;&lt;p&gt;考察了三种可能性：&lt;/p&gt;&#xA;&lt;ol&gt;&#xA;&lt;li&gt;允许中间跳点通过授予其对解密后有效载荷的访问权限，临时终止一个 tunnel。&lt;/li&gt;&#xA;&lt;li&gt;允许参与的 routers 在继续转发到下一跳之前，先将消息通过其自身的一条出站 tunnel 发送，以对消息进行“重混”。&lt;/li&gt;&#xA;&lt;li&gt;使 tunnel 的创建者能够动态地重新定义某个对等方的下一跳。&lt;/li&gt;&#xA;&lt;/ol&gt;&#xA;&lt;h3 id=&#34;双向-tunnels&#34;&gt;双向 Tunnels&lt;/h3&gt;&#xA;&lt;p&gt;使用彼此独立的入站和出站 tunnels 可以限制任何单一组对等节点所能观测到的信息（例如，GET 请求与大型响应）。双向 tunnels 简化了对等节点管理，但会同时向两个方向暴露完整的流量模式。因此，单向 tunnels 仍是首选的设计。&lt;/p&gt;</description>
    </item>
    <item>
      <title>单向 Tunnels</title>
      <link>/zh/docs/legacy/unidirectional/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/unidirectional/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;历史说明：&lt;/strong&gt; 本页保留了旧版“Unidirectional Tunnels（单向隧道）”讨论，供参考。有关当前行为，请参阅现行的 &lt;a href=&#34;../../../zh/docs/specs/implementation/&#34;&gt;tunnel 实现文档&lt;/a&gt;&#xA;。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;概述&#34;&gt;概述&lt;/h2&gt;&#xA;&lt;p&gt;I2P 构建 &lt;strong&gt;单向的 tunnels&lt;/strong&gt;：一个 tunnel 承载出站流量，另一个独立的 tunnel 承载入站回复。这种结构可追溯至最早的网络设计，并且至今仍是与像 Tor 这样的双向电路系统相区别的关键特征。有关术语和实现细节，请参见 &lt;a href=&#34;../../../zh/docs/overview/tunnel-routing/&#34;&gt;tunnel 概览&lt;/a&gt;&#xA; 和 &lt;a href=&#34;../../../zh/docs/specs/implementation/&#34;&gt;tunnel 规范&lt;/a&gt;&#xA;。&lt;/p&gt;&#xA;&lt;h2 id=&#34;回顾&#34;&gt;回顾&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;单向 tunnel 将请求与响应流量分离，因此任何一组串通的对等节点只能观察到往返路径的一半。&lt;/li&gt;&#xA;&lt;li&gt;时序攻击必须同时交叉两个 tunnel 池（出站和入站），而不是分析单一的电路，从而提高关联分析的难度。&lt;/li&gt;&#xA;&lt;li&gt;独立的入站和出站池使 routers 能够按方向调整延迟、容量及故障处理特性。&lt;/li&gt;&#xA;&lt;li&gt;缺点包括对等节点管理复杂性增加，以及为确保服务可靠交付而需要维护多个 tunnel 集合。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;匿名性&#34;&gt;匿名性&lt;/h2&gt;&#xA;&lt;p&gt;Hermann 和 Grothoff 的论文，&lt;a href=&#34;http://grothoff.org/christian/i2p.pdf&#34;&gt;&lt;em&gt;I2P is Slow… and What to Do About It&lt;/em&gt;&lt;/a&gt;&#xA;，分析了针对单向 tunnels 的前驱攻击，指出有决心的对手最终可以确认长期在线的对等节点。社区反馈指出，该研究依赖于关于对手耐心和法律权力的特定假设，且没有将该方法与会影响双向设计的时序攻击进行权衡比较。持续的研究与实践经验不断强化了这样一种认识：单向 tunnels 是出于匿名性考量的有意选择，而非疏忽所致。&lt;/p&gt;</description>
    </item>
    <item>
      <title>旧版 Tunnel 实现（遗留）</title>
      <link>/zh/docs/legacy/old-implementation/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/old-implementation/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;遗留状态：&lt;/strong&gt; 此内容仅保留用于历史参考。它记录了 I2P 0.6.1.10 之前发布的 tunnel 系统，不应在现代开发中使用。有关生产环境的指导，请参阅&lt;a href=&#34;../../../zh/docs/specs/implementation/&#34;&gt;当前实现&lt;/a&gt;&#xA;。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;p&gt;最初的 tunnel 子系统也使用单向的 tunnels，但在消息布局、重复检测和构建策略上有所不同。下文的许多章节为便于比较，沿用了该已弃用文档的结构。&lt;/p&gt;&#xA;&lt;h2 id=&#34;1-tunnel-概述&#34;&gt;1. Tunnel 概述&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;Tunnels 是由创建者选择的有序节点序列构建而成。&lt;/li&gt;&#xA;&lt;li&gt;Tunnel 的长度范围为 0–7 跳，并提供若干可调选项，用于填充、限速和干扰数据生成。&lt;/li&gt;&#xA;&lt;li&gt;入站 tunnels 将消息从不受信任的网关传递到创建者（端点）；出站 tunnels 将数据从创建者向外推送。&lt;/li&gt;&#xA;&lt;li&gt;Tunnel 的生命周期为 10 分钟，之后会构建新的 tunnels（通常使用相同的节点，但采用不同的 tunnel ID）。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;2-遗留设计中的运作&#34;&gt;2. 遗留设计中的运作&lt;/h2&gt;&#xA;&lt;h3 id=&#34;21-消息预处理&#34;&gt;2.1 消息预处理&lt;/h3&gt;&#xA;&lt;p&gt;网关累积了≤32 KB 的 I2NP 负载，选择了填充，并生成了一个包含以下内容的负载：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;一个两字节的填充长度字段，以及对应数量的随机字节&lt;/li&gt;&#xA;&lt;li&gt;一系列 &lt;code&gt;{instructions, I2NP message}&lt;/code&gt; 对，用于描述投递目标、分片以及可选延迟&lt;/li&gt;&#xA;&lt;li&gt;完整的 I2NP 消息，填充至 16 字节边界&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;投递指令将路由信息打包为位字段（投递类型、延迟标志位、分片标志位，以及可选扩展）。被分片的消息携带一个 4 字节的消息 ID，外加一个索引/是否为最后一片的标志位。&lt;/p&gt;&#xA;&lt;h3 id=&#34;22-网关加密&#34;&gt;2.2 网关加密&lt;/h3&gt;&#xA;&lt;p&gt;遗留设计在加密阶段将 tunnel 长度固定为八跳。网关以分层方式叠加 AES-256/CBC 和校验和块，使每一跳都能在不缩减负载的情况下验证完整性。校验和本身是由 SHA-256 派生的块，嵌入在消息中。&lt;/p&gt;&#xA;&lt;h3 id=&#34;23-参与者行为&#34;&gt;2.3 参与者行为&lt;/h3&gt;&#xA;&lt;p&gt;参与方会跟踪入站的 tunnel ID，及早进行完整性校验，并在转发前丢弃重复消息。由于嵌入了填充与验证块，消息大小无论跳数多少都保持不变。&lt;/p&gt;</description>
    </item>
    <item>
      <title>命名讨论</title>
      <link>/zh/docs/legacy/naming/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      <guid>/zh/docs/legacy/naming/</guid>
      <description>&lt;blockquote&gt;&#xA;&lt;p&gt;&lt;strong&gt;背景：&lt;/strong&gt; 本页汇集并存档了 I2P 早期设计阶段的长期争论。它解释了为何该项目更倾向于使用本地信任的地址簿，而不是采用类 DNS 的查询或多数投票式注册表。关于当前的使用指导，请参见&lt;a href=&#34;../../../zh/docs/overview/naming/&#34;&gt;命名文档&lt;/a&gt;&#xA;。&lt;/p&gt;&lt;/blockquote&gt;&#xA;&lt;h2 id=&#34;已放弃的备选方案&#34;&gt;已放弃的备选方案&lt;/h2&gt;&#xA;&lt;p&gt;I2P 的安全目标排除了常见的命名方案：&lt;/p&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;strong&gt;DNS 风格解析。&lt;/strong&gt; 在查询路径上的任何解析器都可能伪造或审查应答。即便有 DNSSEC（DNS 安全扩展），被攻陷的注册商或证书颁发机构（CA）仍然是单点故障。在 I2P 中，destinations（目标标识）&lt;em&gt;就是&lt;/em&gt;公钥—劫持一次查询就会彻底攻陷一个身份。&lt;/li&gt;&#xA;&lt;li&gt;&lt;strong&gt;基于投票的命名。&lt;/strong&gt; 对手可以批量创建无限数量的身份（女巫攻击 Sybil attack），并让热门名称在投票中“胜出”。基于工作量证明（Proof-of-Work，PoW）的缓解措施会抬高成本，但会引入沉重的协调开销。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;p&gt;相反，I2P 刻意将命名维持在传输层之上。捆绑的命名库提供了一个服务提供者接口（SPI），从而允许替代方案并存——由用户决定他们信任哪些地址簿或跳转服务。&lt;/p&gt;&#xA;&lt;h2 id=&#34;本地与全局名称-jrandom-2005&#34;&gt;本地与全局名称 (jrandom, 2005)&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;I2P 中的名称是&lt;strong&gt;在本地唯一且便于人类阅读&lt;/strong&gt;。你的 &lt;code&gt;boss.i2p&lt;/code&gt; 可能与他人的 &lt;code&gt;boss.i2p&lt;/code&gt; 不一致，这是设计使然。&lt;/li&gt;&#xA;&lt;li&gt;如果恶意行为者诱骗你更改某个名称背后对应的 Destination（I2P 中服务的公钥标识），他们就能实质上劫持该服务。拒绝全局唯一性可以防止这类攻击。&lt;/li&gt;&#xA;&lt;li&gt;将名称视为书签或即时通讯昵称——你可以通过订阅特定地址簿或手动添加密钥，来选择你信任的 Destination。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;常见异议与回应-zzz&#34;&gt;常见异议与回应 (zzz)&lt;/h2&gt;&#xA;&lt;table style=&#34;width:100%; border-collapse:collapse; margin-bottom:1.5rem;&#34;&gt;&#xA;  &lt;thead&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Concern&lt;/th&gt;&#xA;      &lt;th style=&#34;border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);&#34;&gt;Response&lt;/th&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/thead&gt;&#xA;  &lt;tbody&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“Downloading hosts.txt is inefficient.”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;At ~400&amp;nbsp;KB for ~800 hosts the bandwidth impact is minor (~10&amp;nbsp;B/s if refreshed twice daily). ETags already avoid unnecessary transfers. Alternate formats (for example &lt;code&gt;recenthosts.cgi&lt;/code&gt;) can deliver only new entries.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“It won’t scale.”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;A hosts.txt entry is ~500&amp;nbsp;bytes; storing thousands locally is practical. Real-time lookups would dramatically slow browsing.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“Requires trust and manual setup.”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;True—and intentional. Users must choose address book providers they trust. Trust is not binary; forcing configuration encourages users to think about it.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“Why not just use DNS?”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;DNS depends on short TTLs and can be hijacked mid-path. I2P destinations are immutable public keys, so DNS semantics map poorly.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“Subscriptions rely on specific servers.”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;Subscriptions are decentralised—you can add multiple providers or run your own. Completely decentralised systems struggle with conflict resolution and hijacking.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;    &lt;tr&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;&lt;strong&gt;“Jump services and hosts.txt feel awkward.”&lt;/strong&gt;&lt;/td&gt;&#xA;      &lt;td style=&#34;border:1px solid var(--color-border); padding:0.6rem;&#34;&gt;They are pragmatic trade-offs. Jump services provide just-in-time lookups; subscriptions keep a local cache for performance.&lt;/td&gt;&#xA;    &lt;/tr&gt;&#xA;  &lt;/tbody&gt;&#xA;&lt;/table&gt;&#xA;## 已讨论的效率改进思路&#xA;&lt;ul&gt;&#xA;&lt;li&gt;提供增量更新（仅包含自上次获取后新增的目标地址）。&lt;/li&gt;&#xA;&lt;li&gt;在完整的 hosts 文件之外提供补充源（&lt;code&gt;recenthosts.cgi&lt;/code&gt;）。&lt;/li&gt;&#xA;&lt;li&gt;探索可脚本化的工具（例如 &lt;code&gt;i2host.i2p&lt;/code&gt;），用于合并源或按信任级别过滤。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;要点&#34;&gt;要点&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;安全性优先于全局共识：本地维护的地址簿可最大限度降低劫持风险。&lt;/li&gt;&#xA;&lt;li&gt;通过命名 API，多种命名方式可以并存——由用户决定信任什么。&lt;/li&gt;&#xA;&lt;li&gt;完全去中心化的全局命名仍然是一个未解决的研究问题；在安全性、人类可记忆性与全局唯一性之间的权衡，仍然反映了 &lt;a href=&#34;https://zooko.com/distnames.html&#34;&gt;Zooko’s triangle（Zooko 三角）&lt;/a&gt;&#xA;。&lt;/li&gt;&#xA;&lt;/ul&gt;&#xA;&lt;h2 id=&#34;参考资料&#34;&gt;参考资料&lt;/h2&gt;&#xA;&lt;ul&gt;&#xA;&lt;li&gt;&lt;a href=&#34;../../../zh/docs/overview/naming/&#34;&gt;命名文档&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;&lt;a href=&#34;https://zooko.com/distnames.html&#34;&gt;Zooko 的《名称：去中心化、安全、人类可读：三者取其二》&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;li&gt;示例增量订阅源：&lt;a href=&#34;http://stats.i2p/cgi-bin/newhosts.txt&#34;&gt;stats.i2p/cgi-bin/newhosts.txt&lt;/a&gt;&#xA;&lt;/li&gt;&#xA;&lt;/ul&gt;</description>
    </item>
  </channel>
</rss>

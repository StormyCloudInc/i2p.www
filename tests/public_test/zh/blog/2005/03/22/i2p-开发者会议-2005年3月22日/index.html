<!DOCTYPE html>
<html lang="zh" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>I2P 开发者会议 - 2005年3月22日 | I2P - 隐形互联网项目</title>

    <meta name="description" content="2005年3月22日的 I2P 开发会议记录。">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="I2P 开发者会议 - 2005年3月22日 | I2P - 隐形互联网项目">
    <meta property="og:description" content="2005年3月22日的 I2P 开发会议记录。">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/zh/blog/2005/03/22/i2p-%E5%BC%80%E5%8F%91%E8%80%85%E4%BC%9A%E8%AE%AE-2005%E5%B9%B43%E6%9C%8822%E6%97%A5/">

    
    <link rel="icon" type="image/svg+xml" href="../../../../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P 测试版网站现已上线 电子邮件问题请发送至 stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="关闭横幅" title="关闭横幅">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../../../../zh/" class="logo-link">
                    <img src="../../../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../../../../zh/about/" class="">关于</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../../../zh/about/">概览</a></li>
                            <li><a href="../../../../../../zh/papers/">研究论文</a></li>
                            <li><a href="../../../../../../zh/about/media/">媒体</a></li>
                            <li><a href="../../../../../../zh/contact/">联系我们</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../../../../zh/docs/" class="">文档</a></li>
                    <li><a href="../../../../../../zh/downloads/" class="">下载</a></li>
                    <li><a href="../../../../../../zh/blog/" class="active">博客</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../../../../zh/get-involved/" class="">参与其中</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../../../zh/get-involved/">概览</a></li>
                            <li><a href="../../../../../../zh/feedback/">功能建议</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">zh</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../en/blog/2005/03/22/i2p-dev-meeting-march-22-2005/"
                                class="lang-option">英语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../es/blog/2005/03/22/reuni%C3%B3n-de-desarrolladores-de-i2p-22-de-marzo-de-2005/"
                                class="lang-option">西班牙语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../ko/blog/2005/03/22/i2p-%EA%B0%9C%EB%B0%9C%EC%9E%90-%ED%9A%8C%EC%9D%98-2005%EB%85%84-3%EC%9B%94-22%EC%9D%BC/"
                                class="lang-option">韩语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../zh/blog/2005/03/22/i2p-%E5%BC%80%E5%8F%91%E8%80%85%E4%BC%9A%E8%AE%AE-2005%E5%B9%B43%E6%9C%8822%E6%97%A5/"
                                class="lang-option active">中文</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../ru/blog/2005/03/22/%D0%B2%D1%81%D1%82%D1%80%D0%B5%D1%87%D0%B0-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%87%D0%B8%D0%BA%D0%BE%D0%B2-i2p-22-%D0%BC%D0%B0%D1%80%D1%82%D0%B0-2005-%D0%B3%D0%BE%D0%B4%D0%B0/"
                                class="lang-option">俄语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../cs/blog/2005/03/22/setk%C3%A1n%C3%AD-v%C3%BDvoj%C3%A1%C5%99%C5%AF-i2p-22.-b%C5%99ezna-2005/"
                                class="lang-option">捷克语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../de/blog/2005/03/22/i2p-entwicklertreffen-22.-m%C3%A4rz-2005/"
                                class="lang-option">德语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../fr/blog/2005/03/22/r%C3%A9union-des-d%C3%A9veloppeurs-i2p-22-mars-2005/"
                                class="lang-option">法语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../tr/blog/2005/03/22/i2p-geli%C5%9Ftirici-toplant%C4%B1s%C4%B1-22-mart-2005/"
                                class="lang-option">土耳其语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../vi/blog/2005/03/22/cu%E1%BB%99c-h%E1%BB%8Dp-c%C3%A1c-nh%C3%A0-ph%C3%A1t-tri%E1%BB%83n-i2p-22-th%C3%A1ng-3-2005/"
                                class="lang-option">越南语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../hi/blog/2005/03/22/i2p-%E0%A4%A1%E0%A5%87%E0%A4%B5%E0%A4%B2%E0%A4%AA%E0%A4%B0-%E0%A4%AC%E0%A5%88%E0%A4%A0%E0%A4%95-22-%E0%A4%AE%E0%A4%BE%E0%A4%B0%E0%A5%8D%E0%A4%9A-2005/"
                                class="lang-option">印地语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../ar/blog/2005/03/22/%D8%A7%D8%AC%D8%AA%D9%85%D8%A7%D8%B9-%D9%85%D8%B7%D9%88%D8%B1%D9%8A-i2p-22-%D9%85%D8%A7%D8%B1%D8%B3-2005/"
                                class="lang-option">阿拉伯语</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../../../pt/blog/2005/03/22/reuni%C3%A3o-de-desenvolvedores-do-i2p-22-de-mar%C3%A7o-de-2005/"
                                class="lang-option">葡萄牙语</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../../../../zh/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../../../../zh/downloads/" class="btn btn-primary">获取I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        
<article class="blog-post">
    <div class="container">
        <div class="post-header">
            <div class="post-meta-row">
                
                <time class="post-date" datetime="2005-03-22">
                    March 22, 2005
                </time>
                

                
                <div class="post-categories">
                    
                    <span class="category-badge">meeting</span>
                    
                </div>
                
            </div>

            <h1 class="post-title">I2P 开发者会议 - 2005年3月22日</h1>

            
            <div class="post-author">By @jrandom</div>
            
        </div>

        <div class="post-content">
            <h2 id="快速回顾">快速回顾</h2>
<p class="attendees-inline"><strong>出席：</strong> ant, bla, cervantes, detonate, duck, frosk, jdot, jrandom, mihi, Ragnarok</p>
<h2 id="会议记录">会议记录</h2>
<div class="irc-log"> 13:01 &lt;@jrandom&gt; 0) 嗨 13:01 &lt;@jrandom&gt; 1) 0.5.0.3 13:01 &lt;@jrandom&gt; 2) 批处理 13:01 &lt;@jrandom&gt; 3) 更新 13:01 &lt;@jrandom&gt; 4) ??? 13:01 &lt;@jrandom&gt; 0) 嗨 13:01  * jrandom 挥手 13:01 &lt;@jrandom&gt; 刚刚发布的每周状态说明在这里：http://dev.i2p.net/pipermail/i2p/2005-March/000654.html 13:02 &lt;+detonate&gt; 嗨 13:02 &lt;+cervantes&gt; 哈喽 13:02 &lt;@jrandom&gt; 直接跳到 1) 0.5.0.3 13:02 &lt;@jrandom&gt; 该版本几天前发布，反馈总体正面 13:02 &lt;+cervantes&gt; jrandom：当蓝色会跳舞的矮人爬到你显示器上时告诉我们，我们就提前结束会议 13:03 &lt;@jrandom&gt; 呵呵 cervantes  13:03 &lt;@jrandom&gt; （感谢 Bob 提供可编辑的会议日志；） 13:04 &lt;@jrandom&gt; 关于 0.5.0.3，我没有太多要补充的，邮件里已经说得差不多了 13:04 &lt;@jrandom&gt; 有人对此有任何评论/问题/顾虑吗？ 13:04 &lt;bla&gt; jrandom: 有关于 fast-peers-selection 代码的任何新测量数据吗？ 13:05 &lt;@jrandom&gt; 啊，我就知道 0.5.0.3 里还有我漏掉的东西；） 13:06 &lt;@jrandom&gt; 我还没有硬核指标，但从经验看，快速对等节点选择找到了我明确知道“快”的节点（比如同一台机器上的 routers 等） 13:07 &lt;bla&gt; jrandom: 有时，eepsites 仍需重试多次才能找到可用的优质 tunnel 13:07 &lt;@jrandom&gt; 也偶尔收到吞吐率相当不错的报告（在 10–20KBps 范围），不过还不常见（我们依然把参数调得比较保守） 13:08 &lt;+ant&gt; &lt;Connelly&gt; 哎呀，正在开会 13:09 &lt;@jrandom&gt; 嗯，是的，我发现可靠性仍未达到应有水平。不过多次重试并不是解决方案——如果重试 1 次后站点还没打开，请等 5–10 分钟再试 13:09 &lt;@jrandom&gt; 不过我在网络上传输层的延迟尖峰出现得不算少 13:10 &lt;@jrandom&gt; 比如，通过一个套接字把 1–2KB 的消息刷出就要花 5–20+ 秒 13:10 &lt;@jrandom&gt; 再加上一条 5 跳的路径（2 跳的 tunnels），就容易出问题 13:11 &lt;@jrandom&gt; 这其实也是推动批处理代码的原因之一——减少需要发送的消息数量 13:13 &lt;@jrandom&gt; 好的，关于 0.5.0.3 还有其他问题/评论/顾虑吗？ 13:13 &lt;bla&gt; jrandom: 看起来不错。我会在下一个“部分”里再多问一些 13:14 &lt;@jrandom&gt; w3rd，好，我们可以继续到 2) 批处理 13:15 &lt;@jrandom&gt; 邮件和我的博客（jrandom.dev.i2p&lt;/spam&gt;）应该说明了计划的基本内容 13:15 &lt;@jrandom&gt; 而且，说真的，这些都相当基础 13:15 &lt;@jrandom&gt; 我们现在的预处理器是最容易实现的那种（类名：TrivialPreprocessor）；） 13:16 &lt;@jrandom&gt; 新的预处理器提供了可调的批处理频率参数，并在各个 tunnel 池内提供出站 tunnel 亲和性（例如在 500ms 内尽量为后续请求选择同一个出站 tunnel，以便优化批处理） 13:17 &lt;@jrandom&gt; 关于这部分我大概就这些补充——有任何问题/评论/顾虑吗？   13:18 &lt;bla&gt; 这是否要求所有参与的节点都运行新的预处理器，还是可以让 Trivial/NewOne 混合共存？ 13:18 &lt;+Ragnarok&gt; 这会给时延增加 0.5 秒，对吧？ 13:19 &lt;@jrandom&gt; bla：不会，这个预处理器只用于 tunnel 网关，由该网关自行决定如何或是否进行批处理 13:20 &lt;@jrandom&gt; Ragnarok：一般不会——第 1 条消息可能会被延迟最多 0.5 秒，但第 2–15 条消息会比原先快得多。此外这是个简单的阈值机制——一旦达到一个完整 tunnel 消息的大小，就会立刻刷出 13:20 &lt;+Ragnarok&gt; 酷 13:20 &lt;+Ragnarok&gt; 能省下多少开销？ 13:21 &lt;@jrandom&gt; 相当可观；） 13:21 &lt;+Ragnarok&gt; “相当可观”听起来不错，虽然有点含糊 :P 13:21 &lt;@jrandom&gt; 看看你的 http://localhost:7657/oldstats.jsp#tunnel.smallFragments 13:21 &lt;@jrandom&gt; 把它跟 #tunnel.fullFragments 比较一下 13:22 &lt;bla&gt; jrandom: 这只涉及 endpoint-&gt;IB-gateway 的通信吗？  13:22 &lt;@jrandom&gt; 启用批处理后，full 与 small 的比率会上升，small 中的填充字节数会下降 13:23 &lt;@jrandom&gt; bla：嗯，它涉及所有 tunnel 网关，无论入站还是出站 13:24 &lt;mihi&gt; full fragments: lifetime average value: 1,00 over 1.621,00 events 13:24 &lt;bla&gt; jrandom: ok 13:24 &lt;mihi&gt; 碎片数量会出现小数吗？ 13:24 &lt;@jrandom&gt; full：1.00（共 807,077.00 次事件） small：746.80（共 692,682.00 次事件） 13:25 &lt;@jrandom&gt; 呵呵 mihi 13:25 &lt;@jrandom&gt; （small：746 的意思是，在那 69.2 万条消息中，每条 996 字节里有 746 字节是“浪费”的填充字节！） 13:26 &lt;@jrandom&gt; 呃，也不算完全浪费——它们起到了应有作用 13:26 &lt;+detonate&gt; 不管怎样都是不必要的开销 13:27 &lt;@jrandom&gt; 是的，很多都可以通过批处理预处理器去掉 13:28 &lt;@jrandom&gt; 不幸的是，它不会打包进下一个发行版 13:28 &lt;@jrandom&gt; 但会包含在 0.5.0.6 版（或许 0.5.1）里 13:28 &lt;@jrandom&gt; 呃，是 0.5.0.5，或者 0.5.1 13:28  * jrandom 被这些数字搞糊涂了 13:29 &lt;bla&gt; jrandom: 为什么不能？ 13:29 &lt;+cervantes&gt; 大麻和药片……该死 13:30 &lt;@jrandom&gt; !thwap cervantes  13:30 &lt;@jrandom&gt; bla：0.5.0.3（及更早版本）里有个 bug，碎片化消息处理器会导致同一个 tunnel 消息里的后续分片被丢弃 13:31 &lt;@jrandom&gt; 如果直接上线批处理预处理器，会导致大量消息丢失 13:31 &lt;@jrandom&gt; 别担心，我们还有其他好东西，所以即将到来的 0.5.0.4 绝不会无聊；） 13:31 &lt;bla&gt; jrandom: 啊，原来如此 13:32 &lt;bla&gt; jrandom: 啊，所以这就是为什么要等 0.5.0.4 成为主流之后再做这个……明白了。谢谢。 13:33 &lt;@jrandom&gt; 是啊，要是分片处理器能搞定就好了。总体上它是能处理的，只是释放字节缓冲得太早，把后续分片清零了（糟糕） 13:33 &lt;@jrandom&gt; 好的，关于第 2 点还有别的吗，或者我们转到 3) 更新？ 13:35 &lt;@jrandom&gt; 好的，正如状态说明里提到的（并且我们也在不同场合讨论了一阵），我们将添加一些简单且安全的更新功能，用户无需去网站、看邮件列表，或读频道主题 :) 13:36 &lt;+detonate&gt; 酷 13:36 &lt;@jrandom&gt; smeghead 已经写了一些代码来帮助流程自动化并提升安全性，并与 cervantes 合作，使其既能集成 fire2pe，也能对接常规的 routerconsole 13:37 &lt;@jrandom&gt; 邮件里列出了将要提供内容的总体描述，其中大部分已经可用，不过还有少数部分尚未完全敲定 13:37 &lt;@jrandom&gt; 不同于批处理，这个会在下一个版本里提供，不过直到 0.5.0.5（需要更新的时候）大家才会真正用得上 13:39 &lt;+Ragnarok&gt; 那么……5.0.4 会有什么酷东西？ 13:42 &lt;@jrandom&gt; 更新代码还带来了拉取公告数据的能力，比如能在 router 控制台顶部显示一小段新闻。此外，作为更新代码的一部分，我们实现了一个新的可靠下载组件，既可以直连，也可以通过 eepproxy 工作，过程中会自动重试并断点续传。或许将来会基于它构建一些相关功能，但不作保证 13:42 &lt;+Ragnarok&gt; 不错 13:43 &lt;@jrandom&gt; 好的，关于 3) 更新，大家还有其他问题/评论/顾虑吗？ 13:45 &lt;@jrandom&gt; 如果没有，我们继续 4) ??? 13:45 &lt;@jrandom&gt; 还有其他想提的吗？ 我肯定漏掉了一些东西 13:45 &lt;+detonate&gt; i2p 能在 OpenBSD 3.7 的 Sun JVM 上运行是已知的 :) 13:45 &lt;@jrandom&gt; 好极了！ 13:47 &lt;bla&gt; UDP 传输的进展如何？ 13:48 &lt;+detonate&gt; udp 可能会很麻烦，我觉得不如偷 bt 的流水线代码来改改；） 13:48 &lt;@jrandom&gt; 咳咳 13:49 &lt;@jrandom&gt; 我预期问题不大，但确实有不少活儿要干 13:49 &lt;@jrandom&gt; 队列策略如何运作，以及进入队列时的带宽限速（bw throttling）会很有意思 13:50 &lt;bla&gt; 前期工作是谁在做？ 13:50 &lt;@jrandom&gt; bla：detonate 和 mule 13:50 &lt;+detonate&gt; 是啊……不过我这一个月左右一直在偷懒 13:50 &lt;bla&gt; detonate: 我猜你在开玩笑吧，关于 BT 那个说法？ 13:51 &lt;+detonate&gt; 我半认真 13:51 &lt;+detonate&gt; 至少可以把传输层的线程数减少一半 13:51  * jrandom 朝 detonate 泼了一桶泥  13:51 &lt;jdot&gt; 哇哦。 我的 router 现在跑在我的独立服务器上了，不再用我那渣渣的有线连接。 13:51 &lt;@jrandom&gt; 给力 jdot  13:52 &lt;@jrandom&gt; 传输层与所有对等体通信只需 3–5 个线程就能搞定 13:52 &lt;bla&gt; detonate: 但当网络变大时（&gt; 几百个节点），减半还是不够的 13:52 &lt;jdot&gt; 可支配带宽有 1000GB 13:53 &lt;jdot&gt; 不巧的是，j.i2p 和 chat.i2p 在我迁移期间还会再停几个小时 13:53 &lt;duck&gt; detonate: addressbook 也停了吗？ 13:53 &lt;+detonate&gt; 是的，也停了 13:54 &lt;+detonate&gt; 唯一没停的是单文件的 profile 存储，我本来打算今天晚些时候把它搞起来 13:54 &lt;@jrandom&gt; w3rd 13:54 &lt;+detonate&gt; 这样 i2p 就不会把硬盘严重碎片化 13:54 &lt;jdot&gt; jrandom: 就带宽（BW）限制而言，它们是平均值吗？ 13:54 &lt;+frosk&gt; 现代文件系统不会碎片化的，傻瓜 13:55 &lt;+detonate&gt; NTFS 会 13:55 &lt;@jrandom&gt; jdot：带宽限制是严格的 token bucket（令牌桶） 13:55 &lt;@jrandom&gt; jdot：如果你设置了突发持续时间，系统会按这个时长来做平均 13:56 &lt;@jrandom&gt; （嗯，2 倍的突发时长 == 周期） 13:56 &lt;@jrandom&gt; （（差不多）） 13:56 &lt;jdot&gt; 嗯…… 我有 1000GB，想让 i2p 每月最多用到 800GB.... 13:56 &lt;+ant&gt; &lt;mihi&gt; detonate: NTFS 会把很小的文件存到 MFT 里，这意味着几乎不会碎片化 13:57 &lt;jdot&gt; 而且我不在乎突发能到多高 13:57 &lt;+detonate&gt; 好吧，当你运行碎片整理时，它要花 10 分钟搬动所有 6000 个 profiles……所以它们肯定会碎片化 13:58 &lt;@jrandom&gt; jdot：嗯，800GB 可能已经超过它本来想推的量了，所以大概可以不设限；）   13:58 &lt;@jrandom&gt; 另一方面，如果你能描述一下你想要实现的策略，我们也许可以支持 13:58 &lt;jdot&gt; jrandom: 我先这么做，看看效果如何 13:58 &lt;bla&gt; detonate: 据我记得，NTFS 是日志型文件系统。所以即使是单体文件，如果你以小块方式写入，也会产生碎片  13:58 &lt;+detonate&gt; 所有东西都是一次性写入的 13:59 &lt;+detonate&gt; 也会一次性读取 13:59 &lt;bla&gt; detonate: 好的，明白了。 13:59 &lt;jdot&gt; jrandom: 那就等等看这是否真会成为问题。 13:59 &lt;bla&gt; detonate: 那干得不错！ 13:59 &lt;+detonate&gt; 我很想知道在不设上限的情况下，实际会用掉多少带宽 14:00 &lt;+detonate&gt; 在一条不错的连接上 14:00 &lt;jdot&gt; 我也很感兴趣！ 14:00 &lt;@jrandom&gt; 我的托管 router 都是不限速运行，不过受 CPU 限制 14:00 &lt;+Ragnarok&gt; 能用一个大号的桶把它按一个月平均吗？ 14:00 &lt;jdot&gt; jrandom: CPU 受限？ 什么 CPU？ 14:01 &lt;@jrandom&gt; 4d 传输 3.04GB/2.73GB 14:01 &lt;+detonate&gt; 嗯，本以为会更少 14:01 &lt;@jrandom&gt; jdot：之所以受 CPU 限制，是因为我在上面跑了 3 个 router，加上其他几个 JVM，有时还要做性能剖析 14:01 &lt;+detonate&gt; 肯定是那些 bt 人 14:01 &lt;+detonate&gt; 等批处理上线后，看看会有什么变化应该很有趣 14:02 &lt;@jrandom&gt; detonate：有些流量也是我在它自己之间传 50MB 的文件；） 14:02 &lt;+detonate&gt; 呵 14:02 &lt;jdot&gt; 啊，好。 那就看看这套系统表现如何。 它是 AMD XP 2400，512MB 内存，10Mbit 连接 14:02 &lt;@jrandom&gt; Ragnarok：token bucket 其实不是那样工作的 14:02 &lt;@jrandom&gt; jdot：word，嗯，这台是 P4 1.6，记得没错的话 14:03 &lt;@jrandom&gt; Ragnarok：在 token bucket 里，每（比如）一秒会按设定速率往里加一些令牌。如果桶满了（大小 = 突发时长），新加的令牌会被丢弃 14:04 &lt;@jrandom&gt; 当你要传数据时，需要先拿到足够的令牌 14:04 &lt;@jrandom&gt; （1 个令牌 = 1 字节） 14:04 &lt;+Ragnarok&gt; 我知道它是怎么工作的……如果把桶做得非常大会怎样？ 14:05 &lt;+detonate&gt; 那你就永远不会停止发送数据 14:05 &lt;+detonate&gt; 如果它大小是无限的 14:05 &lt;+detonate&gt; 呃，而且桶里填满了令牌 14:05 &lt;@jrandom&gt; 如果桶真的很大，在低使用率之后可能会以不受限的速率突发发送 14:06 &lt;@jrandom&gt; 不过在某些情况下也许正是你想要的 14:07 &lt;@jrandom&gt; 问题在于，你不能把 token bucket 就设为 800GB，因为那并不能限制总传输量 14:08 &lt;+detonate&gt; 你需要一个字段能设置每秒的令牌数，然后把每月带宽用量除以秒数就行了 14:08 &lt;+detonate&gt; :) 14:10 &lt;@jrandom&gt; 那等同于把速率按月平均设定，这会很不均衡。不过，总之有很多可选方案——如果有人有当前设置无法满足的需求，请联系我们 14:10 &lt;+Ragnarok&gt; 但是如果把速率设为你想要的平均值……比如我这里 308 kB/s，然后把桶（bitbucket）设得很大……为什么不行？ 14:11 &lt;+Ragnarok&gt; s/larger/large/ 14:12 &lt;+detonate&gt; 嗯，你可以设置成在 60 秒的突发周期内，从不发送超过 800GB/44000 的数据 14:12 &lt;+detonate&gt; 44000 大约是一个月的分钟数 14:13 &lt;@jrandom&gt; 桶大小/突发时长描述的是在不受限情况下我们会发送多少。而大多数人确实希望有约束，这样 router 才不会在清空桶的时候（之类的情况）连续 5 分钟吞掉 10Mbps 14:14 &lt;@jrandom&gt; 也可以在从桶里取令牌的环节再加一道限速（然后那道限速也有自己的 token bucket，而那个桶又有自己的限速，等等） 14:16 &lt;+Ragnarok&gt; 我以为只有在带宽没被用满时才会往桶里加令牌 14:16 &lt;@jrandom&gt; 令牌是以恒定速率加入桶里的（比如每秒 64k 个令牌） 14:17 &lt;@jrandom&gt; 任何需要带宽的都会先向桶申请 14:18 &lt;+Ragnarok&gt; 啊……好 14:19 &lt;@jrandom&gt; 好的，很棒。还有谁想在会上提点什么？ 14:21 &lt;@jrandom&gt; 如果没有的话，就这样 14:21  * jrandom 做好准备 14:21  * jrandom *baf* 地宣布会议结束 </div>

        </div>

        <div class="post-navigation">
            <a href="../../../../../../zh/blog" class="back-to-blog">← Back to Blog</a>
        </div>
    </div>
</article>

<style>
.blog-post {
    padding: var(--spacing-2xl) 0;
}

.post-header {
    margin-bottom: var(--spacing-2xl);
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
    padding-bottom: var(--spacing-xl);
    border-bottom: 1px solid var(--color-border);
}

.post-meta-row {
    display: flex;
    align-items: center;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-md);
}

.post-date {
    font-size: 0.8125rem;
    color: var(--color-text-muted);
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.post-categories {
    display: flex;
    gap: var(--spacing-xs);
}

.category-badge {
    padding: 0.25rem 0.625rem;
    background-color: var(--color-primary);
    color: white;
    border-radius: var(--radius-sm);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.post-title {
    font-size: 2.5rem;
    margin-bottom: var(--spacing-sm);
    line-height: 1.2;
}

.post-author {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
}

.post-content {
    max-width: 800px;
    margin: 0 auto var(--spacing-2xl);
    line-height: 1.8;
    font-size: 1.0625rem;
}

.post-content h2,
.post-content h3,
.post-content h4 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
}

.post-content h2 {
    font-size: 1.875rem;
    padding-bottom: var(--spacing-sm);
    border-bottom: 2px solid var(--color-border);
}

.post-content h3 {
    font-size: 1.5rem;
}

.post-content h4 {
    font-size: 1.25rem;
}

.post-content ul,
.post-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.post-content li {
    margin-bottom: var(--spacing-sm);
}

.post-content pre {
    background-color: var(--color-bg-secondary);
    padding: var(--spacing-lg);
    border-radius: var(--radius-md);
    overflow-x: auto;
    margin: var(--spacing-lg) 0;
    border: 1px solid var(--color-border);
}

.post-content code {
    font-family: var(--font-mono);
    font-size: 0.875em;
}

.post-content pre code {
    background-color: transparent;
    padding: 0;
}

.post-content :not(pre) > code {
    background-color: var(--color-bg-tertiary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
}

.post-navigation {
    max-width: 800px;
    margin: var(--spacing-2xl) auto 0;
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
}

.back-to-blog {
    color: var(--color-primary);
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: var(--spacing-xs);
    transition: gap var(--transition-fast);
}

.back-to-blog:hover {
    gap: var(--spacing-sm);
}

@media (max-width: 768px) {
    .post-meta-row {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--spacing-xs);
    }

    .post-title {
        font-size: 2rem;
    }

    .post-content {
        font-size: 1rem;
    }
}
</style>

    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">保持关注 I2P 新闻：</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="输入您的邮箱" required>
                            <button type="submit">订阅</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>快速链接</h3>
                <ul>
                    <li><a href="../../../../../../zh/financial-support/">捐赠</a></li>
                    <li><a href="../../../../../../zh/docs/overview/intro/">I2P介绍</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>社区</h3>
                <ul>
                    <li><a href="../../../../../../zh/get-involved/">参与其中</a></li>
                    <li><a href="../../../../../../zh/blog/">博客</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">官方论坛</a></li>
                    <li><a href="../../../../../../zh/contact/">联系我们</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>资源</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P 指标</a></li>
                    <li><a href="../../../../../../zh/papers/">研究</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 隐形互联网计划。在 Creative Commons 许可下。</p>
            <div class="footer-links">
                <a href="../../../../../../zh/privacy/">隐私</a>
                <a href="../../../../../../zh/terms/">条款</a>
                <a href="../../../../../../zh/about/media/">媒体</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="关闭">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>社区投票</h2>
            <p class="modal-subtitle">我们很想听听您的意见</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                您的投票将帮助塑造 I2P 的未来。
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
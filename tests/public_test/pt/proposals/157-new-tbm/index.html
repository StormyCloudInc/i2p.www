<!DOCTYPE html>
<html lang="pt" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Mensagens de Construção de Túnel Menores | I2P - O Projeto de Internet Invisível</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Mensagens de Construção de Túnel Menores | I2P - O Projeto de Internet Invisível">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/pt/proposals/157-new-tbm/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Site Beta I2P Agora no Ar Reporte problemas por e-mail para stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Fechar banner" title="Fechar banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../pt/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../pt/about/" class="">Sobre</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../pt/about/">Visão Geral</a></li>
                            <li><a href="../../../pt/papers/">Artigos de Pesquisa</a></li>
                            <li><a href="../../../pt/about/media/">Imprensa</a></li>
                            <li><a href="../../../pt/contact/">Contate-nos</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../pt/docs/" class="">Docs</a></li>
                    <li><a href="../../../pt/downloads/" class="">Downloads</a></li>
                    <li><a href="../../../pt/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../pt/get-involved/" class="">Participe</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../pt/get-involved/">Visão Geral</a></li>
                            <li><a href="../../../pt/feedback/">Sugestões de Recursos</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">pt</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/157-new-tbm/"
                                class="lang-option">Inglês</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/157-new-tbm/"
                                class="lang-option">Espanhol</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/157-new-tbm/"
                                class="lang-option">Coreano</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/157-new-tbm/"
                                class="lang-option">Chinês</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/157-new-tbm/"
                                class="lang-option">Russo</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/157-new-tbm/"
                                class="lang-option">Tcheco</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/157-new-tbm/"
                                class="lang-option">Alemão</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/157-new-tbm/"
                                class="lang-option">Francês</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/157-new-tbm/"
                                class="lang-option">Turco</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/157-new-tbm/"
                                class="lang-option">Vietnamita</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/157-new-tbm/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/157-new-tbm/"
                                class="lang-option">Árabe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/157-new-tbm/"
                                class="lang-option active">Português</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../pt/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../pt/downloads/" class="btn btn-primary">Obter I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../pt/">Home</a>
            <span class="separator">/</span>
            <a href="../../../pt/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Mensagens de Construção de Túnel Menores</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Esta tradução foi gerada usando aprendizado de máquina e pode não ser 100% precisa.</span>
    
    
    <a href="../../../en/proposals/157-new-tbm/" class="disclaimer-link">Ver versão em inglês</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Mensagens de Construção de Túnel Menores</h1>
                <div class="proposal-number">Proposal 157</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-fechado">
                    Fechado
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz, original</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-10-09</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2021-07-31</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.51</span>
                    </div>
                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#nota">Nota</a></li>
    <li><a href="#visão-geral">Visão Geral</a>
      <ul>
        <li><a href="#resumo">Resumo</a></li>
        <li><a href="#objetivos">Objetivos</a></li>
        <li><a href="#não-objetivos">Não-Objetivos</a></li>
      </ul>
    </li>
    <li><a href="#design">Design</a>
      <ul>
        <li><a href="#registros">Registros</a></li>
        <li><a href="#mensagens-de-construção-de-túnel">Mensagens de Construção de Túnel</a></li>
        <li><a href="#fluxo-de-mensagem">Fluxo de Mensagem</a></li>
        <li><a href="#criptografia-de-registro">Criptografia de Registro</a></li>
        <li><a href="#criptografia-de-camada">Criptografia de Camada</a></li>
        <li><a href="#nova-mensagem-de-dados-de-túnel">Nova Mensagem de Dados de Túnel</a></li>
      </ul>
    </li>
    <li><a href="#especificação">Especificação</a>
      <ul>
        <li><a href="#registro-de-solicitação-curta">Registro de Solicitação Curta</a></li>
        <li><a href="#registro-de-resposta-curta">Registro de Resposta Curta</a></li>
        <li><a href="#kdf">KDF</a></li>
        <li><a href="#shorttunnelbuild">ShortTunnelBuild</a></li>
        <li><a href="#outboundtunnelbuildreply">OutboundTunnelBuildReply</a></li>
        <li><a href="#kdf-1">KDF</a></li>
      </ul>
    </li>
    <li><a href="#justificativa">Justificativa</a></li>
    <li><a href="#notas-de-implementação">Notas de Implementação</a></li>
    <li><a href="#questões">Questões</a></li>
    <li><a href="#migração">Migração</a></li>
    <li><a href="#apêndice">Apêndice</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="nota">Nota</h2>
<p>Implementado a partir da versão API 0.9.51.
Implantação e teste de rede em andamento.
Sujeito a pequenas revisões.
Veja [I2NP] e [Tunnel-Creation-ECIES] para a especificação final.</p>
<h2 id="visão-geral">Visão Geral</h2>
<h3 id="resumo">Resumo</h3>
<p>O tamanho atual dos registros criptografados de Solicitação e Resposta de Construção de Túnel é 528.
Para mensagens típicas de Construção de Túnel Variável e Resposta de Construção de Túnel Variável,
o tamanho total é de 2113 bytes. Esta mensagem é fragmentada em três mensagens de túnel de 1KB para o caminho reverso.</p>
<p>Mudanças no formato de registro de 528 bytes para roteadores ECIES-X25519 são especificadas em [Prop152] e [Tunnel-Creation-ECIES].
Para uma mistura de roteadores ElGamal e ECIES-X25519 em um túnel, o tamanho do registro deve permanecer
528 bytes. No entanto, se todos os roteadores em um túnel forem ECIES-X25519, um novo e menor
registro de construção é possível, porque a criptografia ECIES-X25519 tem muito menos sobrecarga
do que ElGamal.</p>
<p>Mensagens menores economizariam largura de banda. Além disso, se as mensagens pudessem caber em uma
única mensagem de túnel, o caminho reverso seria três vezes mais eficiente.</p>
<p>Esta proposta define novos registros de solicitação e resposta e novas mensagens de Solicitação de Construção e Resposta de Construção.</p>
<p>O criador do túnel e todos os saltos no túnel criado devem ser ECIES-X25519, e pelo menos na versão 0.9.51.
Esta proposta não será útil até que a maioria dos roteadores na rede sejam ECIES-X25519.
Isso é esperado para acontecer até o final de 2021.</p>
<h3 id="objetivos">Objetivos</h3>
<p>Veja [Prop152] e [Prop156] para objetivos adicionais.</p>
<ul>
<li>Registros e mensagens menores</li>
<li>Manter espaço suficiente para opções futuras, como em [Prop152] e [Tunnel-Creation-ECIES]</li>
<li>Caber em uma mensagem de túnel para o caminho reverso</li>
<li>Suportar apenas saltos ECIES</li>
<li>Manter melhorias implementadas em [Prop152] e [Tunnel-Creation-ECIES]</li>
<li>Maximizar a compatibilidade com a rede atual</li>
<li>Ocultar mensagens de construção de entrada do OBEP</li>
<li>Ocultar mensagens de resposta de construção de saída do IBGW</li>
<li>Não exigir uma atualização &ldquo;flag day&rdquo; para toda a rede</li>
<li>Implantação gradual para minimizar o risco</li>
<li>Reutilizar primitivas criptográficas existentes</li>
</ul>
<h3 id="não-objetivos">Não-Objetivos</h3>
<p>Veja [Prop156] para objetivos adicionais.</p>
<ul>
<li>Nenhum requisito para túneis mistos ElGamal/ECIES</li>
<li>Mudanças na criptografia de camada, para isso veja [Prop153]</li>
<li>Nenhuma aceleração de operações criptográficas. Presume-se que ChaCha20 e AES sejam similares,
mesmo com AESNI, pelo menos para os pequenos tamanhos de dados em questão.</li>
</ul>
<h2 id="design">Design</h2>
<h3 id="registros">Registros</h3>
<p>Veja o apêndice para cálculos.</p>
<p>Os registros de solicitação e resposta criptografados terão 218 bytes, em comparação com 528 bytes agora.</p>
<p>Os registros de solicitação em texto claro terão 154 bytes,
em comparação com 222 bytes para registros ElGamal,
e 464 bytes para registros ECIES como definidos em [Prop152] e [Tunnel-Creation-ECIES].</p>
<p>Os registros de resposta em texto claro terão 202 bytes,
em comparação com 496 bytes para registros ElGamal,
e 512 bytes para registros ECIES como definidos em [Prop152] e [Tunnel-Creation-ECIES].</p>
<p>A criptografia da resposta será ChaCha20 (NÃO ChaCha20/Poly1305),
então os registros em texto claro não precisam ser múltiplos de 16 bytes.</p>
<p>Registros de solicitação serão menores usando HKDF para criar as
chaves de camada e resposta, para que não precisem ser incluídas explicitamente na solicitação.</p>
<h3 id="mensagens-de-construção-de-túnel">Mensagens de Construção de Túnel</h3>
<p>Ambos serão &ldquo;variáveis&rdquo; com um campo de número de registros de um byte,
como nas mensagens Variáveis existentes.</p>
<h4 id="shorttunnelbuild-tipo-25">ShortTunnelBuild: Tipo 25</h4>
<p>Comprimento típico (com 4 registros): 873 bytes</p>
<p>Quando usado para construções de túnel de entrada,
é recomendado (mas não exigido) que esta mensagem seja criptografada com alho pelo originador,
direcionada ao gateway de entrada (instruções de entrega ROUTER),
para ocultar mensagens de construção de entrada do OBEP.
O IBGW decifra a mensagem,
coloca a resposta no slot correto,
e envia a ShortTunnelBuildMessage para o próximo salto.</p>
<p>O comprimento do registro é selecionado para que uma STBM criptografada com alho caiba
em uma única mensagem de túnel. Veja o apêndice abaixo.</p>
<h4 id="outboundtunnelbuildreply-tipo-26">OutboundTunnelBuildReply: Tipo 26</h4>
<p>Definimos uma nova mensagem OutboundTunnelBuildReply.
Esta é usada apenas para construções de túnel de saída.
O objetivo é ocultar mensagens de resposta de construção de saída do IBGW.
Deve ser criptografada com alho pelo OBEP, direcionada ao originador
(instruções de entrega TUNNEL).
O OBEP decifra a mensagem de construção de túnel,
constrói uma mensagem OutboundTunnelBuildReply,
e coloca a resposta no campo de texto claro.
Os outros registros vão para os outros slots.
Em seguida, criptografa a mensagem com alho para o originador com as chaves simétricas derivadas.</p>
<h4 id="notas">Notas</h4>
<p>Criptografando com alho o OTBRM e a STBM, também evitamos quaisquer
problemas potenciais de compatibilidade no IBGW e OBEP dos túneis emparelhados.</p>
<h3 id="fluxo-de-mensagem">Fluxo de Mensagem</h3>
<pre tabindex="0"><code>STBM: Mensagem de construção de túnel curto (tipo 25)
  OTBRM: Mensagem de resposta de construção de túnel de saída (tipo 26)

  Construção de saída A-B-C
  Resposta por caminho de entrada existente D-E-F


                  Novo Túnel
           STBM      STBM      STBM
  Criador ------&gt; A ------&gt; B ------&gt; C ---\
                                     OBEP   \
                                            | Criptografado com alho
                                            | OTBRM
                                            | (entrega TUNNEL)
                                            | do OBEP para
                                            | criador
                Túnel Existente             /
  Criador &lt;-------F---------E-------- D &lt;--/
                                     IBGW


  Construção de entrada D-E-F
  Enviado por caminho de saída existente A-B-C


                Túnel Existente
  Criador ------&gt; A ------&gt; B ------&gt; C ---\
                                    OBEP    \
                                            | Criptografado com alho (opcional)
                                            | STBM
                                            | (entrega ROUTER)
                                            | do criador
                  Novo Túnel                | para IBGW
            STBM      STBM      STBM        /
  Criador &lt;------ F &lt;------ E &lt;------ D &lt;--/
                                     IBGW
</code></pre><h3 id="criptografia-de-registro">Criptografia de Registro</h3>
<p>Criptografia de registro de solicitação e resposta: como definido em [Prop152] e [Tunnel-Creation-ECIES].</p>
<p>Criptografia de registros de resposta para outros slots: ChaCha20.</p>
<h3 id="criptografia-de-camada">Criptografia de Camada</h3>
<p>Atualmente, não há plano para mudar a criptografia de camada para túneis construídos com
esta especificação; ela continuaria AES, como atualmente usado para todos os túneis.</p>
<p>Mudar a criptografia de camada para ChaCha20 é um tópico para pesquisa adicional.</p>
<h3 id="nova-mensagem-de-dados-de-túnel">Nova Mensagem de Dados de Túnel</h3>
<p>Atualmente não há plano para mudar a Mensagem de Dados de Túnel de 1KB usada para túneis construídos com
esta especificação.</p>
<p>Pode ser útil introduzir uma nova mensagem I2NP que seja maior ou de tamanho variável, concomitantemente com esta proposta,
para uso sobre esses túneis.
Isso reduziria a sobrecarga para mensagens grandes.
Este é um tópico para pesquisa adicional.</p>
<h2 id="especificação">Especificação</h2>
<h3 id="registro-de-solicitação-curta">Registro de Solicitação Curta</h3>
<h4 id="registro-de-solicitação-curta-não-criptografado">Registro de Solicitação Curta Não Criptografado</h4>
<p>Esta é a especificação proposta do BuildRequestRecord de túnel para roteadores ECIES-X25519.
Resumo de alterações de [Tunnel-Creation-ECIES]:</p>
<ul>
<li>Mudar o comprimento não criptografado de 464 para 154 bytes</li>
<li>Mudar o comprimento criptografado de 528 para 218 bytes</li>
<li>Remover chaves de camada e de resposta e IVs, eles serão gerados a partir de split() e um KDF</li>
</ul>
<p>O registro de solicitação não contém nenhuma chave de resposta ChaCha.
Essas chaves são derivadas de um KDF. Veja abaixo.</p>
<p>Todos os campos estão em big-endian.</p>
<p>Tamanho não criptografado: 154 bytes.</p>
<pre tabindex="0"><code>bytes     0-3: ID do túnel para receber mensagens como, não zero
  bytes     4-7: próximo ID do túnel, não zero
  bytes    8-39: hash de identidade do próximo roteador
  byte       40: flags
  bytes   41-42: mais flags, não usados, configurar para 0 para compatibilidade
  byte       43: tipo de criptografia de camada
  bytes   44-47: hora da solicitação (em minutos desde a época, arredondado para baixo)
  bytes   48-51: expiração da solicitação (em segundos desde a criação)
  bytes   52-55: próximo ID de mensagem
  bytes    56-x: opções de construção de túnel (mapeamento)
  bytes     x-x: outros dados como implícitos por flags ou opções
  bytes   x-153: preenchimento aleatório (veja abaixo)
</code></pre><p>O campo flags é o mesmo definido em [Tunnel-Creation] e contém o seguinte::</p>
<p>Ordem dos bits: 76543210 (bit 7 é o MSB)
bit 7: se definido, permitir mensagens de qualquer um
bit 6: se definido, permitir mensagens para qualquer um, e enviar a resposta para o próximo salto
especificado em uma mensagem de resposta de construção de túnel
bits 5-0: Indefinido, deve ser configurado para 0 para compatibilidade com opções futuras</p>
<p>O Bit 7 indica que o salto será um gateway de entrada (IBGW). O Bit 6
indica que o salto será um ponto de extremidade de saída (OBEP). Se nenhum dos bits estiver
definido, o salto será um participante intermediário. Ambos não podem ser definidos ao mesmo tempo.</p>
<p>Criptografia de camada: 0 para AES (como nos túneis atuais);
1 para o futuro (ChaCha?)</p>
<p>A expiração da solicitação é para futuras durações de túnel variável.
Por enquanto, o único valor suportado é 600 (10 minutos).</p>
<p>A chave pública efêmera do criador é uma chave ECIES, big-endian.
Ela é usada para o KDF para as chaves e IVs de camada e resposta do IBGW.
Isso é apenas incluído no registro em texto claro em uma mensagem de Construção de Túnel de Entrada.
É necessário porque não há DH nesta camada para o registro de construção.</p>
<p>As opções de construção de túnel são uma estrutura de Mapeamento conforme definido em [Common].
Isso é para uso futuro. Nenhuma opção está atualmente definida.
Se a estrutura de Mapeamento estiver vazia, isso é dois bytes 0x00 0x00.
O tamanho máximo do Mapeamento (incluindo o campo de comprimento) é 98 bytes,
e o valor máximo do campo de comprimento do Mapeamento é 96.</p>
<h4 id="registro-de-solicitação-curta-criptografado">Registro de Solicitação Curta Criptografado</h4>
<p>Todos os campos são big-endian, exceto a chave pública efêmera, que é little-endian.</p>
<p>Tamanho criptografado: 218 bytes</p>
<pre tabindex="0"><code>bytes    0-15: Hash de identidade truncado do salto
  bytes   16-47: Chave pública efêmera X25519 do remetente
  bytes  48-201: Registro de Construção Curta Criptografado ChaCha20
  bytes 202-217: MAC Poly1305
</code></pre><h3 id="registro-de-resposta-curta">Registro de Resposta Curta</h3>
<h4 id="registro-de-resposta-curta-não-criptografado">Registro de Resposta Curta Não Criptografado</h4>
<p>Esta é a especificação proposta do ShortBuildReplyRecord de túnel para roteadores ECIES-X25519.
Resumo de alterações de [Tunnel-Creation-ECIES]:</p>
<ul>
<li>Mudar o comprimento não criptografado de 512 para 202 bytes</li>
<li>Mudar o comprimento criptografado de 528 para 218 bytes</li>
</ul>
<p>As respostas ECIES são criptografadas com ChaCha20/Poly1305.</p>
<p>Todos os campos são big-endian.</p>
<p>Tamanho não criptografado: 202 bytes.</p>
<pre tabindex="0"><code>bytes    0-x: Opções de Resposta de Construção de Túnel (Mapeamento)
  bytes    x-x: outros dados como implícitos por opções
  bytes  x-200: Preenchimento aleatório (veja abaixo)
  byte     201: Byte de Resposta
</code></pre><p>As opções de resposta de construção de túnel são uma estrutura de Mapeamento conforme definido em [Common].
Isso é para uso futuro. Nenhuma opção está atualmente definida.
Se a estrutura de Mapeamento estiver vazia, isso é dois bytes 0x00 0x00.
O tamanho máximo do Mapeamento (incluindo o campo de comprimento) é 201 bytes,
e o valor máximo do campo de comprimento do Mapeamento é 199.</p>
<p>O byte de resposta é um dos seguintes valores
como definido em <a href="../../../pt/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>
 para evitar fingerprinting:</p>
<ul>
<li>0x00 (aceitar)</li>
<li>30 (TUNNEL_REJECT_BANDWIDTH)</li>
</ul>
<h4 id="registro-de-resposta-curta-criptografado">Registro de Resposta Curta Criptografado</h4>
<p>Tamanho criptografado: 218 bytes</p>
<pre tabindex="0"><code>bytes   0-201: Registro de Resposta de Construção Curta Criptografado ChaCha20
  bytes 202-217: MAC Poly1305
</code></pre><h3 id="kdf">KDF</h3>
<p>Veja a seção KDF abaixo.</p>
<h3 id="shorttunnelbuild">ShortTunnelBuild</h3>
<p>I2NP Tipo 25</p>
<p>Esta mensagem é enviada para saltos do meio, OBEP e IBEP (criador).
Não pode ser enviada para o IBGW (use InboundTunnelBuild criptografado com alho em vez disso).
Quando recebida pelo OBEP, ela é transformada em uma OutboundTunnelBuildReply,
criptografada com alho, e enviada ao originador.</p>
<pre tabindex="0"><code>+----+----+----+----+----+----+----+----+
  | num| ShortBuildRequestRecords...
  +----+----+----+----+----+----+----+----+

  num ::
         1 byte `Integer`
         Valores válidos: 1-8

  tamanho do registro: 218 bytes
  tamanho total: 1+$num*218
</code></pre><h4 id="notas-1">Notas</h4>
<ul>
<li>Número típico de registros é 4, para um tamanho total de 873.</li>
</ul>
<h3 id="outboundtunnelbuildreply">OutboundTunnelBuildReply</h3>
<p>I2NP Tipo 26</p>
<p>Esta mensagem é enviada apenas pelo OBEP ao IBEP (criador) através de um túnel de entrada existente.
Não pode ser enviada a qualquer outro salto.
Ela é sempre criptografada com alho.</p>
<pre tabindex="0"><code>+----+----+----+----+----+----+----+----+
  | num|                                  |
  +----+                                  +
  |      ShortBuildReplyRecords...        |
  +----+----+----+----+----+----+----+----+

  num ::
         Número total de registros,
         1 byte `Integer`
         Valores válidos: 1-8

  ShortBuildReplyRecords ::
         Registros criptografados
         comprimento: num * 218

  tamanho do registro criptografado: 218 bytes
  tamanho total: 1+$num*218
</code></pre><h4 id="notas-2">Notas</h4>
<ul>
<li>Número típico de registros é 4, para um tamanho total de 873.</li>
<li>Esta mensagem deve ser criptografada com alho.</li>
</ul>
<h3 id="kdf-1">KDF</h3>
<p>Usamos ck do estado Noise após a criptografia/decifração do registro de construção de túnel
para derivar as seguintes chaves: chave de resposta, chave de camada AES, chave AES IV e chave/tag de resposta de alho para OBEP.</p>
<p>Chave de resposta:
Diferente dos registros longos, não podemos usar a parte esquerda de ck para a chave de resposta, porque não é a última e será usada mais tarde.
A chave de resposta é usada para criptografar a resposta usando AEAD/Chaha20/Poly1305 e ChaCha20 para responder a outros registros.
Ambos usam a mesma chave, nonce é a posição do registro na mensagem começando de 0.</p>
<pre tabindex="0"><code>keydata = HKDF(ck, ZEROLEN, &#34;SMTunnelReplyKey&#34;, 64)
  replyKey = keydata[32:63]
  ck = keydata[0:31]

  Chave de camada:
  A chave de camada é sempre AES para agora, mas o mesmo KDF pode ser usado de Chacha20

  keydata = HKDF(ck, ZEROLEN, &#34;SMTunnelLayerKey&#34;, 64)
  layerKey = keydata[32:63]

  Chave IV para registro não-OBEP:
  ivKey = keydata[0:31]
  porque é a última

  Chave IV para registro OBEP:
  ck = keydata[0:31]
  keydata = HKDF(ck, ZEROLEN, &#34;TunnelLayerIVKey&#34;, 64)
  ivKey = keydata[32:63]
  ck = keydata[0:31]

  Chave/tag de resposta de alho do OBEP:
  keydata = HKDF(ck, ZEROLEN, &#34;RGarlicKeyAndTag&#34;, 64)
  replyKey = keydata[32:63]
  replyTag = keydata[0:7]
</code></pre><h2 id="justificativa">Justificativa</h2>
<p>Este design maximiza o reuso de primitivas criptográficas, protocolos e código existentes.</p>
<p>Este design minimiza o risco.</p>
<p>ChaCha20 é ligeiramente mais rápido do que AES para registros pequenos, em testes Java.
ChaCha20 evita um requisito para tamanhos de dados múltiplos de 16.</p>
<h2 id="notas-de-implementação">Notas de Implementação</h2>
<ul>
<li>Assim como a mensagem de construção de túnel variável existente,
mensagens menores que 4 registros não são recomendadas.
O padrão típico é 3 saltos.
Túneis de entrada devem ser construídos com um registro extra para
o originador, para que o último salto não saiba que é o último.
Para que os saltos intermediários não saibam se um túnel é de entrada ou saída,
túneis de saída devem ser construídos com 4 registros também.</li>
</ul>
<h2 id="questões">Questões</h2>
<h2 id="migração">Migração</h2>
<p>A implementação, teste e implantação levarão várias versões
e aproximadamente um ano. As fases são as seguintes. A atribuição de
cada fase para uma versão particular é TBD e depende do
ritmo de desenvolvimento.</p>
<p>Os detalhes da implementação e migração podem variar para
cada implementação do I2P.</p>
<p>O criador do túnel deve garantir que todos os saltos no túnel criado sejam ECIES-X25519, E que tenham pelo menos a versão TBD.
O criador do túnel NÃO precisa ser ECIES-X25519; ele pode ser ElGamal.
No entanto, se o criador for ElGamal, ele revela ao salto mais próximo que é o criador.
Assim, na prática, esses túneis só devem ser criados por roteadores ECIES.</p>
<p>Não deve ser necessário que o OBEP ou o IBGW do túnel emparelhado sejam ECIES ou
de qualquer versão particular.
As novas mensagens são criptografadas com alho e não são visíveis no OBEP ou IBGW
do túnel emparelhado.</p>
<p>Fase 1: Implementação, não habilitada por padrão</p>
<p>Fase 2 (próxima versão): Habilitar por padrão</p>
<p>Não há problemas de compatibilidade retroativa. As novas mensagens podem ser enviadas apenas para roteadores que as suportam.</p>
<h2 id="apêndice">Apêndice</h2>
<p>Sem sobrecarga de alho para STBM de entrada não criptografada,
se não usarmos ITBM:</p>
<pre tabindex="0"><code>Tamanho atual de 4 slots: 4 * 528 + sobrecarga = 3 mensagens de túnel

  Mensagem de construção de 4 slots para caber em uma mensagem de túnel, somente ECIES:

  1024
  - 21 cabeçalho de fragmento
  ----
  1003
  - 35 instruções de entrega ROUTER não fragmentadas
  ----
  968
  - 16 cabeçalho I2NP
  ----
  952
  - 1 número de slots
  ----
  951
  / 4 slots
  ----
  237 Novo tamanho de registro de construção criptografado (vs. 528 agora)
  - 16 hash truncado
  - 32 chave efêmera
  - 16 MAC
  ----
  173 tamanho máximo do registro de construção em texto claro (vs. 222 agora)
</code></pre><p>Com sobrecarga de alho para o padrão de ruído &lsquo;N&rsquo; para criptografar STBM de entrada, se não usarmos ITBM:</p>
<pre tabindex="0"><code>Tamanho atual de 4 slots: 4 * 528 + sobrecarga = 3 mensagens de túnel

  Mensagem de construção criptografada com alho de 4 slots para caber em uma mensagem de túnel, somente ECIES:

  1024
  - 21 cabeçalho de fragmento
  ----
  1003
  - 35 instruções de entrega ROUTER não fragmentadas
  ----
  968
  - 16 cabeçalho I2NP
  -  4 comprimento
  ----
  948
  - 32 byte chave efêmera
  ----
  916
  - 7 byte bloco DateTime
  ----
  909
  - 3 byte sobrecarga do bloco de Alho
  ----
  906
  - 9 byte cabeçalho I2NP
  ----
  897
  - 1 byte instruções de entrega LOCAL do Alho
  ----
  896
  - 16 byte MAC Poly1305
  ----
  880
  - 1 número de slots
  ----
  879
  / 4 slots
  ----
  219 Novo tamanho de registro de construção criptografado (vs. 528 agora)
  - 16 hash truncado
  - 32 chave efêmera
  - 16 MAC
  ----
  155 tamanho máximo do registro de construção em texto claro (vs. 222 agora)
</code></pre><p>Notas:</p>
<p>Tamanho atual do registro de construção em texto claro antes do preenchimento não utilizado: 193</p>
<p>A remoção do hash de roteador completo e a geração HKDF de chaves/IVs liberaria muito espaço para opções futuras.
Se tudo for HKDF, o espaço necessário em texto claro é cerca de 58 bytes (sem quaisquer opções).</p>
<p>O OTBRM envolto em alho será ligeiramente menor do que o STBM envolto em alho,
porque as instruções de entrega são LOCAL e não ROUTER,
não há bloco DATETIME incluído, e
ele usa uma tag de 8 bytes em vez da chave efêmera de 32 bytes para uma mensagem &lsquo;N&rsquo; completa.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../pt/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/157-new-tbm.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Fique atualizado com as notícias do I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Digite seu e-mail" required>
                            <button type="submit">Inscrever-se</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Links Rápidos</h3>
                <ul>
                    <li><a href="../../../pt/financial-support/">Doar</a></li>
                    <li><a href="../../../pt/docs/overview/intro/">Introdução ao I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Comunidade</h3>
                <ul>
                    <li><a href="../../../pt/get-involved/">Participe</a></li>
                    <li><a href="../../../pt/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Fóruns Oficiais</a></li>
                    <li><a href="../../../pt/contact/">Contato</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Recursos</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Métricas I2P</a></li>
                    <li><a href="../../../pt/papers/">Pesquisa</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 O Projeto de Internet Invisível. Licenciado sob Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../pt/privacy/">Privacidade</a>
                <a href="../../../pt/terms/">Termos</a>
                <a href="../../../pt/about/media/">Imprensa</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Fechar">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Enquete da comunidade</h2>
            <p class="modal-subtitle">Gostaríamos de ouvir sua opinião</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Seu voto ajuda a moldar o futuro do I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
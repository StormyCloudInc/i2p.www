(function(){"use strict";const t="/en/donate/download/";function n(e){console.log("[I2P Downloads] Starting download:",e);const t=document.createElement("a");t.href=e,t.download="",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function e(){console.log("[I2P Downloads] Intercepting download buttons..."),document.querySelectorAll(".mirror-link, .alt-method").forEach(e=>{if(e.classList.contains("intercepted"))return;const s=e.getAttribute("href");if(!s||s==="#"||s.startsWith("/"))return;console.log("[I2P Downloads] Intercepting alt download link:",s),e.classList.add("intercepted"),e.addEventListener("click",function(e){e.preventDefault(),console.log("[I2P Downloads] Alt download link clicked!",s),n(s);const o=this.closest(".platform-card")||this.closest(".detected-download"),i=o?o.dataset.platform||"unknown":"unknown",r=o?o.querySelector(".platform-version")?.textContent.trim()||"2.10.0":"2.10.0",c=new URLSearchParams({file:i,version:r.replace("v",""),platform:i,url:encodeURIComponent(s)}),a=`${t}?${c.toString()}`;console.log("[I2P Downloads] Redirecting to:",a),setTimeout(()=>{window.location.href=a},5e3)})}),document.querySelectorAll(".btn-platform").forEach(e=>{if(e.classList.contains("intercepted"))return;if(e.getAttribute("data-no-intercept")==="true"){console.log("[I2P Downloads] Skipping button with data-no-intercept attribute:",e);return}const s=e.getAttribute("href");if(!s||s==="#"){console.log("[I2P Downloads] Skipping button with no href:",e);return}const i=(e.textContent||e.innerText||"").toLowerCase().trim(),a=i.includes("install guide")||i.includes("guide")||i.includes("installation"),o=s.toLowerCase(),r=o.includes("docs/guides/")||o.includes("docs/install/")||o.includes("debian-ubuntu-install")||o.includes("installing-i2p-on-debian-and-ubuntu")||o.includes("/guide"),c=s.startsWith("/"),l=!s.includes("://")&&!s.startsWith("#")&&(o.includes("docs/")||o.includes("guide")),d=s.startsWith("http")&&s.includes("docker.com");if(a||r||c||l||d){console.log("[I2P Downloads] Skipping internal/guide link:",s,"Button text:",i);return}console.log("[I2P Downloads] Intercepting button:",s),e.classList.add("intercepted"),e.addEventListener("click",function(e){e.preventDefault(),console.log("[I2P Downloads] Download button clicked!",s),n(s);const o=this.closest(".platform-card"),i=o?o.dataset.platform:"unknown",a=o?o.querySelector(".platform-version")?.textContent.trim():"";console.log("[I2P Downloads] Platform:",i,"Version:",a);const c=new URLSearchParams({file:i,version:a.replace("v",""),platform:i,url:encodeURIComponent(s)}),r=`${t}?${c.toString()}`;console.log("[I2P Downloads] Redirecting to:",r),setTimeout(()=>{window.location.href=r},5e3)})});const e=document.getElementById("detected-download-btn");e&&!e.classList.contains("intercepted")&&(e.classList.add("intercepted"),e.addEventListener("click",function(e){e.preventDefault();const s=this.getAttribute("href");if(!s||s==="#"){console.error("[I2P Downloads] No valid download URL");return}n(s);const o=document.getElementById("detected-name")?.textContent||"unknown",i=document.getElementById("detected-details")?.textContent||"",a=i.match(/Version ([\d.]+)/)?.[1]||"2.10.0",r=new URLSearchParams({file:o.toLowerCase().replace("download for ",""),version:a,platform:o,url:encodeURIComponent(s)});setTimeout(()=>{window.location.href=`${t}?${r.toString()}`},5e3)}))}function s(){console.log("[I2P Downloads] Script loaded and initializing..."),e(),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 500ms..."),e()},500),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 1000ms..."),e()},1e3),setTimeout(()=>{console.log("[I2P Downloads] Re-checking buttons after 1500ms..."),e()},1500)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()})()
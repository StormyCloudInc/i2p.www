<!DOCTYPE html>
<html lang="tr" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ECIES Tunnels | I2P - Görünmez İnternet Projesi</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="ECIES Tunnels | I2P - Görünmez İnternet Projesi">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/tr/proposals/152-ecies-tunnels/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta Sitesi Artık Yayında E-posta sorunları için stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Banner" title="Banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../tr/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../tr/about/" class="">Hakkında</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../tr/about/">Genel Bakış</a></li>
                            <li><a href="../../../tr/papers/">Araştırma Makaleleri</a></li>
                            <li><a href="../../../tr/about/media/">Basın</a></li>
                            <li><a href="../../../tr/contact/">İletişim</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../tr/docs/" class="">Belgeler</a></li>
                    <li><a href="../../../tr/downloads/" class="">İndirilenler</a></li>
                    <li><a href="../../../tr/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../tr/get-involved/" class="">Katılım Sağla</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../tr/get-involved/">Genel Bakış</a></li>
                            <li><a href="../../../tr/feedback/">Özellik Önerileri</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">tr</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/152-ecies-tunnels/"
                                class="lang-option">İngilizce</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/152-ecies-tunnels/"
                                class="lang-option">İspanyolca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/152-ecies-tunnels/"
                                class="lang-option">Korece</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/152-ecies-tunnels/"
                                class="lang-option">Çince</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/152-ecies-tunnels/"
                                class="lang-option">Rusça</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/152-ecies-tunnels/"
                                class="lang-option">Çekçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/152-ecies-tunnels/"
                                class="lang-option">Almanca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/152-ecies-tunnels/"
                                class="lang-option">Fransızca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/152-ecies-tunnels/"
                                class="lang-option active">Türkçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/152-ecies-tunnels/"
                                class="lang-option">Vietnamca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/152-ecies-tunnels/"
                                class="lang-option">Hintçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/152-ecies-tunnels/"
                                class="lang-option">Arapça</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/152-ecies-tunnels/"
                                class="lang-option">Portekizce</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../tr/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../tr/downloads/" class="btn btn-primary">I2P&#39;yi Edin</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../tr/">Home</a>
            <span class="separator">/</span>
            <a href="../../../tr/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">ECIES Tunnels</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Bu çeviri makine öğrenimi kullanılarak oluşturulmuştur ve %100 doğru olmayabilir.</span>
    
    
    <a href="../../../en/proposals/152-ecies-tunnels/" class="disclaimer-link">İngilizce versiyonu görüntüle</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">ECIES Tunnels</h1>
                <div class="proposal-number">Proposal 152</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-kapalı">
                    Kapalı
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">chisana, zzz, orignal</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2019-07-04</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2025-03-05</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.48</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Implemented In</span>
                        <span class="info-value">0.9.48</span>
                    </div>
                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#not">Not</a></li>
    <li><a href="#genel-bakış">Genel Bakış</a>
      <ul>
        <li><a href="#kriptografik-ilkeller">Kriptografik İlkeller</a></li>
        <li><a href="#hedefler">Hedefler</a></li>
        <li><a href="#amaçlanmayanlar">Amaçlanmayanlar</a></li>
      </ul>
    </li>
    <li><a href="#tehdit-modeli">Tehdit Modeli</a>
      <ul>
        <li><a href="#tasarım-hedefleri">Tasarım Hedefleri</a></li>
        <li><a href="#etiketleme-saldırıları">Etiketleme Saldırıları</a></li>
      </ul>
    </li>
    <li><a href="#tasarım">Tasarım</a>
      <ul>
        <li><a href="#noise-protokol-çerçevesi">Noise Protokol Çerçevesi</a></li>
        <li><a href="#el-sıkışma-kalıpları">El Sıkışma Kalıpları</a></li>
        <li><a href="#istek-şifrelemesi">İstek şifrelemesi</a></li>
        <li><a href="#yanıt-şifreleme">Yanıt şifreleme</a></li>
        <li><a href="#gerekçe">Gerekçe</a></li>
      </ul>
    </li>
    <li><a href="#spesifikasyon">Spesifikasyon</a>
      <ul>
        <li><a href="#oluşturma-isteği-kayıtları">Oluşturma İsteği Kayıtları</a></li>
        <li><a href="#oluşturma-yanıt-kayıtları">Oluşturma Yanıt Kayıtları</a></li>
        <li><a href="#kayıtların-simetrik-olarak-şifrelenmesi">Kayıtların simetrik olarak şifrelenmesi</a></li>
        <li><a href="#istek-kaydı-anahtarları-ecies">İstek Kaydı Anahtarları (ECIES)</a></li>
        <li><a href="#istek-kaydı-şifrelemesi-elgamal-açık-anahtarlı-şifreleme-algoritması">İstek Kaydı Şifrelemesi (ElGamal; açık anahtarlı şifreleme algoritması)</a></li>
        <li><a href="#yanıt-kaydı-şifrelemesi-ecies---eliptik-eğri-entegre-şifreleme-şeması">Yanıt Kaydı Şifrelemesi (ECIES - Eliptik Eğri Entegre Şifreleme Şeması)</a></li>
        <li><a href="#yanıt-kaydı-şifrelemesi-elgamal-açık-anahtarlı-şifreleme-yöntemi">Yanıt Kaydı Şifrelemesi (ElGamal, açık anahtarlı şifreleme yöntemi)</a></li>
        <li><a href="#güvenlik-analizi">Güvenlik Analizi</a></li>
      </ul>
    </li>
    <li><a href="#gerekçe-1">Gerekçe</a></li>
    <li><a href="#uygulama-notları">Uygulama Notları</a></li>
    <li><a href="#sorunlar">Sorunlar</a></li>
    <li><a href="#geçiş">Geçiş</a></li>
    <li><a href="#kaynaklar">Kaynaklar</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="not">Not</h2>
<p>Ağ dağıtımı ve testler sürüyor. Küçük düzeltmeler yapılabilir. Resmî belirtim için <a href="../../../tr/docs/specs/implementation/">SPEC</a>
&rsquo;e bakın.</p>
<h2 id="genel-bakış">Genel Bakış</h2>
<p>Bu belge, <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
 tarafından tanıtılan kriptografik ilkelleri kullanarak Tunnel Build (tunnel kurulumu) mesajı şifrelemesinde değişiklikler önerir. Bu, router&rsquo;ların ElGamal&rsquo;dan ECIES-X25519 anahtarlarına dönüştürülmesine yönelik genel öneri <a href="../../../tr/proposals/156-ecies-routers">Proposal 156</a>
 kapsamında yer alan bir bölümdür.</p>
<p>Ağın ElGamal + AES256&rsquo;tan ECIES + ChaCha20&rsquo;ye geçişi amacıyla, ElGamal ve ECIES router&rsquo;larının karışık olduğu tunnel&rsquo;lar gereklidir. Karışık tunnel atlamalarının işlenmesine ilişkin spesifikasyonlar sağlanmıştır. ElGamal atlamalarının biçimi, işlenmesi veya şifrelemesinde herhangi bir değişiklik yapılmayacaktır.</p>
<p>ElGamal tunnel oluşturucularının, her atlama için geçici X25519 anahtar çiftleri oluşturmaları ve ECIES atlamaları içeren tunnel&rsquo;lar oluşturmak için bu belirtimi izlemeleri gerekir.</p>
<p>Bu öneri, ECIES-X25519 Tunnel Oluşturma için gerekli değişiklikleri belirtir. ECIES routers için gerekli tüm değişikliklerin genel bir özeti için bkz. Öneri 156 <a href="../../../tr/proposals/156-ecies-routers">Öneri 156</a>
.</p>
<p>Bu öneri, uyumluluk gereği, tunnel oluşturma kayıtlarının boyutunu aynı tutar. Daha küçük oluşturma kayıtları ve mesajlar daha sonra uygulanacaktır - bkz. <a href="../../../tr/proposals/157-new-tbm">Öneri 157</a>
.</p>
<h3 id="kriptografik-ilkeller">Kriptografik İlkeller</h3>
<p>Yeni bir kriptografik ilkel tanıtılmamaktadır. Bu öneriyi uygulamak için gerekli ilkeller şunlardır:</p>
<ul>
<li>AES-256-CBC, <a href="../../../tr/docs/specs/cryptography/">Cryptography</a>
 belgesindeki gibi</li>
<li>STREAM ChaCha20/Poly1305 fonksiyonları:
ENCRYPT(k, n, plaintext, ad) ve DECRYPT(k, n, ciphertext, ad) - <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
 ve <a href="https://tools.ietf.org/html/rfc7539">RFC-7539</a>
 belgelerindeki gibi</li>
<li>X25519 DH fonksiyonları - <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 ve <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
 belgelerindeki gibi</li>
<li>HKDF(salt, ikm, info, n) - <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 ve <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
 belgelerindeki gibi</li>
</ul>
<p>Başka yerlerde tanımlanan diğer Noise (kriptografik el sıkışma protokolü) işlevleri:</p>
<ul>
<li>MixHash(d) - <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 ve <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
&lsquo;de olduğu gibi</li>
<li>MixKey(d) - <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 ve <a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
&lsquo;de olduğu gibi</li>
</ul>
<h3 id="hedefler">Hedefler</h3>
<h3 id="amaçlanmayanlar">Amaçlanmayanlar</h3>
<ul>
<li>Bir &ldquo;flag day&rdquo; (eşgüdümlü, aynı anda yapılan zorunlu geçiş) gerektiren tunnel kurulum mesajlarının tamamen yeniden tasarlanması.</li>
<li>tunnel kurulum mesajlarının küçültülmesi (tüm atlamaların ECIES olması ve yeni bir öneri gerektirir)</li>
<li><a href="../../../tr/proposals/143-build-message-options">Proposal 143</a>
&rsquo;te tanımlandığı üzere tunnel kurulum seçeneklerinin kullanımı, yalnızca küçük mesajlar için gereklidir</li>
<li>Çift yönlü tunnel&rsquo;lar - bunun için bkz. <a href="../../../tr/proposals/119-bidirectional-tunnels">Proposal 119</a>
</li>
<li>Daha küçük tunnel kurulum mesajları - bunun için bkz. <a href="../../../tr/proposals/157-new-tbm">Proposal 157</a>
</li>
</ul>
<h2 id="tehdit-modeli">Tehdit Modeli</h2>
<h3 id="tasarım-hedefleri">Tasarım Hedefleri</h3>
<ul>
<li>
<p>Hiçbir atlama, tunnel&rsquo;in başlatıcısını tespit edemez.</p>
</li>
<li>
<p>Ara atlamalar, tunnel&rsquo;in yönünü
ya da tunnel içindeki konumlarını belirleyememelidir.</p>
</li>
<li>
<p>Hiçbir atlama, diğer istek veya yanıt kayıtlarının herhangi bir içeriğini okuyamaz, hariç
bir sonraki atlama için kısaltılmış router hash ve geçici anahtar</p>
</li>
<li>
<p>Giden tunnel oluşturma için kullanılan reply tunnel&rsquo;in hiçbir üyesi herhangi bir yanıt kaydını okuyamaz.</p>
</li>
<li>
<p>Gelen oluşturma (inbound build) için kullanılan outbound tunnel&rsquo;ın hiçbir üyesi,
OBEP (Outbound Endpoint)&lsquo;in IBGW (Inbound Gateway) için kısaltılmış router karma değerini ve geçici anahtarı görebilmesi istisnası dışında, herhangi bir istek kaydını okuyamaz</p>
</li>
</ul>
<h3 id="etiketleme-saldırıları">Etiketleme Saldırıları</h3>
<p>Tunnel oluşturma tasarımının başlıca hedeflerinden biri, işbirliği yapan router X ve Y&rsquo;nin tek bir tunnel içinde olduklarını bilmelerini zorlaştırmaktır. Eğer router X m. atlamada ve router Y m+1. atlamadaysa, bunu elbette bileceklerdir. Ancak router X m. atlamada ve router Y m+n. atlamadaysa (n&gt;1), bunu bilmeleri çok daha zor olmalıdır.</p>
<p>Etiketleme saldırıları, orta atlama router X&rsquo;in, tunnel oluşturma mesajını, bu mesaj router Y&rsquo;ye ulaştığında router Y&rsquo;nin değişikliği saptayabileceği biçimde değiştirmesine dayanır. Amaç, değiştirilen her mesajın, router Y&rsquo;ye ulaşmadan önce X ile Y arasındaki bir router tarafından düşürülmesidir. Router Y&rsquo;den önce düşürülmeyen değişiklikler için, tunnel oluşturucusu yanıttaki bozulmayı algılamalı ve tunnel&rsquo;ı atmalıdır.</p>
<p>Olası saldırılar:</p>
<ul>
<li>Bir derleme kaydını düzenle</li>
<li>Bir derleme kaydını değiştir</li>
<li>Bir derleme kaydı ekle veya kaldır</li>
<li>Derleme kayıtlarını yeniden sırala</li>
</ul>
<p>TODO: Mevcut tasarım tüm bu saldırıları önlüyor mu?</p>
<h2 id="tasarım">Tasarım</h2>
<h3 id="noise-protokol-çerçevesi">Noise Protokol Çerçevesi</h3>
<p>Bu öneri, Noise Protocol Framework (Noise Protokol Çatısı) <a href="https://noiseprotocol.org/noise.html">NOISE</a>
 (Revizyon 34, 2018-07-11) temel alınarak gereksinimleri tanımlar. Noise terminolojisinde, Alice başlatan, Bob ise yanıtlayandır.</p>
<p>Bu öneri, Noise protokolü Noise_N_25519_ChaChaPoly_SHA256 üzerine dayanmaktadır. Bu Noise protokolü aşağıdaki kriptografik ilkeleri kullanır:</p>
<ul>
<li>
<p>Tek Yönlü El Sıkışma Deseni: N
Alice, statik anahtarını Bob&rsquo;a iletmez (N)</p>
</li>
<li>
<p>DH Fonksiyonu (Diffie-Hellman): X25519
X25519 DH, <a href="https://tools.ietf.org/html/rfc7748">RFC-7748</a>
 belgesinde belirtildiği gibi 32 bayt anahtar uzunluğuna sahiptir.</p>
</li>
<li>
<p>Şifreleme İşlevi: ChaChaPoly
AEAD_CHACHA20_POLY1305, <a href="https://tools.ietf.org/html/rfc7539">RFC-7539</a>
 bölüm 2.8&rsquo;de belirtildiği gibi.
12 baytlık nonce (tek kullanımlık sayı), ilk 4 baytı sıfıra ayarlanmış.
<a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 içindekiyle aynıdır.</p>
</li>
<li>
<p>Özet Fonksiyonu: SHA256
Standart 32 baytlık özet, I2P&rsquo;de halihazırda yaygın olarak kullanılıyor.</p>
</li>
</ul>
<h4 id="çerçeveye-eklemeler">Çerçeveye eklemeler</h4>
<p>Hiçbiri.</p>
<h3 id="el-sıkışma-kalıpları">El Sıkışma Kalıpları</h3>
<p>El sıkışma işlemleri <a href="https://noiseprotocol.org/noise.html">Noise</a>
 el sıkışma desenlerini kullanır.</p>
<p>Aşağıdaki harf eşlemesi kullanılır:</p>
<ul>
<li>e = tek kullanımlık geçici anahtar</li>
<li>s = statik anahtar</li>
<li>p = mesaj yükü</li>
</ul>
<p>Oluşturma isteği, Noise N pattern (Noise N deseni) ile özdeştir. Bu ayrıca <a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
 içinde kullanılan XK pattern (XK deseni) içindeki ilk (Session Request - Oturum İsteği) iletiyle de özdeştir.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>&lt;- s
</span></span><span style="display:flex;"><span>  ...
</span></span><span style="display:flex;"><span>  e es p -&gt;
</span></span></code></pre></div><h3 id="istek-şifrelemesi">İstek şifrelemesi</h3>
<p>Build request kayıtları, tunnel oluşturucusu tarafından oluşturulur ve her bir atlama için asimetrik olarak şifrelenir. Bu istek kayıtlarının asimetrik şifrelemesi, şu anda <a href="../../../tr/docs/specs/cryptography/">Cryptography</a>
 bölümünde tanımlandığı üzere ElGamal&rsquo;dır ve bir SHA-256 sağlama toplamı içerir. Bu tasarım ileri gizlilik sağlamaz.</p>
<p>Yeni tasarım, ileri gizlilik, bütünlük ve kimlik doğrulama için ECIES-X25519 ephemeral-static DH ile tek yönlü Noise deseni &ldquo;N&rdquo;, bir HKDF ve ChaCha20/Poly1305 AEAD kullanacaktır. Alice, tunnel oluşturma isteğinde bulunan taraftır. tunnel içindeki her atlama noktası bir Bob&rsquo;dur.</p>
<p>(Yük Güvenlik Özellikleri)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>N:                      Authentication   Confidentiality
</span></span><span style="display:flex;"><span>    -&gt; e, es                  0                2
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Authentication: None (0).
</span></span><span style="display:flex;"><span>    This payload may have been sent by any party, including an active attacker.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Confidentiality: 2.
</span></span><span style="display:flex;"><span>    Encryption to a known recipient, forward secrecy for sender compromise
</span></span><span style="display:flex;"><span>    only, vulnerable to replay.  This payload is encrypted based only on DHs
</span></span><span style="display:flex;"><span>    involving the recipient&#39;s static key pair.  If the recipient&#39;s static
</span></span><span style="display:flex;"><span>    private key is compromised, even at a later date, this payload can be
</span></span><span style="display:flex;"><span>    decrypted.  This message can also be replayed, since there&#39;s no ephemeral
</span></span><span style="display:flex;"><span>    contribution from the recipient.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &#34;e&#34;: Alice generates a new ephemeral key pair and stores it in the e
</span></span><span style="display:flex;"><span>         variable, writes the ephemeral public key as cleartext into the
</span></span><span style="display:flex;"><span>         message buffer, and hashes the public key along with the old h to
</span></span><span style="display:flex;"><span>         derive a new h.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &#34;es&#34;: A DH is performed between the Alice&#39;s ephemeral key pair and the
</span></span><span style="display:flex;"><span>          Bob&#39;s static key pair.  The result is hashed along with the old ck to
</span></span><span style="display:flex;"><span>          derive a new ck and k, and n is set to zero.
</span></span></code></pre></div><h3 id="yanıt-şifreleme">Yanıt şifreleme</h3>
<p>Oluşturma yanıt kayıtları, atlamanın (hop) oluşturucusu tarafından oluşturulur ve oluşturucuya simetrik olarak şifrelenir. Bu yanıt kayıtlarının simetrik şifrelemesi, şu anda başına eklenmiş bir SHA-256 sağlama toplamıyla birlikte AES kullanır. Bu tasarım ileri gizlilik (forward secrecy) sağlamaz.</p>
<p>Yeni tasarım, bütünlük ve kimlik doğrulama için ChaCha20/Poly1305 AEAD (Authenticated Encryption with Associated Data — ilişkili verili kimlik doğrulamalı şifreleme) kullanacak.</p>
<h3 id="gerekçe">Gerekçe</h3>
<p>İstekteki geçici açık anahtarın AES veya Elligator2 ile gizlenmesine gerek yoktur. Bunu yalnızca bir önceki atlama görebilir ve o atlama bir sonraki atlamanın ECIES kullandığını bilir.</p>
<p>Yanıt kayıtları, başka bir DH (Diffie-Hellman anahtar değişimi) ile tam kapsamlı asimetrik şifreleme gerektirmez.</p>
<h2 id="spesifikasyon">Spesifikasyon</h2>
<h3 id="oluşturma-isteği-kayıtları">Oluşturma İsteği Kayıtları</h3>
<p>Uyumluluk amacıyla, Encrypted BuildRequestRecords (şifrelenmiş oluşturma isteği kayıtları) hem ElGamal hem de ECIES için 528 bayttır.</p>
<h4 id="şifrelenmemiş-istek-kaydı-elgamal">Şifrelenmemiş İstek Kaydı (ElGamal)</h4>
<p>Referans olması açısından, bu, ElGamal router&rsquo;lar için tunnel BuildRequestRecord&rsquo;un <a href="../../../tr/docs/specs/i2np/">I2NP</a>
&rsquo;ten alınmış güncel belirtimidir. Şifrelenmeden önce, <a href="../../../tr/docs/specs/cryptography/">Kriptografi</a>
&lsquo;de tanımlandığı gibi, şifrelenmemiş verinin başına sıfır olmayan bir bayt ve verinin SHA-256 özeti eklenir.</p>
<p>Tüm alanlar big-endian (yüksek anlamlı bayt önce) düzenindedir.</p>
<p>Şifrelenmemiş boyut: 222 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes     0-3: tunnel ID to receive messages as, nonzero
</span></span><span style="display:flex;"><span>  bytes    4-35: local router identity hash
</span></span><span style="display:flex;"><span>  bytes   36-39: next tunnel ID, nonzero
</span></span><span style="display:flex;"><span>  bytes   40-71: next router identity hash
</span></span><span style="display:flex;"><span>  bytes  72-103: AES-256 tunnel layer key
</span></span><span style="display:flex;"><span>  bytes 104-135: AES-256 tunnel IV key
</span></span><span style="display:flex;"><span>  bytes 136-167: AES-256 reply key
</span></span><span style="display:flex;"><span>  bytes 168-183: AES-256 reply IV
</span></span><span style="display:flex;"><span>  byte      184: flags
</span></span><span style="display:flex;"><span>  bytes 185-188: request time (in hours since the epoch, rounded down)
</span></span><span style="display:flex;"><span>  bytes 189-192: next message ID
</span></span><span style="display:flex;"><span>  bytes 193-221: uninterpreted / random padding
</span></span></code></pre></div><h4 id="şifrelenmiş-istek-kaydı-elgamal">Şifrelenmiş İstek Kaydı (ElGamal)</h4>
<p>Referans olması için, bu metin <a href="../../../tr/docs/specs/i2np/">I2NP</a>
 belgesinden alınmış ElGamal routers için tunnel BuildRequestRecord&rsquo;un güncel belirtimidir.</p>
<p>Şifrelenmiş boyut: 528 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes    0-15: Hop&#39;s truncated identity hash
</span></span><span style="display:flex;"><span>  bytes  16-528: ElGamal encrypted BuildRequestRecord
</span></span></code></pre></div><h4 id="istek-kaydı-şifrelenmemiş-ecies---eliptik-eğri-entegre-şifreleme-şeması">İstek Kaydı Şifrelenmemiş (ECIES - Eliptik Eğri Entegre Şifreleme Şeması)</h4>
<p>Bu, ECIES-X25519 routers için tunnel BuildRequestRecord (tunnel oluşturma isteği kaydı) için önerilen spesifikasyondur. Değişikliklerin özeti:</p>
<ul>
<li>Kullanılmayan 32 baytlık router hash&rsquo;ini kaldır</li>
<li>İstek zamanını saatlerden dakikalara değiştir</li>
<li>İleride değişken tunnel süresi için bir sona erme alanı ekle</li>
<li>Bayraklar için daha fazla alan ekle</li>
<li>Ek derleme seçenekleri için Eşleme ekle</li>
<li>Atlamanın kendi yanıt kaydı için AES-256 yanıt anahtarı ve IV (başlatma vektörü) kullanılmaz</li>
<li>Şifrelenmemiş kayıt, şifreleme ek yükü daha az olduğu için daha uzundur</li>
</ul>
<p>İstek kaydı hiçbir ChaCha yanıt anahtarı içermez. Bu anahtarlar bir KDF&rsquo;den (anahtar türetme fonksiyonu) türetilir. Aşağıya bakın.</p>
<p>Tüm alanlar big-endian bayt sıralamasındadır (en anlamlı bayt önce).</p>
<p>Şifrelenmemiş boyut: 464 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes     0-3: tunnel ID to receive messages as, nonzero
</span></span><span style="display:flex;"><span>  bytes     4-7: next tunnel ID, nonzero
</span></span><span style="display:flex;"><span>  bytes    8-39: next router identity hash
</span></span><span style="display:flex;"><span>  bytes   40-71: AES-256 tunnel layer key
</span></span><span style="display:flex;"><span>  bytes  72-103: AES-256 tunnel IV key
</span></span><span style="display:flex;"><span>  bytes 104-135: AES-256 reply key
</span></span><span style="display:flex;"><span>  bytes 136-151: AES-256 reply IV
</span></span><span style="display:flex;"><span>  byte      152: flags
</span></span><span style="display:flex;"><span>  bytes 153-155: more flags, unused, set to 0 for compatibility
</span></span><span style="display:flex;"><span>  bytes 156-159: request time (in minutes since the epoch, rounded down)
</span></span><span style="display:flex;"><span>  bytes 160-163: request expiration (in seconds since creation)
</span></span><span style="display:flex;"><span>  bytes 164-167: next message ID
</span></span><span style="display:flex;"><span>  bytes   168-x: tunnel build options (Mapping)
</span></span><span style="display:flex;"><span>  bytes     x-x: other data as implied by flags or options
</span></span><span style="display:flex;"><span>  bytes   x-463: random padding
</span></span></code></pre></div><p>Bayraklar alanı, <a href="../../../tr/docs/specs/implementation/">Tunnel Creation</a>
 bölümünde tanımlananla aynıdır ve aşağıdakileri içerir::</p>
<p>Bit sırası: 76543210 (bit 7 MSB&rsquo;dir (en anlamlı bit))  bit 7: ayarlıysa, herhangi birinden gelen mesajlara izin ver  bit 6: ayarlıysa, herkese mesaj gönderimine izin ver ve yanıtı şuna gönder</p>
<pre><code>    specified next hop in a Tunnel Build Reply Message
</code></pre>
<p>bitler 5-0: Tanımsız, gelecekteki seçeneklerle uyumluluk için 0 olarak ayarlanmalıdır</p>
<ol start="7">
<li>bit, atlamanın bir gelen ağ geçidi (IBGW) olacağını belirtir. 6. bit, atlamanın bir giden uç nokta (OBEP) olacağını belirtir. Her iki bit de ayarlanmadıysa, atlama ara katılımcı olacaktır. İkisi birden aynı anda ayarlanamaz.</li>
</ol>
<p>İstek zaman aşımı, ileride değişken tunnel sürelerini desteklemek içindir. Şimdilik desteklenen tek değer 600&rsquo;dür (10 dakika).</p>
<p>tunnel oluşturma seçenekleri, <a href="../../../tr/docs/specs/common-structures/">Common Structures</a>
 bölümünde tanımlandığı gibi bir Mapping yapısıdır (eşleme yapısı). Bu, gelecekte kullanım içindir. Şu anda tanımlı herhangi bir seçenek yoktur. Mapping yapısı boşsa, bu iki bayttır: 0x00 0x00. Mapping&rsquo;in azami boyutu (uzunluk alanı dahil) 296 bayttır ve Mapping uzunluk alanının alabileceği en yüksek değer 294&rsquo;tür.</p>
<h4 id="şifrelenmiş-istek-kaydı-ecies">Şifrelenmiş İstek Kaydı (ECIES)</h4>
<p>Tüm alanlar big-endian (büyük uçlu bayt sıralaması) olup, bunun istisnası little-endian (küçük uçlu bayt sıralaması) olan geçici açık anahtardır.</p>
<p>Şifrelenmiş boyut: 528 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes    0-15: Hop&#39;s truncated identity hash
</span></span><span style="display:flex;"><span>  bytes   16-47: Sender&#39;s ephemeral X25519 public key
</span></span><span style="display:flex;"><span>  bytes  48-511: ChaCha20 encrypted BuildRequestRecord
</span></span><span style="display:flex;"><span>  bytes 512-527: Poly1305 MAC
</span></span></code></pre></div><h3 id="oluşturma-yanıt-kayıtları">Oluşturma Yanıt Kayıtları</h3>
<p>Uyumluluk amacıyla, şifrelenmiş BuildReplyRecords (tünel oluşturma yanıt kayıtları) hem ElGamal hem de ECIES için 528 bayttır.</p>
<h4 id="şifrelenmemiş-yanıt-kaydı-elgamal">Şifrelenmemiş Yanıt Kaydı (ElGamal)</h4>
<p>ElGamal (açık anahtarlı şifreleme algoritması) yanıtları AES (simetrik şifreleme standardı) ile şifrelenir.</p>
<p>Tüm alanlar big-endian biçimindedir (en anlamlı baytın önce geldiği bayt sıralaması).</p>
<p>Şifrelenmemiş boyut: 528 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes   0-31: SHA-256 Hash of bytes 32-527
</span></span><span style="display:flex;"><span>  bytes 32-526: random data
</span></span><span style="display:flex;"><span>  byte     527: reply
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  total length: 528
</span></span></code></pre></div><h4 id="şifrelenmemiş-yanıt-kaydı-ecies---eliptik-eğri-bütünleşik-şifreleme-şeması">Şifrelenmemiş Yanıt Kaydı (ECIES - Eliptik Eğri Bütünleşik Şifreleme Şeması)</h4>
<p>Bu, ECIES-X25519 router&rsquo;lar için tunnel BuildReplyRecord&rsquo;un önerilen belirtimidir. Değişikliklerin özeti:</p>
<ul>
<li>build reply options (build yanıt seçenekleri) için Mapping ekle</li>
<li>Şifrelenmemiş kayıt, daha az şifreleme ek yükü olduğu için daha uzundur</li>
</ul>
<p>ECIES (Eliptik Eğri Entegre Şifreleme Şeması) yanıtları ChaCha20/Poly1305 ile şifrelenir.</p>
<p>Tüm alanlar big-endian&rsquo;dır (en anlamlı bayt önce).</p>
<p>Şifrelenmemiş boyut: 512 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes    0-x: Tunnel Build Reply Options (Mapping)
</span></span><span style="display:flex;"><span>  bytes    x-x: other data as implied by options
</span></span><span style="display:flex;"><span>  bytes  x-510: Random padding
</span></span><span style="display:flex;"><span>  byte     511: Reply byte
</span></span></code></pre></div><p>tunnel oluşturma yanıtı seçenekleri, <a href="../../../tr/docs/specs/common-structures/">Ortak Yapılar</a>
 bölümünde tanımlandığı gibi bir Mapping (eşleme) yapısıdır. Bu, gelecekte kullanım içindir. Şu anda herhangi bir seçenek tanımlı değildir. Mapping yapısı boşsa, bu iki bayttır: 0x00 0x00. Mapping&rsquo;in (uzunluk alanı dahil) azami boyutu 511 bayttır ve Mapping uzunluk alanının alabileceği azami değer 509&rsquo;dur.</p>
<p>Yanıt baytı, parmak izi çıkarımını önlemek için <a href="../../../tr/docs/specs/implementation/">Tunnel Creation</a>
&lsquo;da tanımlandığı üzere aşağıdaki değerlerden biridir:</p>
<ul>
<li>0x00 (kabul)</li>
<li>30 (TUNNEL_REJECT_BANDWIDTH - bant genişliği nedeniyle reddedildi)</li>
</ul>
<h4 id="yanıt-kaydı-şifreli-ecies---eliptik-eğri-tabanlı-entegre-şifreleme-şeması">Yanıt Kaydı Şifreli (ECIES - Eliptik Eğri Tabanlı Entegre Şifreleme Şeması)</h4>
<p>Şifrelenmiş boyut: 528 bayt</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>bytes   0-511: ChaCha20 encrypted BuildReplyRecord
</span></span><span style="display:flex;"><span>  bytes 512-527: Poly1305 MAC
</span></span></code></pre></div><p>ECIES (Eliptik Eğri Entegre Şifreleme Şeması) kayıtlarına tam geçişten sonra, aralıklandırılmış dolgu kuralları, istek kayıtları için olanlarla aynıdır.</p>
<h3 id="kayıtların-simetrik-olarak-şifrelenmesi">Kayıtların simetrik olarak şifrelenmesi</h3>
<p>Karma tunnels kullanımı, ElGamal&rsquo;dan ECIES&rsquo;e geçiş için hem izinli hem de gereklidir. Geçiş dönemi boyunca, giderek daha fazla router ECIES anahtarlarıyla yapılandırılacaktır.</p>
<p>Simetrik şifreleme için ön işleme aynı şekilde çalışacaktır:</p>
<ul>
<li>
<p>&ldquo;encryption&rdquo;:</p>
</li>
<li>
<p>şifreleme algoritması şifre çözme modunda çalıştırılır</p>
<ul>
<li>istek kayıtlarının şifresi ön işleme aşamasında önceden çözülür (şifreli istek kayıtlarını gizleyerek)</li>
</ul>
</li>
<li>
<p>&ldquo;şifre çözme&rdquo;:</p>
</li>
<li>
<p>şifreleme modunda çalışan şifreleme algoritması</p>
<ul>
<li>istek kayıtları, katılımcı atlamalar tarafından şifrelenir (bir sonraki açık metin istek kaydını ortaya çıkararak)</li>
</ul>
</li>
<li>
<p>ChaCha20&rsquo;nun &ldquo;çalışma kipleri&rdquo; yoktur, bu nedenle yalnızca üç kez çalıştırılır:</p>
</li>
<li>
<p>ön işleme sırasında bir kez</p>
<ul>
<li>her atlamada bir kez</li>
<li>nihai yanıtın işlenmesi sırasında bir kez</li>
</ul>
</li>
</ul>
<p>Karma tunnel&rsquo;lar kullanıldığında, tunnel oluşturucularının BuildRequestRecord için kullanılan simetrik şifrelemeyi mevcut ve önceki atlamanın şifreleme türüne dayandırmaları gerekecektir.</p>
<p>Her atlama, BuildReplyRecords (inşa yanıt kayıtları) ile VariableTunnelBuildMessage (VTBM) (değişken tünel inşa mesajı) içindeki diğer kayıtları şifrelemek için kendi şifreleme türünü kullanacaktır.</p>
<p>Yanıt yolunda, uç nokta (gönderici), her atlamanın yanıt anahtarını kullanarak <a href="https://en.wikipedia.org/wiki/Multiple_encryption">Multiple Encryption</a>
 katmanlarını çözmek zorundadır.</p>
<p>Açıklayıcı bir örnek olarak, ElGamal (genel anahtarlı şifreleme algoritması) ile sarmalanmış ECIES (Eliptik Eğri Tümleşik Şifreleme Şeması) kullanan bir giden tunnel örneğine bakalım:</p>
<ul>
<li>Gönderici (OBGW) -&gt; ElGamal (H1) -&gt; ECIES (H2) -&gt; ElGamal (H3)</li>
</ul>
<p>Tüm BuildRequestRecords (oluşturma isteği kayıtları) şifrelenmiş durumdadır (ElGamal veya ECIES kullanılarak).</p>
<p>AES256/CBC şifrelemesi, kullanıldığında, yine her kayıt için ayrı ayrı kullanılır; birden fazla kayıt arasında zincirleme yapılmaz.</p>
<p>Benzer şekilde, ChaCha20 her bir kaydı şifrelemek için kullanılacak, tüm VTBM boyunca akış halinde değil.</p>
<p>İstek kayıtları Gönderici (OBGW) tarafından ön işlemden geçirilir:</p>
<ul>
<li>
<p>H3&rsquo;nin kaydı, aşağıdakiler kullanılarak &ldquo;şifrelenir&rdquo;:</p>
</li>
<li>
<p>H2&rsquo;nin yanıt anahtarı (ChaCha20)</p>
<ul>
<li>H1&rsquo;in yanıt anahtarı (AES256/CBC)</li>
</ul>
</li>
<li>
<p>H2&rsquo;nin kaydı şu kullanılarak &ldquo;şifrelenir&rdquo;:</p>
</li>
<li>
<p>H1&rsquo;in yanıt anahtarı (AES256/CBC)</p>
</li>
<li>
<p>H1&rsquo;in kaydı simetrik şifreleme olmadan gönderilir</p>
</li>
</ul>
<p>Yalnızca H2 yanıt şifreleme bayrağını kontrol eder ve devamında AES256/CBC olduğunu görür.</p>
<p>Her bir atlama tarafından işlemden geçirildikten sonra, kayıtlar &ldquo;şifresi çözülmüş&rdquo; durumdadır:</p>
<ul>
<li>
<p>H3&rsquo;ün kaydı, şu kullanılarak &ldquo;şifresi çözülür&rdquo;:</p>
</li>
<li>
<p>H3 için yanıt anahtarı (AES256/CBC)</p>
</li>
<li>
<p>H2&rsquo;nin kaydı şu kullanılarak &ldquo;deşifre edilir&rdquo;:</p>
</li>
<li>
<p>H3&rsquo;ün yanıt anahtarı (AES256/CBC)</p>
<ul>
<li>H2&rsquo;nin yanıt anahtarı (ChaCha20-Poly1305)</li>
</ul>
</li>
<li>
<p>H1&rsquo;in kaydı, şunlar kullanılarak &ldquo;şifresi çözülür&rdquo;:</p>
</li>
<li>
<p>H3&rsquo;ün yanıt anahtarı (AES256/CBC)</p>
<ul>
<li>H2&rsquo;nin yanıt anahtarı (ChaCha20)</li>
<li>H1&rsquo;in yanıt anahtarı (AES256/CBC)</li>
</ul>
</li>
</ul>
<p>Tunnel oluşturucusu, diğer adıyla Inbound Endpoint (IBEP) (gelen uç noktası), yanıtı son işlemden geçirir:</p>
<ul>
<li>
<p>H3&rsquo;nin kaydı, şunlar kullanılarak &ldquo;şifrelenmiş&quot;tir:</p>
</li>
<li>
<p>H3&rsquo;nin yanıt anahtarı (AES256/CBC)</p>
</li>
<li>
<p>H2&rsquo;nin kaydı aşağıdakiler kullanılarak &ldquo;şifrelenir&rdquo;:</p>
</li>
<li>
<p>H3&rsquo;ün yanıt anahtarı (AES256/CBC)</p>
<ul>
<li>H2&rsquo;nin yanıt anahtarı (ChaCha20-Poly1305)</li>
</ul>
</li>
<li>
<p>H1&rsquo;in kaydı şu kullanılarak &ldquo;şifrelenir&rdquo;:</p>
</li>
<li>
<p>H3&rsquo;ün yanıt anahtarı (AES256/CBC)</p>
<ul>
<li>H2&rsquo;nin yanıt anahtarı (ChaCha20)</li>
<li>H1&rsquo;in yanıt anahtarı (AES256/CBC)</li>
</ul>
</li>
</ul>
<h3 id="istek-kaydı-anahtarları-ecies">İstek Kaydı Anahtarları (ECIES)</h3>
<p>Bu anahtarlar, ElGamal BuildRequestRecords (tunnel oluşturma isteği kayıtları) içinde açıkça yer alır. ECIES BuildRequestRecords için, tunnel anahtarları ve AES yanıt anahtarları dahil edilir, ancak ChaCha yanıt anahtarları DH değişiminden türetilir. router’ın statik ECIES anahtarlarına ilişkin ayrıntılar için <a href="../../../tr/proposals/156-ecies-routers">Proposal 156</a>
 belgesine bakın.</p>
<p>Aşağıda, istek kayıtlarında daha önce iletilen anahtarların nasıl türetileceğine dair bir açıklama yer almaktadır.</p>
<h4 id="başlangıç-ck-ve-h-için-kdf-anahtar-türetme-fonksiyonu">Başlangıç ck ve h için KDF (anahtar türetme fonksiyonu)</h4>
<p>Bu, desen &ldquo;N&rdquo; için, standart bir protokol adıyla kullanılan standart <a href="https://noiseprotocol.org/noise.html">NOISE</a>
 uygulamasıdır.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>This is the &#34;e&#34; message pattern:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Define protocol_name.
</span></span><span style="display:flex;"><span>  Set protocol_name = &#34;Noise_N_25519_ChaChaPoly_SHA256&#34;
</span></span><span style="display:flex;"><span>  (31 bytes, US-ASCII encoded, no NULL termination).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Define Hash h = 32 bytes
</span></span><span style="display:flex;"><span>  // Pad to 32 bytes. Do NOT hash it, because it is not more than 32 bytes.
</span></span><span style="display:flex;"><span>  h = protocol_name || 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Define ck = 32 byte chaining key. Copy the h data to ck.
</span></span><span style="display:flex;"><span>  Set chainKey = h
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // MixHash(null prologue)
</span></span><span style="display:flex;"><span>  h = SHA256(h);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // up until here, can all be precalculated by all routers.
</span></span></code></pre></div><h4 id="istek-kaydı-için-kdf">İstek Kaydı için KDF</h4>
<p>ElGamal tunnel oluşturucuları, tunnel içindeki her ECIES hop (geçiş noktası) için geçici bir X25519 anahtar çifti oluşturur ve BuildRequestRecord verilerini şifrelemek için yukarıdaki yöntemi kullanır. ElGamal tunnel oluşturucuları, ElGamal hoplara şifreleme yaparken bu spesifikasyondan önceki yöntemi kullanacaktır.</p>
<p>ECIES tunnel oluşturucularının, <a href="../../../tr/docs/specs/implementation/">Tunnel Creation</a>
 bölümünde tanımlanan şemayı kullanarak her bir ElGamal hop (atlama) genel anahtarına şifreleme yapmaları gerekecektir. ECIES tunnel oluşturucuları, ECIES hop&rsquo;lara şifreleme yapmak için yukarıdaki şemayı kullanacaktır.</p>
<p>Bu, tunnel üzerindeki ara düğümlerin yalnızca kendi şifreleme türleriyle şifrelenmiş kayıtları göreceği anlamına gelir.</p>
<p>ElGamal ve ECIES tunnel oluşturucuları, ECIES atlamalarına şifreli olarak iletmek için her atlama başına benzersiz ve geçici X25519 anahtar çiftleri oluşturacaklardır.</p>
<p><strong>ÖNEMLİ</strong>: Geçici anahtarlar, her ECIES atlaması ve her oluşturma kaydı için benzersiz olmalıdır. Benzersiz anahtarlar kullanmamak, işbirliği yapan atlamaların aynı tunnel içinde olduklarını doğrulamalarına olanak tanıyan bir saldırı vektörü açar.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// Each hop&#39;s X25519 static keypair (hesk, hepk) from the Router Identity
</span></span><span style="display:flex;"><span>  hesk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  hepk = DERIVE_PUBLIC(hesk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // MixHash(hepk)
</span></span><span style="display:flex;"><span>  // || below means append
</span></span><span style="display:flex;"><span>  h = SHA256(h || hepk);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // up until here, can all be precalculated by each router
</span></span><span style="display:flex;"><span>  // for all incoming build requests
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Sender generates an X25519 ephemeral keypair per ECIES hop in the VTBM (sesk, sepk)
</span></span><span style="display:flex;"><span>  sesk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  sepk = DERIVE_PUBLIC(sesk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // MixHash(sepk)
</span></span><span style="display:flex;"><span>  h = SHA256(h || sepk);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  End of &#34;e&#34; message pattern.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  This is the &#34;es&#34; message pattern:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Noise es
</span></span><span style="display:flex;"><span>  // Sender performs an X25519 DH with Hop&#39;s static public key.
</span></span><span style="display:flex;"><span>  // Each Hop, finds the record w/ their truncated identity hash,
</span></span><span style="display:flex;"><span>  // and extracts the Sender&#39;s ephemeral key preceding the encrypted record.
</span></span><span style="display:flex;"><span>  sharedSecret = DH(sesk, hepk) = DH(hesk, sepk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // MixKey(DH())
</span></span><span style="display:flex;"><span>  //[chainKey, k] = MixKey(sharedSecret)
</span></span><span style="display:flex;"><span>  // ChaChaPoly parameters to encrypt/decrypt
</span></span><span style="display:flex;"><span>  keydata = HKDF(chainKey, sharedSecret, &#34;&#34;, 64)
</span></span><span style="display:flex;"><span>  // Save for Reply Record KDF
</span></span><span style="display:flex;"><span>  chainKey = keydata[0:31]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // AEAD parameters
</span></span><span style="display:flex;"><span>  k = keydata[32:63]
</span></span><span style="display:flex;"><span>  n = 0
</span></span><span style="display:flex;"><span>  plaintext = 464 byte build request record
</span></span><span style="display:flex;"><span>  ad = h
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, plaintext, ad)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  End of &#34;es&#34; message pattern.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // MixHash(ciphertext)
</span></span><span style="display:flex;"><span>  // Save for Reply Record KDF
</span></span><span style="display:flex;"><span>  h = SHA256(h || ciphertext)
</span></span></code></pre></div><p><code>replyKey</code>, <code>layerKey</code> ve <code>layerIV</code> hâlâ ElGamal kayıtlarının içine dahil edilmelidir ve rastgele oluşturulabilir.</p>
<h3 id="istek-kaydı-şifrelemesi-elgamal-açık-anahtarlı-şifreleme-algoritması">İstek Kaydı Şifrelemesi (ElGamal; açık anahtarlı şifreleme algoritması)</h3>
<p><a href="../../../tr/docs/specs/implementation/">Tunnel Oluşturma</a>
 içinde tanımlandığı gibi. ElGamal atlamaları için şifrelemede herhangi bir değişiklik yoktur.</p>
<h3 id="yanıt-kaydı-şifrelemesi-ecies---eliptik-eğri-entegre-şifreleme-şeması">Yanıt Kaydı Şifrelemesi (ECIES - Eliptik Eğri Entegre Şifreleme Şeması)</h3>
<p>Yanıt kaydı ChaCha20/Poly1305 ile şifrelenir.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// AEAD parameters
</span></span><span style="display:flex;"><span>  k = chainkey from build request
</span></span><span style="display:flex;"><span>  n = 0
</span></span><span style="display:flex;"><span>  plaintext = 512 byte build reply record
</span></span><span style="display:flex;"><span>  ad = h from build request
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, plaintext, ad)
</span></span></code></pre></div><h3 id="yanıt-kaydı-şifrelemesi-elgamal-açık-anahtarlı-şifreleme-yöntemi">Yanıt Kaydı Şifrelemesi (ElGamal, açık anahtarlı şifreleme yöntemi)</h3>
<p><a href="../../../tr/docs/specs/implementation/">Tunnel Oluşturma</a>
 bölümünde tanımlandığı gibi. ElGamal atlamaları için şifrelemede herhangi bir değişiklik yoktur.</p>
<h3 id="güvenlik-analizi">Güvenlik Analizi</h3>
<p>ElGamal, Tunnel Build Messages için ileriye dönük gizlilik sağlamaz.</p>
<p>AES256/CBC biraz daha iyi bir konumda, yalnızca bilinen açık metin <code>biclique</code> saldırısından (biclique: çift klik yaklaşımı) kaynaklanan teorik bir zayıflamaya karşı savunmasızdır.</p>
<p>AES256/CBC’ye karşı bilinen tek pratik saldırı, saldırganın IV’yi (başlatma vektörü) bildiği durumda gerçekleştirilebilen bir padding oracle attack (dolgu kehaneti saldırısı)dır.</p>
<p>Bir saldırganın, AES256/CBC anahtar bilgisine (yanıt anahtarı ve IV) erişebilmesi için bir sonraki atlamanın ElGamal şifrelemesini kırması gerekir.</p>
<p>ElGamal (açık anahtar şifreleme şeması), ECIES’e (Eliptik Eğri Entegre Şifreleme Şeması) kıyasla işlemci açısından önemli ölçüde daha yoğundur ve bu da olası kaynak tükenmesine yol açabilir.</p>
<p>ECIES (Eliptik Eğri Tümleşik Şifreleme Şeması), her BuildRequestRecord veya VariableTunnelBuildMessage için yeni geçici anahtarlarla kullanıldığında, ileri gizlilik sağlar.</p>
<p>ChaCha20Poly1305, alıcının şifre çözmeyi denemeden önce mesaj bütünlüğünü doğrulamasına olanak sağlayan AEAD şifrelemesi (İlişkili Verilerle Kimliği Doğrulanmış Şifreleme) sağlar.</p>
<h2 id="gerekçe-1">Gerekçe</h2>
<p>Bu tasarım, mevcut kriptografik yapıtaşlarının, protokollerin ve kodun yeniden kullanımını en üst düzeye çıkarır. Bu tasarım riski en aza indirir.</p>
<h2 id="uygulama-notları">Uygulama Notları</h2>
<ul>
<li>Eski router&rsquo;lar, atlamanın şifreleme türünü kontrol etmez ve ElGamal ile şifrelenmiş
kayıtlar gönderir. Bazı yeni router&rsquo;lar hatalıdır ve çeşitli türlerde hatalı biçimlendirilmiş kayıtlar gönderir.
Uygulayıcılar, mümkünse CPU kullanımını azaltmak için DH (Diffie-Hellman) işlemi öncesinde
bu kayıtları tespit edip reddetmelidir.</li>
</ul>
<h2 id="sorunlar">Sorunlar</h2>
<h2 id="geçiş">Geçiş</h2>
<p>Bkz. <a href="../../../tr/proposals/156-ecies-routers">Öneri 156</a>
.</p>
<h2 id="kaynaklar">Kaynaklar</h2>
<ul>
<li><a href="../../../tr/docs/specs/common-structures/">Genel</a>
</li>
<li><a href="../../../tr/docs/specs/cryptography/">Kriptografi</a>
</li>
<li><a href="../../../tr/docs/specs/ecies/">ECIES-X25519</a>
</li>
<li><a href="../../../tr/docs/specs/i2np/">I2NP</a>
</li>
<li><a href="https://noiseprotocol.org/noise.html">NOISE</a>
</li>
<li><a href="../../../tr/docs/specs/ntcp2/">NTCP2</a>
</li>
<li><a href="../../../tr/proposals/119-bidirectional-tunnels/">Prop119</a>
</li>
<li><a href="../../../tr/proposals/143-build-message-options/">Prop143</a>
</li>
<li><a href="../../../tr/proposals/153-chacha20-layer-encryption/">Prop153</a>
</li>
<li><a href="../../../tr/proposals/156-ecies-routers/">Prop156</a>
</li>
<li><a href="../../../tr/proposals/157-new-tbm/">Prop157</a>
</li>
<li><a href="../../../tr/docs/specs/implementation/#tunnel-creation-ecies">SPEC</a>
</li>
<li><a href="../../../tr/docs/specs/implementation/">Tunnel-Creation</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/Multiple_encryption">Çoklu Şifreleme</a>
</li>
<li><a href="https://tools.ietf.org/html/rfc7539">RFC-7539</a>
</li>
<li><a href="https://tools.ietf.org/html/rfc7748">RFC-7748</a>
</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../tr/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/152-ecies-tunnels.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">I2P haberleriyle güncel kalın:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="E-posta adresinizi girin" required>
                            <button type="submit">Abone Ol</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Hızlı Bağlantılar</h3>
                <ul>
                    <li><a href="../../../tr/financial-support/">Bağış Yap</a></li>
                    <li><a href="../../../tr/docs/overview/intro/">I2P Tanıtımı</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Topluluk</h3>
                <ul>
                    <li><a href="../../../tr/get-involved/">Katılın</a></li>
                    <li><a href="../../../tr/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Resmi Forumlar</a></li>
                    <li><a href="../../../tr/contact/">İletişim</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Kaynaklar</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metrikleri</a></li>
                    <li><a href="../../../tr/papers/">Araştırma</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Invisible Internet Projesi. Creative Commons altında lisanslanmıştır.</p>
            <div class="footer-links">
                <a href="../../../tr/privacy/">Gizlilik</a>
                <a href="../../../tr/terms/">Şartlar</a>
                <a href="../../../tr/about/media/">Basın</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Kapat">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Topluluk Anketi</h2>
            <p class="modal-subtitle">Sizden haber almaktan memnuniyet duyarız</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Oyunuz I2P&#39;nin geleceğini şekillendirmeye yardımcı olur.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
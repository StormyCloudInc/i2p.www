<!DOCTYPE html>
<html lang="tr" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Yeni netDB Girişleri | I2P - Görünmez İnternet Projesi</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Yeni netDB Girişleri | I2P - Görünmez İnternet Projesi">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/tr/proposals/123-new-netdb-entries/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta Sitesi Artık Yayında E-posta sorunları için stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Banner" title="Banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../tr/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../tr/about/" class="">Hakkında</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../tr/about/">Genel Bakış</a></li>
                            <li><a href="../../../tr/papers/">Araştırma Makaleleri</a></li>
                            <li><a href="../../../tr/about/media/">Basın</a></li>
                            <li><a href="../../../tr/contact/">İletişim</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../tr/docs/" class="">Belgeler</a></li>
                    <li><a href="../../../tr/downloads/" class="">İndirilenler</a></li>
                    <li><a href="../../../tr/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../tr/get-involved/" class="">Katılım Sağla</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../tr/get-involved/">Genel Bakış</a></li>
                            <li><a href="../../../tr/feedback/">Özellik Önerileri</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">tr</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/123-new-netdb-entries/"
                                class="lang-option">İngilizce</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/123-new-netdb-entries/"
                                class="lang-option">İspanyolca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/123-new-netdb-entries/"
                                class="lang-option">Korece</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/123-new-netdb-entries/"
                                class="lang-option">Çince</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/123-new-netdb-entries/"
                                class="lang-option">Rusça</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/123-new-netdb-entries/"
                                class="lang-option">Çekçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/123-new-netdb-entries/"
                                class="lang-option">Almanca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/123-new-netdb-entries/"
                                class="lang-option">Fransızca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/123-new-netdb-entries/"
                                class="lang-option active">Türkçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/123-new-netdb-entries/"
                                class="lang-option">Vietnamca</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/123-new-netdb-entries/"
                                class="lang-option">Hintçe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/123-new-netdb-entries/"
                                class="lang-option">Arapça</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/123-new-netdb-entries/"
                                class="lang-option">Portekizce</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../tr/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../tr/downloads/" class="btn btn-primary">I2P&#39;yi Edin</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../tr/">Home</a>
            <span class="separator">/</span>
            <a href="../../../tr/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Yeni netDB Girişleri</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Bu çeviri makine öğrenimi kullanılarak oluşturulmuştur ve %100 doğru olmayabilir.</span>
    
    
    <a href="../../../en/proposals/123-new-netdb-entries/" class="disclaimer-link">İngilizce versiyonu görüntüle</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Yeni netDB Girişleri</h1>
                <div class="proposal-number">Proposal 123</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-aç">
                    Aç
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz, str4d, orignal</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2016-01-16</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2020-07-18</span>
                    </div>
                    

                    

                    
                </div>

                
                
                <div class="proposal-relationships">
                    
                    <div class="relationship">
                        <span class="relationship-label">Supercedes:</span>
                        <span class="relationship-value">110, 120, 121, 122</span>
                    </div>
                    
                    
                </div>
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#durum">Durum</a></li>
    <li><a href="#genel-bakış">Genel Bakış</a></li>
    <li><a href="#öneri">Öneri</a>
      <ul>
        <li><a href="#goals">Goals</a></li>
        <li><a href="#non-goals--out-of-scope">Non-Goals / Out-of-scope</a></li>
        <li><a href="#justification">Justification</a></li>
        <li><a href="#hedefler">Hedefler</a></li>
        <li><a href="#hedef-olmayanlar--kapsam-dışı">Hedef Olmayanlar / Kapsam Dışı</a></li>
        <li><a href="#gerekçe">Gerekçe</a></li>
        <li><a href="#netdb-veri-türleri">NetDB Veri Türleri</a></li>
        <li><a href="#notlar">Notlar</a></li>
      </ul>
    </li>
    <li><a href="#standard-ls2-header">Standard LS2 Header</a>
      <ul>
        <li><a href="#aramasaklama-süreci">Arama/Saklama süreci</a></li>
        <li><a href="#format">Format</a></li>
        <li><a href="#gizlilikgüvenlik-hususları">Gizlilik/Güvenlik Hususları</a></li>
        <li><a href="#notes">Notes</a></li>
      </ul>
    </li>
    <li><a href="#new-databaseentry-types">New DatabaseEntry types</a>
      <ul>
        <li><a href="#format-1">Format</a></li>
        <li><a href="#gerekçe-1">Gerekçe</a></li>
        <li><a href="#sorunlar">Sorunlar</a></li>
        <li><a href="#notlar-1">Notlar</a></li>
        <li><a href="#new-encryption-issues">New Encryption Issues</a></li>
        <li><a href="#leaseset-2">LeaseSet 2</a></li>
        <li><a href="#format-2">Format</a></li>
        <li><a href="#gerekçe-2">Gerekçe</a></li>
        <li><a href="#tartışma">Tartışma</a></li>
        <li><a href="#yeni-şifreleme-sorunları">Yeni Şifreleme Sorunları</a></li>
        <li><a href="#notlar-2">Notlar</a></li>
        <li><a href="#şifrelenmiş-ls2">Şifrelenmiş LS2</a></li>
        <li><a href="#tanımlar">Tanımlar</a></li>
        <li><a href="#format-3">Format</a></li>
        <li><a href="#notes-1">Notes</a></li>
        <li><a href="#meta-ls2">Meta LS2</a></li>
        <li><a href="#format-4">Format</a></li>
        <li><a href="#körleme-anahtarı-türetimi">Körleme Anahtarı Türetimi</a></li>
        <li><a href="#service-record">Service Record</a></li>
        <li><a href="#format-5">Format</a></li>
        <li><a href="#notes-2">Notes</a></li>
        <li><a href="#service-list">Service List</a></li>
        <li><a href="#format-6">Format</a></li>
        <li><a href="#notes-3">Notes</a></li>
      </ul>
    </li>
    <li><a href="#common-structures-spec-changes-required">Common Structures Spec Changes Required</a>
      <ul>
        <li><a href="#şifreleme-ve-işleme">Şifreleme ve işleme</a></li>
        <li><a href="#new-intermediate-structures">New Intermediate Structures</a></li>
        <li><a href="#new-netdb-types">New NetDB Types</a></li>
        <li><a href="#new-signature-type">New Signature Type</a></li>
      </ul>
    </li>
    <li><a href="#encryption-spec-changes-required">Encryption Spec Changes Required</a></li>
    <li><a href="#i2np-changes-required">I2NP Changes Required</a>
      <ul>
        <li><a href="#database-lookup-message">Database Lookup Message</a></li>
        <li><a href="#changes">Changes</a></li>
        <li><a href="#istemci-başına-yetkilendirme">İstemci başına yetkilendirme</a></li>
        <li><a href="#changes-1">Changes</a></li>
      </ul>
    </li>
    <li><a href="#i2cp-changes-required">I2CP Changes Required</a>
      <ul>
        <li><a href="#i2cp-options">I2CP Options</a></li>
        <li><a href="#session-config">Session Config</a></li>
        <li><a href="#base-32-adresleri-ile-şifrelenmiş-ls">Base 32 Adresleri ile Şifrelenmiş LS</a></li>
        <li><a href="#çevrimdışı-anahtarlarla-şifrelenmiş-ls">Çevrimdışı Anahtarlarla Şifrelenmiş LS</a></li>
        <li><a href="#notlar-3">Notlar</a></li>
        <li><a href="#meta-ls2-1">Meta LS2</a></li>
        <li><a href="#format-7">Format</a></li>
        <li><a href="#notlar-4">Notlar</a></li>
        <li><a href="#hizmet-kaydı">Hizmet Kaydı</a></li>
        <li><a href="#format-8">Format</a></li>
        <li><a href="#notlar-5">Notlar</a></li>
        <li><a href="#servis-listesi">Servis Listesi</a></li>
        <li><a href="#notlar-6">Notlar</a></li>
        <li><a href="#format-9">Format</a></li>
        <li><a href="#anahtar-sertifikaları">Anahtar Sertifikaları</a></li>
        <li><a href="#yeni-ara-yapılar">Yeni Ara Yapılar</a></li>
        <li><a href="#yeni-netdb-türleri">Yeni NetDB Türleri</a></li>
        <li><a href="#yeni-imza-türü">Yeni İmza Türü</a></li>
        <li><a href="#justification-1">Justification</a></li>
        <li><a href="#usage">Usage</a></li>
        <li><a href="#veritabanı-arama-mesajı">Veritabanı Arama Mesajı</a></li>
        <li><a href="#değişiklikler">Değişiklikler</a></li>
        <li><a href="#veritabanı-depolama-mesajı">Veritabanı Depolama Mesajı</a></li>
        <li><a href="#değişiklikler-1">Değişiklikler</a></li>
      </ul>
    </li>
    <li><a href="#private-key-file-changes-required">Private Key File Changes Required</a>
      <ul>
        <li><a href="#changes-2">Changes</a></li>
        <li><a href="#i2cp-seçenekleri">I2CP Seçenekleri</a></li>
      </ul>
    </li>
    <li><a href="#streaming-changes-required">Streaming Changes Required</a>
      <ul>
        <li><a href="#oturum-yapılandırması">Oturum Yapılandırması</a></li>
        <li><a href="#leaseset-istek-mesajı">Leaseset İstek Mesajı</a></li>
      </ul>
    </li>
    <li><a href="#standart-ls2-başlığı">Standart LS2 Başlığı</a>
      <ul>
        <li><a href="#istek-değişken-leaseset-mesajı">İstek Değişken Leaseset Mesajı</a></li>
        <li><a href="#leaseset2-mesajı-oluştur">Leaseset2 Mesajı Oluştur</a></li>
      </ul>
    </li>
    <li><a href="#sam-v3-changes-required">SAM V3 Changes Required</a>
      <ul>
        <li><a href="#gerekçe-3">Gerekçe</a></li>
        <li><a href="#mesaj-türü">Mesaj Türü</a></li>
      </ul>
    </li>
    <li><a href="#bob-changes-required">BOB Changes Required</a></li>
    <li><a href="#publishing-migration-compatibility">Publishing, Migration, Compatibility</a></li>
    <li><a href="#rollout">Rollout</a></li>
    <li><a href="#yeni-databaseentry-türleri">Yeni DatabaseEntry türleri</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="durum">Durum</h2>
<p>Bu önerinin bölümleri tamamlanmış ve 0.9.38 ve 0.9.39 sürümlerinde uygulanmıştır. Common Structures, I2CP, I2NP ve diğer spesifikasyonlar artık şu anda desteklenen değişiklikleri yansıtacak şekilde güncellenmiştir.</p>
<p>Tamamlanan bölümler hala küçük revizyonlara tabi olabilir. Bu teklifin diğer bölümleri hala geliştirme aşamasındadır ve önemli revizyonlara tabi olabilir.</p>
<p>Hizmet Arama (9 ve 11 türleri) düşük önceliklidir ve zamanlanmamıştır, ayrı bir öneriye ayrılabilir.</p>
<h2 id="genel-bakış">Genel Bakış</h2>
<p>Bu, aşağıdaki 4 teklifin güncellenmiş ve birleştirilmiş halidir:</p>
<ul>
<li>110 LS2</li>
<li>120 Büyük çoklu barındırma için Meta LS2</li>
<li>121 Şifrelenmiş LS2</li>
<li>122 Kimlik doğrulamasız hizmet arama (anycasting)</li>
</ul>
<p>Bu öneriler çoğunlukla bağımsızdır, ancak mantıklı olması için bunların birkaçı için ortak bir format tanımlıyor ve kullanıyoruz.</p>
<p>Aşağıdaki öneriler bir dereceye kadar ilişkilidir:</p>
<ul>
<li>140 Invisible Multihoming (bu öneriye uyumlu değil)</li>
<li>142 New Crypto Template (yeni simetrik kripto için)</li>
<li>144 ECIES-X25519-AEAD-Ratchet</li>
<li>145 ECIES-P256</li>
<li>146 Red25519</li>
<li>148 EdDSA-BLAKE2b-Ed25519</li>
<li>149 B32 for Encrypted LS2</li>
<li>150 Garlic Farm Protocol</li>
<li>151 ECDSA Blinding</li>
</ul>
<h2 id="öneri">Öneri</h2>
<p>Bu öneri, 5 yeni DatabaseEntry türünü ve bunları ağ veritabanına depolama ve ağ veritabanından alma sürecini, ayrıca bunları imzalama ve bu imzaları doğrulama yöntemini tanımlar.</p>
<h3 id="goals">Goals</h3>
<ul>
<li>Geriye dönük uyumlu</li>
<li>LS2 eski tarz multihoming ile kullanılabilir</li>
<li>Destek için yeni kripto veya primitifler gerekli değil</li>
<li>Kripto ve imzalama ayrımını koru; tüm mevcut ve gelecek sürümleri destekle</li>
<li>İsteğe bağlı çevrimdışı imzalama anahtarları etkinleştir</li>
<li>Parmak izi bırakma riskini azaltmak için zaman damgası doğruluğunu düşür</li>
<li>Hedefler için yeni kripto etkinleştir</li>
<li>Büyük ölçekli multihoming etkinleştir</li>
<li>Mevcut şifrelenmiş LS ile ilgili birden fazla sorunu düzelt</li>
<li>floodfill&rsquo;ler tarafından görünürlüğü azaltmak için isteğe bağlı kör etme</li>
<li>Şifrelenmiş hem tek anahtarlı hem de birden fazla iptal edilebilir anahtarlı sistemleri destekler</li>
<li>Outproxy&rsquo;lerin, uygulama DHT bootstrap&rsquo;ının ve diğer kullanımların daha kolay aranması için servis arama</li>
<li>32-byte ikili hedef hash&rsquo;larına dayanan hiçbir şeyi bozma, örn. bittorrent</li>
<li>RouterInfo&rsquo;larda olduğu gibi özellikler aracılığıyla leaseSet&rsquo;lere esneklik ekle</li>
<li>Yayınlanan zaman damgası ve değişken süre sonu başlığa koy, böylece içerik şifrelenmiş olsa bile çalışır (zaman damgasını en erken lease&rsquo;den türetme)</li>
<li>Tüm yeni türler aynı DHT alanında ve mevcut leaseSet&rsquo;ler ile aynı konumlarda yaşar,
böylece kullanıcılar eski LS&rsquo;den LS2&rsquo;ye geçebilir,
veya LS2, Meta ve Encrypted arasında değişiklik yapabilir,
Destination veya hash&rsquo;i değiştirmeden.</li>
<li>Mevcut bir Destination, Destination veya hash&rsquo;i değiştirmeden
çevrimdışı anahtarlar kullanacak şekilde dönüştürülebilir,
veya tekrar çevrimiçi anahtarlara geri döndürülebilir.</li>
</ul>
<h3 id="non-goals--out-of-scope">Non-Goals / Out-of-scope</h3>
<ul>
<li>Yeni DHT rotasyon algoritması veya paylaşılan rastgele üretim</li>
<li>Kullanılacak spesifik yeni şifreleme türü ve bu yeni türü kullanacak uçtan uca şifreleme şeması
ayrı bir öneride olacaktır.
Burada hiçbir yeni kripto belirtilmemiş veya tartışılmamıştır.</li>
<li>RI&rsquo;lar veya tunnel oluşturma için yeni şifreleme.
Bu ayrı bir öneride olacaktır.</li>
<li>I2NP DLM / DSM / DSRM mesajlarının şifreleme, iletim ve alım yöntemleri.
Değiştirilmiyor.</li>
<li>Backend router-arası iletişim, yönetim, yük devretme ve koordinasyon dahil Meta&rsquo;nın nasıl oluşturulacağı ve destekleneceği.
Destek I2CP&rsquo;ye, veya i2pcontrol&rsquo;e, veya yeni bir protokole eklenebilir.
Bu standartlaştırılabilir veya olmayabilir.</li>
<li>Daha uzun süreli tunnel&rsquo;ların nasıl gerçekten uygulanacağı ve yönetileceği, veya mevcut tunnel&rsquo;ların iptal edilmesi.
Bu son derece zordur ve bu olmadan makul bir zarif kapatma yapamazsınız.</li>
<li>Tehdit modeli değişiklikleri</li>
<li>Çevrimdışı depolama formatı veya verileri depolama/alma/paylaşma yöntemleri.</li>
<li>Uygulama detayları burada tartışılmamıştır ve her projeye bırakılmıştır.</li>
</ul>
<h3 id="justification">Justification</h3>
<p>LS2, şifreleme türünü değiştirmek ve gelecekteki protokol değişiklikleri için alanlar ekler.</p>
<p>Şifreli LS2, mevcut şifreli LS&rsquo;deki birkaç güvenlik sorununu, tüm lease setinin asimetrik şifrelemesini kullanarak düzeltir.</p>
<p>Meta LS2 esnek, verimli, etkili ve büyük ölçekli multihoming sağlar.</p>
<p>Service Record ve Service List, isim arama ve DHT bootstrapping gibi anycast hizmetleri sağlar.</p>
<h3 id="hedefler">Hedefler</h3>
<p>Tür numaraları I2NP Database Lookup/Store Mesajlarında kullanılır.</p>
<p>Uçtan uca sütunu, sorguların/yanıtların bir Hedefe Garlic Message içinde gönderilip gönderilmediğini ifade eder.</p>
<p>Mevcut türler:</p>
<table>
  <thead>
      <tr>
          <th>NetDB Data</th>
          <th>Lookup Type</th>
          <th>Store Type</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>any</td>
          <td>0</td>
          <td>any</td>
      </tr>
      <tr>
          <td>LS</td>
          <td>1</td>
          <td>1</td>
      </tr>
      <tr>
          <td>RI</td>
          <td>2</td>
          <td>0</td>
      </tr>
      <tr>
          <td>exploratory</td>
          <td>3</td>
          <td>DSRM</td>
      </tr>
      <tr>
          <td>Yeni türler:</td>
          <td></td>
          <td></td>
      </tr>
  </tbody>
</table>
<table>
  <thead>
      <tr>
          <th>NetDB Data</th>
          <th>Lookup Type</th>
          <th>Store Type</th>
          <th>Std. LS2 Header?</th>
          <th>Sent end-to-end?</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LS2</td>
          <td>1</td>
          <td>3</td>
          <td>yes</td>
          <td>yes</td>
      </tr>
      <tr>
          <td>Encrypted LS2</td>
          <td>1</td>
          <td>5</td>
          <td>no</td>
          <td>no</td>
      </tr>
      <tr>
          <td>Meta LS2</td>
          <td>1</td>
          <td>7</td>
          <td>yes</td>
          <td>no</td>
      </tr>
      <tr>
          <td>Service Record</td>
          <td>n/a</td>
          <td>9</td>
          <td>yes</td>
          <td>no</td>
      </tr>
      <tr>
          <td>Service List</td>
          <td>4</td>
          <td>11</td>
          <td>no</td>
          <td>no</td>
      </tr>
  </tbody>
</table>
<h3 id="hedef-olmayanlar--kapsam-dışı">Hedef Olmayanlar / Kapsam Dışı</h3>
<ul>
<li>
<p>Lookup türleri şu anda Database Lookup Message&rsquo;ındaki 3-2 bitleridir.
Herhangi bir ek tür, bit 4&rsquo;ün kullanılmasını gerektirir.</p>
</li>
<li>
<p>Tüm store türleri tektir çünkü Database Store Message
type alanındaki üst bitler eski router&rsquo;lar tarafından göz ardı edilir.
Parse işleminin sıkıştırılmış RI yerine LS olarak başarısız olmasını tercih ederiz.</p>
</li>
<li>
<p>İmza tarafından kapsanan verilerde tür açık mı, örtük mü yoksa hiçbiri mi olmalı?</p>
</li>
</ul>
<h3 id="gerekçe">Gerekçe</h3>
<p>Tip 3, 5 ve 7, standart bir leaseset sorgusu (tip 1) yanıtında döndürülebilir. Tip 9 hiçbir zaman bir sorgu yanıtında döndürülmez. Tip 11, yeni bir servis sorgu tipi (tip 11) yanıtında döndürülür.</p>
<p>Yalnızca tip 3, client-to-client Garlic mesajında gönderilebilir.</p>
<h3 id="netdb-veri-türleri">NetDB Veri Türleri</h3>
<p>3, 7 ve 9 türlerinin hepsi ortak bir formata sahiptir::</p>
<p>Standart LS2 Başlığı   - aşağıda tanımlandığı gibi</p>
<p>Türe Özgü Kısım   - aşağıda her kısımda tanımlandığı gibi</p>
<p>Standart LS2 İmzası:   - İmzalama anahtarının imza türü tarafından belirtilen uzunluk</p>
<p>Tip 5 (Şifrelenmiş) bir Destination ile başlamaz ve farklı bir formata sahiptir. Aşağıya bakın.</p>
<p>Tip 11 (Servis Listesi) birkaç Servis Kaydının bir araya getirilmesidir ve farklı bir formata sahiptir. Aşağıya bakınız.</p>
<h3 id="notlar">Notlar</h3>
<p>TBD</p>
<h2 id="standard-ls2-header">Standard LS2 Header</h2>
<p>Tip 3, 7 ve 9, aşağıda belirtilen standart LS2 başlığını kullanır:</p>
<h3 id="aramasaklama-süreci">Arama/Saklama süreci</h3>
<pre tabindex="0"><code>Standard LS2 Header:
  - Type (1 byte)
    Not actually in header, but part of data covered by signature.
    Take from field in Database Store Message.
  - Destination (387+ bytes)
  - Published timestamp (4 bytes, big endian, seconds since epoch, rolls over in 2106)
  - Expires (2 bytes, big endian) (offset from published timestamp in seconds, 18.2 hours max)
  - Flags (2 bytes)
    Bit order: 15 14 ... 3 2 1 0
    Bit 0: If 0, no offline keys; if 1, offline keys
    Bit 1: If 0, a standard published leaseset.
           If 1, an unpublished leaseset. Should not be flooded, published, or
           sent in response to a query. If this leaseset expires, do not query the
           netdb for a new one, unless bit 2 is set.
    Bit 2: If 0, a standard published leaseset.
           If 1, this unencrypted leaseset will be blinded and encrypted when published.
           If this leaseset expires, query the blinded location in the netdb for a new one.
           If this bit is set to 1, set bit 1 to 1 also.
           As of release 0.9.42.
    Bits 3-15: set to 0 for compatibility with future uses
  - If flag indicates offline keys, the offline signature section:
    Expires timestamp (4 bytes, big endian, seconds since epoch, rolls over in 2106)
    Transient sig type (2 bytes, big endian)
    Transient signing public key (length as implied by sig type)
    Signature of expires timestamp, transient sig type, and public key,
    by the destination public key,
    length as implied by destination public key sig type.
    This section can, and should, be generated offline.
</code></pre><h3 id="format">Format</h3>
<p>Turkish translation of the English text is not provided because the input text only contains the word &ldquo;Format&rdquo; which appears to be either a heading or standalone term. Since no additional context or content was provided to translate, I cannot determine the appropriate translation context. The word &ldquo;Format&rdquo; would typically translate to &ldquo;Format&rdquo; or &ldquo;Biçim&rdquo; in Turkish depending on the specific technical context.</p>
<ul>
<li>
<p>Unpublished/published: Bir veritabanı deposunu uçtan uca gönderirken kullanılmak üzere,
gönderen router bu leaseSet&rsquo;in başkalarına gönderilmemesi gerektiğini belirtmek isteyebilir.
Şu anda bu durumu korumak için buluşsal yöntemler kullanıyoruz.</p>
</li>
<li>
<p>Published: Leaseset&rsquo;in &lsquo;sürümünü&rsquo; belirlemeyi gerektiren karmaşık mantığı değiştirir. Şu anda, sürüm son süresi dolan lease&rsquo;in bitiş zamanıdır ve yayınlayan bir router, yalnızca eski bir lease&rsquo;i kaldıran bir leaseset yayınlarken bu bitiş zamanını en az 1ms artırmalıdır.</p>
</li>
<li>
<p>Expires: Bir netDb girişinin, son süresi dolan leaseset&rsquo;inin süresinden daha erken sona ermesine izin verir. LS2 için kullanışlı olmayabilir, burada leaseset&rsquo;lerin maksimum 11 dakikalık süre ile kalması beklenir, ancak diğer yeni türler için gereklidir (aşağıdaki Meta LS ve Service Record&rsquo;a bakın).</p>
</li>
<li>
<p>Çevrimdışı anahtarlar isteğe bağlıdır, başlangıç/gerekli uygulama karmaşıklığını azaltmak için.</p>
</li>
</ul>
<h3 id="gizlilikgüvenlik-hususları">Gizlilik/Güvenlik Hususları</h3>
<ul>
<li>
<p>Zaman damgası doğruluğu daha da azaltılabilir (10 dakika?) ancak sürüm numarası eklemek gerekir. Bu, sıra koruyucu şifrelemeye sahip olmadıkça multihoming&rsquo;i bozabilir. Muhtemelen zaman damgaları olmadan hiç yapılamaz.</p>
</li>
<li>
<p>Alternatif: 3 bayt zaman damgası (epoch / 10 dakika), 1-bayt sürüm, 2-bayt sona erme</p>
</li>
<li>
<p>Veri / imzada tür açık mı yoksa örtük mü? İmza için &ldquo;Domain&rdquo; sabitleri?</p>
</li>
</ul>
<h3 id="notes">Notes</h3>
<ul>
<li>
<p>Router&rsquo;lar saniyede bir kereden fazla LS yayınlamamalıdır.
Eğer yaparlarsa, yayınlanan zaman damgasını önceden yayınlanmış LS&rsquo;ten 1 fazla olacak şekilde yapay olarak artırmalıdırlar.</p>
</li>
<li>
<p>Router uygulamaları, her seferinde doğrulama yapmaktan kaçınmak için geçici anahtarları ve imzayı önbelleğe alabilir. Özellikle floodfill&rsquo;ler ve uzun süreli bağlantıların her iki ucundaki router&rsquo;lar bundan faydalanabilir.</p>
</li>
<li>
<p>Offline anahtarlar ve imza yalnızca uzun ömürlü destinasyonlar için uygundur,
yani sunucular için, istemciler için değil.</p>
</li>
</ul>
<h2 id="new-databaseentry-types">New DatabaseEntry types</h2>
<h3 id="format-1">Format</h3>
<p>Mevcut LeaseSet&rsquo;ten değişiklikler:</p>
<ul>
<li>Yayınlanma zaman damgası, son kullanma zaman damgası, bayraklar ve özellikler ekle</li>
<li>Şifreleme türü ekle</li>
<li>İptal anahtarını kaldır</li>
</ul>
<p>Şununla ara</p>
<pre><code>Standard LS flag (1)
</code></pre>
<p>Şununla sakla</p>
<pre><code>Standard LS2 type (3)
</code></pre>
<p>Şuraya kaydet</p>
<pre><code>Hash of destination
This hash is then used to generate the daily &quot;routing key&quot;, as in LS1
</code></pre>
<p>Tipik süre sonu</p>
<pre><code>10 minutes, as in a regular LS.
</code></pre>
<p>Yayınlayan</p>
<pre><code>Destination
</code></pre>
<h3 id="gerekçe-1">Gerekçe</h3>
<pre tabindex="0"><code>Standard LS2 Header as specified above

  Standard LS2 Type-Specific Part
  - Properties (Mapping as specified in common structures spec, 2 zero bytes if none)
  - Number of key sections to follow (1 byte, max TBD)
  - Key sections:
    - Encryption type (2 bytes, big endian)
    - Encryption key length (2 bytes, big endian)
      This is explicit, so floodfills can parse LS2 with unknown encryption types.
    - Encryption key (number of bytes specified)
  - Number of lease2s (1 byte)
  - Lease2s (40 bytes each)
    These are leases, but with a 4-byte instead of an 8-byte expiration,
    seconds since the epoch (rolls over in 2106)

  Standard LS2 Signature:
  - Signature
    If flag indicates offline keys, this is signed by the transient pubkey,
    otherwise, by the destination pubkey
    Length as implied by sig type of signing key
    The signature is of everything above.
</code></pre><h3 id="sorunlar">Sorunlar</h3>
<ul>
<li>
<p>Özellikler: Gelecekteki genişleme ve esneklik.
Kalan verilerin ayrıştırılması için gerekli olması durumunda ilk sıraya yerleştirilmiştir.</p>
</li>
<li>
<p>Birden fazla şifreleme türü/açık anahtar çifti,
yeni şifreleme türlerine geçişi kolaylaştırmak içindir. Bunu yapmanın diğer yolu,
DSA ve EdDSA hedefleri için şu anda yaptığımız gibi,
muhtemelen aynı tünelleri kullanarak birden fazla leaseSet yayınlamaktır.
Bir tünelde gelen şifreleme türünün tanımlanması
mevcut oturum etiketi mekanizması ile
ve/veya her anahtarı kullanarak deneme şifre çözme ile yapılabilir. Gelen
mesajların uzunlukları da bir ipucu sağlayabilir.</p>
</li>
</ul>
<h3 id="notlar-1">Notlar</h3>
<p>Bu öneri, uçtan uca şifreleme anahtarı için leaseset içindeki genel anahtarı kullanmaya devam eder ve şu anda olduğu gibi Destination içindeki genel anahtar alanını kullanılmamış olarak bırakır. Şifreleme türü Destination anahtar sertifikasında belirtilmez, 0 olarak kalacaktır.</p>
<p>Reddedilen bir alternatif, şifreleme türünü Destination anahtar sertifikasında belirtmek, Destination içindeki public key&rsquo;i kullanmak ve leaseset içindeki public key&rsquo;i kullanmamaktır. Bunu yapmayı planlamıyoruz.</p>
<p>LS2&rsquo;nin Faydaları:</p>
<ul>
<li>Gerçek public key&rsquo;in konumu değişmez.</li>
<li>Encryption türü veya public key, Destination&rsquo;ı değiştirmeden değişebilir.</li>
<li>Kullanılmayan revocation alanını kaldırır</li>
<li>Bu önerideki diğer DatabaseEntry türleriyle temel uyumluluk</li>
<li>Birden fazla encryption türüne izin verir</li>
</ul>
<p>LS2&rsquo;nin Dezavantajları:</p>
<ul>
<li>Public key konumu ve şifreleme türü RouterInfo&rsquo;dan farklıdır</li>
<li>Leaseset&rsquo;te kullanılmayan public key&rsquo;i korur</li>
<li>Ağ genelinde implementasyon gerektirir; alternatif olarak, deneysel
şifreleme türleri floodfill&rsquo;ler tarafından izin verilirse kullanılabilir
(ancak deneysel sig türleri desteği hakkında ilgili 136 ve 137 önerilerine bakınız).
Alternatif öneri, deneysel şifreleme türleri için implement edilmesi ve test edilmesi daha kolay olabilir.</li>
</ul>
<h3 id="new-encryption-issues">New Encryption Issues</h3>
<p>Bu önerilerin bir kısmı bu teklifin kapsamı dışındadır, ancak henüz ayrı bir şifreleme teklifimiz olmadığı için notları burada tutuyoruz. Ayrıca ECIES teklifleri 144 ve 145&rsquo;e bakınız.</p>
<ul>
<li>
<p>Şifreleme türü, eğri, anahtar uzunluğu ve uçtan uca şemanın
kombinasyonunu temsil eder ve varsa KDF ve MAC&rsquo;i de içerir.</p>
</li>
<li>
<p>LS2&rsquo;nin bilinmeyen şifreleme türleri için bile floodfill tarafından ayrıştırılabilir ve doğrulanabilir olması için bir anahtar uzunluğu alanı ekledik.</p>
</li>
<li>
<p>Önerilecek ilk yeni şifreleme türü muhtemelen
ECIES/X25519 olacaktır. Bunun uçtan uca nasıl kullanılacağı
(ElGamal/AES+SessionTag&rsquo;in hafifçe değiştirilmiş bir versiyonu
ya da tamamen yeni bir şey, örneğin ChaCha/Poly) bir veya daha fazla
ayrı öneri ile belirtilecektir.
Ayrıca ECIES önerileri 144 ve 145&rsquo;e bakın.</p>
</li>
</ul>
<h3 id="leaseset-2">LeaseSet 2</h3>
<ul>
<li>
<p>Lease&rsquo;lerdeki 8-byte süre dolumu 4 byte&rsquo;a değiştirildi.</p>
</li>
<li>
<p>Eğer iptal (revocation) işlevini uygularsak, bunu sıfır expires alanı,
sıfır lease veya her ikisi ile yapabiliriz. Ayrı bir iptal anahtarına gerek yok.</p>
</li>
<li>
<p>Şifreleme anahtarları sunucu tercih sırasına göre düzenlenmiştir, en çok tercih edilen ilk sıradadır.
Varsayılan istemci davranışı, desteklenen bir şifreleme türüne sahip
ilk anahtarı seçmektir. İstemciler şifreleme desteği, göreli performans ve diğer faktörlere
dayalı olarak başka seçim algoritmaları kullanabilir.</p>
</li>
</ul>
<h3 id="format-2">Format</h3>
<p>Hedefler:</p>
<ul>
<li>Blinding ekleme</li>
<li>Birden fazla imza türüne izin verme</li>
<li>Herhangi bir yeni kripto primitifi gerektirmeme</li>
<li>İsteğe bağlı olarak her alıcıya şifreleme, iptal edilebilir</li>
<li>Yalnızca Standard LS2 ve Meta LS2 şifrelemesini destekleme</li>
</ul>
<p>Şifrelenmiş LS2 hiçbir zaman uçtan uca garlic mesajında gönderilmez. Yukarıdaki standart LS2&rsquo;yi kullanın.</p>
<p>Mevcut şifreli LeaseSet&rsquo;ten değişiklikler:</p>
<ul>
<li>Güvenlik için her şeyi şifreleyin</li>
<li>Güvenli bir şekilde şifreleyin, sadece AES ile değil.</li>
<li>Her alıcı için ayrı ayrı şifreleyin</li>
</ul>
<p>ile Arama</p>
<pre><code>Standard LS flag (1)
</code></pre>
<p>Şununla sakla</p>
<pre><code>Encrypted LS2 type (5)
</code></pre>
<p>Şurada sakla</p>
<pre><code>Hash of blinded sig type and blinded public key
Two byte sig type (big endian, e.g. 0x000b) || blinded public key
This hash is then used to generate the daily &quot;routing key&quot;, as in LS1
</code></pre>
<p>Tipik sona erme</p>
<pre><code>10 minutes, as in a regular LS, or hours, as in a meta LS.
</code></pre>
<p>Yayınlayan</p>
<pre><code>Destination
</code></pre>
<h3 id="gerekçe-2">Gerekçe</h3>
<p>Şifreli LS2 için kullanılan kriptografik yapı taşlarına karşılık gelen aşağıdaki fonksiyonları tanımlıyoruz:</p>
<p>CSRNG(n)</p>
<pre><code>n-byte output from a cryptographically-secure random number generator.

In addition to the requirement of CSRNG being cryptographically-secure (and thus
suitable for generating key material), it MUST be safe
for some n-byte output to be used for key material when the byte sequences immediately
preceding and following it are exposed on the network (such as in a salt, or encrypted
padding). Implementations that rely on a potentially-untrustworthy source should hash
any output that is to be exposed on the network. See [PRNG references](http://projectbullrun.org/dual-ec/ext-rand.html) and [Tor dev discussion](https://lists.torproject.org/pipermail/tor-dev/2015-November/009954.html).
</code></pre>
<p>H(p, d)</p>
<pre><code>SHA-256 hash function that takes a personalization string p and data d, and
produces an output of length 32 bytes.

Use SHA-256 as follows::

    H(p, d) := SHA-256(p || d)
</code></pre>
<p>STREAM</p>
<pre><code>The ChaCha20 stream cipher as specified in [RFC 7539 Section 2.4](https://tools.ietf.org/html/rfc7539#section-2.4), with the initial counter
set to 1. S_KEY_LEN = 32 and S_IV_LEN = 12.

ENCRYPT(k, iv, plaintext)
    Encrypts plaintext using the cipher key k, and nonce iv which MUST be unique for
    the key k. Returns a ciphertext that is the same size as the plaintext.

    The entire ciphertext must be indistinguishable from random if the key is secret.

DECRYPT(k, iv, ciphertext)
    Decrypts ciphertext using the cipher key k, and nonce iv. Returns the plaintext.
</code></pre>
<p>SIG</p>
<pre><code>The RedDSA signature scheme (corresponding to SigType 11) with key blinding.
It has the following functions:

DERIVE_PUBLIC(privkey)
    Returns the public key corresponding to the given private key.

SIGN(privkey, m)
    Returns a signature by the private key privkey over the given message m.

VERIFY(pubkey, m, sig)
    Verifies the signature sig against the public key pubkey and message m. Returns
    true if the signature is valid, false otherwise.

It must also support the following key blinding operations:

GENERATE_ALPHA(data, secret)
    Generate alpha for those who know the data and an optional secret.
    The result must be identically distributed as the private keys.

BLIND_PRIVKEY(privkey, alpha)
    Blinds a private key, using a secret alpha.

BLIND_PUBKEY(pubkey, alpha)
    Blinds a public key, using a secret alpha.
    For a given keypair (privkey, pubkey) the following relationship holds::

        BLIND_PUBKEY(pubkey, alpha) ==
        DERIVE_PUBLIC(BLIND_PRIVKEY(privkey, alpha))
</code></pre>
<p>DH</p>
<pre><code>X25519 public key agreement system. Private keys of 32 bytes, public keys of 32
bytes, produces outputs of 32 bytes. It has the following
functions:

GENERATE_PRIVATE()
    Generates a new private key.

DERIVE_PUBLIC(privkey)
    Returns the public key corresponding to the given private key.

DH(privkey, pubkey)
    Generates a shared secret from the given private and public keys.
</code></pre>
<p>HKDF(salt, ikm, info, n)</p>
<pre><code>A cryptographic key derivation function which takes some input key material ikm (which
should have good entropy but is not required to be a uniformly random string), a salt
of length 32 bytes, and a context-specific 'info' value, and produces an output
of n bytes suitable for use as key material.

Use HKDF as specified in [RFC 5869](https://tools.ietf.org/html/rfc5869), using the HMAC hash function SHA-256
as specified in [RFC 2104](https://tools.ietf.org/html/rfc2104). This means that SALT_LEN is 32 bytes max.
</code></pre>
<h3 id="tartışma">Tartışma</h3>
<p>Şifrelenmiş LS2 formatı üç iç içe katmandan oluşur:</p>
<ul>
<li>Depolama ve erişim için gerekli düz metin bilgilerini içeren dış katman.</li>
<li>İstemci kimlik doğrulamasını yöneten orta katman.</li>
<li>Gerçek LS2 verilerini içeren iç katman.</li>
</ul>
<p>Genel format şu şekildedir::</p>
<pre><code>Layer 0 data + Enc(layer 1 data + Enc(layer 2 data)) + Signature
</code></pre>
<p>Şifreli LS2&rsquo;nin köreltildiğini (blinded) unutmayın. Destination başlıkta bulunmaz. DHT depolama konumu SHA-256(sig type || blinded public key) şeklindedir ve günlük olarak döndürülür.</p>
<p>Yukarıda belirtilen standart LS2 başlığını KULLANMAZ.</p>
<h4 id="layer-0-outer">Layer 0 (outer)</h4>
<p>Tür</p>
<pre><code>1 byte

Not actually in header, but part of data covered by signature.
Take from field in Database Store Message.
</code></pre>
<p>Körleştirilmiş Açık Anahtar İmza Türü</p>
<pre><code>2 bytes, big endian
This will always be type 11, identifying a Red25519 blinded key.
</code></pre>
<p>Kör Edilmiş Açık Anahtar</p>
<pre><code>Length as implied by sig type
</code></pre>
<p>Yayınlanma zaman damgası</p>
<pre><code>4 bytes, big endian

Seconds since epoch, rolls over in 2106
</code></pre>
<p>Sona Erer</p>
<pre><code>2 bytes, big endian

Offset from published timestamp in seconds, 18.2 hours max
</code></pre>
<p>Bayraklar</p>
<pre><code>2 bytes

Bit order: 15 14 ... 3 2 1 0

Bit 0: If 0, no offline keys; if 1, offline keys

Other bits: set to 0 for compatibility with future uses
</code></pre>
<p>Geçici anahtar verisi</p>
<pre><code>Present if flag indicates offline keys

Expires timestamp
    4 bytes, big endian

    Seconds since epoch, rolls over in 2106

Transient sig type
    2 bytes, big endian

Transient signing public key
    Length as implied by sig type

Signature
    Length as implied by blinded public key sig type

    Over expires timestamp, transient sig type, and transient public key.

    Verified with the blinded public key.
</code></pre>
<p>lenOuterCiphertext</p>
<pre><code>2 bytes, big endian
</code></pre>
<p>outerCiphertext</p>
<pre><code>lenOuterCiphertext bytes

Encrypted layer 1 data. See below for key derivation and encryption algorithms.
</code></pre>
<p>İmza</p>
<pre><code>Length as implied by sig type of the signing key used

The signature is of everything above.

If the flag indicates offline keys, the signature is verified with the transient
public key. Otherwise, the signature is verified with the blinded public key.
</code></pre>
<h4 id="layer-1-middle">Layer 1 (middle)</h4>
<p>Bayraklar</p>
<pre><code>1 byte

Bit order: 76543210

Bit 0: 0 for everybody, 1 for per-client, auth section to follow

Bits 3-1: Authentication scheme, only if bit 0 is set to 1 for per-client, otherwise 000
          000: DH client authentication (or no per-client authentication)
          001: PSK client authentication

Bits 7-4: Unused, set to 0 for future compatibility
</code></pre>
<p>DH istemci kimlik doğrulama verisi</p>
<pre><code>Present if flag bit 0 is set to 1 and flag bits 3-1 are set to 000.

ephemeralPublicKey
    32 bytes

clients
    2 bytes, big endian

    Number of authClient entries to follow, 40 bytes each

authClient
    Authorization data for a single client.
    See below for the per-client authorization algorithm.

    clientID_i
        8 bytes

    clientCookie_i
        32 bytes
</code></pre>
<p>PSK istemci kimlik doğrulama verisi</p>
<pre><code>Present if flag bit 0 is set to 1 and flag bits 3-1 are set to 001.

authSalt
    32 bytes

clients
    2 bytes, big endian

    Number of authClient entries to follow, 40 bytes each

authClient
    Authorization data for a single client.
    See below for the per-client authorization algorithm.

    clientID_i
        8 bytes

    clientCookie_i
        32 bytes
</code></pre>
<p>innerCiphertext</p>
<pre><code>Length implied by lenOuterCiphertext (whatever data remains)

Encrypted layer 2 data. See below for key derivation and encryption algorithms.
</code></pre>
<h4 id="layer-2-inner">Layer 2 (inner)</h4>
<p>Tür</p>
<pre><code>1 byte

Either 3 (LS2) or 7 (Meta LS2)
</code></pre>
<p>Veri</p>
<pre><code>LeaseSet2 data for the given type.

Includes the header and signature.
</code></pre>
<h3 id="yeni-şifreleme-sorunları">Yeni Şifreleme Sorunları</h3>
<p>Anahtar körleme için aşağıdaki şemayı kullanıyoruz, Ed25519 ve <a href="https://github.com/zcash/zips/tree/master/protocol/protocol.pdf">ZCash RedDSA</a>
 tabanlı. Re25519 imzaları Ed25519 eğrisi üzerinde, hash için SHA-512 kullanarak.</p>
<p><a href="https://spec.torproject.org/rend-spec-v3">Tor&rsquo;un rend-spec-v3.txt ek A.2</a>
 bölümünü kullanmıyoruz, çünkü benzer tasarım hedeflerine sahip olmasına rağmen, kör edilmiş (blinded) public key&rsquo;leri prime-order alt grubunun dışında olabilir ve bu durum bilinmeyen güvenlik sonuçları doğurabilir.</p>
<h4 id="goals-1">Goals</h4>
<ul>
<li>Kör edilmemiş hedefte bulunan imzalama public key&rsquo;i
Ed25519 (sig type 7) veya Red25519 (sig type 11) olmalıdır;
diğer sig type&rsquo;lar desteklenmez</li>
<li>İmzalama public key&rsquo;i çevrimdışıysa, geçici imzalama public key&rsquo;i de Ed25519 olmalıdır</li>
<li>Blinding işlemi hesaplama açısından basittir</li>
<li>Mevcut kriptografik primitifleri kullanır</li>
<li>Blind edilmiş public key&rsquo;ler unblind edilemez</li>
<li>Blind edilmiş public key&rsquo;ler Ed25519 eğrisi ve asal-dereceli alt grup üzerinde olmalıdır</li>
<li>Blind edilmiş public key&rsquo;i türetmek için hedefin imzalama public key&rsquo;ini
bilmek gerekir (tam hedef gerekli değil)</li>
<li>İsteğe bağlı olarak blind edilmiş public key&rsquo;i türetmek için gereken ek bir gizli anahtar sağlanabilir</li>
</ul>
<h4 id="security">Security</h4>
<p>Bir blinding şemasının güvenliği, alpha&rsquo;nın dağılımının köreltilmemiş özel anahtarlarla aynı olmasını gerektirir. Ancak, bir Ed25519 özel anahtarını (sig türü 7) Red25519 özel anahtarına (sig türü 11) körelttiğimizde, dağılım farklıdır. <a href="https://github.com/zcash/zips/tree/master/protocol/protocol.pdf">zcash bölüm 4.1.6.1</a>
 gereksinimlerini karşılamak için, Red25519 (sig türü 11) köreltilmemiş anahtarlar için de kullanılmalıdır, böylece &ldquo;yeniden rastgeleleştirilmiş bir açık anahtar ve bu anahtar altındaki imza(lar) kombinasyonu, yeniden rastgeleleştirme işleminin kaynaklandığı anahtarı açığa çıkarmaz.&rdquo; Mevcut destinasyonlar için tür 7&rsquo;ye izin veriyoruz, ancak şifrelenecek yeni destinasyonlar için tür 11&rsquo;i öneriyoruz.</p>
<h4 id="definitions">Definitions</h4>
<p>B</p>
<pre><code>The Ed25519 base point (generator) 2^255 - 19 as in [Ed25519](http://cr.yp.to/papers.html#ed25519)
</code></pre>
<p>L</p>
<pre><code>The Ed25519 order 2^252 + 27742317777372353535851937790883648493
as in [Ed25519](http://cr.yp.to/papers.html#ed25519)
</code></pre>
<p>DERIVE_PUBLIC(a)</p>
<pre><code>Convert a private key to public, as in Ed25519 (mulitply by G)
</code></pre>
<p>alfa</p>
<pre><code>A 32-byte random number known to those who know the destination.
</code></pre>
<p>GENERATE_ALPHA(destination, date, secret)</p>
<pre><code>Generate alpha for the current date, for those who know the destination and the secret.
The result must be identically distributed as Ed25519 private keys.
</code></pre>
<p>a</p>
<pre><code>The unblinded 32-byte EdDSA or RedDSA signing private key used to sign the destination
</code></pre>
<p>A</p>
<pre><code>The unblinded 32-byte EdDSA or RedDSA signing public key in the destination,
= DERIVE_PUBLIC(a), as in Ed25519
</code></pre>
<p>a&rsquo;</p>
<pre><code>The blinded 32-byte EdDSA signing private key used to sign the encrypted leaseset
This is a valid EdDSA private key.
</code></pre>
<p>A'</p>
<pre><code>The blinded 32-byte EdDSA signing public key in the Destination,
may be generated with DERIVE_PUBLIC(a'), or from A and alpha.
This is a valid EdDSA public key, on the curve and on the prime-order subgroup.
</code></pre>
<p>LEOS2IP(x)</p>
<pre><code>Flip the order of the input bytes to little-endian
</code></pre>
<p>H*(x)</p>
<pre><code>32 bytes = (LEOS2IP(SHA512(x))) mod B, same as in Ed25519 hash-and-reduce
</code></pre>
<h4 id="blinding-calculations">Blinding Calculations</h4>
<p>Her gün (UTC) yeni bir gizli alfa ve köreltilmiş anahtarlar üretilmelidir. Gizli alfa ve köreltilmiş anahtarlar aşağıdaki şekilde hesaplanır.</p>
<p>GENERATE_ALPHA(destination, date, secret), tüm taraflar için:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// GENERATE_ALPHA(destination, date, secret)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // secret is optional, else zero-length
</span></span><span style="display:flex;"><span>  A = destination&#39;s signing public key
</span></span><span style="display:flex;"><span>  stA = signature type of A, 2 bytes big endian (0x0007 or 0x000b)
</span></span><span style="display:flex;"><span>  stA&#39; = signature type of blinded public key A&#39;, 2 bytes big endian (0x000b)
</span></span><span style="display:flex;"><span>  keydata = A || stA || stA&#39;
</span></span><span style="display:flex;"><span>  datestring = 8 bytes ASCII YYYYMMDD from the current date UTC
</span></span><span style="display:flex;"><span>  secret = UTF-8 encoded string
</span></span><span style="display:flex;"><span>  seed = HKDF(H(&#34;I2PGenerateAlpha&#34;, keydata), datestring || secret, &#34;i2pblinding1&#34;, 64)
</span></span><span style="display:flex;"><span>  // treat seed as a 64 byte little-endian value
</span></span><span style="display:flex;"><span>  alpha = seed mod L
</span></span></code></pre></div><p>BLIND_PRIVKEY(), leaseset&rsquo;i yayınlayan sahip için:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// BLIND_PRIVKEY()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  alpha = GENERATE_ALPHA(destination, date, secret)
</span></span><span style="display:flex;"><span>  // If for a Ed25519 private key (type 7)
</span></span><span style="display:flex;"><span>  seed = destination&#39;s signing private key
</span></span><span style="display:flex;"><span>  a = left half of SHA512(seed) and clamped as usual for Ed25519
</span></span><span style="display:flex;"><span>  // else, for a Red25519 private key (type 11)
</span></span><span style="display:flex;"><span>  a = destination&#39;s signing private key
</span></span><span style="display:flex;"><span>  // Addition using scalar arithmentic
</span></span><span style="display:flex;"><span>  blinded signing private key = a&#39; = BLIND_PRIVKEY(a, alpha) = (a + alpha) mod L
</span></span><span style="display:flex;"><span>  blinded signing public key = A&#39; = DERIVE_PUBLIC(a&#39;)
</span></span></code></pre></div><p>BLIND_PUBKEY(), leaseset&rsquo;i alan istemciler için:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// BLIND_PUBKEY()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  alpha = GENERATE_ALPHA(destination, date, secret)
</span></span><span style="display:flex;"><span>  A = destination&#39;s signing public key
</span></span><span style="display:flex;"><span>  // Addition using group elements (points on the curve)
</span></span><span style="display:flex;"><span>  blinded public key = A&#39; = BLIND_PUBKEY(A, alpha) = A + DERIVE_PUBLIC(alpha)
</span></span></code></pre></div><p>Her iki A&rsquo; hesaplama yöntemi de gerektiği gibi aynı sonucu verir.</p>
<h4 id="signing">Signing</h4>
<p>Unblinded leaseset, unblinded Ed25519 veya Red25519 imzalama özel anahtarı ile imzalanır ve her zamanki gibi unblinded Ed25519 veya Red25519 imzalama genel anahtarı (sig türleri 7 veya 11) ile doğrulanır.</p>
<p>İmzalama genel anahtarı çevrimdışıysa, unblinded leaseset, unblinded geçici Ed25519 veya Red25519 imzalama özel anahtarı tarafından imzalanır ve her zamanki gibi unblinded Ed25519 veya Red25519 geçici imzalama genel anahtarı (sig türleri 7 veya 11) ile doğrulanır. Şifrelenmiş leaseset&rsquo;ler için çevrimdışı anahtarlarla ilgili ek notlar için aşağıya bakın.</p>
<p>Şifrelenmiş leaseSet&rsquo;in imzalanması için, köreltilmiş anahtarlarla imzalama ve doğrulama yapmak üzere <a href="https://github.com/zcash/zips/tree/master/protocol/protocol.pdf">RedDSA</a>
 tabanlı Red25519 kullanırız. Red25519 imzaları Ed25519 eğrisi üzerindedir ve hash için SHA-512 kullanır.</p>
<p>Red25519, aşağıda belirtilen durumlar dışında standart Ed25519 ile aynıdır.</p>
<h4 id="signverify-calculations">Sign/Verify Calculations</h4>
<p>Şifrelenmiş leaseset&rsquo;in dış kısmı Red25519 anahtarları ve imzaları kullanır.</p>
<p>Red25519, Ed25519 ile neredeyse aynıdır. İki fark vardır:</p>
<p>Red25519 özel anahtarları rastgele sayılardan üretilir ve ardından yukarıda tanımlanan L değerine göre mod L işlemiyle indirgenir. Ed25519 özel anahtarları rastgele sayılardan üretilir ve ardından 0 ve 31. baytlara bit düzeyinde maskeleme kullanılarak &ldquo;kısıtlanır&rdquo;. Bu işlem Red25519 için yapılmaz. Yukarıda tanımlanan GENERATE_ALPHA() ve BLIND_PRIVKEY() fonksiyonları mod L kullanarak uygun Red25519 özel anahtarları üretir.</p>
<p>Red25519&rsquo;da, imzalama için r hesaplaması ek rastgele veri kullanır ve özel anahtarın hash&rsquo;i yerine genel anahtar değerini kullanır. Rastgele veri nedeniyle, aynı veriyi aynı anahtarla imzalarken bile her Red25519 imzası farklıdır.</p>
<p>İmzalama:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>T = 80 random bytes
</span></span><span style="display:flex;"><span>  r = H*(T || publickey || message)
</span></span><span style="display:flex;"><span>  // rest is the same as in Ed25519
</span></span></code></pre></div><p>Doğrulama:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// same as in Ed25519
</span></span></code></pre></div><h3 id="notlar-2">Notlar</h3>
<h4 id="derivation-of-subcredentials">Derivation of subcredentials</h4>
<p>Kör etme işleminin bir parçası olarak, şifrelenmiş bir LS2&rsquo;nin yalnızca ilgili Destination&rsquo;ın imzalama genel anahtarını bilen biri tarafından şifresinin çözülebilmesini sağlamamız gerekir. Tam Destination gerekmez. Bunu başarmak için, imzalama genel anahtarından bir kimlik bilgisi türetiriz:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>A = destination&#39;s signing public key
</span></span><span style="display:flex;"><span>  stA = signature type of A, 2 bytes big endian (0x0007 or 0x000b)
</span></span><span style="display:flex;"><span>  stA&#39; = signature type of A&#39;, 2 bytes big endian (0x000b)
</span></span><span style="display:flex;"><span>  keydata = A || stA || stA&#39;
</span></span><span style="display:flex;"><span>  credential = H(&#34;credential&#34;, keydata)
</span></span></code></pre></div><p>Kişiselleştirme dizesi, credential&rsquo;ın düz Destination hash&rsquo;i gibi DHT arama anahtarı olarak kullanılan herhangi bir hash ile çakışmamasını sağlar.</p>
<p>Belirli bir kör edilmiş anahtar için, ardından bir alt kimlik bilgisi türetebiliriz:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>subcredential = H(&#34;subcredential&#34;, credential || blindedPublicKey)
</span></span></code></pre></div><p>Alt kimlik bilgisi, aşağıdaki anahtar türetme süreçlerinde yer alır ve bu anahtarları Destination&rsquo;ın imzalama genel anahtarı bilgisine bağlar.</p>
<h4 id="layer-1-encryption">Layer 1 encryption</h4>
<p>Öncelikle, anahtar türetme sürecinin girdisi hazırlanır:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerInput = subcredential || publishedTimestamp
</span></span></code></pre></div><p>Daha sonra, rastgele bir salt oluşturulur:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerSalt = CSRNG(32)
</span></span></code></pre></div><p>Ardından katman 1&rsquo;i şifrelemek için kullanılan anahtar türetilir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>keys = HKDF(outerSalt, outerInput, &#34;ELS2_L1K&#34;, 44)
</span></span><span style="display:flex;"><span>  outerKey = keys[0:31]
</span></span><span style="display:flex;"><span>  outerIV = keys[32:43]
</span></span></code></pre></div><p>Son olarak, katman 1 düz metni şifrelenir ve serileştirilir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerCiphertext = outerSalt || ENCRYPT(outerKey, outerIV, outerPlaintext)
</span></span></code></pre></div><h4 id="layer-1-decryption">Layer 1 decryption</h4>
<p>Tuz, katman 1 şifreli metindan ayrıştırılır:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerSalt = outerCiphertext[0:31]
</span></span></code></pre></div><p>Ardından katman 1&rsquo;i şifrelemek için kullanılan anahtar türetilir:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerInput = subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  keys = HKDF(outerSalt, outerInput, &#34;ELS2_L1K&#34;, 44)
</span></span><span style="display:flex;"><span>  outerKey = keys[0:31]
</span></span><span style="display:flex;"><span>  outerIV = keys[32:43]
</span></span></code></pre></div><p>Son olarak, katman 1 şifreli metni şifre çözülür:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>outerPlaintext = DECRYPT(outerKey, outerIV, outerCiphertext[32:end])
</span></span></code></pre></div><h4 id="layer-2-encryption">Layer 2 encryption</h4>
<p>İstemci yetkilendirmesi etkinleştirildiğinde, <code>authCookie</code> aşağıda açıklandığı gibi hesaplanır. İstemci yetkilendirmesi devre dışı bırakıldığında, <code>authCookie</code> sıfır uzunluklu bayt dizisidir.</p>
<p>Şifreleme, katman 1&rsquo;e benzer bir şekilde ilerler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>innerInput = authCookie || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  innerSalt = CSRNG(32)
</span></span><span style="display:flex;"><span>  keys = HKDF(innerSalt, innerInput, &#34;ELS2_L2K&#34;, 44)
</span></span><span style="display:flex;"><span>  innerKey = keys[0:31]
</span></span><span style="display:flex;"><span>  innerIV = keys[32:43]
</span></span><span style="display:flex;"><span>  innerCiphertext = innerSalt || ENCRYPT(innerKey, innerIV, innerPlaintext)
</span></span></code></pre></div><h4 id="layer-2-decryption">Layer 2 decryption</h4>
<p>İstemci yetkilendirmesi etkinleştirildiğinde, <code>authCookie</code> aşağıda açıklandığı şekilde hesaplanır. İstemci yetkilendirmesi devre dışı bırakıldığında, <code>authCookie</code> sıfır uzunluklu bayt dizisidir.</p>
<p>Şifre çözme işlemi katman 1&rsquo;e benzer bir şekilde devam eder:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>innerInput = authCookie || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  innerSalt = innerCiphertext[0:31]
</span></span><span style="display:flex;"><span>  keys = HKDF(innerSalt, innerInput, &#34;ELS2_L2K&#34;, 44)
</span></span><span style="display:flex;"><span>  innerKey = keys[0:31]
</span></span><span style="display:flex;"><span>  innerIV = keys[32:43]
</span></span><span style="display:flex;"><span>  innerPlaintext = DECRYPT(innerKey, innerIV, innerCiphertext[32:end])
</span></span></code></pre></div><h3 id="şifrelenmiş-ls2">Şifrelenmiş LS2</h3>
<p>Bir Destination için istemci yetkilendirmesi etkinleştirildiğinde, sunucu şifrelenmiş LS2 verilerinin şifresini çözmeye yetkili oldukları istemcilerin bir listesini tutar. İstemci başına saklanan veriler yetkilendirme mekanizmasına bağlıdır ve her istemcinin oluşturup güvenli bir bant-dışı mekanizma aracılığıyla sunucuya gönderdiği bir tür anahtar materyali içerir.</p>
<p>İstemci başına yetkilendirme uygulamak için iki alternatif bulunmaktadır:</p>
<h4 id="dh-client-authorization">DH client authorization</h4>
<p>Her istemci bir DH anahtar çifti <code>[csk_i, cpk_i]</code> oluşturur ve genel anahtar <code>cpk_i</code>&lsquo;yi sunucuya gönderir.</p>
<p>Sunucu işleme
^^^^^^^^^^^^^^^^^</p>
<p>Sunucu yeni bir <code>authCookie</code> ve geçici bir DH anahtar çifti oluşturur:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authCookie = CSRNG(32)
</span></span><span style="display:flex;"><span>  esk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  epk = DERIVE_PUBLIC(esk)
</span></span></code></pre></div><p>Ardından her yetkili istemci için, sunucu <code>authCookie</code>&lsquo;yi onun public key&rsquo;ine şifreler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sharedSecret = DH(esk, cpk_i)
</span></span><span style="display:flex;"><span>  authInput = sharedSecret || cpk_i || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  okm = HKDF(epk, authInput, &#34;ELS2_XCA&#34;, 52)
</span></span><span style="display:flex;"><span>  clientKey_i = okm[0:31]
</span></span><span style="display:flex;"><span>  clientIV_i = okm[32:43]
</span></span><span style="display:flex;"><span>  clientID_i = okm[44:51]
</span></span><span style="display:flex;"><span>  clientCookie_i = ENCRYPT(clientKey_i, clientIV_i, authCookie)
</span></span></code></pre></div><p>Sunucu, her <code>[clientID_i, clientCookie_i]</code> tuple&rsquo;ını <code>epk</code> ile birlikte şifrelenmiş LS2&rsquo;nin 1. katmanına yerleştirir.</p>
<p>İstemci işleme
^^^^^^^^^^^^^^^^^</p>
<p>İstemci, beklenen istemci tanımlayıcısı <code>clientID_i</code>, şifreleme anahtarı <code>clientKey_i</code> ve şifreleme IV <code>clientIV_i</code> değerlerini türetmek için özel anahtarını kullanır:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>sharedSecret = DH(csk_i, epk)
</span></span><span style="display:flex;"><span>  authInput = sharedSecret || cpk_i || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  okm = HKDF(epk, authInput, &#34;ELS2_XCA&#34;, 52)
</span></span><span style="display:flex;"><span>  clientKey_i = okm[0:31]
</span></span><span style="display:flex;"><span>  clientIV_i = okm[32:43]
</span></span><span style="display:flex;"><span>  clientID_i = okm[44:51]
</span></span></code></pre></div><p>Ardından istemci, <code>clientID_i</code> içeren bir giriş için katman 1 yetkilendirme verilerini arar. Eşleşen bir giriş mevcutsa, istemci <code>authCookie</code> elde etmek için onu şifreler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authCookie = DECRYPT(clientKey_i, clientIV_i, clientCookie_i)
</span></span></code></pre></div><h4 id="pre-shared-key-client-authorization">Pre-shared key client authorization</h4>
<p>Her istemci gizli 32-byte&rsquo;lık bir anahtar <code>psk_i</code> oluşturur ve bunu sunucuya gönderir. Alternatif olarak, sunucu gizli anahtarı oluşturabilir ve bir veya daha fazla istemciye gönderebilir.</p>
<p>Sunucu işleme
^^^^^^^^^^^^^^^^^</p>
<p>Sunucu yeni bir <code>authCookie</code> ve salt oluşturur:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authCookie = CSRNG(32)
</span></span><span style="display:flex;"><span>  authSalt = CSRNG(32)
</span></span></code></pre></div><p>Her yetkili istemci için sunucu, <code>authCookie</code>&lsquo;yi önceden paylaşılan anahtarına şifreler:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authInput = psk_i || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  okm = HKDF(authSalt, authInput, &#34;ELS2PSKA&#34;, 52)
</span></span><span style="display:flex;"><span>  clientKey_i = okm[0:31]
</span></span><span style="display:flex;"><span>  clientIV_i = okm[32:43]
</span></span><span style="display:flex;"><span>  clientID_i = okm[44:51]
</span></span><span style="display:flex;"><span>  clientCookie_i = ENCRYPT(clientKey_i, clientIV_i, authCookie)
</span></span></code></pre></div><p>Sunucu, her <code>[clientID_i, clientCookie_i]</code> ikilisini <code>authSalt</code> ile birlikte şifrelenmiş LS2&rsquo;nin 1. katmanına yerleştirir.</p>
<p>İstemci işleme
^^^^^^^^^^^^^^^^^</p>
<p>İstemci, beklenen istemci tanımlayıcısı <code>clientID_i</code>, şifreleme anahtarı <code>clientKey_i</code> ve şifreleme IV <code>clientIV_i</code> değerlerini türetmek için önceden paylaşılmış anahtarını kullanır:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authInput = psk_i || subcredential || publishedTimestamp
</span></span><span style="display:flex;"><span>  okm = HKDF(authSalt, authInput, &#34;ELS2PSKA&#34;, 52)
</span></span><span style="display:flex;"><span>  clientKey_i = okm[0:31]
</span></span><span style="display:flex;"><span>  clientIV_i = okm[32:43]
</span></span><span style="display:flex;"><span>  clientID_i = okm[44:51]
</span></span></code></pre></div><p>Ardından istemci, katman 1 yetkilendirme verilerinde <code>clientID_i</code> içeren bir girdi arar. Eşleşen bir girdi varsa, istemci <code>authCookie</code> elde etmek için şifreyi çözer:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>authCookie = DECRYPT(clientKey_i, clientIV_i, clientCookie_i)
</span></span></code></pre></div><h4 id="security-considerations">Security considerations</h4>
<p>Yukarıdaki istemci yetkilendirme mekanizmalarının her ikisi de istemci üyeliği için gizlilik sağlar. Yalnızca Destination&rsquo;ı bilen bir varlık, herhangi bir zamanda kaç istemcinin abone olduğunu görebilir, ancak hangi istemcilerin eklendiğini veya iptal edildiğini takip edemez.</p>
<p>Sunucular, istemcilerin listede kendi konumlarını öğrenmelerini ve diğer istemcilerin ne zaman eklendiğini veya kaldırıldığını çıkarsamalarını önlemek için, şifrelenmiş bir LS2 oluşturdukları her seferde istemcilerin sırasını rastgele hale getirmelidirler.</p>
<p>Bir sunucu, yetkilendirme verileri listesine rastgele girdiler ekleyerek abone olan istemci sayısını gizlemeyi SEÇEBİLİR.</p>
<p>DH istemci yetkilendirmesinin avantajları
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<ul>
<li>Şemanın güvenliği yalnızca istemci anahtar materyalinin bant dışı değişimine bağlı değildir. İstemcinin özel anahtarının hiçbir zaman cihazından ayrılmasına gerek yoktur ve bu nedenle bant dışı değişimi engelleyebilen ancak DH algoritmasını kıramayan bir saldırgan, şifrelenmiş LS2&rsquo;yi çözemez veya istemciye ne kadar süre erişim verildiğini belirleyemez.</li>
</ul>
<p>DH istemci yetkilendirmesinin dezavantajları
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<ul>
<li>N istemci için sunucu tarafında N + 1 DH işlemi gerektirir.</li>
<li>İstemci tarafında bir DH işlemi gerektirir.</li>
<li>İstemcinin gizli anahtarı oluşturmasını gerektirir.</li>
</ul>
<p>PSK istemci yetkilendirmesinin avantajları
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<ul>
<li>DH işlemleri gerektirmez.</li>
<li>Sunucunun gizli anahtarı oluşturmasına izin verir.</li>
<li>İstenirse sunucunun aynı anahtarı birden fazla istemciyle paylaşmasına izin verir.</li>
</ul>
<p>PSK istemci yetkilendirmesinin dezavantajları
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</p>
<ul>
<li>Şemanın güvenliği, istemci anahtar materyalinin bant dışı değişimine kritik olarak bağımlıdır. Belirli bir istemci için değişimi engelleyen bir saldırgan, o istemcinin yetkilendirildiği sonraki şifrelenmiş LS2&rsquo;leri çözebilir ve aynı zamanda istemcinin erişiminin ne zaman iptal edildiğini belirleyebilir.</li>
</ul>
<h3 id="tanımlar">Tanımlar</h3>
<p>149 numaralı öneriye bakın.</p>
<p>BitTorrent için şifrelenmiş bir LS2 kullanamazsınız, çünkü compact announce yanıtları 32 bayttır. Bu 32 bayt yalnızca hash&rsquo;i içerir. LeaseSet&rsquo;in şifrelendiğini veya imza türlerini belirten bir yer yoktur.</p>
<h3 id="format-3">Format</h3>
<p>Çevrimdışı anahtarlara sahip şifrelenmiş leaseSets için, kör edilmiş özel anahtarlar da çevrimdışı olarak üretilmelidir, her gün için bir tane.</p>
<p>Şifrelenmiş leaseset&rsquo;in açık metin kısmında bulunan isteğe bağlı çevrimdışı imza bloğu nedeniyle, floodfill&rsquo;leri tarayan herhangi biri bunu birkaç gün boyunca leaseset&rsquo;i takip etmek için kullanabilir (ancak şifrelerini çözemez). Bunu önlemek için anahtar sahibi her gün için yeni geçici anahtarlar da oluşturmalıdır. Hem geçici hem de körleştirilmiş anahtarlar önceden oluşturulabilir ve router&rsquo;a toplu olarak teslim edilebilir.</p>
<p>Bu teklifte birden fazla geçici ve körleştirilmiş anahtarı paketlemek ve bunları istemciye veya router&rsquo;a sağlamak için tanımlanmış bir dosya formatı bulunmamaktadır. Bu teklifte çevrimdışı anahtarlarla şifrelenmiş leaseSet&rsquo;leri desteklemek için tanımlanmış bir I2CP protokol geliştirmesi bulunmamaktadır.</p>
<h3 id="notes-1">Notes</h3>
<ul>
<li>
<p>Şifrelenmiş leaseSet&rsquo;ler kullanan bir hizmet, şifrelenmiş versiyonu
floodfill&rsquo;lere yayınlar. Ancak verimlilik için, kimlik doğrulamasından sonra
(örneğin whitelist aracılığıyla) istemcilere sarmalanmış garlic mesajında
şifrelenmemiş leaseSet&rsquo;ler gönderir.</p>
</li>
<li>
<p>Floodfill&rsquo;ler kötüye kullanımı önlemek için maksimum boyutu makul bir değerle sınırlayabilir.</p>
</li>
<li>
<p>Şifre çözme işleminden sonra, iç zaman damgası ve son kullanma tarihinin üst seveldekilerle eşleşmesi de dahil olmak üzere çeşitli kontroller yapılmalıdır.</p>
</li>
<li>
<p>ChaCha20, AES yerine tercih edildi. AES donanım desteği mevcut olduğunda hızlar benzer olsa da, ChaCha20, düşük seviye ARM cihazları gibi AES donanım desteğinin bulunmadığı durumlarda 2.5-3 kat daha hızlıdır.</p>
</li>
<li>
<p>Hızla yeterince ilgilenmediğimiz için anahtarlı BLAKE2b kullanmıyoruz. İhtiyaç duyduğumuz en büyük n değerini karşılayacak kadar büyük bir çıktı boyutuna sahip (veya sayaç argümanı ile istenen anahtar başına bir kez çağırabiliriz). BLAKE2b, SHA-256&rsquo;dan çok daha hızlıdır ve anahtarlı-BLAKE2b toplam hash fonksiyonu çağrısı sayısını azaltır.
Ancak, diğer nedenlerle BLAKE2b&rsquo;ye geçmeyi önerdiğimiz 148 numaralı öneriyi görün.
Bkz. <a href="https://www.lvh.io/posts/secure-key-derivation-performance.html">Secure key derivation performance</a>
.</p>
</li>
</ul>
<h3 id="meta-ls2">Meta LS2</h3>
<p>Bu, multihoming&rsquo;i değiştirmek için kullanılır. Herhangi bir leaseset gibi, bu da yaratıcı tarafından imzalanır. Bu, hedef hash&rsquo;lerin kimlik doğrulamalı bir listesidir.</p>
<p>Meta LS2, ağaç yapısının en üstünde ve muhtemelen ara düğümlerinde bulunur. Büyük çoklu barındırma (massive multihoming) desteği için her biri bir LS, LS2 veya başka bir Meta LS2&rsquo;yi işaret eden bir dizi giriş içerir. Bir Meta LS2, LS, LS2 ve Meta LS2 girişlerinin karışımını içerebilir. Ağacın yaprakları her zaman bir LS veya LS2&rsquo;dir. Ağaç bir DAG&rsquo;dır; döngüler yasaklanmıştır; arama yapan istemciler döngüleri tespit etmeli ve takip etmeyi reddetmelidir.</p>
<p>Bir Meta LS2, standart bir LS veya LS2&rsquo;den çok daha uzun bir sona erme süresine sahip olabilir. Üst düzey, yayınlama tarihinden birkaç saat sonra bir sona erme süresine sahip olabilir. Maksimum sona erme süresi floodfill&rsquo;ler ve istemciler tarafından uygulanacaktır ve henüz belirlenmemiştir.</p>
<p>Meta LS2&rsquo;nin kullanım senaryosu büyük ölçekli multihoming&rsquo;dir, ancak router&rsquo;ların leaseSet&rsquo;lere korelasyonuna karşı (router yeniden başlatma zamanında) şu anda LS veya LS2 ile sağlanandan daha fazla koruma sunmaz. Bu, muhtemelen korelasyon korumasına ihtiyaç duymayan &ldquo;facebook&rdquo; kullanım senaryosuna eşdeğerdir. Bu kullanım senaryosu muhtemelen ağacın her düğümünde standart başlıkta sağlanan offline anahtarlara ihtiyaç duyar.</p>
<p>Yaprak router&rsquo;ları, ara ve ana Meta LS imzalayıcıları arasındaki koordinasyon için arka uç protokolü burada belirtilmemiştir. Gereksinimler son derece basittir - sadece eşin çalışır durumda olduğunu doğrulayın ve birkaç saatte bir yeni bir LS yayınlayın. Tek karmaşıklık, başarısızlık durumunda üst düzey veya ara düzey Meta LS&rsquo;ler için yeni yayıncıları seçmektir.</p>
<p>Birden fazla router&rsquo;dan gelen lease&rsquo;lerin birleştirildiği, imzalandığı ve tek bir leaseset içinde yayınlandığı mix-and-match leaseset&rsquo;ler, 140 numaralı öneride &ldquo;invisible multihoming&rdquo; olarak belgelenmiştir. Bu öneri yazıldığı şekliyle uygulanamaz, çünkü streaming bağlantıları tek bir router&rsquo;a &ldquo;yapışkan&rdquo; olmayacaktır, bakınız <a href="http://zzz.i">http://zzz.i</a>
2p/topics/2335 .</p>
<p>Arka uç protokolü ve router ile istemci iç yapılarıyla etkileşim, görünmez çoklu bağlantı (invisible multihoming) için oldukça karmaşık olacaktır.</p>
<p>Üst düzey Meta LS için floodfill&rsquo;i aşırı yüklemekten kaçınmak için, son kullanma süresi en az birkaç saat olmalıdır. İstemciler üst düzey Meta LS&rsquo;yi önbelleklemeli ve süresi dolmamışsa yeniden başlatmalar boyunca kalıcı hale getirmelidir.</p>
<p>İstemcilerin ağacı geçmesi için, yedek seçenekler dahil olmak üzere, kullanımın dağıtılması için bir algoritma tanımlamamız gerekiyor. Hash mesafesi, maliyet ve rastgelelik fonksiyonu. Bir düğümde hem LS veya LS2 hem de Meta LS varsa, bu leaseSet&rsquo;leri ne zaman kullanmaya izin verildiğini ve ne zaman ağacı geçmeye devam edeceğimizi bilmemiz gerekiyor.</p>
<p>ile Arama</p>
<pre><code>Standard LS flag (1)
</code></pre>
<p>İle sakla</p>
<pre><code>Meta LS2 type (7)
</code></pre>
<p>Şu konumda sakla</p>
<pre><code>Hash of destination
This hash is then used to generate the daily &quot;routing key&quot;, as in LS1
</code></pre>
<p>Tipik son kullanma süresi</p>
<pre><code>Hours. Max 18.2 hours (65535 seconds)
</code></pre>
<p>Yayınlayan</p>
<pre><code>&quot;master&quot; Destination or coordinator, or intermediate coordinators
</code></pre>
<h3 id="format-4">Format</h3>
<pre tabindex="0"><code>Standard LS2 Header as specified above

  Meta LS2 Type-Specific Part
  - Properties (Mapping as specified in common structures spec, 2 zero bytes if none)
  - Number of entries (1 byte) Maximum TBD
  - Entries. Each entry contains: (40 bytes)
    - Hash (32 bytes)
    - Flags (2 bytes)
      TBD. Set all to zero for compatibility with future uses.
    - Type (1 byte) The type of LS it is referencing;
      1 for LS, 3 for LS2, 5 for encrypted, 7 for meta, 0 for unknown.
    - Cost (priority) (1 byte)
    - Expires (4 bytes) (4 bytes, big endian, seconds since epoch, rolls over in 2106)
  - Number of revocations (1 byte) Maximum TBD
  - Revocations: Each revocation contains: (32 bytes)
    - Hash (32 bytes)

  Standard LS2 Signature:
  - Signature (40+ bytes)
    The signature is of everything above.
</code></pre><p>Bayraklar ve özellikler: gelecekteki kullanım için</p>
<h3 id="körleme-anahtarı-türetimi">Körleme Anahtarı Türetimi</h3>
<ul>
<li>
<p>Bu hizmeti kullanan dağıtık bir servis, servis hedefinin özel anahtarına sahip bir veya daha fazla &ldquo;master&quot;a sahip olacaktır. Bunlar (bant dışı) mevcut aktif hedeflerin listesini belirleyecek ve Meta LS2&rsquo;yi yayınlayacaktır. Yedeklilik için, birden fazla master Meta LS2&rsquo;yi multihome (yani eşzamanlı olarak yayınlama) yapabilir.</p>
</li>
<li>
<p>Dağıtık bir servis tek bir destination ile başlayabilir veya eski tarz
multihoming kullanabilir, ardından Meta LS2&rsquo;ye geçiş yapabilir. Standart bir LS
arama işlemi LS, LS2 veya Meta LS2&rsquo;den herhangi birini döndürebilir.</p>
</li>
<li>
<p>Bir servis Meta LS2 kullandığında, hiçbir tüneli (lease) yoktur.</p>
</li>
</ul>
<h3 id="service-record">Service Record</h3>
<p>Bu, bir hedefin (destination) bir hizmette katılım gösterdiğini belirten bireysel bir kayıttır. Katılımcıdan floodfill&rsquo;e gönderilir. Bir floodfill tarafından asla tek başına gönderilmez, yalnızca Service List&rsquo;in bir parçası olarak gönderilir. Service Record ayrıca, süre sonunu (expiration) sıfıra ayarlayarak bir hizmetteki katılımı iptal etmek için de kullanılır.</p>
<p>Bu bir LS2 değildir ancak standart LS2 başlık ve imza formatını kullanır.</p>
<p>ile Arama</p>
<pre><code>n/a, see Service List
</code></pre>
<p>Şununla depola</p>
<pre><code>Service Record type (9)
</code></pre>
<p>Şu konumda sakla</p>
<pre><code>Hash of service name
This hash is then used to generate the daily &quot;routing key&quot;, as in LS1
</code></pre>
<p>Tipik sona erme süresi</p>
<pre><code>Hours. Max 18.2 hours (65535 seconds)
</code></pre>
<p>Yayınlayan</p>
<pre><code>Destination
</code></pre>
<h3 id="format-5">Format</h3>
<pre tabindex="0"><code>Standard LS2 Header as specified above

  Service Record Type-Specific Part
  - Port (2 bytes, big endian) (0 if unspecified)
  - Hash of service name (32 bytes)

  Standard LS2 Signature:
  - Signature (40+ bytes)
    The signature is of everything above.
</code></pre><h3 id="notes-2">Notes</h3>
<ul>
<li>
<p>Eğer expires tamamen sıfırlardan oluşuyorsa, floodfill kaydı iptal etmeli ve artık onu servis listesine dahil etmemelidir.</p>
</li>
<li>
<p>Depolama: Floodfill bu kayıtların depolanmasını sıkı bir şekilde kısıtlayabilir ve
hash başına depolanan kayıt sayısını ve bunların sona erme sürelerini sınırlayabilir. Ayrıca
hash&rsquo;lerin beyaz listesi de kullanılabilir.</p>
</li>
<li>
<p>Aynı hash&rsquo;te bulunan diğer netDb türleri önceliğe sahiptir, bu nedenle bir servis kaydı asla bir LS/RI&rsquo;yi üzerine yazamaz, ancak bir LS/RI o hash&rsquo;teki tüm servis kayıtlarını üzerine yazar.</p>
</li>
</ul>
<h3 id="service-list">Service List</h3>
<p>Bu bir LS2 gibi bir şey değildir ve farklı bir format kullanır.</p>
<p>Hizmet listesi floodfill tarafından oluşturulur ve imzalanır. Herhangi birinin bir floodfill&rsquo;e Hizmet Kaydı yayınlayarak bir hizmete katılabilmesi nedeniyle kimlik doğrulaması yapılmaz.</p>
<p>Bir Servis Listesi, tam Servis Kayıtları değil, Kısa Servis Kayıtları içerir. Bunlar imzalar içerir ancak tam destination&rsquo;lar değil, yalnızca hash&rsquo;ler içerir, bu nedenle tam destination olmadan doğrulanamaz.</p>
<p>Hizmet listelerinin güvenliği (varsa) ve arzu edilirliği henüz belirlenmemiştir. Floodfill&rsquo;ler yayınlamayı ve aramaları bir hizmet beyaz listesiyle sınırlandırabilir, ancak bu beyaz liste implementasyona veya operatör tercihine bağlı olarak değişebilir. İmplementasyonlar arasında ortak, temel bir beyaz liste üzerinde fikir birliğine varmak mümkün olmayabilir.</p>
<p>Yukarıdaki servis kaydında servis adı dahil edilmişse, floodfill operatörleri itiraz edebilir; sadece hash dahil edilmişse, doğrulama yoktur ve bir servis kaydı diğer herhangi bir netDb türünden önce &ldquo;içeri girebilir&rdquo; ve floodfill&rsquo;de saklanabilir.</p>
<p>Şununla arama yap</p>
<pre><code>Service List lookup type (11)
</code></pre>
<p>Şununla sakla</p>
<pre><code>Service List type (11)
</code></pre>
<p>Şurada sakla</p>
<pre><code>Hash of service name
This hash is then used to generate the daily &quot;routing key&quot;, as in LS1
</code></pre>
<p>Tipik süre sonu</p>
<pre><code>Hours, not specified in the list itself, up to local policy
</code></pre>
<p>Yayımlayan</p>
<pre><code>Nobody, never sent to floodfill, never flooded.
</code></pre>
<h3 id="format-6">Format</h3>
<p>Yukarıda belirtilen standart LS2 başlığını KULLANMAZ.</p>
<pre tabindex="0"><code>- Type (1 byte)
    Not actually in header, but part of data covered by signature.
    Take from field in Database Store Message.
  - Hash of the service name (implicit, in the Database Store message)
  - Hash of the Creator (floodfill) (32 bytes)
  - Published timestamp (8 bytes, big endian)

  - Number of Short Service Records (1 byte)
  - List of Short Service Records:
    Each Short Service Record contains (90+ bytes)
    - Dest hash (32 bytes)
    - Published timestamp (8 bytes, big endian)
    - Expires (4 bytes, big endian) (offset from published in ms)
    - Flags (2 bytes)
    - Port (2 bytes, big endian)
    - Sig length (2 bytes, big endian)
    - Signature of dest (40+ bytes)

  - Number of Revocation Records (1 byte)
  - List of Revocation Records:
    Each Revocation Record contains (86+ bytes)
    - Dest hash (32 bytes)
    - Published timestamp (8 bytes, big endian)
    - Flags (2 bytes)
    - Port (2 bytes, big endian)
    - Sig length (2 bytes, big endian)
    - Signature of dest (40+ bytes)

  - Signature of floodfill (40+ bytes)
    The signature is of everything above.
</code></pre><p>Servis Listesinin imzasını doğrulamak için:</p>
<ul>
<li>servis adının hash&rsquo;ini başa ekle</li>
<li>yaratıcının hash&rsquo;ini kaldır</li>
<li>değiştirilmiş içeriklerin imzasını kontrol et</li>
</ul>
<p>Her Kısa Servis Kaydının imzasını doğrulamak için:</p>
<ul>
<li>Hedefi getir</li>
<li>İmzayı kontrol et (yayınlanan zaman damgası + sona erme + bayraklar + port + Servis adının Hash&rsquo;i)</li>
</ul>
<p>Her İptal Kaydının imzasını doğrulamak için:</p>
<ul>
<li>Hedef konumu getir</li>
<li>İmzayı kontrol et (yayınlanan zaman damgası + 4 sıfır bayt + bayraklar + port + Servis adının hash&rsquo;i)</li>
</ul>
<h3 id="notes-3">Notes</h3>
<ul>
<li>
<p>Bilinmeyen imza türlerini destekleyebilmek için imza türü yerine imza uzunluğu kullanıyoruz.</p>
</li>
<li>
<p>Bir hizmet listesinin son kullanma tarihi yoktur, alıcılar politikaya veya bireysel kayıtların son kullanma tarihine dayanarak kendi kararlarını verebilirler.</p>
</li>
<li>
<p>Service Lists flood edilmez, sadece bireysel Service Records flood edilir. Her
floodfill bir Service List oluşturur, imzalar ve önbelleğe alır. Floodfill,
önbellek süresi ve maksimum service ile revocation record sayısı için kendi
politikasını kullanır.</p>
</li>
</ul>
<h2 id="common-structures-spec-changes-required">Common Structures Spec Changes Required</h2>
<h3 id="şifreleme-ve-işleme">Şifreleme ve işleme</h3>
<p>Bu önerinin kapsamı dışında. ECIES önerilerinden 144 ve 145&rsquo;e ekleyin.</p>
<h3 id="new-intermediate-structures">New Intermediate Structures</h3>
<p>Release 0.9.38 itibariyle geçerli olmak üzere Lease2, MetaLease, LeaseSet2Header ve OfflineSignature için yeni yapılar ekle.</p>
<h3 id="new-netdb-types">New NetDB Types</h3>
<p>Yukarıdan dahil edilen her yeni leaseset türü için yapılar ekleyin. LeaseSet2, EncryptedLeaseSet ve MetaLeaseSet için 0.9.38 sürümünden itibaren geçerlidir. Service Record ve Service List için ön aşamada ve planlanmamış.</p>
<h3 id="new-signature-type">New Signature Type</h3>
<p>RedDSA_SHA512_Ed25519 Tip 11&rsquo;i ekleyin. Public key 32 bayt; private key 32 bayt; hash 64 bayt; imza 64 bayttır.</p>
<h2 id="encryption-spec-changes-required">Encryption Spec Changes Required</h2>
<p>Bu teklif kapsamı dışındadır. Teklifleri 144 ve 145&rsquo;e bakınız.</p>
<h2 id="i2np-changes-required">I2NP Changes Required</h2>
<p>Not ekle: LS2 yalnızca minimum sürüme sahip floodfill&rsquo;lere yayınlanabilir.</p>
<h3 id="database-lookup-message">Database Lookup Message</h3>
<p>Hizmet listesi arama türünü ekleyin.</p>
<h3 id="changes">Changes</h3>
<pre tabindex="0"><code>Flags byte: Lookup type field, currently bits 3-2, expands to bits 4-2.
  Lookup type 0x04 is defined as the service list lookup.

  Add note: Service list loookup may only be sent to floodfills with a minimum version.
  Minimum version is 0.9.38.
</code></pre><h3 id="istemci-başına-yetkilendirme">İstemci başına yetkilendirme</h3>
<p>Tüm yeni mağaza türlerini ekleyin.</p>
<h3 id="changes-1">Changes</h3>
<pre tabindex="0"><code>Type byte: Type field, currently bit 0, expands to bits 3-0.
  Type 3 is defined as a LS2 store.
  Type 5 is defined as a encrypted LS2 store.
  Type 7 is defined as a meta LS2 store.
  Type 9 is defined as a service record store.
  Type 11 is defined as a service list store.
  Other types are undefined and invalid.

  Add note: All new types may only be published to floodfills with a minimum version.
  Minimum version is 0.9.38.
</code></pre><h2 id="i2cp-changes-required">I2CP Changes Required</h2>
<h3 id="i2cp-options">I2CP Options</h3>
<p>Router tarafında yorumlanan yeni seçenekler, SessionConfig Mapping içinde gönderilir:</p>
<pre tabindex="0"><code>
  i2cp.leaseSetType=nnn       The type of leaseset to be sent in the Create Leaseset Message
                              Value is the same as the netdb store type in the table above.
                              Interpreted client-side, but also passed to the router in the
                              SessionConfig, to declare intent and check support.

  i2cp.leaseSetEncType=nnn[,nnn]  The encryption types to be used.
                                  Interpreted client-side, but also passed to the router in
                                  the SessionConfig, to declare intent and check support.
                                  See proposals 144 and 145.

  i2cp.leaseSetOfflineExpiration=nnn  The expiration of the offline signature, ASCII,
                                      seconds since the epoch.

  i2cp.leaseSetTransientPublicKey=[type:]b64  The base 64 of the transient private key,
                                              prefixed by an optional sig type number
                                              or name, default DSA_SHA1.
                                              Length as inferred from the sig type

  i2cp.leaseSetOfflineSignature=b64   The base 64 of the offline signature.
                                      Length as inferred from the destination
                                      signing public key type

  i2cp.leaseSetSecret=b64     The base 64 of a secret used to blind the
                              address of the leaseset, default &#34;&#34;

  i2cp.leaseSetAuthType=nnn   The type of authentication for encrypted LS2.
                              0 for no per-client authentication (the default)
                              1 for DH per-client authentication
                              2 for PSK per-client authentication

  i2cp.leaseSetPrivKey=b64    A base 64 private key for the router to use to
                              decrypt the encrypted LS2,
                              only if per-client authentication is enabled
</code></pre><p>İstemci tarafında yorumlanan yeni seçenekler:</p>
<pre tabindex="0"><code>
  i2cp.leaseSetType=nnn     The type of leaseset to be sent in the Create Leaseset Message
                            Value is the same as the netdb store type in the table above.
                            Interpreted client-side, but also passed to the router in the
                            SessionConfig, to declare intent and check support.

  i2cp.leaseSetEncType=nnn[,nnn]  The encryption types to be used.
                                  Interpreted client-side, but also passed to the router in
                                  the SessionConfig, to declare intent and check support.
                                  See proposals 144 and 145.

  i2cp.leaseSetSecret=b64     The base 64 of a secret used to blind the
                              address of the leaseset, default &#34;&#34;

  i2cp.leaseSetAuthType=nnn       The type of authentication for encrypted LS2.
                                  0 for no per-client authentication (the default)
                                  1 for DH per-client authentication
                                  2 for PSK per-client authentication

  i2cp.leaseSetBlindedType=nnn   The sig type of the blinded key for encrypted LS2.
                                 Default depends on the destination sig type.

  i2cp.leaseSetClient.dh.nnn=b64name:b64pubkey   The base 64 of the client name (ignored, UI use only),
                                                 followed by a &#39;:&#39;, followed by the base 64 of the public
                                                 key to use for DH per-client auth. nnn starts with 0

  i2cp.leaseSetClient.psk.nnn=b64name:b64privkey   The base 64 of the client name (ignored, UI use only),
                                                   followed by a &#39;:&#39;, followed by the base 64 of the private
                                                   key to use for PSK per-client auth. nnn starts with 0
</code></pre><h3 id="session-config">Session Config</h3>
<p>Çevrimdışı imzalar için i2cp.leaseSetOfflineExpiration, i2cp.leaseSetTransientPublicKey ve i2cp.leaseSetOfflineSignature seçeneklerinin gerekli olduğunu ve imzanın geçici imzalama özel anahtarı tarafından yapıldığını unutmayın.</p>
<h3 id="base-32-adresleri-ile-şifrelenmiş-ls">Base 32 Adresleri ile Şifrelenmiş LS</h3>
<p>Router&rsquo;dan istemciye. Değişiklik yok. Kiralamalar (lease) 8-byte zaman damgalarıyla gönderilir, döndürülen leaseSet bir LS2 olsa ve 4-byte zaman damgalarına sahip olsa bile. Yanıtın bir Create Leaseset veya Create Leaseset2 Mesajı olabileceğini unutmayın.</p>
<h3 id="çevrimdışı-anahtarlarla-şifrelenmiş-ls">Çevrimdışı Anahtarlarla Şifrelenmiş LS</h3>
<p>Router&rsquo;dan istemciye. Değişiklik yok. Kiralamalar (leases) 8-bayt zaman damgalarıyla gönderilir, döndürülen leaseSet bir LS2 olsa ve 4-bayt zaman damgalarına sahip olsa bile. Yanıtın bir Create Leaseset veya Create Leaseset2 Mesajı olabileceğini unutmayın.</p>
<h3 id="notlar-3">Notlar</h3>
<p>İstemciden yönlendiriciye. Create Leaseset Mesajı yerine kullanılacak yeni mesaj.</p>
<h3 id="meta-ls2-1">Meta LS2</h3>
<ul>
<li>
<p>Router&rsquo;ın depolama türünü ayrıştırabilmesi için, tür mesajda bulunmalıdır,
ancak oturum yapılandırmasında router&rsquo;a önceden aktarılmış olmadıkça.
Ortak ayrıştırma kodu için, mesajın kendisinde bulunması daha kolaydır.</p>
</li>
<li>
<p>Router&rsquo;ın özel anahtarın türünü ve uzunluğunu bilmesi için,
anahtar lease set&rsquo;ten sonra olmalıdır, parser türü önceden
oturum yapılandırmasında bilmiyor ise.
Ortak ayrıştırma kodu için, bunu mesajın kendisinden bilmek daha kolaydır.</p>
</li>
<li>
<p>İmzalama özel anahtarı, daha önce iptal için tanımlanmış ve kullanılmamış olan,
LS2&rsquo;de mevcut değildir.</p>
</li>
</ul>
<h3 id="format-7">Format</h3>
<p>Create Leaseset2 Mesajının mesaj türü 41&rsquo;dir.</p>
<h3 id="notlar-4">Notlar</h3>
<pre tabindex="0"><code>Session ID
  Type byte: Type of lease set to follow
             Type 1 is a LS
             Type 3 is a LS2
             Type 5 is a encrypted LS2
             Type 7 is a meta LS2
  LeaseSet: type specified above
  Number of private keys to follow (1 byte)
  Encryption Private Keys: For each public key in the lease set,
                           in the same order
                           (Not present for Meta LS2)
                           - Encryption type (2 bytes, big endian)
                           - Encryption key length (2 bytes, big endian)
                           - Encryption key (number of bytes specified)
</code></pre><h3 id="hizmet-kaydı">Hizmet Kaydı</h3>
<ul>
<li>Minimum router sürümü 0.9.39&rsquo;dur.</li>
<li>Mesaj türü 40 ile ön sürüm 0.9.38&rsquo;de mevcuttu ancak format değiştirildi.
Tür 40 terk edildi ve desteklenmiyor.</li>
</ul>
<h3 id="format-8">Format</h3>
<ul>
<li>Şifrelenmiş ve meta LS&rsquo;yi desteklemek için daha fazla değişiklik gerekli.</li>
</ul>
<h3 id="notlar-5">Notlar</h3>
<p>İstemciden yönlendiriciye. Yeni mesaj.</p>
<h3 id="servis-listesi">Servis Listesi</h3>
<ul>
<li>
<p>Router, bir destination&rsquo;ın blinded olup olmadığını bilmesi gerekir.
Eğer blinded ise ve secret veya per-client authentication kullanıyorsa,
bu bilgilere de sahip olması gerekir.</p>
</li>
<li>
<p>Yeni format b32 adresinin (&ldquo;b33&rdquo;) Host Lookup işlemi
router&rsquo;a adresin blinded olduğunu söyler, ancak Host Lookup mesajında
secret veya private key&rsquo;i router&rsquo;a iletmek için bir mekanizma yoktur.
Host Lookup mesajını bu bilgiyi eklemek için genişletebilsek de,
yeni bir mesaj tanımlamak daha temizdir.</p>
</li>
<li>
<p>İstemcinin router&rsquo;a programatik olarak bildirmesi için bir yola ihtiyacımız var.
Aksi takdirde, kullanıcının her destination&rsquo;ı manuel olarak yapılandırması gerekir.</p>
</li>
</ul>
<p>Format</p>
<p>Bir istemci, körleştirilmiş bir hedefe mesaj göndermeden önce, &ldquo;b33&rdquo;&lsquo;ü bir Host Lookup mesajında aramalı veya bir Blinding Info mesajı göndermelidir. Körleştirilmiş hedef bir gizli anahtar veya istemci başına kimlik doğrulama gerektiriyorsa, istemci bir Blinding Info mesajı göndermelidir.</p>
<p>Router bu mesaja yanıt göndermez.</p>
<h3 id="notlar-6">Notlar</h3>
<p>Blinding Info Message için mesaj tipi 42&rsquo;dir.</p>
<h3 id="format-9">Format</h3>
<pre tabindex="0"><code>Session ID
  Flags:       1 byte
               Bit order: 76543210
               Bit 0: 0 for everybody, 1 for per-client
               Bits 3-1: Authentication scheme, if bit 0 is set to 1 for per-client, otherwise 000
                         000: DH client authentication (or no per-client authentication)
                         001: PSK client authentication
               Bit 4: 1 if secret required, 0 if no secret required
               Bits 7-5: Unused, set to 0 for future compatibility
  Type byte:   Endpoint type to follow
               Type 0 is a Hash
               Type 1 is a host name String
               Type 2 is a Destination
               Type 3 is a Sig Type and Signing Public Key
  Blind Type:  2 byte blinded sig type (big endian)
  Expiration:  4 bytes, big endian, seconds since epoch
  Endpoint:    Data as specified above
               For type 0: 32 byte binary hash
               For type 1: host name String
               For type 2: binary Destination
               For type 3: 2 byte sig type (big endian)
                           Signing Public Key (length as implied by sig type)
  Private Key: Only if flag bit 0 is set to 1
               A 32-byte ECIES_X25519 private key
  Secret:      Only if flag bit 4 is set to 1
               A secret String
</code></pre><h3 id="anahtar-sertifikaları">Anahtar Sertifikaları</h3>
<ul>
<li>Minimum router sürümü 0.9.43&rsquo;tür</li>
</ul>
<h3 id="yeni-ara-yapılar">Yeni Ara Yapılar</h3>
<h3 id="yeni-netdb-türleri">Yeni NetDB Türleri</h3>
<p>&ldquo;b33&rdquo; hostname&rsquo;lerinin sorgulanmasını desteklemek ve router&rsquo;ın gerekli bilgiye sahip olmadığı durumlarda bir gösterge döndürmek için, Host Reply Message için aşağıdaki gibi ek sonuç kodları tanımlıyoruz:</p>
<pre tabindex="0"><code>2: Lookup password required
   3: Private key required
   4: Lookup password and private key required
   5: Leaseset decryption failure
</code></pre><p>1-255 değerleri zaten hata olarak tanımlanmış durumda, bu nedenle geriye dönük uyumluluk sorunu bulunmuyor.</p>
<h3 id="yeni-imza-türü">Yeni İmza Türü</h3>
<p>Router&rsquo;dan istemciye. Yeni mesaj.</p>
<h3 id="justification-1">Justification</h3>
<p>Bir istemci, verilen bir Hash&rsquo;in bir Meta LS&rsquo;ye çözümleneceğini a priori olarak bilemez.</p>
<p>Bir Destination için leaseset araması Meta LS döndürürse, router özyinelemeli çözümlemeyi yapacaktır. Datagramlar için istemci tarafının bilmesine gerek yoktur; ancak protokolün SYN ACK&rsquo;deki destination&rsquo;ı kontrol ettiği streaming için, &ldquo;gerçek&rdquo; destination&rsquo;ın ne olduğunu bilmesi gerekir. Bu nedenle yeni bir mesaja ihtiyacımız var.</p>
<h3 id="usage">Usage</h3>
<p>Router, gerçek hedef için bir önbellek tutar ve bu önbellek bir meta LS&rsquo;den kullanılır. İstemci, bir meta LS&rsquo;ye çözümlenen bir hedefe mesaj gönderdiğinde, router son kullanılan gerçek hedef için önbelleği kontrol eder. Önbellek boşsa, router meta LS&rsquo;den bir hedef seçer ve leaseset&rsquo;i arar. Leaseset arama işlemi başarılı olursa, router o hedefi önbelleğe ekler ve istemciye bir Meta Yönlendirme Mesajı gönderir. Bu işlem yalnızca bir kez yapılır, hedefin süresi dolup değiştirilmesi gerekmedikçe tekrarlanmaz. İstemci de gerektiğinde bilgiyi önbelleğe almalıdır. Meta Yönlendirme Mesajı her SendMessage&rsquo;a yanıt olarak gönderilmez.</p>
<p>Router bu mesajı yalnızca 0.9.47 veya daha yüksek sürüme sahip istemcilere gönderir.</p>
<p>İstemci bu mesaja yanıt göndermez.</p>
<h3 id="veritabanı-arama-mesajı">Veritabanı Arama Mesajı</h3>
<p>Meta Redirect Message için mesaj türü 43&rsquo;tür.</p>
<h3 id="değişiklikler">Değişiklikler</h3>
<pre tabindex="0"><code>Session ID (2 bytes) The value from the Send Message.
  Message ID generated by the router (4 bytes)
  4 byte nonce previously generated by the client
               (the value from the Send Message, may be zero)
  Flags:       2 bytes, bit order 15...0
               Unused, set to 0 for future compatibility
               Bit 0: 0 - the destination is no longer meta
                      1 - the destination is now meta
               Bits 15-1: Unused, set to 0 for future compatibility
  Original Destination (387+ bytes)
  (following fields only present if flags bit 0 is 1)
  MFlags:      2 bytes
               Unused, set to 0 for future compatibility
               From the Meta Lease for the actual Destination
  Expiration:  4 bytes, big endian, seconds since epoch
               From the Meta Lease for the actual Destination
  Cost (priority) 1 byte
               From the Meta Lease for the actual Destination
  Actual (real) Destination (387+ bytes)
</code></pre><h3 id="veritabanı-depolama-mesajı">Veritabanı Depolama Mesajı</h3>
<p>Meta&rsquo;nın nasıl oluşturulacağı ve destekleneceği, router&rsquo;lar arası iletişim ve koordinasyon dahil olmak üzere, bu önerinin kapsamı dışındadır. İlgili 150 numaralı öneriye bakınız.</p>
<h3 id="değişiklikler-1">Değişiklikler</h3>
<p>Çevrimdışı imzalar, akışlı veya yanıtlanabilir datagramlarda doğrulanamaz. Aşağıdaki bölümlere bakınız.</p>
<h2 id="private-key-file-changes-required">Private Key File Changes Required</h2>
<p>Özel anahtar dosyası (eepPriv.dat) formatı spesifikasyonlarımızın resmi bir parçası değildir ancak <a href="http://idk.i2p/javadoc-i2p/net/i2p/data/PrivateKeyFile.html">Java I2P javadocs</a>
 içinde belgelenmiştir ve diğer uygulamalar da bunu destekler. Bu, özel anahtarların farklı uygulamalara taşınabilirliğini sağlar.</p>
<p>Geçici genel anahtar ve çevrimdışı imzalama bilgilerini saklamak için değişiklikler gereklidir.</p>
<h3 id="changes-2">Changes</h3>
<pre tabindex="0"><code>If the signing private key is all zeros, the offline information section follows:

  - Expires timestamp
    (4 bytes, big endian, seconds since epoch, rolls over in 2106)
  - Sig type of transient Signing Public Key (2 bytes, big endian)
  - Transient Signing Public key
    (length as specified by transient sig type)
  - Signature of above three fields by offline key
    (length as specified by destination sig type)
  - Transient Signing Private key
    (length as specified by transient sig type)
</code></pre><h3 id="i2cp-seçenekleri">I2CP Seçenekleri</h3>
<p>Aşağıdaki seçenekler için destek ekleyin:</p>
<pre tabindex="0"><code>-d days              (specify expiration in days of offline sig, default 365)
      -o offlinedestfile   (generate the online key file,
                            using the offline key file specified)
      -r sigtype           (specify sig type of transient key, default Ed25519)
</code></pre><h2 id="streaming-changes-required">Streaming Changes Required</h2>
<p>Çevrimdışı imzalar şu anda streaming içinde doğrulanamıyor. Aşağıdaki değişiklik, çevrimdışı imzalama bloğunu seçeneklere ekliyor. Bu, bu bilgilerin I2CP aracılığıyla alınması gerekliliğini ortadan kaldırıyor.</p>
<h3 id="oturum-yapılandırması">Oturum Yapılandırması</h3>
<pre tabindex="0"><code>Add new option:
  Bit:          11
  Flag:         OFFLINE_SIGNATURE
  Option order: 4
  Option data:  Variable bytes
  Function:     Contains the offline signature section from LS2.
                FROM_INCLUDED must also be set.
                Expires timestamp
                (4 bytes, big endian, seconds since epoch, rolls over in 2106)
                Transient sig type (2 bytes, big endian)
                Transient signing public key (length as implied by sig type)
                Signature of expires timestamp, transient sig type,
                and public key, by the destination public key,
                length as implied by destination public key sig type.

  Change option:
  Bit:          3
  Flag:         SIGNATURE_INCLUDED
  Option order: Change from 4 to 5

  Add information about transient keys to the
  Variable Length Signature Notes section:
  The offline signature option does not needed to be added for a CLOSE packet if
  a SYN packet containing the option was previously acked.
  More info TODO
</code></pre><h3 id="leaseset-istek-mesajı">Leaseset İstek Mesajı</h3>
<ul>
<li>Alternatif olarak sadece bir bayrak eklemek ve geçici genel anahtarı I2CP aracılığıyla almak
(Yukarıdaki Host Lookup / Host Reply Message bölümlerine bakın)</li>
</ul>
<h2 id="standart-ls2-başlığı">Standart LS2 Başlığı</h2>
<p>Çevrimdışı imzalar, yanıtlanabilir datagram işlemede doğrulanamaz. Çevrimdışı imzalı olduğunu belirtmek için bir flag gerekiyor ancak flag koyacak yer yok. Tamamen yeni bir protokol numarası ve format gerektirecek.</p>
<h3 id="istek-değişken-leaseset-mesajı">İstek Değişken Leaseset Mesajı</h3>
<pre tabindex="0"><code>Define new protocol 19 - Repliable datagram with options?
  - Destination (387+ bytes)
  - Flags (2 bytes)
    Bit order: 15 14 ... 3 2 1 0
    Bit 0: If 0, no offline keys; if 1, offline keys
    Bits 1-15: set to 0 for compatibility with future uses
  - If flag indicates offline keys, the offline signature section:
    Expires timestamp
    (4 bytes, big endian, seconds since epoch, rolls over in 2106)
    Transient sig type (2 bytes, big endian)
    Transient signing public key (length as implied by sig type)
    Signature of expires timestamp, transient sig type,
    and public key, by the destination public key,
    length as implied by destination public key sig type.
    This section can, and should, be generated offline.
  - Data
</code></pre><h3 id="leaseset2-mesajı-oluştur">Leaseset2 Mesajı Oluştur</h3>
<ul>
<li>Alternatif olarak sadece bir bayrak eklemek ve geçici public key&rsquo;i I2CP üzerinden almak
(Yukarıdaki Host Lookup / Host Reply Message bölümlerine bakın)</li>
<li>Artık bayrak byte&rsquo;larımız olduğuna göre eklemeli miyiz başka seçenekler var mı?</li>
</ul>
<h2 id="sam-v3-changes-required">SAM V3 Changes Required</h2>
<p>SAM, DESTINATION base 64&rsquo;te çevrimdışı imzaları destekleyecek şekilde geliştirilmelidir.</p>
<h3 id="gerekçe-3">Gerekçe</h3>
<pre tabindex="0"><code>Note that in the SESSION CREATE DESTINATION=$privkey,
  the $privkey raw data (before base64 conversion)
  may be optionally followed by the Offline Signature as specified in the
  Common Structures Specification.

  If the signing private key is all zeros, the offline information section follows:

  - Expires timestamp
    (4 bytes, big endian, seconds since epoch, rolls over in 2106)
  - Sig type of transient Signing Public Key (2 bytes, big endian)
  - Transient Signing Public key
    (length as specified by transient sig type)
  - Signature of above three fields by offline key
    (length as specified by destination sig type)
  - Transient Signing Private key (length as specified by transient sig type)
</code></pre><p>Çevrimdışı imzaların yalnızca STREAM ve RAW için desteklendiğini, DATAGRAM için desteklenmediğini unutmayın (yeni bir DATAGRAM protokolü tanımlayana kadar).</p>
<p>SESSION STATUS&rsquo;un, tüm sıfırlardan oluşan bir İmzalama Özel Anahtarı ve SESSION CREATE&rsquo;te sağlanan Çevrimdışı İmza verilerini tam olarak olduğu gibi döndüreceğini unutmayın.</p>
<p>Not: DEST GENERATE ve SESSION CREATE DESTINATION=TRANSIENT komutları, çevrimdışı imzalı bir hedef (destination) oluşturmak için kullanılamaz.</p>
<h3 id="mesaj-türü">Mesaj Türü</h3>
<p>Sürümü 3.4&rsquo;e yükselt, ya da tüm 3.2/3.3 özelliklerini gerektirmeden eklenebilsin diye 3.1/3.2/3.3&rsquo;te bırak?</p>
<p>Diğer değişiklikler henüz belirlenmedi. Yukarıdaki I2CP Host Reply Message bölümüne bakın.</p>
<h2 id="bob-changes-required">BOB Changes Required</h2>
<p>BOB, çevrimdışı imzaları ve/veya Meta LS&rsquo;yi desteklemek için geliştirilmesi gerekecektir. Bu düşük öncelikli bir konudur ve muhtemelen hiçbir zaman belirtilmeyecek veya uygulanmayacaktır. SAM V3 tercih edilen arayüzdür.</p>
<h2 id="publishing-migration-compatibility">Publishing, Migration, Compatibility</h2>
<p>LS2 (şifrelenmiş LS2 hariç), LS1 ile aynı DHT konumunda yayınlanır. LS2 farklı bir konumda olmadıkça, hem LS1 hem de LS2&rsquo;yi yayınlamanın bir yolu yoktur.</p>
<p>Şifrelenmiş LS2, kör edilmiş anahtar türü ve anahtar verisinin hash&rsquo;inde yayınlanır. Bu hash daha sonra LS1&rsquo;deki gibi günlük &ldquo;routing key&rdquo; oluşturmak için kullanılır.</p>
<p>LS2 yalnızca yeni özellikler gerektiğinde kullanılır (yeni kripto, şifrelenmiş LS, meta, vb.). LS2 yalnızca belirtilen sürüm veya daha yüksek sürümlerde olan floodfill&rsquo;lere yayınlanabilir.</p>
<p>LS2 yayınlayan sunucular, bağlanan istemcilerin LS2&rsquo;yi desteklediğini bilirler. LS2&rsquo;yi garlic içinde gönderebilirler.</p>
<p>İstemciler LS2&rsquo;yi garlic&rsquo;lerde yalnızca yeni kripto kullanıyorlarsa gönderirler. Paylaşılan istemciler LS1&rsquo;i süresiz olarak mı kullanır? YAPILACAK: Hem eski hem yeni kriptoyu destekleyen paylaşılan istemciler nasıl sağlanır?</p>
<h2 id="rollout">Rollout</h2>
<p>0.9.38, offline anahtarlar da dahil olmak üzere standart LS2 için floodfill desteği içerir.</p>
<p>0.9.39, LS2 ve Şifrelenmiş LS2 için I2CP desteği, sig type 11 imzalama/doğrulama, Şifrelenmiş LS2 için floodfill desteği (sig type 7 ve 11, çevrimdışı anahtarlar olmadan) ve LS2 şifreleme/şifre çözme (istemci başına yetkilendirme olmadan) içerir.</p>
<p>0.9.40 sürümünde müşteri başına yetkilendirme ile LS2 şifreleme/şifre çözme desteği, Meta LS2 için floodfill ve I2CP desteği, çevrimdışı anahtarlarla şifrelenmiş LS2 desteği ve şifrelenmiş LS2 için b32 desteği bulunması planlanmaktadır.</p>
<h2 id="yeni-databaseentry-türleri">Yeni DatabaseEntry türleri</h2>
<p>Şifrelenmiş LS2 tasarımı, benzer tasarım hedeflerine sahip olan <a href="https://spec.torproject.org/rend-spec-v3">Tor&rsquo;un v3 gizli servis tanımlayıcıları</a>
&rsquo;ndan büyük ölçüde etkilenmiştir.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../tr/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/123-new-netdb-entries.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">I2P haberleriyle güncel kalın:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="E-posta adresinizi girin" required>
                            <button type="submit">Abone Ol</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Hızlı Bağlantılar</h3>
                <ul>
                    <li><a href="../../../tr/financial-support/">Bağış Yap</a></li>
                    <li><a href="../../../tr/docs/overview/intro/">I2P Tanıtımı</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Topluluk</h3>
                <ul>
                    <li><a href="../../../tr/get-involved/">Katılın</a></li>
                    <li><a href="../../../tr/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Resmi Forumlar</a></li>
                    <li><a href="../../../tr/contact/">İletişim</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Kaynaklar</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metrikleri</a></li>
                    <li><a href="../../../tr/papers/">Araştırma</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Invisible Internet Projesi. Creative Commons altında lisanslanmıştır.</p>
            <div class="footer-links">
                <a href="../../../tr/privacy/">Gizlilik</a>
                <a href="../../../tr/terms/">Şartlar</a>
                <a href="../../../tr/about/media/">Basın</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Kapat">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Topluluk Anketi</h2>
            <p class="modal-subtitle">Sizden haber almaktan memnuniyet duyarız</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Oyunuz I2P&#39;nin geleceğini şekillendirmeye yardımcı olur.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
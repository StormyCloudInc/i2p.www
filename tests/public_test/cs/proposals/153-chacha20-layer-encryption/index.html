<!DOCTYPE html>
<html lang="cs" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Šifrování ChaCha pro vrstvy v tunelech | I2P - Projekt neviditelného internetu</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Šifrování ChaCha pro vrstvy v tunelech | I2P - Projekt neviditelného internetu">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/cs/proposals/153-chacha20-layer-encryption/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">I2P Beta stránky jsou nyní spuštěny. Problémy s e-mailem hlaste na stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Zavřít banner" title="Zavřít banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../cs/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../cs/about/" class="">O aplikaci</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../cs/about/">Přehled</a></li>
                            <li><a href="../../../cs/papers/">Výzkumné práce</a></li>
                            <li><a href="../../../cs/about/media/">Pro média</a></li>
                            <li><a href="../../../cs/contact/">Kontaktujte nás</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../cs/docs/" class="">Dokumentace</a></li>
                    <li><a href="../../../cs/downloads/" class="">Ke stažení</a></li>
                    <li><a href="../../../cs/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../cs/get-involved/" class="">Zapojte se</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../cs/get-involved/">Přehled</a></li>
                            <li><a href="../../../cs/feedback/">Návrhy funkcí</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">cs</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Angličtina</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Španělština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Korejština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Čínština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Ruština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/153-chacha20-layer-encryption/"
                                class="lang-option active">Čeština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Němčina</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Francouzština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Turečtina</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Vietnamština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Hindština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Arabština</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/153-chacha20-layer-encryption/"
                                class="lang-option">Portugalština</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../cs/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../cs/downloads/" class="btn btn-primary">Získat I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../cs/">Home</a>
            <span class="separator">/</span>
            <a href="../../../cs/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Šifrování ChaCha pro vrstvy v tunelech</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Tento překlad byl vytvořen pomocí strojového učení a nemusí být 100% přesný.</span>
    
    
    <a href="../../../en/proposals/153-chacha20-layer-encryption/" class="disclaimer-link">Zobrazit anglickou verzi</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Šifrování ChaCha pro vrstvy v tunelech</h1>
                <div class="proposal-number">Proposal 153</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-otevřeno">
                    Otevřeno
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">chisana</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2019-08-04</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2019-08-05</span>
                    </div>
                    

                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#přehled">Přehled</a>
      <ul>
        <li><a href="#cíle">Cíle</a></li>
        <li><a href="#zpracování-zavedené-tunelové-zprávy">Zpracování Zavedené Tunelové Zprávy</a></li>
        <li><a href="#aead-šifrování-mezizranných-zpráv">AEAD Šifrování Mezizranných Zpráv</a></li>
        <li><a href="#zpracování-účastníků">Zpracování Účastníků</a></li>
        <li><a href="#zpracování-vstupního-koncového-bodu">Zpracování Vstupního Koncového Bodu</a></li>
        <li><a href="#bezpečnostní-analýza-pro-šifrování-tunelových-vrstv-chacha20chacha20-poly1305">Bezpečnostní Analýza pro Šifrování Tunelových Vrstv ChaCha20+ChaCha20-Poly1305</a></li>
      </ul>
    </li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="přehled">Přehled</h2>
<p>Tento návrh navazuje na a vyžaduje změny z návrhu 152: ECIES Tunnels.</p>
<p>Pouze tunely postavené přes uzly podporující formát BuildRequestRecord pro ECIES-X25519 tunely mohou implementovat tuto specifikaci.</p>
<p>Tato specifikace vyžaduje formát Tunnel Build Options pro indikaci typu šifrování tunelové vrstvy a přenášení klíčů pro vrstvy AEAD.</p>
<h3 id="cíle">Cíle</h3>
<p>Cíle tohoto návrhu jsou:</p>
<ul>
<li>Nahradit AES256/ECB+CBC ChaCha20 pro zavedené IV tunelu a šifrování vrstev</li>
<li>Použít ChaCha20-Poly1305 pro meziuzlovou AEAD ochranu</li>
<li>Být neodhalitelný stávajícími účastníky tunelové vrstvy</li>
<li>Neměnit celkovou délku tunelové zprávy</li>
</ul>
<h3 id="zpracování-zavedené-tunelové-zprávy">Zpracování Zavedené Tunelové Zprávy</h3>
<p>Tato sekce popisuje změny pro:</p>
<ul>
<li>Přepřipravování a šifrování výstupní a vstupní brány</li>
<li>Šifrování účastníků a postprocessing</li>
<li>Šifrování a postprocessing výstupního a vstupního koncového bodu</li>
</ul>
<p>Pro přehled současného zpracování tunelových zpráv viz specifikace <a href="../../../cs/docs/specs/implementation/">Tunnel Implementation</a>
.</p>
<p>Jsou diskutovány pouze změny pro směrovače podporující ChaCha20 šifrování vrstev.</p>
<p>Nejsou zvažovány žádné změny pro smíšené tunely s AES šifrováním vrstev, dokud nebude možné navrhnout bezpečný protokol pro konverzi 128bitového AES IV na 64bitový ChaCha20 nonce. Bloom filtry zaručují jedinečnost pro celé IV, ale první polovina jedinečných IV může být identická.</p>
<p>To znamená, že šifrování vrstev musí být jednotné pro všechny uzly v tunelu a zavedené použitím možností budování tunelu během procesu vytvoření tunelu.</p>
<p>Všechny brány a účastníci tunelů budou muset udržovat Bloom filtr pro validaci dvou nezávislých nonce.</p>
<p>Po celou dobu se v tomto návrhu zmiňovaný <code>nonceKey</code> nahrazuje <code>IVKey</code> používaným v AES šifrování vrstev.
Generuje se pomocí stejného KDF z návrhu 152.</p>
<h3 id="aead-šifrování-mezizranných-zpráv">AEAD Šifrování Mezizranných Zpráv</h3>
<p>Pro každý pár následných uzlů bude potřeba generovat dodatečný jedinečný <code>AEADKey</code>.
Tento klíč budou používat následující uzly pro šifrování a dešifrování vnitřních ChaCha20 šifrovaných tunelových zpráv pomocí ChaCha20-Poly1305.</p>
<p>Tunelové zprávy budou muset snížit délku vnitřního šifrovaného rámce o 16 bajtů, aby se uvolnilo místo pro Poly1305 MAC.</p>
<p>AEAD nemůže být použito přímo na zprávy, protože iterativní dešifrování je požadované výstupními tunely. Iterativní dešifrování lze nyní dosáhnout pouze použitím ChaCha20 bez AEAD.</p>
<p>.. raw:: html</p>
<p>{% highlight lang=&lsquo;dataspec&rsquo; -%}
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+
|    ID Tunelu      |   tunnelNonce     |
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+
| pokrač. tunnelNonce |    obfsNonce      |
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+&mdash;-+
| pokrač. obfsNonce  |                   |
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+                   +
|                                       |</p>
<ul>
<li>
<pre><code>      Šifrovaná Data              +
</code></pre>
</li>
</ul>
<p>~                                       ~
|                                       |</p>
<ul>
<li>
<pre><code>              +----+----+----+----+
</code></pre>
</li>
</ul>
<p>|                   |    Poly1305 MAC   |
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+                   +<br>
|                                       |</p>
<ul>
<li>
<pre><code>              +----+----+----+----+
</code></pre>
</li>
</ul>
<p>|                   |
+&mdash;-+&mdash;-+&mdash;-+&mdash;-+</p>
<p>ID Tunelu :: <code>TunnelId</code>
4 bajty
ID následného uzlu</p>
<p>tunnelNonce ::
8 bajtů
nonce tunelové vrstvy</p>
<p>obfsNonce ::
8 bajtů
nonce šifrování tunelové vrstvy</p>
<p>Šifrovaná Data ::
992 bajtů
šifrovaná tunelová zpráva</p>
<p>Poly1305 MAC ::
16 bajtů</p>
<p>celková velikost: 1028 bajtů</p>
<pre tabindex="0"><code>
Vnitřní uzly (s předcházejícími a následujícími uzly) budou mít dva ``AEADKeys``, jeden pro dešifrování AEAD vrstvy předcházejícího uzlu a šifrování AEAD vrstvy následujícího uzlu.

Všichni účastníci vnitřních uzlů tedy budou mít ve svých záznamech BuildRequestRecords zahrnutých 64 dodatečných bajtů klíčového materiálu.

Výstupní koncový bod a vstupní brána budou potřebovat pouze 32 dodatečných bajtů klíčových dat, protože mezi sebou nešifrují tunelovou vrstvu.

Výstupní brána generuje svůj klíč ``outAEAD``, který je stejný jako klíč ``inAEAD`` prvního výstupního uzlu.

Vstupní koncový bod generuje svůj klíč ``inAEAD``, který je stejný jako klíč ``outAEAD`` posledního vstupního uzlu.

Vnitřní uzly obdrží ``inAEADKey`` a ``outAEADKey``, které budou použity pro AEAD dešifrování příchozích zpráv a šifrování odchozích zpráv.

Jako příklad, ve tunelu s vnitřními uzly OBGW, A, B, OBEP:

- ``inAEADKey`` pro uzel A je stejný jako ``outAEADKey`` pro OBGW
- ``inAEADKey`` pro uzel B je stejný jako ``outAEADKey`` pro A
- ``outAEADKey`` pro uzel B je stejný jako ``inAEADKey`` pro OBEP

Klíče jsou jedinečné pro dvojice uzlů, takže ``inAEADKey`` pro OBEP bude jiný než ``inAEADKey`` pro A, ``outAEADKey`` pro A jiný než ``outAEADKey`` pro B, atd.

### Zpracování Zpráv Brány a Tvořitele Tunelů

Brány budou fragmentovat a zabalení zpráv stejným způsobem, přičemž si vyhrazují místo za rámcem s fragmentací pokynů pro Poly1305 MAC.

Vnitřní zprávy I2NP obsahující AEAD rámce (včetně MAC) mohou být rozděleny přes fragmenty, ale jakékoliv vynechané fragmenty povedou k neúspěšnému AEAD dešifrování (neúspěšné ověření MAC) v koncovém bodě.

### Předzpracování a Šifrování Brány

Když tunely podporují šifrování vrstev ChaCha20, brány vygenerují dva 64bitové nonce pro každou sadu zpráv.

Vstupní tunely:

- Šifrování IV a tunelových zpráv pomocí ChaCha20
- Použití 8bajtových ``tunnelNonce`` a ``obfsNonce`` vzhledem k životnosti tunelů
- Použití 8bajtového ``obfsNonce`` pro šifrování ``tunnelNonce``
- Zničení tunelu před 2^(64 - 1) - 1 sadami zpráv: 2^63 - 1 = 9,223,372,036,854,775,807

  - Omezení počtu nonce, aby se předešlo kolizi 64bitových nonce
  - Velmi nepravděpodobné, že by omezení nonce bylo kdy dosaženo, vzhledem k tomu, že by to bylo přes ~15,372,286,728,091,294 zpráv/sekundu pro 10minutové tunely

- Nastavení Bloomova filtru na základě rozumného počtu očekávaných prvků (128 zpráv/sekundu, 1024 zpráv/sekundu? Bude stanoveno později)

Vstupní brána tunelu (IBGW) zpracovává zprávy přijaté z výstupního koncového bodu jiného tunelu (OBEP).

V tomto bodě je vnější vrstva zpráv zašifrována pomocí šifrování point-to-point transport. Záhlaví I2NP zpráv jsou viditelná na tunelové vrstvě pro OBEP a IBGW. Vnitřní zprávy I2NP jsou zabaleny do Garlic cloves, zašifrované pomocí end-to-end sezení šifrování.

IBGW předzpracovává zprávy do vhodně formátovaných tunelových zpráv a šifruje je takto:

```text

// IBGW generuje náhodné nonce, zajišťuje, že se v jeho Bloomově filtru nenachází žádná kolize pro každý nonce
  tunnelNonce = Random(len = 64-bits)
  obfsNonce = Random(len = 64-bits)
  // IBGW zašifruje každou z předzpracovaných tunelových zpráv pomocí ChaCha20 s jeho tunnelNonce a layerKey
  encMsg = ChaCha20(msg = tunnel msg, nonce = tunnelNonce, key = layerKey)

  // ChaCha20-Poly1305 zašifruje každý datový rámec s už zašifrovanou zprávou pomocí tunnelNonce a outAEADKey
  (encMsg, MAC) = ChaCha20-Poly1305-Encrypt(msg = encMsg, nonce = tunnelNonce, key = outAEADKey)
</code></pre><p>Formát tunelové zprávy se lehce změní, s použitím dvou 8bajtových nonce namísto 16bajtového IV. <code>obfsNonce</code> použité pro šifrování nonce je připojeno k 8bajtovému <code>tunnelNonce</code> a je šifrováno každým uzlem pomocí zašifrovaného <code>tunnelNonce</code> a jeho <code>nonceKey</code>.</p>
<p>Poté, co sada zpráv prošla předčasným dešifrováním pro každý uzel, výstupní brána ChaCha20-Poly1305 AEAD zašifruje šifrovou část každé tunelové zprávy pomocí <code>tunnelNonce</code> a svého <code>outAEADKey</code>.</p>
<p>Výstupní tunely:</p>
<ul>
<li>Iterativní dešifrování tunelových zpráv</li>
<li>ChaCha20-Poly1305 zašifruje předčasně dešifrované tunelové zprávy</li>
<li>Použití stejných pravidel pro šifrování vrstvy pro nonce jako vstupní tunely</li>
<li>Generování náhodných nonce jednou pro sadu odeslaných tunelových zpráv</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Pro každou sadu zpráv vygenerujte jedinečné, náhodné nonce
</span></span><span style="display:flex;"><span>  tunnelNonce = Random(len = 64-bits)
</span></span><span style="display:flex;"><span>  obfsNonce = Random(len = 64-bits)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Pro každý uzel zašifruje ChaCha20 předchozí tunnelNonce s nonce aktuálního uzlu
</span></span><span style="display:flex;"><span>  tunnelNonce = ChaCha20(msg = prev. tunnelNonce, nonce = obfsNonce, key = hop&#39;s nonceKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Pro každý uzel ChaCha20 &#34;dešifruje&#34; tunelovou zprávu s aktuálním tunnelNonce uzlu a layerKey
</span></span><span style="display:flex;"><span>  decMsg = ChaCha20(msg = tunnel msg(s), nonce = tunnelNonce, key = hop&#39;s layerKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Pro každý uzel ChaCha20 &#34;dešifruje&#34; obfsNonce s zašifrovaným tunnelNonce aktuálního uzlu a nonceKey
</span></span><span style="display:flex;"><span>  obfsNonce = ChaCha20(msg = obfsNonce, nonce = tunnelNonce, key = hop&#39;s nonceKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Po zpracování uzlu, ChaCha20-Poly1305 zašifruje každý decrypted frame tunelové zprávy s zašifrovaným tunnelNonce prvního uzlu a inAEADKey
</span></span><span style="display:flex;"><span>  (encMsg, MAC) = ChaCha20-Poly1305-Encrypt(msg = decMsg, nonce = first hop&#39;s encrypted tunnelNonce, key = first hop&#39;s inAEADKey / GW outAEADKey)
</span></span></code></pre></div><h3 id="zpracování-účastníků">Zpracování Účastníků</h3>
<p>Účastníci budou sledovat odeslané zprávy stejným způsobem, používající decaying Bloom filtry.</p>
<p>Tunelové nonces budou muset být šifrovány jednou za uzel, aby se zabránilo potvrzovacím útokům ze strany nesoudržných, společně jedoucích uzlů.</p>
<p>Uzel zašifruje obdržené nonce, aby zabránil potvrzovacím útokům mezi předcházejícími a následujícími uzly, tj. nesoudržné, společně jedoucí uzly by nemohly zjistit, že patří do stejného tunelu.</p>
<p>Pro validaci příchozích <code>tunnelNonce</code> a <code>obfsNonce</code> účastníci kontrolují každý nonce zvlášť ve svém Bloom filtru pro duplikáty.</p>
<p>Po validaci účastník:</p>
<ul>
<li>ChaCha20-Poly1305 dešifruje každé AEAD šifrované datové rámce tunelové zprávy s přijatým <code>tunnelNonce</code> a jeho <code>inAEADKey</code></li>
<li>ChaCha20 zašifruje <code>tunnelNonce</code> s jeho <code>nonceKey</code> a přijatým <code>obfsNonce</code></li>
<li>ChaCha20 zašifruje každé datové rámy tunelové zprávy s zašifrovaným <code>tunnelNonce</code> a jeho <code>layerKey</code></li>
<li>ChaCha20-Poly1305 zašifruje každé datové rámy tunelové zprávy zašifrované <code>tunnelNonce</code> a jeho <code>outAEADKey</code></li>
<li>ChaCha20 zašifruje <code>obfsNonce</code> s jeho <code>nonceKey</code> a zašifrovaným <code>tunnelNonce</code></li>
<li>Odešle dvojiček {<code>nextTunnelId</code>, zašifrovaný (<code>tunnelNonce</code> || <code>obfsNonce</code>), AEAD ciphertext || MAC} na další uzel.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Pro ověření by tunelové uzly měly zkontrolovat Bloomův filtr pro jedinečnost každého přijatého nonce
</span></span><span style="display:flex;"><span>  // Po ověření, rozbalte AEAD rámec(y) dešifrováním každého rámce zašifrované tunelové zprávy
</span></span><span style="display:flex;"><span>  // s přijatým tunnelNonce a inAEADKey 
</span></span><span style="display:flex;"><span>  encTunMsg = ChaCha20-Poly1305-Decrypt(msg = received encMsg \|\| MAC, nonce = received tunnelNonce, key = inAEADKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Zašifrujte tunnelNonce pomocí obfsNonce a hop&#39;s nonceKey
</span></span><span style="display:flex;"><span>  tunnelNonce = ChaCha20(msg = received tunnelNonce, nonce = received obfsNonce, key = nonceKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Zašifrujte každé datové rámy tunelové zprávy s zašifrovaným tunnelNonce a hop&#39;s layerKey
</span></span><span style="display:flex;"><span>  encMsg = ChaCha20(msg = encTunMsg, nonce = tunnelNonce, key = layerKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Pro AEAD ochranu také zašifrujte každé datové rámy zprávy s zašifrovaným tunnelNonce a hop&#39;s outAEADKey
</span></span><span style="display:flex;"><span>  (encMsg, MAC) = ChaCha20-Poly1305-Encrypt(msg = encMsg, nonce = tunnelNonce, key = outAEADKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Zašifrujte obdržené obfsNonce s zašifrovaným tunnelNonce a hop&#39;s nonceKey
</span></span><span style="display:flex;"><span>  obfsNonce = ChaCha20(msg = obfsNonce, nonce = tunnelNonce, key = nonceKey)
</span></span></code></pre></div><h3 id="zpracování-vstupního-koncového-bodu">Zpracování Vstupního Koncového Bodu</h3>
<p>Pro tunely ChaCha20 bude použit následující schéma k dešifrování každé tunelové zprávy:</p>
<ul>
<li>Validace přijatých <code>tunnelNonce</code> a <code>obfsNonce</code> nezávisle proti jeho Bloom filtru</li>
<li>ChaCha20-Poly1305 dešifrovat zašifrované datové rámy s přijatým <code>tunnelNonce</code> a <code>inAEADKey</code></li>
<li>ChaCha20 dešifrovat zašifrované datové rámy s přijatým <code>tunnelNonce</code> &amp; hop&rsquo;s <code>layerKey</code></li>
<li>ChaCha20 dešifrovat <code>obfsNonce</code> s hop&rsquo;s <code>nonceKey</code> a přijatým <code>tunnelNonce</code> k získání předchozího <code>obfsNonce</code></li>
<li>ChaCha20 dešifrovat přijaté <code>tunnelNonce</code> s hop&rsquo;s <code>nonceKey</code> a dešifrovaným <code>obfsNonce</code> k získání předchozího <code>tunnelNonce</code></li>
<li>ChaCha20 dešifrovat zašifrovaná data s dešifrovaným <code>tunnelNonce</code> &amp; předchozího uzlu <code>layerKey</code></li>
<li>Opakujte kroky pro nonce a dešifrování vrstvy pro každý uzel v tunelu zpět na IBGW</li>
<li>AEAD dešifrování rámců je potřeba pouze v první iteraci</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Pro první iteraci ChaCha20-Poly1305 dešifruje každé datové rámy zprávy + MAC
</span></span><span style="display:flex;"><span>  // s použitím přijatého tunnelNonce a inAEADKey
</span></span><span style="display:flex;"><span>  msg = encTunMsg \|\| MAC
</span></span><span style="display:flex;"><span>  tunnelNonce = received tunnelNonce
</span></span><span style="display:flex;"><span>  encTunMsg = ChaCha20-Poly1305-Decrypt(msg, nonce = tunnelNonce, key = inAEADKey)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Opakujte pro každý uzel v tunelu zpět na IBGW
</span></span><span style="display:flex;"><span>  // Pro každý iteraci dešifruje ChaCha20 každý uzlový vrstvový šifrování na každém datovém rámci zprávy
</span></span><span style="display:flex;"><span>  // Nahraďte přijatý tunnelNonce dešifrovaným tunnelNonce z předchozí iterace pro každý uzel
</span></span><span style="display:flex;"><span>  decMsg = ChaCha20(msg = encTunMsg, nonce = tunnelNonce, key = layerKey)
</span></span><span style="display:flex;"><span>  obfsNonce = ChaCha20(msg = obfsNonce, nonce = tunnelNonce, key = nonceKey)
</span></span><span style="display:flex;"><span>  tunnelNonce = ChaCha20(msg = tunnelNonce, nonce = obfsNonce, key = nonceKey)
</span></span></code></pre></div><h3 id="bezpečnostní-analýza-pro-šifrování-tunelových-vrstv-chacha20chacha20-poly1305">Bezpečnostní Analýza pro Šifrování Tunelových Vrstv ChaCha20+ChaCha20-Poly1305</h3>
<p>Přechod z AES256/ECB+AES256/CBC na ChaCha20+ChaCha20-Poly1305 má několik výhod a nových bezpečnostních úvah.</p>
<p>Největší bezpečnostní úvahou je zajištění, aby nonce ChaCha20 a ChaCha20-Poly1305 byly jedinečné pro každou zprávu po dobu životnosti použitého klíče.</p>
<p>Nepoužití jedinečných nonce se stejným klíčem na různé zprávy narušuje ChaCha20 a ChaCha20-Poly1305.</p>
<p>Použití přiloženého <code>obfsNonce</code> umožňuje IBEP dešifrovat <code>tunnelNonce</code> pro šifrování vrstvy každého uzlu a obnovit předchozí nonce.</p>
<p><code>obfsNonce</code> spolu s <code>tunnelNonce</code> neodhaluje žádné nové informace pro tunelové uzly, protože <code>obfsNonce</code> je šifrováno s použitím zašifrovaného <code>tunnelNonce</code>. To také umožňuje IBEP obnovit předchozí <code>obfsNonce</code> podobně jako obnovení <code>tunnelNonce</code>.</p>
<p>Největší bezpečnostní výhodou je, že neexistují žádné potvrzovací nebo orákulové útoky proti ChaCha20, a použití ChaCha20-Poly1305 mezi uzly přidává AEAD ochranu proti manipulaci se šifrovým textem od mimořádných útočníků prostředníka (MitM).</p>
<p>Existují praktické orákulové útoky proti AES256/ECB + AES256/CBC, když se klíč opakovaně používá (jako v šifrování tunelové vrstvy).</p>
<p>Orákulové útoky proti AES256/ECB nebudou fungovat kvůli použití dvojitého šifrování a šifrování je nad jediným blokem (tunel IV).</p>
<p>Útoky polštářkovými orákuly proti AES256/CBC nebudou fungovat, protože se nepoužívá žádné polstrování. Pokud se délka tunelové zprávy někdy změní na non-mod-16 délky, AES256/CBC nebude stále zranitelné kvůli odmítnutým duplicitním IV.</p>
<p>Oba útoky jsou také blokovány tím, že se nepovolují opakované orákulové volání s použitím stejného IV, jelikož jsou odmítány duplicitní IV.</p>
<h2 id="reference">Reference</h2>
<ul>
<li><a href="../../../cs/docs/specs/implementation/">Tunnel-Implementation</a>
</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../cs/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/153-chacha20-layer-encryption.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Zůstaňte informováni o novinkách I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Zadejte svůj email" required>
                            <button type="submit">Odebírat</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Rychlé odkazy</h3>
                <ul>
                    <li><a href="../../../cs/financial-support/">Darovat</a></li>
                    <li><a href="../../../cs/docs/overview/intro/">Úvod do I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Komunita</h3>
                <ul>
                    <li><a href="../../../cs/get-involved/">Zapojte se</a></li>
                    <li><a href="../../../cs/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Oficiální fóra</a></li>
                    <li><a href="../../../cs/contact/">Kontaktujte nás</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Zdroje</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Metriky</a></li>
                    <li><a href="../../../cs/papers/">Výzkum</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Projekt Neviditelný Internet. Licencováno pod Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../cs/privacy/">Ochrana soukromí</a>
                <a href="../../../cs/terms/">Podmínky</a>
                <a href="../../../cs/about/media/">Tisk</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Zavřít">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Komunitní anketa</h2>
            <p class="modal-subtitle">Rádi bychom o vás slyšeli</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Váš hlas pomáhá utvářet budoucnost I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
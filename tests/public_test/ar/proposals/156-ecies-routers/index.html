<!DOCTYPE html>
<html lang="ar" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>موجهات ECIES | I2P - مشروع الإنترنت غير المرئي</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="موجهات ECIES | I2P - مشروع الإنترنت غير المرئي">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/ar/proposals/156-ecies-routers/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">موقع I2P التجريبي متاح الآن - أرسل المشاكل إلى stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="إغلاق الشريط" title="إغلاق الشريط">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../ar/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../ar/about/" class="">حول</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../ar/about/">نظرة عامة</a></li>
                            <li><a href="../../../ar/papers/">أبحاث</a></li>
                            <li><a href="../../../ar/about/media/">الصحافة</a></li>
                            <li><a href="../../../ar/contact/">اتصل بنا</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../ar/docs/" class="">المستندات</a></li>
                    <li><a href="../../../ar/downloads/" class="">التنزيلات</a></li>
                    <li><a href="../../../ar/blog/" class="">مدونة</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../ar/get-involved/" class="">شارك معنا</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../ar/get-involved/">نظرة عامة</a></li>
                            <li><a href="../../../ar/feedback/">اقتراحات الميزات</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">ar</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/156-ecies-routers/"
                                class="lang-option">الإنجليزية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/156-ecies-routers/"
                                class="lang-option">الإسبانية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/156-ecies-routers/"
                                class="lang-option">الكورية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/156-ecies-routers/"
                                class="lang-option">الصينية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/156-ecies-routers/"
                                class="lang-option">الروسية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/156-ecies-routers/"
                                class="lang-option">التشيكية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/156-ecies-routers/"
                                class="lang-option">الألمانية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/156-ecies-routers/"
                                class="lang-option">الفرنسية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/156-ecies-routers/"
                                class="lang-option">التركية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/156-ecies-routers/"
                                class="lang-option">الفيتنامية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/156-ecies-routers/"
                                class="lang-option">الهندية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/156-ecies-routers/"
                                class="lang-option active">العربية</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/156-ecies-routers/"
                                class="lang-option">البرتغالية</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../ar/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../ar/downloads/" class="btn btn-primary">احصل على I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../ar/">Home</a>
            <span class="separator">/</span>
            <a href="../../../ar/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">موجهات ECIES</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">تم إنشاء هذه الترجمة باستخدام التعلم الآلي وقد لا تكون دقيقة بنسبة 100%.</span>
    
    
    <a href="../../../en/proposals/156-ecies-routers/" class="disclaimer-link">عرض النسخة الإنجليزية</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">موجهات ECIES</h1>
                <div class="proposal-number">Proposal 156</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-مغلق">
                    مغلق
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz، الأصلي</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-09-01</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2025-03-05</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.51</span>
                    </div>
                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#ملاحظة">ملاحظة</a></li>
    <li><a href="#نظرة-عامة">نظرة عامة</a>
      <ul>
        <li><a href="#ملخص">ملخص</a></li>
        <li><a href="#الأهداف">الأهداف</a></li>
        <li><a href="#الأهداف-غير-المرغوب-فيها">الأهداف غير المرغوب فيها</a></li>
      </ul>
    </li>
    <li><a href="#التصميم">التصميم</a>
      <ul>
        <li><a href="#موقع-المفتاح-ونوع-التشفير">موقع المفتاح ونوع التشفير</a></li>
        <li><a href="#رسالة-بناء-النفق">رسالة بناء النفق</a></li>
        <li><a href="#التشفير-من-النهاية-إلى-النهاية">التشفير من النهاية إلى النهاية</a></li>
      </ul>
    </li>
    <li><a href="#المواصفات">المواصفات</a>
      <ul>
        <li><a href="#تشفير-الطلب">تشفير الطلب</a></li>
        <li><a href="#تشفير-الرد">تشفير الرد</a></li>
      </ul>
    </li>
    <li><a href="#التبرير">التبرير</a></li>
    <li><a href="#ملاحظات-التنفيذ">ملاحظات التنفيذ</a></li>
    <li><a href="#القضايا">القضايا</a></li>
    <li><a href="#الهجرة">الهجرة</a>
      <ul>
        <li><a href="#الاتصال-الأساسي-من-نقطة-إلى-نقطة">الاتصال الأساسي من نقطة إلى نقطة</a></li>
        <li><a href="#التوافق-مع-netdb">التوافق مع NetDB</a></li>
        <li><a href="#بناء-النفق">بناء النفق</a></li>
        <li><a href="#رسائل-ratchet-للموجهات-الفيضانية-ecies">رسائل Ratchet للموجهات الفيضانية ECIES</a></li>
        <li><a href="#إعادة-تجهي">إعادة تجهي</a></li>
        <li><a href="#رسالة-بناء-النفق-الجديدة-المرحلة-2">رسالة بناء النفق الجديدة (المرحلة 2)</a></li>
        <li><a href="#إعادة-التجهيز-كاملة">إعادة التجهيز كاملة</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="ملاحظة">ملاحظة</h2>
<p>نشر الشبكة والاختبار قيد التقدم. قابل للتعديل. الحالة:</p>
<ul>
<li>تم تنفيذ موجهات ECIES اعتبارًا من 0.9.48، راجع <a href="../../../ar/docs/specs/common-structures/">Common</a>
.</li>
<li>تم تنفيذ بناء الأنفاق اعتبارًا من 0.9.48، راجع <a href="../../../ar/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
.</li>
<li>تم تنفيذ الرسائل المشفرة للموجهات ECIES اعتبارًا من 0.9.49، راجع <a href="../../../ar/docs/specs/ecies/">ECIES-ROUTERS</a>
.</li>
<li>تم تنفيذ رسائل بناء النفق الجديدة اعتبارًا من 0.9.51.</li>
</ul>
<h2 id="نظرة-عامة">نظرة عامة</h2>
<h3 id="ملخص">ملخص</h3>
<p>حاليًا تحتوي هويات الموجهات على مفتاح تشفير ElGamal.
كانت هذه هي المعيار منذ بداية I2P.
ElGamal بطيء ويحتاج إلى استبداله في جميع الأماكن التي يُستخدم فيها.</p>
<p>تم تحديد الاقتراحات لـ LS2 <a href="../../../ar/proposals/123-new-netdb-entries/">Prop123</a>
 وECIES-X25519-AEAD-Ratchet <a href="../../../ar/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>

(المحددة الآن في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
) استبدال ElGamal بـ ECIES
للوجهات.</p>
<p>يقترح هذا الاقتراح استبدال ElGamal بـ ECIES-X25519 للموجهات.
يقدم هذا الاقتراح نظرة عامة على التغييرات المطلوبة.
يتوفر معظم التفاصيل في اقتراحات أخرى ومواصفات.
راجع قسم المراجع للحصول على الروابط.</p>
<h3 id="الأهداف">الأهداف</h3>
<p>راجع <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
 للحصول على أهداف إضافية.</p>
<ul>
<li>استبدال ElGamal بـ ECIES-X25519 في هويات الموجهات</li>
<li>إعادة استخدام المكونات المشفرة القائمة</li>
<li>تحسين أمان رسائل بناء النفق قدر الإمكان مع الحفاظ على التوافق</li>
<li>دعم الأنفاق مع أفراد ElGamal/ECIES المختلطين</li>
<li>زيادة التوافق مع الشبكة الحالية إلى أقصى حد</li>
<li>عدم الحاجة إلى ترقية &ldquo;يوم محدد&rdquo; لكامل الشبكة</li>
<li>النشر التدريجي لتقليل المخاطر</li>
<li>رسائل بناء النفق الجديدة والأصغر</li>
</ul>
<h3 id="الأهداف-غير-المرغوب-فيها">الأهداف غير المرغوب فيها</h3>
<p>راجع <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
 للحصول على الأهداف غير المرغوب فيها الإضافية.</p>
<ul>
<li>لا يوجد حاجة لموجهات ذات مفتاح مزدوج</li>
<li>التغييرات في تشفير الطبقات، راجع <a href="../../../ar/proposals/153-chacha20-layer-encryption/">Prop153</a>
 لهذا</li>
</ul>
<h2 id="التصميم">التصميم</h2>
<h3 id="موقع-المفتاح-ونوع-التشفير">موقع المفتاح ونوع التشفير</h3>
<p>بالنسبة للوجهات، يكون المفتاح في عقدة الإيجار، وليس في الوجهة، وندعم أنواع متعددة من التشفير في نفس عقدة الإيجار.</p>
<p>لا يتطلب أي من ذلك للموجهات. مفتاح تشفير الموجه
في هويته. راجع مواصفات البنية الشائعة <a href="../../../ar/docs/specs/common-structures/">Common</a>
.</p>
<p>بالنسبة للموجهات، سنستبدل مفتاح ElGamal بحجم 256 بايت في هوية الموجه
بمفتاح X25519 بحجم 32 بايت و224 بايت من الحشو.
هذا سيمثل نوع التشفير في شهادة المفتاح.
نوع التشفير (نفس المستخدم في LS2) هو 4.
هذا يُشير إلى مفتاح عام X25519 بطول 32 بايت بالترتيب الصغير.
هذا هو التكوين المعياري كما هو محدد في مواصفة البنية الشائعة <a href="../../../ar/docs/specs/common-structures/">Common</a>
.</p>
<p>هذا هو نفس الطريقة المقترحة لـ ECIES-P256
لأنواع التشفير من 1-3 في الاقتراح 145 <a href="../../../ar/proposals/145-ecies/">Prop145</a>
.
بينما لم يتم اعتماد هذا الاقتراح أبدًا، قام مطورو تنفيذ Java بالتجهيز لأنواع التشفير في شهادات مفاتيح هوية الموجه بإضافة فحوصات في عدة
أماكن في قاعدة التعليمات البرمجية. تم إنجاز معظم هذا العمل في منتصف عام 2019.</p>
<h3 id="رسالة-بناء-النفق">رسالة بناء النفق</h3>
<p>تتطلب عدة تغييرات لمواصفات إنشاء النفق <a href="../../../ar/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>

استخدام ECIES بدلاً من ElGamal.
بالإضافة إلى ذلك، سنقوم بإجراء تحسينات على رسائل بناء النفق
لزيادة الأمان.</p>
<p>في المرحلة 1، سنقوم بتغيير صيغة وتشفير
سجل طلب البناء وسجل استجابة البناء للوقفات ECIES.
ستكون هذه التغييرات متوافقة مع الموجهات الحالية ElGamal.
تم تحديد هذه التغييرات في الاقتراح 152 <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<p>في المرحلة 2، سنقوم بإضافة إصدار جديد من
رسالة طلب البناء، رسالة رد البناء،
سجل طلب البناء وسجل استجابة البناء.
سيتم تقليل الحجم لتحقيق الكفاءة.
يجب دعم هذه التغييرات في جميع الوقفات في نفق، ويجب أن تكون جميع الوقفات ECIES.
تم تحديد هذه التغييرات في الاقتراح 157 <a href="../../../ar/proposals/157-new-tbm/">Prop157</a>
.</p>
<h3 id="التشفير-من-النهاية-إلى-النهاية">التشفير من النهاية إلى النهاية</h3>
<h4 id="التاريخ">التاريخ</h4>
<p>في التصميم الأصلي لـ Java I2P، كان هناك مدير جلسة ElGamal واحد (SKM)
مشترك من قبل الموجه وجميع وجهاته المحلية.
نظرًا لأن SKM المشترك يمكن أن يسرب معلومات ويسمح بالترابط من قبل المهاجمين،
تم تغيير التصميم لدعم SKMs مختلفة لـ ElGamal لكل من الموجه وكل وجهة.
دعمت تصميم ElGamal فقط المرسلين المجهولين؛
أرسل المرسل مفاتيح مؤقتة فقط، وليس مفتاح ثابت.
لم تكن الرسالة مربوطة بهوية المرسل.</p>
<p>ثم، قمنا بتصميم ECIES Ratchet SKM في
ECIES-X25519-AEAD-Ratchet <a href="../../../ar/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
, المحددة الآن في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
.
تم تحديد هذا التصميم باستخدام نمط &ldquo;IK&rdquo; الخاص بـ Noise، الذي شمل المفتاح الثابت للمرسل في الرسالة الأولى. يستخدم هذا البروتوكول لـ ECIES (النوع 4) للوجهات.
لا يسمح نمط IK بمرسلين مجهولين.</p>
<p>لذلك، قمنا بتضمين في الاقتراح طريقة لإرسال الرسائل المجهولة أيضًا
إلى Ratchet SKM، باستخدام مفتاح ثابت مملوء بالصفر. قام ذلك بمحاكاة نمط &ldquo;N&rdquo; من Noise،
ولكن بطريقة متوافقة، بحيث يمكن أن تستقبل ECIES SKM كل من الرسائل المجهولة وغير المجهولة.
كانت النية استخدام مفتاح صفر لروترات ECIES.</p>
<h4 id="حالات-الاستخدام-ونماذج-التهديدات">حالات الاستخدام ونماذج التهديدات</h4>
<p>حالة الاستخدام ونموذج التهديد للرسائل المرسلة إلى الموجهات تختلف كثيرًا عن تلك للرسائل من النهاية إلى النهاية بين الوجهات.</p>
<p>حالة استخدام وجهة ونموذج تهديد:</p>
<ul>
<li>من/إلى الوجهات غير المجهولة (يتضمن المرسل مفتاحًا ثابتًا)</li>
<li>دعم فعال لحركة المرور المستمرة بين الوجهات (مصافحة كاملة، وبث، وعلامات)</li>
<li>يُرسل دائمًا عبر الأنفاق الصادرة والواردة</li>
<li>إخفاء جميع الخصائص التعريفية عن OBEP وIBGW، مما يتطلب تشفير Elligator2 للمفاتيح المؤقتة.</li>
<li>يجب أن يستخدم كلا المشاركين نفس نوع التشفير</li>
</ul>
<p>حالة استخدام الموجه و</p>
<p>نموذج التهديد:</p>
<ul>
<li>رسائل مجهولة من الموجهات أو الوجهات (المرسل لا يتضمن مفتاح ثابت)</li>
<li>لأغراض الاستعلام المشفر لتخزين المعطيات فقط، بشكل عام إلى floodfills</li>
<li>رسائل عرضية</li>
<li>يجب عدم ربط الرسائل المتعددة</li>
<li>يُرسل دائمًا عبر نفق صادر مباشرةً إلى موجه. لا تُستخدم الأنفاق الواردة</li>
<li>يعرف OBEP أنه يوجه الرسالة إلى موجه ويعرف نوع تشفيره</li>
<li>قد يكون للمشاركين نوعان مختلفان من التشفير</li>
<li>تكون الردود على استعلام قاعدة البيانات رسائل لمرة واحدة باستخدام مفتاح الرد والعلامة في رسالة الاستعلام</li>
<li>التأكيدات على تخزين قاعدة المعطيات تكون رسائل لمرة واحدة باستخدام رسالة حالة التسليم المجمع</li>
</ul>
<p>أهداف حالة استخدام الموجه غير المرغوب فيها:</p>
<ul>
<li>لا حاجة إلى رسائل غير مجهولة</li>
<li>لا حاجة لإرسال الرسائل عبر أنفاق استكشافية واردة (الموجه لا ينشر قيد استكشاف لجهات الإيجار)</li>
<li>لا حاجة إلى حركة مرور رسائل مستمرة باستخدام العلامات</li>
<li>لا حاجة لتشغيل &ldquo;مدير مفاتيح جلسة مزدوجة&rdquo; كما هو موضح في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 للوجهات. الموجهات لديها مفتاح عام واحد فقط.</li>
</ul>
<h4 id="استنتاجات-التصميم">استنتاجات التصميم</h4>
<p>لا يحتاج SKM الخاص بموجهات ECIES إلى SKM ذو حركة بالكامل كما هو محدد في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 للوجهات.
لا يوجد حاجة للرسائل غير المجهولة باستخدام نمط IK.
نموذج التهديد لا يتطلب تشفير المفاتيح المؤقتة بـ Elligator2.</p>
<p>لذلك، سيستخدم SKM الخاص بالموجه نمط &ldquo;N&rdquo; الخاص بـ Noise، نفس ما تم تحديده
في <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
 لبناء النفق.
سيستخدم نفس صيغة الحمولة كما تم تحديدها في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 للوجهات.
الوضع الثابت صفر (بدون ارتباطات أو جلسات) لنمط IK المحدد في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 لن يتم استخدامه.</p>
<p>ستكون الردود على عمليات البحث مشفرة بعلامة راش إذا طُلبت في عملية البحث.
هذا كما هو موثق في <a href="../../../ar/proposals/154-ecies-lookups/">Prop154</a>
, المحددة الآن في <a href="../../../ar/docs/specs/i2np/">I2NP</a>
.</p>
<p>يُمكّن التصميم الموجه من الحصول على مدير مفاتيح جلسة ECIES واحد.
لا توجد حاجة إلى تشغيل &ldquo;مديري مفاتيح جلسة مزدوجة&rdquo; كما هو موضح
في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 للوجهات.
لدى الموجهات مفتاح عام واحد فقط.</p>
<p>الموجهة ECIES لا تمتلك مفتاح ثابت لـ ElGamal.
لاتزال الموجهة بحاجة إلى تنفيذ ElGamal لبناء الأنفاق
عبر الموجهات ElGamal وإرسال الرسائل المشفرة إلى الموجهات ElGamal.</p>
<p>قد تتطلب الموجهة ECIES مدير مفاتيح جلسة ElGamal جزئي
لتلقي الرسائل المعلمة بـ ElGamal التي يتم تلقيها كإجابات على عمليات بحث NetDB
من الموجهات الفيضانية قبل 0.9.46، حيث لا تمتلك تلك الموجهات
تنفيذًا لردود ECIES كما هو محدد في <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
.
إذا لم يكن الأمر كذلك، فقد لا تطلب الموجهة ECIES ردًا مشفرًا من
الموجهات الفيضانية قبل 0.9.46.</p>
<p>هذا أمر اختياري. قد يختلف القرار في مختلف IH implementًا
وقد يعتمد على مقدار الشبكة التي تمت ترقيتها إلى
0.9.46 أو أعلى.
اعتبارًا من هذا التاريخ، تقريبًا 85% من الشبكة هي 0.9.46 أو أعلى.</p>
<h2 id="المواصفات">المواصفات</h2>
<p>X25519: راجع <a href="../../../ar/docs/specs/ecies/">ECIES</a>
.</p>
<p>هوية الموجه وشهادة المفتاح: راجع <a href="../../../ar/docs/specs/common-structures/">Common</a>
.</p>
<p>بناء النفق: راجع <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<p>رسالة بناء النفق الجديدة: راجع <a href="../../../ar/proposals/157-new-tbm/">Prop157</a>
.</p>
<h3 id="تشفير-الطلب">تشفير الطلب</h3>
<p>تشفير الطلب هو نفسه الذي تم تحديده في <a href="../../../ar/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 و <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
,
باستخدام نمط &ldquo;N&rdquo; الخاص بـ Noise.</p>
<p>ستتم تشفير الردود على الاستفسارات بعلامة راش إذا طُلبت في الاستفسار.
تحتوي رسائل طلب البحث عن قاعدة البيانات على مفتاح رد بحجم 32 بايت وعلامة رد بحجم 8 بايت
كما هو محدد في <a href="../../../ar/docs/specs/i2np/">I2NP</a>
 و <a href="../../../ar/proposals/154-ecies-lookups/">Prop154</a>
. يتم استخدام المفتاح والعلامة لتشفير الرد.</p>
<p>لا يتم إنشاء مجموعات العلامات.
لوحة المفاتيح الصفرية المحددة في
ECIES-X25519-AEAD-Ratchet <a href="../../../ar/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
 و<a href="../../../ar/docs/specs/ecies/">ECIES</a>
 لن يتم استخدامها.
لن يتم تشفير المفاتيح المؤقتة بـ Elligator2.</p>
<p>بشكل عام، ستكون هذه رسائل جلسة جديدة وستُرسل بمفتاح ثابت صفر
(بدون ارتباطات أو جلسات)، حيث يكون مرسل الرسالة مجهولاً.</p>
<h4 id="kdf-للمفتاح-الابتدائي-ck-و-h">KDF للمفتاح الابتدائي ck و h</h4>
<p>هذا هو المعيار <a href="https://noiseprotocol.org/noise.html">NOISE</a>
 لنمط &ldquo;N&rdquo; مع اسم بروتوكول معياري.
هذا هو نفس ما تم تحديده في <a href="../../../ar/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 و <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
 لرسائل بناء النفق.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>هذا هو نمط الرسالة &#34;e&#34;:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// قم بتعريف protocol_name.
</span></span><span style="display:flex;"><span>ضع البروتوكول_name = &#34;Noise_N_25519_ChaChaPoly_SHA256&#34;
</span></span><span style="display:flex;"><span>(31 بايت، تم ترميزه بالولايات المتحدة-ASCII، بدون إنهاء بـ NULL).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// قم بتعريف Hash h = 32 بايت
</span></span><span style="display:flex;"><span>// املأ إلى 32 بايت. لا تقم بـ hash له، لأنه ليس أكثر من 32 بايت.
</span></span><span style="display:flex;"><span>h = protocol_name || 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>قم بتعريف ck = مفتاح سلسلة بحجم 32 بايت. انسخ بيانات h إلى ck.
</span></span><span style="display:flex;"><span>ضع مفتاح السلسلة = h
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// MixHash(null prologue)
</span></span><span style="display:flex;"><span>h = SHA256(h);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// حتى هذه النقطة، يمكن أن يُحسب كل ذلك مسبقًا بواسطة جميع الموجهات.
</span></span></code></pre></div><h4 id="kdf-للرسالة">KDF للرسالة</h4>
<p>يقوم منشئو الرسائل بإنشاء زوج مفاتيح مؤقتة X25519 لكل رسالة.
يجب أن تكون المفاتيح المؤقتة فريدة لكل رسالة.
هذا هو نفس ما تم تحديده في <a href="../../../ar/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 و <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
 لرسائل بناء النفق.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">
// مفتاح ثابت (hesk، hepk) الخاص بالموجه الهدف من هوية الموجه
hesk = GENERATE_PRIVATE()
hepk = DERIVE_PUBLIC(hesk)

// MixHash(hepk)
// || أدناه يعني إضافي
h = SHA256(h || hepk);

// حتى هذه النقطة، يمكن أن يُحسب كل ذلك مسبقًا بواسطة كل موجه
// لجميع الرسائل الواردة

// يقوم المرسل بتوليد زوج مفاتيح مؤقتة X25519
sesk = GENERATE_PRIVATE()
sepk = DERIVE_PUBLIC(sesk)

// MixHash(sepk)
h = SHA256(h || sepk);

نهاية نمط الرسالة &#34;e&#34;.

هذا هو نمط الرسالة &#34;es&#34;:

// Noise es
// يجري المرسل DH باستخدام مفتاح العام الثابت للمستقبل.
// يستخرج الموجه الهدف
// المفتاح المؤقت للمرسل الموجود قبل السجل المشفر.
sharedSecret = DH(sesk, hepk) = DH(hesk, sepk)

// MixKey(DH())
//[chainKey, k] = MixKey(sharedSecret)
// معلمات ChaChaPoly للتشفير/فك التشفير
keydata = HKDF(chainKey, sharedSecret, &#34;&#34;, 64)
// لم يتم استخدام مفتاح السلسلة
//chainKey = keydata[0:31]

// معلمات AEAD
k = keydata[32:63]
n = 0
نص عادي = سجل طلب بناء 464 بايت
ad = h
نص مشفر = ENCRYPT(k, n, plaintext, ad)

نهاية نمط الرسالة &#34;es&#34;.

// لا حاجة إلى MixHash(ciphertext)
//h = SHA256(h || ciphertext)
</code></pre><h4 id="الحمولة">الحمولة</h4>
<p>الحمولة هي نفس صيغة البلوك كما هو معرف في <a href="../../../ar/docs/specs/ecies/">ECIES</a>
 و <a href="../../../ar/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
.
يجب أن تحتوي جميع الرسائل على كتلة DateTime لمنع إعادة التشغيل.</p>
<h3 id="تشفير-الرد">تشفير الرد</h3>
<p>الردود على رسائل استعلام قاعدة البيانات هي رسائل تخزين قاعدة البيانات أو رسائل رد بحث قاعدة البيانات.
يتم تشفيرها كرسائل جلسة موجودة مع</p>
<p>مفتاح الرد بحجم 32 بايت وعلامة الرد بحجم 8 بايت
كما هو محدد في <a href="../../../ar/docs/specs/i2np/">I2NP</a>
 و <a href="../../../ar/proposals/154-ecies-lookups/">Prop154</a>
.</p>
<p>لا توجد ردود صريحة على رسائل تخزين قاعدة البيانات. قد يدمج المرسل
ردًا خاصًا به كرسالة قيسومة لنفسه، تحتوي على رسالة حالة تسليم.</p>
<h2 id="التبرير">التبرير</h2>
<p>يزيد هذا التصميم من إعادة استخدام المكونات المشفرة الموجودة، والبروتوكولات، والتعليمات البرمجية.</p>
<p>يقلل هذا التصميم من المخاطر.</p>
<h2 id="ملاحظات-التنفيذ">ملاحظات التنفيذ</h2>
<p>لا تتحقق الموجهات الأقدم من نوع تشفير الموجه وسترسل سجلات بناء مشفرة بـ ElGamal أو رسائل netdb.
بعض الموجهات الحديثة معرضة للخطأ وسترسل أنواعًا مختلفة من سجلات البناء المشوهة.
قد ترسل بعض الموجهات الحديثة رسائل netdb غير مجهولة (ratchet كامل).
يجب على المنفذين الكشف عن هذه السجلات والرسائل ورفضها
بأسرع وقت ممكن، لتقليل استخدام وحدة المعالجة المركزية.</p>
<h2 id="القضايا">القضايا</h2>
<p>قد يتم إعادة كتابة الاقتراح 145 <a href="../../../ar/proposals/145-ecies/">Prop145</a>
 ليكون متوافقًا في الأغلب مع
الاقتراح 152 <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<h2 id="الهجرة">الهجرة</h2>
<p>سيستغرق التنفيذ والاختبار والنشر عدة إصدارات
وحوالي عام واحد. المراحل هي كما يلي. تعيين
كل مرحلة لإصدار معين لم يتم تحديدها بعد وتعتمد على
إيقاع التطوير.</p>
<p>قد تختلف تفاصيل التنفيذ والهجرة لكل
تنفيذ I2P.</p>
<h3 id="الاتصال-الأساسي-من-نقطة-إلى-نقطة">الاتصال الأساسي من نقطة إلى نقطة</h3>
<p>يمكن للموجهات ECIES الاتصال واستلام الاتصالات من الموجهات ElGamal.
يجب أن يكون هذا ممكنًا الآن، حيث تم إضافة عدة فحوصات إلى قاعدة الشفرة الخاصة بـ Java
بحلول منتصف 2019 كرد فعل على الاقتراح الذي لم يكتمل 145 <a href="../../../ar/proposals/145-ecies/">Prop145</a>
.
تأكد من عدم وجود شيء في قواعد الشفرة
يمنع الاتصالات من نقطة إلى نقطة للموجهات غير ElGamal.</p>
<p>فحوصات صحة التعليمات البرمجية:</p>
<ul>
<li>تأكد من أن الموجهات ElGamal لا تطلب الردود المشفرة بـ AEAD لرسائل استعلام قاعدة البيانات
(عندما يعود الرد عبر نفق استكشافي للموجه)</li>
<li>تأكد من أن الموجهات ECIES لا تطلب الردود المشفرة بـ AES لرسائل استعلام قاعدة البيانات
(عندما يعود الرد عبر نفق استكشافي للموجه)</li>
</ul>
<p>حتى المراحل اللاحقة، عندما تكون المواصفات والتنفيذات مكتملة:</p>
<ul>
<li>تأكد من عدم محاولة بناء الأنفاق بواسطة الموجهات ElGamal عبر الموجهات ECIES.</li>
<li>تأكد من عدم إرسال الرسائل المشفرة بـ ElGamal بواسطة الموجهات ElGamal إلى الموجهات الفيضانية ECIES.
(استعلامات قاعدة البيانات وتخزين قاعدة البيانات)</li>
<li>التأكد من عدم إرسال الرسائل المشفرة بـ ECIES بواسطة الموجهات ECIES إلى الموجهات الفيضانية ElGamal.
(استعلامات قاعدة البيانات وتخزين قاعدة البيانات)</li>
<li>تأكد من عدم قيام الموجهات ECIES تلقائيًا بالتحول إلى الوضع الفيضاني.</li>
</ul>
<p>لا ينبغي أن تكون هناك حاجة إلى تغييرات.
الإصدار المستهدف، إذا كانت التغييرات مطلوبة: 0.9.48</p>
<h3 id="التوافق-مع-netdb">التوافق مع NetDB</h3>
<p>تأكد من إمكانية تخزين واسترداد معلومات الموجهات ECIES من الموجهات الفيضانية لـ ElGamal.
يجب أن يكون هذا ممكنًا الآن، حيث تم إضافة عدة فحوصات إلى قاعدة الشفرة الخاصة بـ Java
بحلول منتصف 2019 كرد فعل على الاقتراح الذي لم يكتمل 145 <a href="../../../ar/proposals/145-ecies/">Prop145</a>
.
تأكد من عدم وجود شيء في قواعد الشفرة
يمنع تخزين معلومات الموجهات غير ElGamal في قاعدة بيانات الشبكة.</p>
<p>لا ينبغي أن تكون هناك حاجة إلى تغييرات.
الإصدار المستهدف، إذا كانت التغييرات مطلوبة: 0.9.48</p>
<h3 id="بناء-النفق">بناء النفق</h3>
<p>تنفيذ بناء النفق كما هو محدد في الاقتراح 152 <a href="../../../ar/proposals/152-ecies-tunnels/">Prop152</a>
.
ابدأ ببناء موجه ECIES للأنفاق مع جميع الوقفات ElGamal؛
استخدم سجله الخاص لطلب البناء لنفق للداخل للتجريب وتصحيح الأخطاء.</p>
<p>ثم اختبار ودعم موجهات ECIES لبناء الأنفاق مع مزيج من
الوقفات ElGamal و ECIES.</p>
<p>ثم يمكنك تمكين بناء النفق عبر الموجهات ECIES.
لا ينبغي أن يكون هناك حاجة إلى فحص الحد الأدنى للإصدار ما لم يتم إجراء تغييرات غير متوافقة
على الاقتراح 152 بعد الإصدار.</p>
<p>الإصدار المستهدف: 0.9.48، أواخر 2020</p>
<h3 id="رسائل-ratchet-للموجهات-الفيضانية-ecies">رسائل Ratchet للموجهات الفيضانية ECIES</h3>
<p>تنفيذ واختبار استقبال رسائل ECIES (بقفل ثابت صفر) بواسطة الموجهات الفيضانية ECIES،
كما هو محدد في الاقتراح 144 <a href="../../../ar/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
.
تنفيذ واختبار استقبال الردود المشفرة بـ AEAD على رسائل استعلام قاعدة البيانات بواسطة الموجهات ECIES.</p>
<p>تمكين الوضع الفيضاني التلقائي بواسطة الموجهات ECIES.
ثم تمكين إرسال رسائل ECIES إلى الموجهات ECIES.
لا ينبغي أن يكون هناك حاجة إلى فحص الحد الأدنى للإصدار ما لم يتم إجراء تغييرات غير متوافقة
على الاقتراح 152 بعد الإصدار.</p>
<p>الإصدار المستهدف: 0.9.49، أوائل 2021.
قد تتحول الموجهات ECIES تلقائيًا إلى الوضع الفيضاني.</p>
<h3 id="إعادة-تجهي">إعادة تجهي</h3>
<p>ز جميع التركيبات الجديدة لتكون ECIES اعتبارًا من الإصدار 0.9.49.</p>
<p>إعادة تجهيز جميع الموجهات تدريجيًا لتقليل المخاطر والاضطرابات في الشبكة.
استخدام التعليمات البرمجية الموجودة التي قامت بإعادة التجهيز للهجرة من نوع sig قبل بضع سنوات.
تقوم هذه التعليمات البرمجية بإعطاء كل موجه فرصة عشوائية صغيرة لإعادة التجهيز عند كل إعادة تشغيل.
بعد عدة عمليات إعادة تشغيل، من المرجح أن يعاد تجهيز الموجه إلى ECIES.</p>
<p>المعيار لبداية إعادة التجهيز هو أن يكون جزء كبير من الشبكة،
ربما 50٪، يمكنها بناء أنفاق عبر الموجهات ECIES (الإصدار 0.9.48 أو أحدث).</p>
<p>قبل إعادة التجهيز بشدة للشبكة الكاملة، يجب أن تكون الغالبية العظمى
(ربما 90٪ أو أكثر) قادرة على بناء أنفاق عبر الموجهات ECIES (الإصدار 0.9.48 أو أحدث)
وإرسال رسائل إلى الموجهات الفيضانية ECIES (الإصدار 0.9.49 أو أحدث).
من المرجح أن يتم الوصول إلى هذا الهدف بخصوص الإصدار 0.9.52.</p>
<p>سيستغرق إعادة التجهيز عدة إصدارات.</p>
<p>الإصدار المستهدف:
0.9.49 للتركيبات الجديدة لتكون افتراضية لـ ECIES؛
0.9.49 لتبدأ ببطء بإعادة التجهيز؛
0.9.50 - 0.9.52 لزيادة معدل إعادة التجهيز بشكل متكرر؛
أواخر 2021 ليكون معظم الشبكة قد أعيد تجهيزها.</p>
<h3 id="رسالة-بناء-النفق-الجديدة-المرحلة-2">رسالة بناء النفق الجديدة (المرحلة 2)</h3>
<p>تنفيذ واختبار رسالة بناء النفق الجديدة كما هو محدد في الاقتراح 157 <a href="../../../ar/proposals/157-new-tbm/">Prop157</a>
.
نشر الدعم في الإصدار 0.9.51.
إجراء اختبارات إضافية، ثم تمكينها في الإصدار 0.9.52.</p>
<p>قد يكون من الصعب إجراء الاختبار.
قبل أن يمكن لهذا أن يُختبر على نطاق واسع، يجب أن يدعم جزء كبير من الشبكة ذلك.
قبل أن يكون عمليًا على نطاق واسع، يجب أن تدعمه الأغلبية من الشبكة.
إذا تطلبت التغييرات على المواصفات أو التنفيذ بعد الاختبار،
سيؤجل النشر لإصدار إضافي.</p>
<p>الإصدار المستهدف: 0.9.52، أواخر 2021.</p>
<h3 id="إعادة-التجهيز-كاملة">إعادة التجهيز كاملة</h3>
<p>في هذه المرحلة، الموجهات الأقدم من إصدار ما TBD
لن تكون قادرة على بناء الأنفاق عبر معظم الأفراد.</p>
<p>الإصدار المستهدف: 0.9.53، أوائل 2022.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../ar/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/156-ecies-routers.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">ابقَ على اطلاع بأخبار I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="أدخل بريدك الإلكتروني" required>
                            <button type="submit">اشترك</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>روابط سريعة</h3>
                <ul>
                    <li><a href="../../../ar/financial-support/">تبرع</a></li>
                    <li><a href="../../../ar/docs/overview/intro/">مقدمة I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>المجتمع</h3>
                <ul>
                    <li><a href="../../../ar/get-involved/">شارك معنا</a></li>
                    <li><a href="../../../ar/blog/">مدونة</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">المنتديات الرسمية</a></li>
                    <li><a href="../../../ar/contact/">اتصل بنا</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>الموارد</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">إحصائيات I2P</a></li>
                    <li><a href="../../../ar/papers/">بحث</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">ستورمي كلاود</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 مشروع الإنترنت الخفي. مرخص تحت Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../ar/privacy/">الخصوصية</a>
                <a href="../../../ar/terms/">الشروط</a>
                <a href="../../../ar/about/media/">الصحافة</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="إغلاق">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>استطلاع المجتمع</h2>
            <p class="modal-subtitle">نود أن نسمع منك</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                يساعد تصويتك في تشكيل مستقبل I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
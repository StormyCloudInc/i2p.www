<!DOCTYPE html>
<html lang="fr" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Routeurs ECIES | I2P - Le projet Internet invisible</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Routeurs ECIES | I2P - Le projet Internet invisible">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/fr/proposals/156-ecies-routers/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Site Bêta I2P Maintenant En Ligne Signaler les problèmes e-mail à stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Fermer la bannière" title="Fermer la bannière">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../fr/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../fr/about/" class="">À propos</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../fr/about/">Aperçu</a></li>
                            <li><a href="../../../fr/papers/">Articles de recherche</a></li>
                            <li><a href="../../../fr/about/media/">Presse</a></li>
                            <li><a href="../../../fr/contact/">Contactez-nous</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../fr/docs/" class="">Docs</a></li>
                    <li><a href="../../../fr/downloads/" class="">Téléchargements</a></li>
                    <li><a href="../../../fr/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../fr/get-involved/" class="">S&#39;impliquer</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../fr/get-involved/">Aperçu</a></li>
                            <li><a href="../../../fr/feedback/">Suggestions de fonctionnalités</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">fr</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/156-ecies-routers/"
                                class="lang-option">Anglais</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/156-ecies-routers/"
                                class="lang-option">Espagnol</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/156-ecies-routers/"
                                class="lang-option">Coréen</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/156-ecies-routers/"
                                class="lang-option">Chinois</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/156-ecies-routers/"
                                class="lang-option">Russe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/156-ecies-routers/"
                                class="lang-option">Tchèque</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/156-ecies-routers/"
                                class="lang-option">Allemand</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/156-ecies-routers/"
                                class="lang-option active">Français</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/156-ecies-routers/"
                                class="lang-option">Turc</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/156-ecies-routers/"
                                class="lang-option">Vietnamien</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/156-ecies-routers/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/156-ecies-routers/"
                                class="lang-option">Arabe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/156-ecies-routers/"
                                class="lang-option">Portugais</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../fr/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../fr/downloads/" class="btn btn-primary">Obtenir I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../fr/">Home</a>
            <span class="separator">/</span>
            <a href="../../../fr/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Routeurs ECIES</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Cette traduction a été générée par apprentissage automatique et peut ne pas être exacte à 100%.</span>
    
    
    <a href="../../../en/proposals/156-ecies-routers/" class="disclaimer-link">Voir la version anglaise</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Routeurs ECIES</h1>
                <div class="proposal-number">Proposal 156</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-fermé">
                    Fermé
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz, orignal</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-09-01</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2025-03-05</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.51</span>
                    </div>
                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#remarque">Remarque</a></li>
    <li><a href="#aperçu">Aperçu</a>
      <ul>
        <li><a href="#résumé">Résumé</a></li>
        <li><a href="#objectifs">Objectifs</a></li>
        <li><a href="#non-objectifs">Non-Objectifs</a></li>
      </ul>
    </li>
    <li><a href="#conception">Conception</a>
      <ul>
        <li><a href="#emplacement-de-la-clé-et-type-de-crypto">Emplacement de la clé et type de crypto</a></li>
        <li><a href="#message-de-construction-de-tunnel">Message de construction de tunnel</a></li>
        <li><a href="#chiffrement-de-bout-en-bout">Chiffrement de bout en bout</a></li>
      </ul>
    </li>
    <li><a href="#spécification">Spécification</a>
      <ul>
        <li><a href="#chiffrement-des-requêtes">Chiffrement des requêtes</a></li>
        <li><a href="#chiffrement-des-réponses">Chiffrement des réponses</a></li>
      </ul>
    </li>
    <li><a href="#justification">Justification</a></li>
    <li><a href="#notes-dimplémentation">Notes d&rsquo;implémentation</a></li>
    <li><a href="#problèmes">Problèmes</a></li>
    <li><a href="#migration">Migration</a>
      <ul>
        <li><a href="#point-à-point-de-base">Point à point de base</a></li>
        <li><a href="#compatibilité-netdb">Compatibilité NetDB</a></li>
        <li><a href="#construction-de-tunnel">Construction de tunnel</a></li>
        <li><a href="#messages-à-cliquet-aux-floodfills-ecies">Messages à cliquet aux floodfills ECIES</a></li>
        <li><a href="#changement-de-clé-et-nouvelles-installations">Changement de clé et nouvelles installations</a></li>
        <li><a href="#nouveau-message-de-construction-de-tunnel-phase-2">Nouveau message de construction de tunnel (Phase 2)</a></li>
        <li><a href="#changement-de-clé-complet">Changement de clé complet</a></li>
      </ul>
    </li>
    <li><a href="#références">Références</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="remarque">Remarque</h2>
<p>Déploiement et tests réseau en cours.
Sujet à révision.
Statut :</p>
<ul>
<li>Routeurs ECIES implémentés depuis la version 0.9.48, voir <a href="../../../fr/docs/specs/common-structures/">Common</a>
.</li>
<li>Construction de tunnels implémentée depuis la version 0.9.48, voir <a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
.</li>
<li>Messages cryptés aux routeurs ECIES implémentés depuis la version 0.9.49, voir <a href="../../../fr/docs/specs/ecies/">ECIES-ROUTERS</a>
.</li>
<li>Nouveaux messages de construction de tunnels implémentés depuis la version 0.9.51.</li>
</ul>
<h2 id="aperçu">Aperçu</h2>
<h3 id="résumé">Résumé</h3>
<p>Les identités des routeurs contiennent actuellement une clé de chiffrement ElGamal.
Ceci est la norme depuis les débuts d&rsquo;I2P.
ElGamal est lent et doit être remplacé partout où il est utilisé.</p>
<p>Les propositions pour LS2 <a href="../../../fr/proposals/123-new-netdb-entries/">Prop123</a>
 et ECIES-X25519-AEAD-Ratchet <a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>

(maintenant spécifiées dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
) ont défini le remplacement d&rsquo;ElGamal par ECIES
pour les destinations.</p>
<p>Cette proposition définit le remplacement d&rsquo;ElGamal par ECIES-X25519 pour les routeurs.
Cette proposition donne un aperçu des changements nécessaires.
La plupart des détails sont dans d&rsquo;autres propositions et spécifications.
Voir la section de référence pour les liens.</p>
<h3 id="objectifs">Objectifs</h3>
<p>Voir <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
 pour des objectifs supplémentaires.</p>
<ul>
<li>Remplacer ElGamal par ECIES-X25519 dans les identités des routeurs</li>
<li>Réutiliser les primitives cryptographiques existantes</li>
<li>Améliorer la sécurité des messages de construction de tunnels si possible tout en maintenant la compatibilité</li>
<li>Prendre en charge les tunnels avec des pairs ElGamal/ECIES mixtes</li>
<li>Maximiser la compatibilité avec le réseau actuel</li>
<li>Ne pas nécessiter de mise à niveau « jour J » de l&rsquo;ensemble du réseau</li>
<li>Déploiement progressif pour minimiser le risque</li>
<li>Nouveau message de construction de tunnels plus petit</li>
</ul>
<h3 id="non-objectifs">Non-Objectifs</h3>
<p>Voir <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
 pour des non-objectifs supplémentaires.</p>
<ul>
<li>Pas de nécessité pour des routeurs à double clé</li>
<li>Changements de chiffrement de couche, pour cela voir <a href="../../../fr/proposals/153-chacha20-layer-encryption/">Prop153</a>
</li>
</ul>
<h2 id="conception">Conception</h2>
<h3 id="emplacement-de-la-clé-et-type-de-crypto">Emplacement de la clé et type de crypto</h3>
<p>Pour les destinations, la clé est dans le leaseset, pas dans la destination, et
nous prenons en charge plusieurs types de cryptage dans le même leaseset.</p>
<p>Aucun de cela n&rsquo;est nécessaire pour les routeurs. La clé de chiffrement du routeur
se trouve dans son identité de routeur. Voir la spécification des structures communes <a href="../../../fr/docs/specs/common-structures/">Common</a>
.</p>
<p>Pour les routeurs, nous remplacerons la clé ElGamal de 256 octets dans l&rsquo;identité du routeur
par une clé X25519 de 32 octets et 224 octets de remplissage.
Ceci sera indiqué par le type de crypto dans le certificat de clé.
Le type de crypto (le même que celui utilisé dans le LS2) est 4.
Cela indique une clé publique X25519 de 32 octets en little-endian.
C&rsquo;est la construction standard telle que définie dans la spécification des structures communes <a href="../../../fr/docs/specs/common-structures/">Common</a>
.</p>
<p>C&rsquo;est identique à la méthode proposée pour ECIES-P256
pour les types de cryptos 1-3 dans la proposition 145 <a href="../../../fr/proposals/145-ecies/">Prop145</a>
.
Bien que cette proposition n&rsquo;ait jamais été adoptée, les développeurs de l&rsquo;implémentation Java se sont préparés aux
types de cryptos dans les certificats de clé d&rsquo;identité de routeur en ajoutant des vérifications à plusieurs
endroits dans la base de code. La plupart de ce travail a été effectué à la mi-2019.</p>
<h3 id="message-de-construction-de-tunnel">Message de construction de tunnel</h3>
<p>Plusieurs changements à la spécification de création de tunnel <a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>

sont nécessaires pour utiliser ECIES au lieu d&rsquo;ElGamal.
De plus, nous apporterons des améliorations aux messages de construction de tunnel
pour accroître la sécurité.</p>
<p>Dans la phase 1, nous changerons le format et le chiffrement du
Record de demande de construction et du Record de réponse de construction pour les sauts ECIES.
Ces changements seront compatibles avec les routeurs ElGamal existants.
Ces changements sont définis dans la proposition 152 <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<p>Dans la phase 2, nous ajouterons une nouvelle version du
Message de demande de construction, Message de réponse de construction,
Record de demande de construction, et Record de réponse de construction.
La taille sera réduite pour plus d&rsquo;efficacité.
Ces changements doivent être pris en charge par tous les sauts dans un tunnel, et tous les sauts doivent être ECIES.
Ces changements sont définis dans la proposition 157 <a href="../../../fr/proposals/157-new-tbm/">Prop157</a>
.</p>
<h3 id="chiffrement-de-bout-en-bout">Chiffrement de bout en bout</h3>
<h4 id="historique">Historique</h4>
<p>Dans la conception originale de Java I2P, il y avait un seul gestionnaire de clé de session ElGamal (SKM)
partagé par le routeur et toutes ses destinations locales.
Comme un SKM partagé pouvait fuir des informations et permettre une corrélation par des attaquants,
la conception a été modifiée pour prendre en charge des SKM ElGamal séparés pour le routeur et chaque destination.
Le design ElGamal ne supportait que les expéditeurs anonymes ;
l&rsquo;expéditeur envoyait uniquement des clés éphémères, pas de clé statique.
Le message n&rsquo;était pas lié à l&rsquo;identité de l&rsquo;expéditeur.</p>
<p>Ensuite, nous avons conçu le SKM à cliquet ECIES dans
ECIES-X25519-AEAD-Ratchet <a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
, maintenant spécifié dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
.
Cette conception était spécifiée en utilisant le modèle Noise &ldquo;IK&rdquo;, qui incluait la clé
statique de l&rsquo;expéditeur dans le premier message. Ce protocole est utilisé pour les destinations (type 4) ECIES.
Le modèle IK ne permet pas des expéditeurs anonymes.</p>
<p>Par conséquent, nous avons inclus dans la proposition un moyen d&rsquo;envoyer également des messages anonymes
à un SKM à cliquet, en utilisant une clé statique remplie de zéros. Cela simulait un modèle Noise &ldquo;N&rdquo;,
mais de manière compatible, afin qu&rsquo;un SKM ECIES puisse recevoir à la fois des messages anonymes et non anonymes.
L&rsquo;intention était d&rsquo;utiliser une clé zéro pour les routeurs ECIES.</p>
<h4 id="cas-dutilisation-et-modèles-de-menace">Cas d&rsquo;utilisation et modèles de menace</h4>
<p>Le cas d&rsquo;utilisation et le modèle de menace pour les messages envoyés aux routeurs sont très différents de
ceux pour les messages de bout en bout entre destinations.</p>
<p>Cas d&rsquo;utilisation et modèle de menace de la destination :</p>
<ul>
<li>Non-anonyme depuis/vers des destinations (l&rsquo;expéditeur inclut une clé statique)</li>
<li>Prise en charge efficace du trafic soutenu entre destinations (poignée de main complète, streaming et tags)</li>
<li>Toujours envoyé via des tunnels sortants et entrants</li>
<li>Cacher toutes les caractéristiques identifiantes de l&rsquo;EPB et de l&rsquo;IGW, nécessitant un encodage Elligator2 des clés éphémères.</li>
<li>Les deux participants doivent utiliser le même type de chiffrement</li>
</ul>
<p>Cas d&rsquo;utilisation et modèle de menace pour les routeurs :</p>
<ul>
<li>Messages anonymes depuis des routeurs ou des destinations (l&rsquo;expéditeur n&rsquo;inclut pas de clé statique)</li>
<li>Pour les recherches et stockages de bases de données cryptées uniquement, généralement inondés</li>
<li>Messages occasionnels</li>
<li>Plusieurs messages ne doivent pas être corrélés</li>
<li>Toujours envoyé via un tunnel sortant directement à un routeur. Aucun tunnel entrant utilisé</li>
<li>L&rsquo;OBEP sait qu&rsquo;il transfère le message à un routeur et connaît son type de chiffrement</li>
<li>Les deux participants peuvent avoir des types de chiffrement différents</li>
<li>Les réponses de recherche de base de données sont des messages à usage unique utilisant la clé de réponse et le tag dans le message de recherche de base de données</li>
<li>Les confirmations de stockage de base de données sont des messages à usage unique utilisant un message d&rsquo;état de livraison intégré</li>
</ul>
<p>Objectifs non-visés du cas d&rsquo;utilisation des routeurs :</p>
<ul>
<li>Pas besoin de messages non anonymes</li>
<li>Pas besoin d&rsquo;envoyer des messages via des tunnels exploratoires entrants (un routeur ne publie pas de leasesets exploratoires)</li>
<li>Pas besoin de trafic soutenu de messages utilisant des tags</li>
<li>Pas besoin d&rsquo;exécuter des gestionnaires de clés de session &ldquo;à double clé&rdquo; comme décrit dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 pour les destinations. Les routeurs n&rsquo;ont qu&rsquo;une seule clé publique.</li>
</ul>
<h4 id="conclusion-de-la-conception">Conclusion de la conception</h4>
<p>Le SKM de routeur ECIES n&rsquo;a pas besoin d&rsquo;un SKM à cliquet complet tel que spécifié dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 pour les destinations.
Il n&rsquo;y a pas de besoin de messages non-anonymes utilisant le modèle IK.
Le modèle de menace ne nécessite pas de clés éphémères encodées Elligator2.</p>
<p>Par conséquent, le SKM du routeur utilisera le modèle Noise &ldquo;N&rdquo;, le même que spécifié
dans <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
 pour la construction de tunnels.
Il utilisera le même format de charge utile que spécifié dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 pour les destinations.
Le mode à clé statique zéro (pas de liaison ou session) de IK spécifié dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 ne sera pas utilisé.</p>
<p>Les réponses aux recherches seront chiffrées avec un tag à cliquet si demandé dans la recherche.
C&rsquo;est comme documenté dans <a href="../../../fr/proposals/154-ecies-lookups/">Prop154</a>
, maintenant spécifié dans <a href="../../../fr/docs/specs/i2np/">I2NP</a>
.</p>
<p>La conception permet au routeur d&rsquo;avoir un seul gestionnaire de clé de session ECIES.
Il n&rsquo;est pas nécessaire d&rsquo;exécuter des gestionnaires de clés de session &ldquo;à double clé&rdquo; tel que
décrit dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 pour les destinations.
Les routeurs n&rsquo;ont qu&rsquo;une seule clé publique.</p>
<p>Un routeur ECIES n&rsquo;a pas de clé statique ElGamal.
Le routeur a encore besoin d&rsquo;une implémentation d&rsquo;ElGamal pour construire des tunnels
à travers des routeurs ElGamal et envoyer des messages chiffrés à des routeurs ElGamal.</p>
<p>Un routeur ECIES PEUT nécessiter un gestionnaire de clé de session partiel ElGamal pour
recevoir des messages marqués ElGamal reçus en tant que réponses aux recherches NetDB
des routeurs floodfill antérieurs à la version 0.9.46, car ces routeurs n&rsquo;ont pas
une implémentation de réponses marquées ECIES tel que spécifié dans <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
.
Sinon, un routeur ECIES ne peut pas demander une réponse cryptée d&rsquo;un
routeur floodfill antérieur à la version 0.9.46.</p>
<p>C&rsquo;est optionnel. La décision peut varier dans différentes implémentations I2P
et peut dépendre de la portion du réseau ayant été mise à niveau vers
0.9.46 ou version ultérieure.
À ce jour, environ 85 % du réseau est en version 0.9.46 ou supérieure.</p>
<h2 id="spécification">Spécification</h2>
<p>X25519 : Voir <a href="../../../fr/docs/specs/ecies/">ECIES</a>
.</p>
<p>Identité de routeur et certificat de clé : Voir <a href="../../../fr/docs/specs/common-structures/">Common</a>
.</p>
<p>Construction de tunnels : Voir <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<p>Nouveau message de construction de tunnels : Voir <a href="../../../fr/proposals/157-new-tbm/">Prop157</a>
.</p>
<h3 id="chiffrement-des-requêtes">Chiffrement des requêtes</h3>
<p>Le chiffrement des demandes est le même que celui spécifié dans <a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 et <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
,
utilisant le modèle Noise &ldquo;N&rdquo;.</p>
<p>Les réponses aux recherches seront chiffrées avec un tag à cliquet si demandé dans la recherche.
Les messages de demande de recherche de base de données contiennent la clé de réponse de 32 octets et le tag de réponse de 8 octets
tels que spécifiés dans <a href="../../../fr/docs/specs/i2np/">I2NP</a>
 et <a href="../../../fr/proposals/154-ecies-lookups/">Prop154</a>
. La clé et le tag sont utilisés pour chiffrer la réponse.</p>
<p>Les ensembles de tags ne sont pas créés.
Le schéma à clé statique zéro spécifié dans
ECIES-X25519-AEAD-Ratchet <a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
 et <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 ne sera pas utilisé.
Les clés éphémères ne seront pas encodées en Elligator2.</p>
<p>En général, ce seront des messages de nouvelle session et seront envoyés avec une clé statique zéro
(pas de liaison ou session), car l&rsquo;expéditeur du message est anonyme.</p>
<h4 id="kdf-pour-ck-et-h-initiaux">KDF pour ck et h initiaux</h4>
<p>Cela fait partie du standard <a href="https://noiseprotocol.org/noise.html">NOISE</a>
 pour le modèle &ldquo;N&rdquo; avec un nom de protocole standard.
C&rsquo;est le même que spécifié dans <a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 et <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
 pour les messages de construction de tunnel.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>C&#39;est le modèle de message &#34;e&#34; :
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Définir protocol_name.
</span></span><span style="display:flex;"><span>Définir protocol_name = &#34;Noise_N_25519_ChaChaPoly_SHA256&#34;
</span></span><span style="display:flex;"><span>(31 octets, US-ASCII encodé, sans terminaison NULL).
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// Définir Hash h = 32 octets
</span></span><span style="display:flex;"><span>// Remplir pour atteindre 32 octets. NE PAS le hacher, car il ne fait pas plus de 32 octets.
</span></span><span style="display:flex;"><span>h = protocol_name || 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Définir ck = clé de chaînage de 32 octets. Copier les données de h dans ck.
</span></span><span style="display:flex;"><span>Définir chainKey = h
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// MixHash(null prologue)
</span></span><span style="display:flex;"><span>h = SHA256(h);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>// jusqu&#39;ici, tout peut être précalculé par tous les routeurs.
</span></span></code></pre></div><h4 id="kdf-pour-les-messages">KDF pour les messages</h4>
<p>Les créateurs de message génèrent une paire de clés éphémères X25519 pour chaque message.
Les clés éphémères doivent être uniques par message.
C&rsquo;est le même que spécifié dans <a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
 et <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
 pour les messages de construction de tunnel.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">

// Clé statique de l&#39;itinéraire cible X25519 (hesk, hepk) de l&#39;identité du routeur
hesk = GENERATE_PRIVATE()
hepk = DERIVE_PUBLIC(hesk)

// MixHash(hepk)
// || ci-dessous veut dire ajouter
h = SHA256(h || hepk);

// jusqu&#39;ici, tout peut être précalculé par chaque routeur
// pour tous les messages entrants

// L&#39;expéditeur génère une paire de clés éphémères X25519
sesk = GENERATE_PRIVATE()
sepk = DERIVE_PUBLIC(sesk)

// MixHash(sepk)
h = SHA256(h || sepk);

Fin du modèle de message &#34;e&#34;.

C&#39;est le modèle de message &#34;es&#34; :

// Noise es
// L&#39;expéditeur effectue un DH X25519 avec la clé publique statique du récepteur.
// Le routeur cible
// extrait la clé éphémère de l&#39;expéditeur précédant l&#39;enregistrement chiffré.
sharedSecret = DH(sesk, hepk) = DH(hesk, sepk)

// MixKey(DH())
//[chainKey, k] = MixKey(sharedSecret)
// Paramètres ChaChaPoly pour chiffrer/décrypter
keydata = HKDF(chainKey, sharedSecret, &#34;&#34;, 64)
// La clé de chaîne n&#39;est pas utilisée
//chainKey = keydata[0:31]

// Paramètres AEAD
k = keydata[32:63]
n = 0
plaintext = enregistrement de demande de construction de 464 octets
ad = h
ciphertext = ENCRYPT(k, n, plaintext, ad)

Fin du modèle de message &#34;es&#34;.

// MixHash(ciphertext) n&#39;est pas requis
//h = SHA256(h || ciphertext)
</code></pre><h4 id="charge-utile">Charge utile</h4>
<p>La charge utile est le même format de bloc que défini dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 et <a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
.
Tous les messages doivent contenir un bloc DateTime pour la prévention de la relecture.</p>
<h3 id="chiffrement-des-réponses">Chiffrement des réponses</h3>
<p>Les réponses aux messages de recherche de base de données sont des messages de stockage de base de données ou de réponse de recherche de base de données.
Ils sont chiffrés en tant que messages de session existants avec
la clé de réponse de 32 octets et le tag de réponse de 8 octets
tel que spécifié dans <a href="../../../fr/docs/specs/i2np/">I2NP</a>
 et <a href="../../../fr/proposals/154-ecies-lookups/">Prop154</a>
.</p>
<p>Il n&rsquo;y a pas de réponses explicites aux messages de stockage de base de données. L&rsquo;expéditeur peut intégrer sa
propre réponse sous forme de message Garlic à lui-même, contenant un message d&rsquo;état de livraison.</p>
<h2 id="justification">Justification</h2>
<p>Cette conception maximise la réutilisation des primitives cryptographiques existantes, des protocoles et du code.</p>
<p>Cette conception minimise le risque.</p>
<h2 id="notes-dimplémentation">Notes d&rsquo;implémentation</h2>
<p>Les anciens routeurs ne vérifient pas le type de chiffrement du routeur et enverront des enregistrements de construction ou des messages netdb chiffrés avec ElGamal.
Certains routeurs récents sont bogués et enverront différents types d&rsquo;enregistrements de construction malformés.
Certains routeurs récents peuvent envoyer des messages netdb non-anonymes (cliquet complet).
Les implémenteurs devraient détecter et rejeter ces enregistrements et messages
dès que possible, pour réduire l&rsquo;utilisation du processeur.</p>
<h2 id="problèmes">Problèmes</h2>
<p>La proposition 145 <a href="../../../fr/proposals/145-ecies/">Prop145</a>
 pourrait ou non être réécrite pour être principalement compatible avec
la proposition 152 <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
.</p>
<h2 id="migration">Migration</h2>
<p>L&rsquo;implémentation, les tests et le déploiement s&rsquo;étaleront sur plusieurs versions
et environ un an. Les phases sont les suivantes. L&rsquo;attribution de
chaque phase à une version particulière est à déterminer et dépend du
rythme de développement.</p>
<p>Les détails de l&rsquo;implémentation et de la migration peuvent varier pour
chaque implémentation I2P.</p>
<h3 id="point-à-point-de-base">Point à point de base</h3>
<p>Les routeurs ECIES peuvent se connecter et recevoir des connexions des routeurs ElGamal.
Cela devrait être possible maintenant, car plusieurs vérifications ont été ajoutées à la base de code Java
à la mi-2019 en réaction à la proposition 145 <a href="../../../fr/proposals/145-ecies/">Prop145</a>
 inachevée.
Veillez à ce qu&rsquo;il n&rsquo;y ait rien dans les bases de code
qui empêche les connexions point à point vers des routeurs non-ElGamal.</p>
<p>Contrôles de conformité du code :</p>
<ul>
<li>S&rsquo;assurer que les routeurs ElGamal ne demandent pas de réponses chiffrées AEAD aux messages de recherche de base de données
(quand la réponse revient par un tunnel exploratoire vers le routeur)</li>
<li>S&rsquo;assurer que les routeurs ECIES ne demandent pas de réponses chiffrées AES aux messages de recherche de base de données
(quand la réponse revient par un tunnel exploratoire vers le routeur)</li>
</ul>
<p>Jusqu&rsquo;à des phases ultérieures, lorsque les spécifications et les implémentations seront complètes :</p>
<ul>
<li>S&rsquo;assurer que la construction de tunnels n&rsquo;est pas tenté par des routeurs ElGamal à travers des routeurs ECIES.</li>
<li>S&rsquo;assurer que des messages chiffrés ElGamal ne sont pas envoyés par des routeurs ElGamal aux routeurs ECIES floodfill.
(Recherches de base de données et Stockages de base de données)</li>
<li>S&rsquo;assurer que des messages chiffrés ECIES ne sont pas envoyés par des routeurs ECIES aux routeurs ElGamal floodfill.
(Recherches de base de données et Stockages de base de données)</li>
<li>S&rsquo;assurer que les routeurs ECIES ne deviennent pas automatiquement floodfill.</li>
</ul>
<p>Aucune modification ne devrait être requise.
Version cible, si des modifications sont nécessaires : 0.9.48</p>
<h3 id="compatibilité-netdb">Compatibilité NetDB</h3>
<p>Assurez-vous que les infos de routeur ECIES puissent être stockées et récupérées à partir des floodfills ElGamal.
Cela devrait être possible maintenant, car plusieurs vérifications ont été ajoutées à la base de code Java
à la mi-2019 en réaction à la proposition 145 <a href="../../../fr/proposals/145-ecies/">Prop145</a>
 inachevée.
Assurez-vous qu&rsquo;il n&rsquo;y a rien dans les bases de code
qui empêche le stockage d&rsquo;info de routeur non-ElGamal dans la base de données du réseau.</p>
<p>Aucune modification ne devrait être requise.
Version cible, si des modifications sont nécessaires : 0.9.48</p>
<h3 id="construction-de-tunnel">Construction de tunnel</h3>
<p>Implémentez la construction de tunnel telle que définie dans la proposition 152 <a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
.
Commencez par faire construire aux routeurs ECIES des tunnels avec tous les sauts ElGamal ;
utilisez leur propre enregistrement de demande de construction pour un tunnel entrant à tester et déboguer.</p>
<p>Ensuite, testerez et supportez les routeurs ECIES construisant des tunnels avec un mélange de
sauts ElGamal et ECIES.</p>
<p>Ensuite, autorisez la construction de tunnels à travers les routeurs ECIES.
Aucun contrôle de version minimum ne devrait être nécessaire à moins que des changements incompatibles
à la proposition 152 ne soient apportés après une version.</p>
<p>Version cible : 0.9.48, fin 2020</p>
<h3 id="messages-à-cliquet-aux-floodfills-ecies">Messages à cliquet aux floodfills ECIES</h3>
<p>Implémentez et testez la réception des messages ECIES (avec clé statique zéro) par les floodfills ECIES,
tels que définis dans la proposition 144 <a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
.
Implémentez et testez la réception des réponses chiffrées AEAD aux messages de recherche de base de données par les routeurs ECIES.</p>
<p>Activez l&rsquo;auto-floodfill par les routeurs ECIES.
Ensuite, permettez l&rsquo;envoi de messages ECIES aux routeurs ECIES.
Aucun contrôle de version minimum ne devrait être nécessaire à moins que des changements incompatibles
à la proposition 152 ne soient apportés après une version.</p>
<p>Version cible : 0.9.49, début 2021.
Les routeurs ECIES peuvent automatiquement devenir floodfill.</p>
<h3 id="changement-de-clé-et-nouvelles-installations">Changement de clé et nouvelles installations</h3>
<p>Les nouvelles installations par défaut utiliseront ECIES à partir de la version 0.9.49.</p>
<p>Reconfigurez progressivement tous les routeurs pour minimiser le risque et la perturbation du réseau.
Utilisez le code existant qui a effectué le changement de clé pour la migration du type de signature il y a des années.
Ce code donne à chaque routeur une petite chance aléatoire de reconfigurer sa clé à chaque redémarrage.
Après plusieurs redémarrages, un routeur aura probablement reconfiguré sa clé vers ECIES.</p>
<p>Le critère pour commencer le changement de clé est qu&rsquo;une portion suffisante du réseau,
peut-être 50 %, puisse construire des tunnels à travers des routeurs ECIES (0.9.48 ou version ultérieure).</p>
<p>Avant de changer agressivement la clé de l&rsquo;ensemble du réseau, la grande majorité
(peut-être 90 % ou plus) doit être capable de construire des tunnels à travers des routeurs ECIES (0.9.48 ou version ultérieure)
ET d&rsquo;envoyer des messages aux floodfills ECIES (0.9.49 ou version ultérieure).
Cet objectif sera probablement atteint pour la version 0.9.52.</p>
<p>Le changement de clé prendra plusieurs versions.</p>
<p>Version cible :
0.9.49 pour que les nouveaux routeurs par défaut utilisent ECIES ;
0.9.49 pour commencer lentement le changement de clé ;
0.9.50 - 0.9.52 pour augmenter progressivement le taux de changement de clé ;
fin 2021 pour que la majorité du réseau soit reconfigurée.</p>
<h3 id="nouveau-message-de-construction-de-tunnel-phase-2">Nouveau message de construction de tunnel (Phase 2)</h3>
<p>Implémentez et testez le nouveau message de construction de tunnel tel que défini dans la proposition 157 <a href="../../../fr/proposals/157-new-tbm/">Prop157</a>
.
Déployer la prise en charge dans la version 0.9.51.
Faire des tests supplémentaires, puis activer dans la version 0.9.52.</p>
<p>Les tests seront difficiles.
Avant que cela puisse être largement testé, une bonne partie du réseau doit le prendre en charge.
Avant que ce soit largement utile, la majorité du réseau doit le prendre en charge.
Si des modifications de spécification ou d&rsquo;implémentation sont nécessaires après les tests,
cela retarderait le déploiement d&rsquo;une version supplémentaire.</p>
<p>Version cible : 0.9.52, fin 2021.</p>
<h3 id="changement-de-clé-complet">Changement de clé complet</h3>
<p>À ce stade, les routeurs plus anciens qu&rsquo;une version TBD ne
pourront pas construire des tunnels à travers la plupart des pairs.</p>
<p>Version cible : 0.9.53, début 2022.</p>
<h2 id="références">Références</h2>
<ul>
<li><a href="../../../fr/docs/specs/common-structures/">Common</a>
</li>
<li><a href="../../../fr/docs/specs/ecies/">ECIES</a>
</li>
<li><a href="../../../fr/docs/specs/ecies/">ECIES-ROUTERS</a>
</li>
<li><a href="../../../fr/docs/specs/i2np/">I2NP</a>
</li>
<li><a href="https://noiseprotocol.org/noise.html">NOISE</a>
</li>
<li><a href="../../../fr/proposals/123-new-netdb-entries/">Prop123</a>
</li>
<li><a href="../../../fr/proposals/144-ecies-x25519-aead-ratchet/">Prop144</a>
</li>
<li><a href="../../../fr/proposals/145-ecies/">Prop145</a>
</li>
<li><a href="../../../fr/proposals/152-ecies-tunnels/">Prop152</a>
</li>
<li><a href="../../../fr/proposals/153-chacha20-layer-encryption/">Prop153</a>
</li>
<li><a href="../../../fr/proposals/154-ecies-lookups/">Prop154</a>
</li>
<li><a href="../../../fr/proposals/157-new-tbm/">Prop157</a>
</li>
<li><a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation</a>
</li>
<li><a href="../../../fr/docs/specs/implementation/#tunnel-creation-ecies">Tunnel-Creation-ECIES</a>
</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../fr/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/156-ecies-routers.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Restez informé des actualités I2P :</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Entrez votre email" required>
                            <button type="submit">S&#39;abonner</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liens Rapides</h3>
                <ul>
                    <li><a href="../../../fr/financial-support/">Faire un don</a></li>
                    <li><a href="../../../fr/docs/overview/intro/">Introduction à I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Communauté</h3>
                <ul>
                    <li><a href="../../../fr/get-involved/">Participez</a></li>
                    <li><a href="../../../fr/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Forums Officiels</a></li>
                    <li><a href="../../../fr/contact/">Contact</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ressources</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Mesures I2P</a></li>
                    <li><a href="../../../fr/papers/">Recherche</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Le Projet Internet Invisible. Sous licence Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../fr/privacy/">Confidentialité</a>
                <a href="../../../fr/terms/">Conditions d&#39;utilisation</a>
                <a href="../../../fr/about/media/">Presse</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Fermer">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Sondage de la communauté</h2>
            <p class="modal-subtitle">Nous aimerions avoir de vos nouvelles</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Votre vote aide à façonner l&#39;avenir d&#39;I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
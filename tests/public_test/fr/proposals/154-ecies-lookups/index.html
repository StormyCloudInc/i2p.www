<!DOCTYPE html>
<html lang="fr" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Recherches de base de données à partir de destinations ECIES | I2P - Le projet Internet invisible</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Recherches de base de données à partir de destinations ECIES | I2P - Le projet Internet invisible">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/fr/proposals/154-ecies-lookups/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Site Bêta I2P Maintenant En Ligne Signaler les problèmes e-mail à stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Fermer la bannière" title="Fermer la bannière">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../fr/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../fr/about/" class="">À propos</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../fr/about/">Aperçu</a></li>
                            <li><a href="../../../fr/papers/">Articles de recherche</a></li>
                            <li><a href="../../../fr/about/media/">Presse</a></li>
                            <li><a href="../../../fr/contact/">Contactez-nous</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../fr/docs/" class="">Docs</a></li>
                    <li><a href="../../../fr/downloads/" class="">Téléchargements</a></li>
                    <li><a href="../../../fr/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../fr/get-involved/" class="">S&#39;impliquer</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../fr/get-involved/">Aperçu</a></li>
                            <li><a href="../../../fr/feedback/">Suggestions de fonctionnalités</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">fr</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/154-ecies-lookups/"
                                class="lang-option">Anglais</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/154-ecies-lookups/"
                                class="lang-option">Espagnol</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/154-ecies-lookups/"
                                class="lang-option">Coréen</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/154-ecies-lookups/"
                                class="lang-option">Chinois</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/154-ecies-lookups/"
                                class="lang-option">Russe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/154-ecies-lookups/"
                                class="lang-option">Tchèque</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/154-ecies-lookups/"
                                class="lang-option">Allemand</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/154-ecies-lookups/"
                                class="lang-option active">Français</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/154-ecies-lookups/"
                                class="lang-option">Turc</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/154-ecies-lookups/"
                                class="lang-option">Vietnamien</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/154-ecies-lookups/"
                                class="lang-option">Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/154-ecies-lookups/"
                                class="lang-option">Arabe</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/154-ecies-lookups/"
                                class="lang-option">Portugais</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../fr/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../fr/downloads/" class="btn btn-primary">Obtenir I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../fr/">Home</a>
            <span class="separator">/</span>
            <a href="../../../fr/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Recherches de base de données à partir de destinations ECIES</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Cette traduction a été générée par apprentissage automatique et peut ne pas être exacte à 100%.</span>
    
    
    <a href="../../../en/proposals/154-ecies-lookups/" class="disclaimer-link">Voir la version anglaise</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Recherches de base de données à partir de destinations ECIES</h1>
                <div class="proposal-number">Proposal 154</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-closed">
                    Closed
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-03-23</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2021-01-08</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Implemented In</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#note">Note</a></li>
    <li><a href="#aperçu">Aperçu</a>
      <ul>
        <li><a href="#définitions">Définitions</a></li>
        <li><a href="#résumé">Résumé</a></li>
        <li><a href="#objectifs">Objectifs</a></li>
        <li><a href="#non-objectifs">Non-Objectifs</a></li>
      </ul>
    </li>
    <li><a href="#alternatives">Alternatives</a></li>
    <li><a href="#conception">Conception</a></li>
    <li><a href="#spécification">Spécification</a>
      <ul>
        <li><a href="#elg-à-elg">ElG à ElG</a></li>
        <li><a href="#ecies-à-elg">ECIES à ElG</a></li>
        <li><a href="#ecies-à-ecies-0949">ECIES à ECIES (0.9.49)</a></li>
        <li><a href="#ecies-à-ecies-futur">ECIES à ECIES (futur)</a></li>
        <li><a href="#format-de-réponse">Format de réponse</a></li>
      </ul>
    </li>
    <li><a href="#justification">Justification</a></li>
    <li><a href="#notes">Notes</a></li>
    <li><a href="#problèmes">Problèmes</a></li>
    <li><a href="#migration">Migration</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="note">Note</h2>
<p>ECIES vers ElG est implémenté dans la version 0.9.46 et la phase de proposition est close.
Voir <a href="../../../fr/docs/specs/i2np/">I2NP</a>
 pour la spécification officielle.
Cette proposition peut encore être référencée pour des informations de contexte.
ECIES vers ECIES avec des clés incluses est implémenté à partir de la version 0.9.48.
La section ECIES-vers-ECIES (clés dérivées) peut être rouverte ou intégrée
dans une future proposition.</p>
<h2 id="aperçu">Aperçu</h2>
<h3 id="définitions">Définitions</h3>
<ul>
<li>AEAD : ChaCha20/Poly1305</li>
<li>DLM : Message de recherche de base de données I2NP</li>
<li>DSM : Message de stockage de base de données I2NP</li>
<li>DSRM : Réponse de recherche de base de données I2NP</li>
<li>ECIES : ECIES-X25519-AEAD-Ratchet (proposition 144)</li>
<li>ElG : ElGamal</li>
<li>ENCRYPT(k, n, payload, ad) : Tel que défini dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
</li>
<li>LS : Leaseset</li>
<li>lookup : DLM I2NP</li>
<li>reply : DSM ou DSRM I2NP</li>
</ul>
<h3 id="résumé">Résumé</h3>
<p>Lors de l&rsquo;envoi d&rsquo;un DLM pour un LS à un floodfill, le DLM spécifie généralement
que la réponse soit étiquetée, chiffrée par AES, et envoyée à travers un tunnel vers la destination.
Le support des réponses chiffrées par AES a été ajouté dans la version 0.9.7.</p>
<p>Les réponses chiffrées par AES ont été spécifiées dans la version 0.9.7 pour minimiser la grande surcharge crypto
d&rsquo;ElG, et parce qu&rsquo;elles réutilisent la fonction tags/AES dans ElGamal/AES+SessionTags.
Cependant, les réponses AES peuvent être falsifiées à l&rsquo;IBEP puisqu&rsquo;il n&rsquo;y a pas d&rsquo;authentification,
et les réponses ne sont pas secrètes en avant.</p>
<p>Avec les destinations <a href="../../../fr/docs/specs/ecies/">ECIES</a>
, l&rsquo;objectif de la proposition 144 est que
les destinations ne supportent plus les étiquettes de 32 octets et le décryptage AES.
Les détails n&rsquo;ont pas été intentionnellement inclus dans cette proposition.</p>
<p>Cette proposition documente une nouvelle option dans le DLM pour demander des réponses chiffrées par ECIES.</p>
<h3 id="objectifs">Objectifs</h3>
<ul>
<li>Nouveaux drapeaux pour le DLM lorsqu&rsquo;une réponse chiffrée est demandée à travers un tunnel vers une destination ECIES</li>
<li>Pour la réponse, ajouter la confidentialité persistante et l&rsquo;authentification de l&rsquo;expéditeur résistante à
l&rsquo;usurpation d&rsquo;identité en cas de compromission de la clé du demandeur (destination).</li>
<li>Maintenir l&rsquo;anonymat du demandeur</li>
<li>Minimiser la surcharge crypto</li>
</ul>
<h3 id="non-objectifs">Non-Objectifs</h3>
<ul>
<li>Aucun changement des propriétés de chiffrement ou de sécurité de la recherche (DLM).
La recherche a une confidentialité persistante seulement pour la compromission de la clé du demandeur.
Le chiffrement est fait avec la clé statique du floodfill.</li>
<li>Aucun problème de confidentialité persistante ou d&rsquo;authentification de l&rsquo;expéditeur résistant à
l&rsquo;usurpation d&rsquo;identité en cas de compromission de la clé du répondeur (floodfill).
Le floodfill est une base de données publique et répondra aux recherches
de n&rsquo;importe qui.</li>
<li>Ne pas concevoir de routeurs ECIES dans cette proposition.
Où va la clé publique X25519 d&rsquo;un routeur reste à déterminer.</li>
</ul>
<h2 id="alternatives">Alternatives</h2>
<p>En l&rsquo;absence d&rsquo;une manière définie de chiffrer les réponses vers les destinations ECIES, il y a plusieurs alternatives :</p>
<ol>
<li>
<p>Ne pas demander de réponses chiffrées. Les réponses seront non chiffrées.
Java I2P utilise actuellement cette approche.</p>
</li>
<li>
<p>Ajouter un support pour les étiquettes de 32 octets et les réponses chiffrées par AES pour les destinations uniquement ECIES,
et demander des réponses chiffrées par AES comme d&rsquo;habitude. i2pd utilise actuellement cette approche.</p>
</li>
<li>
<p>Demander des réponses chiffrées par AES comme d&rsquo;habitude, mais les router à travers des tunnels exploratoires vers le routeur.
Java I2P utilise actuellement cette approche dans certains cas.</p>
</li>
<li>
<p>Pour les destinations duales ElG et ECIES,
demander des réponses chiffrées par AES comme d&rsquo;habitude. Java I2P utilise actuellement cette approche.
i2pd n&rsquo;a pas encore implémenté de destinations crypto-duales.</p>
</li>
</ol>
<h2 id="conception">Conception</h2>
<ul>
<li>
<p>Un nouveau format DLM ajoutera un bit au champ drapeaux pour spécifier des réponses chiffrées par ECIES.
Les réponses chiffrées par ECIES utiliseront le format de message <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 Session existante,
avec une étiquette préfixée et une charge utile et un MAC ChaCha/Poly.</p>
</li>
<li>
<p>Définir deux variantes. Une pour les routeurs ElG, où une opération DH n&rsquo;est pas possible,
et une pour les futurs routeurs ECIES, où une opération DH est possible et peut fournir
une sécurité supplémentaire. À étudier davantage.</p>
</li>
</ul>
<p>DH n&rsquo;est pas possible pour les réponses des routeurs ElG car ils ne publient pas
une clé publique X25519.</p>
<h2 id="spécification">Spécification</h2>
<p>Dans la spécification DLM (DatabaseLookup) <a href="../../../fr/docs/specs/i2np/">I2NP</a>
, apporter les modifications suivantes.</p>
<p>Ajouter le bit de drapeau 4 &ldquo;ECIESFlag&rdquo; pour les nouvelles options de chiffrement.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>flags ::
</span></span><span style="display:flex;"><span>       bit 4: ECIESFlag
</span></span><span style="display:flex;"><span>               avant la version 0.9.46 ignoré
</span></span><span style="display:flex;"><span>               depuis la version 0.9.46 :
</span></span><span style="display:flex;"><span>               0  =&gt; envoyer une réponse non chiffrée ou ElGamal
</span></span><span style="display:flex;"><span>               1  =&gt; envoyer une réponse chiffrée par ChaCha/Poly en utilisant la clé incluse
</span></span><span style="display:flex;"><span>                     (si l&#39;étiquette est incluse dépend du bit 1)
</span></span></code></pre></div><p>Le bit de drapeau 4 est utilisé en combinaison avec le bit 1 pour déterminer le mode de chiffrement de la réponse.
Le bit de drapeau 4 ne doit être défini que lors de l&rsquo;envoi à des routeurs avec la version 0.9.46 ou supérieure.</p>
<p>Dans le tableau ci-dessous,
&ldquo;DH n/a&rdquo; signifie que la réponse n&rsquo;est pas chiffrée.
&ldquo;DH non&rdquo; signifie que les clés de réponse sont incluses dans la requête.
&ldquo;DH oui&rdquo; signifie que les clés de réponse sont dérivées de l&rsquo;opération DH.</p>
<table>
  <thead>
      <tr>
          <th>Flag bits 4,1</th>
          <th>De Dest</th>
          <th>Vers Routeur</th>
          <th>Réponse</th>
          <th>DH?</th>
          <th>notes</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0 0</td>
          <td>Any</td>
          <td>Any</td>
          <td>no enc</td>
          <td>n/a</td>
          <td>courant</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ElG</td>
          <td>ElG</td>
          <td>AES</td>
          <td>non</td>
          <td>courant</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AES</td>
          <td>non</td>
          <td>solution de contournement i2pd</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AEAD</td>
          <td>non</td>
          <td>cette proposition</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>non</td>
          <td>0.9.49</td>
      </tr>
      <tr>
          <td>1 1</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>oui</td>
          <td>futur</td>
      </tr>
  </tbody>
</table>
<h3 id="elg-à-elg">ElG à ElG</h3>
<p>La destination E한G envoie une recherche à un routeur ElG.</p>
<p>Modifications mineures dans la spécification pour vérifier le nouveau bit 4.
Aucun changement dans le format binaire existant.</p>
<p>Génération de clés de demandeur (clarification) :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 octets de données aléatoires
</span></span><span style="display:flex;"><span>  reply_tags :: Chacun est CSRNG(32) 32 octets de données aléatoires
</span></span></code></pre></div><p>Format du message (ajouter une vérification pour ECIESFlag) :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 octet `SessionKey` big-endian
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 1 ET ECIESFlag == 0, uniquement à partir de la version 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 octet `Integer`
</span></span><span style="display:flex;"><span>       plage de valeur valide : 1-32 (typiquement 1)
</span></span><span style="display:flex;"><span>       le nombre d&#39;étiquettes de réponse qui suivent
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 1 ET ECIESFlag == 0, uniquement à partir de la version 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       une ou plusieurs `SessionTag` de 32 octets (typiquement une)
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 1 ET ECIESFlag == 0, uniquement à partir de la version 0.9.7
</span></span></code></pre></div><h3 id="ecies-à-elg">ECIES à ElG</h3>
<p>La destination ECIES envoie une recherche à un routeur ElG.
Pris en charge depuis la version 0.9.46.</p>
<p>Les champs reply_key et reply_tags sont redéfinis pour une réponse chiffrée par ECIES.</p>
<p>Génération de clés de demandeur :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 octets de données aléatoires
</span></span><span style="display:flex;"><span>  reply_tags :: Chacun est CSRNG(8) 8 octets de données aléatoires
</span></span></code></pre></div><p>Format du message :
Redéfinir les champs reply_key et reply_tags comme suit :</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 octet ECIES `SessionKey` big-endian
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 0 ET ECIESFlag == 1, uniquement à partir de la version 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 octet `Integer`
</span></span><span style="display:flex;"><span>       valeur requise : 1
</span></span><span style="display:flex;"><span>       le nombre d&#39;étiquettes de réponse qui suivent
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 0 ET ECIESFlag == 1, uniquement à partir de la version 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       une `SessionTag` ECIES de 8 octets
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 0 ET ECIESFlag == 1, uniquement à partir de la version 0.9.46
</span></span></code></pre></div><p>La réponse est un message de Session existante ECIES, tel que défini dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>tag :: une reply_tag de 8 octets
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: une clé de session de 32 octets
</span></span><span style="display:flex;"><span>     La clé de réponse.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: Le reply_tag de 8 octets
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Données en clair, le DSM ou DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="ecies-à-ecies-0949">ECIES à ECIES (0.9.49)</h3>
<p>Destinations ou routeurs ECIES envoient une recherche à un routeur ECIES, avec des clés de réponse intégrées.
Pris en charge depuis la version 0.9.49.</p>
<p>Les routeurs ECIES ont été introduits dans la version 0.9.48, voir <a href="../../../fr/proposals/156-ecies-routers/">Prop156</a>
.
À partir de la version 0.9.49, les destinations et routeurs ECIES peuvent utiliser le même format que dans
la section &ldquo;ECIES à ElG&rdquo; ci-dessus, avec des clés de réponse incluses dans la requête.
La recherche utilisera le format &ldquo;one time&rdquo; dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>

car le demandeur est anonyme.</p>
<p>Pour une nouvelle méthode avec des clés dérivées, voir la section suivante.</p>
<h3 id="ecies-à-ecies-futur">ECIES à ECIES (futur)</h3>
<p>Destinations ou routeurs ECIES envoient une recherche à un routeur ECIES, et les clés de réponse sont dérivées du DH.
Non entièrement défini ou pris en charge, l&rsquo;implémentation est à déterminer.</p>
<p>La recherche utilisera le format &ldquo;one time&rdquo; dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>

car le demandeur est anonyme.</p>
<p>Redéfinir le champ reply_key comme suit. Il n&rsquo;y a pas d&rsquo;étiquettes associées.
Les étiquettes seront générées dans le KDF ci-dessous.</p>
<p>Cette section est incomplète et nécessite une étude plus approfondie.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 octet X25519 `PublicKey` éphémère du demandeur, little-endian
</span></span><span style="display:flex;"><span>       inclus uniquement si encryptionFlag == 1 ET ECIESFlag == 1, uniquement à partir de la version 0.9.TBD
</span></span></code></pre></div><p>La réponse est un message de Session existante ECIES, tel que défini dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
.
Voir <a href="../../../fr/docs/specs/ecies/">ECIES</a>
 pour toutes les définitions.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// Clés éphémères X25519 d&#39;Alice
</span></span><span style="display:flex;"><span>  // aesk = clé privée éphémère d&#39;Alice
</span></span><span style="display:flex;"><span>  aesk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // aepk = clé publique éphémère d&#39;Alice
</span></span><span style="display:flex;"><span>  aepk = DERIVE_PUBLIC(aesk)
</span></span><span style="display:flex;"><span>  // Clés statiques X25519 de Bob
</span></span><span style="display:flex;"><span>  // bsk = clé statique privée de Bob
</span></span><span style="display:flex;"><span>  bsk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // bpk = clé statique publique de Bob
</span></span><span style="display:flex;"><span>  // bpk fait partie de RouterIdentity, ou publié dans RouterInfo (à déterminer)
</span></span><span style="display:flex;"><span>  bpk = DERIVE_PUBLIC(bsk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // (DH()
</span></span><span style="display:flex;"><span>  //[chainKey, k] = MixKey(sharedSecret)
</span></span><span style="display:flex;"><span>  // chainKey de ???
</span></span><span style="display:flex;"><span>  sharedSecret = DH(aesk, bpk) = DH(bsk, aepk)
</span></span><span style="display:flex;"><span>  keydata = HKDF(chainKey, sharedSecret, &#34;ECIES-DSM-Reply1&#34;, 32)
</span></span><span style="display:flex;"><span>  chainKey = keydata[0:31]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  1) rootKey = chaîne de clé de la section Payload
</span></span><span style="display:flex;"><span>  2) k de la nouvelle session KDF ou split()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // KDF_RK(rk, dh_out)
</span></span><span style="display:flex;"><span>  keydata = HKDF(rootKey, k, &#34;KDFDHRatchetStep&#34;, 64)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Sortie 1: inutilisé
</span></span><span style="display:flex;"><span>  unused = keydata[0:31]
</span></span><span style="display:flex;"><span>  // Sortie 2: La chaîne de clé pour initialiser le nouveau
</span></span><span style="display:flex;"><span>  // session tag et chaîne de clé symétrique
</span></span><span style="display:flex;"><span>  // pour les transmissions d&#39;Alice vers Bob
</span></span><span style="display:flex;"><span>  ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // chaîne de clés de session tag et de clés symétriques
</span></span><span style="display:flex;"><span>  keydata = HKDF(ck, ZEROLEN, &#34;TagAndKeyGenKeys&#34;, 64)
</span></span><span style="display:flex;"><span>  sessTag_ck = keydata[0:31]
</span></span><span style="display:flex;"><span>  symmKey_ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tag :: une étiquette de 8 octets générée à partir de RATCHET_TAG() dans [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: une clé de 32 octets générée à partir de RATCHET_KEY() dans [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: L&#39;indice de l&#39;étiquette. Typiquement 0.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: L&#39;étiquette de 8 octets
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Données en clair, le DSM ou DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="format-de-réponse">Format de réponse</h3>
<p>Ceci est le message de session existante,
comme dans <a href="../../../fr/docs/specs/ecies/">ECIES</a>
, copié ci-dessous pour référence.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |       Étiquette de session               |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                         |
</span></span><span style="display:flex;"><span>  +           Section de charge             +
</span></span><span style="display:flex;"><span>  |        Données chiffrées par ChaCha20   |
</span></span><span style="display:flex;"><span>  ~                                         ~
</span></span><span style="display:flex;"><span>  |                                         |
</span></span><span style="display:flex;"><span>  +                                         +
</span></span><span style="display:flex;"><span>  |                                         |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  | Message d&#39;authentification Poly1305    |
</span></span><span style="display:flex;"><span>  +              (MAC)                      +
</span></span><span style="display:flex;"><span>  |             16 octets                   |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Étiquette de session :: 8 octets, en clair
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Données chiffrées de la section de charge :: données restantes sauf 16 octets
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  MAC :: code d&#39;authentification par message Poly1305, 16 octets
</span></span></code></pre></div><h2 id="justification">Justification</h2>
<p>Les paramètres de chiffrement de réponse dans la recherche, introduits pour la première fois dans la version 0.9.7,
sont quelque peu une violation de la couche. C&rsquo;est fait ainsi pour l&rsquo;efficacité.
Mais aussi parce que la recherche est anonyme.</p>
<p>Nous pourrions rendre le format de recherche générique, comme avec un champ de type de chiffrement,
mais cela serait probablement plus problématique que bénéfique.</p>
<p>La proposition ci-dessus est la plus simple et minimise le changement du format de recherche.</p>
<h2 id="notes">Notes</h2>
<p>Les recherches et stockages dans la base de données vers les routeurs ElG doivent être chiffrés par ElGamal/AESSessionTag
comme d&rsquo;habitude.</p>
<h2 id="problèmes">Problèmes</h2>
<p>Une analyse plus approfondie est nécessaire sur la sécurité des deux options de réponse ECIES.</p>
<h2 id="migration">Migration</h2>
<p>Aucun problème de compatibilité rétroactive. Les routeurs annonçant une version de routeur 0.9.46 ou plus dans leur RouterInfo
doivent supporter cette fonctionnalité.
Les routeurs ne doivent pas envoyer un DatabaseLookup avec les nouveaux drapeaux à des routeurs avec une version inférieure à 0.9.46.
Si un message de recherche de base de données avec le bit 4 défini et le bit 1 non défini est envoyé par erreur à un
routeur sans support, il ignorera probablement la clé et l&rsquo;étiquette fournies et
enverra la réponse non chiffrée.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../fr/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/154-ecies-lookups.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Restez informé des actualités I2P :</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Entrez votre email" required>
                            <button type="submit">S&#39;abonner</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liens Rapides</h3>
                <ul>
                    <li><a href="../../../fr/financial-support/">Faire un don</a></li>
                    <li><a href="../../../fr/docs/overview/intro/">Introduction à I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Communauté</h3>
                <ul>
                    <li><a href="../../../fr/get-involved/">Participez</a></li>
                    <li><a href="../../../fr/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Forums Officiels</a></li>
                    <li><a href="../../../fr/contact/">Contact</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ressources</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Mesures I2P</a></li>
                    <li><a href="../../../fr/papers/">Recherche</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Le Projet Internet Invisible. Sous licence Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../fr/privacy/">Confidentialité</a>
                <a href="../../../fr/terms/">Conditions d&#39;utilisation</a>
                <a href="../../../fr/about/media/">Presse</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Fermer">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Sondage de la communauté</h2>
            <p class="modal-subtitle">Nous aimerions avoir de vos nouvelles</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Votre vote aide à façonner l&#39;avenir d&#39;I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
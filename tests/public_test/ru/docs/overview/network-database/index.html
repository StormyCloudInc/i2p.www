<!DOCTYPE html>
<html lang="ru" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Сетевая база данных (netDb) | I2P - Проект невидимого интернета</title>

    <meta name="description" content="Понимание распределённой сетевой базы данных I2P (netDb) - специализированной DHT для контактной информации о router и поиска назначений">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Сетевая база данных (netDb) | I2P - Проект невидимого интернета">
    <meta property="og:description" content="Понимание распределённой сетевой базы данных I2P (netDb) - специализированной DHT для контактной информации о router и поиска назначений">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/ru/docs/overview/network-database/">

    
    <link rel="icon" type="image/svg+xml" href="../../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Бета-сайт I2P теперь доступен Сообщайте о проблемах с E-Mail на stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Закрыть баннер" title="Закрыть баннер">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../../ru/" class="logo-link">
                    <img src="../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../../ru/about/" class="">О проекте</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../ru/about/">Обзор</a></li>
                            <li><a href="../../../../ru/papers/">Научные статьи</a></li>
                            <li><a href="../../../../ru/about/media/">Пресса</a></li>
                            <li><a href="../../../../ru/contact/">Связаться с нами</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../../ru/docs/" class="active">Документы</a></li>
                    <li><a href="../../../../ru/downloads/" class="">Загрузки</a></li>
                    <li><a href="../../../../ru/blog/" class="">Блог</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../../ru/get-involved/" class="">Присоединиться</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../ru/get-involved/">Обзор</a></li>
                            <li><a href="../../../../ru/feedback/">Предложения по функциям</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">ru</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../en/docs/overview/network-database/"
                                class="lang-option">Английский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../es/docs/overview/network-database/"
                                class="lang-option">Испанский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ko/docs/overview/network-database/"
                                class="lang-option">Корейский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../zh/docs/overview/network-database/"
                                class="lang-option">Китайский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ru/docs/overview/network-database/"
                                class="lang-option active">Русский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../cs/docs/overview/network-database/"
                                class="lang-option">Чешский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../de/docs/overview/network-database/"
                                class="lang-option">Немецкий</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../fr/docs/overview/network-database/"
                                class="lang-option">Французский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../tr/docs/overview/network-database/"
                                class="lang-option">Турецкий</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../vi/docs/overview/network-database/"
                                class="lang-option">Вьетнамский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../hi/docs/overview/network-database/"
                                class="lang-option">Хинди</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ar/docs/overview/network-database/"
                                class="lang-option">Арабский</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../pt/docs/overview/network-database/"
                                class="lang-option">Португальский</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../../ru/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../../ru/downloads/" class="btn btn-primary">Загрузить I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        




<div class="docs-page">
    <div class="container">
        
        <div class="docs-layout docs-layout--with-toc">
            
            
            <aside class="docs-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-обзор">1. Обзор</a></li>
    <li><a href="#2-информация-о-router">2. Информация о router</a>
      <ul>
        <li><a href="#21-флаги-возможностей">2.1 Флаги возможностей</a></li>
        <li><a href="#25-параметры-семейства">2.5 Параметры семейства</a></li>
        <li><a href="#26-истечение-срока-действия-routerinfo-информация-о-router">2.6 Истечение срока действия RouterInfo (информация о router)</a></li>
      </ul>
    </li>
    <li><a href="#3-leaseset">3. LeaseSet</a>
      <ul>
        <li><a href="#31-варианты-leaseset">3.1 Варианты LeaseSet</a></li>
      </ul>
    </li>
    <li><a href="#4-инициализация">4. Инициализация</a></li>
    <li><a href="#5-механизм-floodfill">5. Механизм Floodfill</a>
      <ul>
        <li><a href="#51-требования-к-добровольному-участию-в-floodfill">5.1 Требования к добровольному участию в Floodfill</a></li>
        <li><a href="#52-роли-floodfill">5.2 Роли Floodfill</a></li>
      </ul>
    </li>
    <li><a href="#6-метрика-близости-kademlia">6. Метрика близости Kademlia</a>
      <ul>
        <li><a href="#61-ротация-пространства-ключей">6.1 Ротация пространства ключей</a></li>
      </ul>
    </li>
    <li><a href="#7-сегментация-network-database-сетевая-база-данных-i2p">7. Сегментация Network Database (сетевая база данных I2P)</a>
      <ul>
        <li><a href="#71-стратегия-сегментации">7.1 Стратегия сегментации</a></li>
      </ul>
    </li>
    <li><a href="#8-хранение-проверка-и-поиск">8. Хранение, проверка и поиск</a>
      <ul>
        <li><a href="#81-сохранение-routerinfo-информация-о-router-у-пиров">8.1 Сохранение RouterInfo (информация о router) у пиров</a></li>
        <li><a href="#82-хранение-leaseset-у-пиров">8.2 Хранение LeaseSet у пиров</a></li>
        <li><a href="#83-выбор-floodfill">8.3 Выбор Floodfill</a></li>
        <li><a href="#84-сохранение-routerinfo-на-floodfill-узлах">8.4 Сохранение RouterInfo на floodfill-узлах</a></li>
        <li><a href="#85-хранение-leaseset-в-узлах-floodfill">8.5 Хранение LeaseSet в узлах Floodfill</a></li>
        <li><a href="#86-процесс-flooding-массовой-рассылки">8.6 Процесс flooding (массовой рассылки)</a></li>
        <li><a href="#87-поиск-routerinfo-и-leaseset">8.7 Поиск RouterInfo и LeaseSet</a></li>
        <li><a href="#88-итеративные-поиски">8.8 Итеративные поиски</a></li>
        <li><a href="#89-проверка">8.9 Проверка</a></li>
        <li><a href="#810-исследование">8.10 Исследование</a></li>
      </ul>
    </li>
    <li><a href="#9-мультихоминг">9. Мультихоминг</a></li>
    <li><a href="#10-анализ-угроз">10. Анализ угроз</a>
      <ul>
        <li><a href="#101-общие-меры-по-смягчению-рисков">10.1 Общие меры по смягчению рисков</a></li>
        <li><a href="#102-медленные-или-не-отвечающие-routers">10.2 Медленные или не отвечающие routers</a></li>
        <li><a href="#103-атака-сивиллы-полное-пространство-ключей">10.3 Атака Сивиллы (полное пространство ключей)</a></li>
        <li><a href="#104-атака-сивиллы-частичное-пространство-ключей">10.4 Атака Сивиллы (частичное пространство ключей)</a></li>
        <li><a href="#105-атаки-на-инициализацию">10.5 Атаки на инициализацию</a></li>
        <li><a href="#106-перехват-запросов">10.6 Перехват запросов</a></li>
        <li><a href="#107-утечки-информации">10.7 Утечки информации</a></li>
      </ul>
    </li>
    <li><a href="#11-дальнейшая-работа">11. Дальнейшая работа</a></li>
    <li><a href="#12-ссылки">12. Ссылки</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="docs-main">
                
                <nav class="breadcrumbs">
                    <a href="../../../../ru/">Home</a>
                    <span class="separator">/</span>
                    <a href="../../../../ru/docs/">Docs</a>
                    
                        
                            <span class="separator">/</span>
                            <a href="../../../../ru/docs/overview/">Overview</a>
                        
                    
                    <span class="separator">/</span>
                    <span class="current">Сетевая база данных (netDb)</span>
                </nav>

                
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Этот перевод был создан с помощью машинного обучения и может быть не на 100% точным.</span>
    
    
    <a href="../../../../en/docs/overview/network-database/" class="disclaimer-link">Просмотреть английскую версию</a>
    
</div>



                
                <header class="article-header">
                    <h1 class="article-title">Сетевая база данных (netDb)</h1>
                    
                        <p class="article-description">Понимание распределённой сетевой базы данных I2P (netDb) - специализированной DHT для контактной информации о router и поиска назначений</p>
                    
                    <div class="article-meta">
                        
                            <span class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                    <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Updated: 2025-03
                            </span>
                        
                        
                            <span class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Accurate for: 2.10.0
                            </span>
                        
                    </div>
                </header>

                
                <article class="article-content">
                    <hr>
<h2 id="1-обзор">1. Обзор</h2>
<p><strong>netDb</strong> — специализированная распределённая база данных, содержащая всего два типа данных: - <strong>RouterInfos</strong> – контактная информация router - <strong>LeaseSets</strong> – контактная информация назначения</p>
<p>Все данные криптографически подписаны и могут быть проверены. Каждая запись содержит информацию о liveness (о «живости»/доступности), позволяющую отбрасывать устаревшие записи и заменять неактуальные, что обеспечивает защиту от некоторых классов атак.</p>
<p>Распределение использует механизм <strong>floodfill</strong>, при котором подмножество routers поддерживает распределённую базу данных.</p>
<hr>
<h2 id="2-информация-о-router">2. Информация о router</h2>
<p>Когда routers нужно связаться с другими routers, они обмениваются пакетами <strong>RouterInfo</strong>, содержащими:</p>
<ul>
<li><strong>Идентичность router</strong> – ключ шифрования, ключ подписи, сертификат</li>
<li><strong>Контактные адреса</strong> – как связаться с router</li>
<li><strong>Метка времени публикации</strong> – когда эта информация была опубликована</li>
<li><strong>Произвольные текстовые опции</strong> – флаги возможностей и настройки</li>
<li><strong>Криптографическая подпись</strong> – подтверждает подлинность</li>
</ul>
<h3 id="21-флаги-возможностей">2.1 Флаги возможностей</h3>
<p>Routers сообщают о своих возможностях с помощью буквенных кодов в своих RouterInfo:</p>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Flag</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>f</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Floodfill participation</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>R</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Reachable</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>U</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Unreachable</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>D</strong>, <strong>E</strong>, <strong>G</strong>, <strong>H</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Various capability indicators</td>
    </tr>
  </tbody>
</table>
### 2.2 Классификации пропускной способности
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Code</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Bandwidth</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>K</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Under 12 KBps</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>L</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">12–48 KBps (default)</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>M</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">48–64 KBps</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>N</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">64–128 KBps</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>O</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">128–256 KBps</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>P</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">256–2000 KBps</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>X</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Over 2000 KBps</td>
    </tr>
  </tbody>
</table>
### 2.3 Значения идентификатора сети
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Value</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Purpose</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">0</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Reserved</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">1</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Current Network (default)</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">2</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Reserved for Future Networks</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">3–15</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Forks and Test Networks</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">16–254</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Reserved</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">255</td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Reserved</td>
    </tr>
  </tbody>
</table>
### 2.4 Статистика RouterInfo
<p>Routers публикуют необязательную статистику состояния для анализа сети: - Показатели успешности/отклонений/тайм-аутов при построении Exploratory tunnel - Среднее за 1 час число участвующих tunnel</p>
<p>Статистические данные соответствуют формату <code>stat_(statname).(statperiod)</code> со значениями, разделёнными точкой с запятой.</p>
<p><strong>Пример статистики:</strong></p>
<pre tabindex="0"><code>stat_tunnel.buildExploratoryExpire.60m = 0;0;0;53.14
stat_tunnel.buildExploratoryReject.60m = 0;0;0;15.51
stat_tunnel.buildExploratorySuccess.60m = 0;0;0;31.35
stat_tunnel.participatingTunnels.60m = 289.20
</code></pre><p>Floodfill routers также могут публиковать: <code>netdb.knownLeaseSets</code> и <code>netdb.knownRouters</code></p>
<h3 id="25-параметры-семейства">2.5 Параметры семейства</h3>
<p>Начиная с релиза 0.9.24, routers могут объявлять принадлежность к семье (один и тот же оператор):</p>
<ul>
<li><strong>family</strong>: Имя семейства</li>
<li><strong>family.key</strong>: Код типа подписи, конкатенированный с открытым ключом подписи, закодированным в base64</li>
<li><strong>family.sig</strong>: Подпись имени семейства и 32-байтового хеша router</li>
</ul>
<p>Несколько routers из одного семейства не будут использоваться в одном tunnel.</p>
<h3 id="26-истечение-срока-действия-routerinfo-информация-о-router">2.6 Истечение срока действия RouterInfo (информация о router)</h3>
<ul>
<li>Нет истечения в первый час работы</li>
<li>Нет истечения при 25 или меньше сохранённых RouterInfos (записей с информацией о маршрутизаторах)</li>
<li>Срок истечения уменьшается по мере роста локального числа routers (72 часа при &lt;120 routers; ~30 часов при 300 routers)</li>
<li>SSU introducers (вводящие узлы) истекают примерно через ~1 час</li>
<li>Floodfills используют истечение через 1 час для всех локальных RouterInfos</li>
</ul>
<hr>
<h2 id="3-leaseset">3. LeaseSet</h2>
<p><strong>LeaseSets</strong> описывают точки входа в tunnel для конкретных назначений, указывая:</p>
<ul>
<li><strong>Идентичность router шлюза Tunnel</strong></li>
<li><strong>4-байтовый tunnel ID</strong></li>
<li><strong>Время истечения срока действия Tunnel</strong></li>
</ul>
<p>LeaseSets include: - <strong>Destination (адрес назначения)</strong> – ключ шифрования, ключ подписи, сертификат - <strong>Дополнительный открытый ключ шифрования</strong> – для сквозного garlic encryption - <strong>Дополнительный открытый ключ подписи</strong> – предназначен для отзыва (в настоящее время не используется) - <strong>Криптографическая подпись</strong></p>
<h3 id="31-варианты-leaseset">3.1 Варианты LeaseSet</h3>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Type</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>Unpublished</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Destinations used only for outgoing connections aren't published to floodfill routers</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>Revoked</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Published with zero leases, signed by additional signing key (not fully implemented)</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>LeaseSet2 (LS2)</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">As of 0.9.38, supports new encryption types, multiple encryption types, options, offline signing keys ([Proposal 123](/proposals/123-new-netdb-entries/))</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>Meta LeaseSet</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">Tree-like DHT structure for multihomed services, supporting hundreds/thousands of destinations with long expirations (up to 18.2 hours)</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>Encrypted LeaseSet (LS1)</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">All leases encrypted with separate key; only those with the key can decode and contact the destination</td>
    </tr>
    <tr>
      <td style="border:1px solid var(--color-border); padding:0.6rem;"><strong>Encrypted LeaseSet (LS2)</strong></td>
      <td style="border:1px solid var(--color-border); padding:0.6rem;">As of 0.9.38, destination hidden with only blinded public key and expiration visible to floodfill</td>
    </tr>
  </tbody>
</table>
### 3.2 Истечение срока действия LeaseSet
<p>Обычные LeaseSets истекают в момент самого позднего истечения срока действия их lease (lease — запись о сроке действия для конкретного tunnel). Срок действия LeaseSet2 указан в заголовке. Срок действия EncryptedLeaseSet и MetaLeaseSet может различаться; может применяться принудительное ограничение максимального срока.</p>
<hr>
<h2 id="4-инициализация">4. Инициализация</h2>
<p>Децентрализованная netDb требует как минимум одной ссылки на узел для включения в сеть. <strong>Reseeding</strong> (начальная загрузка netDb) загружает файлы RouterInfo (<code>routerInfo-$hash.dat</code>) из каталогов netDb добровольцев. При первом запуске они автоматически загружаются с жестко заданных URL-адресов, выбираемых случайным образом.</p>
<hr>
<h2 id="5-механизм-floodfill">5. Механизм Floodfill</h2>
<p>Система floodfill netDb использует простую распределённую схему хранения: данные отправляются ближайшему узлу floodfill. Когда узлы, не являющиеся floodfill, отправляют данные на сохранение, узлы floodfill пересылают их подмножеству узлов floodfill, ближайших к заданному ключу.</p>
<p>Участие в Floodfill указывается как флаг возможности (<code>f</code>) в RouterInfo.</p>
<h3 id="51-требования-к-добровольному-участию-в-floodfill">5.1 Требования к добровольному участию в Floodfill</h3>
<p>В отличие от жестко заданных доверенных серверов каталогов Tor, множество floodfill в I2P <strong>не является доверенным</strong> и со временем меняется.</p>
<p>Floodfill автоматически включается только на routers с высокой пропускной способностью, соответствующих следующим требованиям: - Минимум 128 KBytes/sec общей пропускной способности (настраивается вручную) - Должны пройти дополнительные тесты работоспособности (время ожидания в очереди исходящих сообщений, задержка задач)</p>
<p>Текущее автоматическое включение приводит примерно к <strong>6% доле узлов сети, участвующих в floodfill</strong>.</p>
<p>Ручные floodfill существуют наряду с автоматическими добровольцами. Когда число floodfill падает ниже порога, routers с высокой пропускной способностью автоматически берут на себя роль floodfill. Когда число floodfill становится слишком большим, они снимают с себя роль floodfill.</p>
<h3 id="52-роли-floodfill">5.2 Роли Floodfill</h3>
<p>Помимо приёма записей в netDb и обработки запросов, floodfills выполняют стандартные функции router. Их более высокая пропускная способность обычно означает участие в большем числе tunnel, но это не связано напрямую со службами базы данных.</p>
<hr>
<h2 id="6-метрика-близости-kademlia">6. Метрика близости Kademlia</h2>
<p>В netDb используется измерение расстояния на основе XOR, <strong>в стиле Kademlia</strong>. Хэш SHA256 от RouterIdentity или Destination формирует ключ Kademlia (за исключением LS2 зашифрованных LeaseSets, которые используют SHA256 от байта типа 3 вместе с ослеплённым открытым ключом).</p>
<h3 id="61-ротация-пространства-ключей">6.1 Ротация пространства ключей</h3>
<p>Чтобы увеличить затраты на Sybil-атаку, вместо использования <code>SHA256(key)</code> система использует:</p>
<pre tabindex="0"><code>SHA256(key + yyyyMMdd)
</code></pre><p>где дата — это 8-байтовая дата UTC в ASCII. Это создаёт <strong>ключ маршрутизации</strong>, который меняется ежедневно в полночь по UTC — что называется <strong>ротацией пространства ключей</strong>.</p>
<p>Ключи маршрутизации никогда не передаются в сообщениях I2NP; они используются только для локального определения расстояния.</p>
<hr>
<h2 id="7-сегментация-network-database-сетевая-база-данных-i2p">7. Сегментация Network Database (сетевая база данных I2P)</h2>
<p>Традиционные DHT Kademlia не обеспечивают unlinkability (несвязываемость) хранимых данных. I2P предотвращает атаки, связывающие клиентские tunnels с routers, реализуя <strong>сегментацию</strong>.</p>
<h3 id="71-стратегия-сегментации">7.1 Стратегия сегментации</h3>
<p>Routers отслеживают: - Пришли ли записи через клиентские tunnels или напрямую - Если через tunnel, то какой клиентский tunnel/destination (адрес назначения в I2P) - Отслеживаются множественные поступления через tunnels - Различаются ответы на операции хранения и на операции поиска</p>
<p>Обе реализации на Java и C++ используют: - <strong>&ldquo;Основная&rdquo; netDb</strong> для прямых запросов/операций floodfill в контексте router - <strong>&ldquo;Клиентские сетевые базы данных&rdquo;</strong> или <strong>&ldquo;Под-базы данных&rdquo;</strong> в клиентских контекстах, собирающие записи, отправляемые в клиентские tunnels</p>
<p>Клиентские netDb существуют только на время жизни клиента и содержат только записи клиентских tunnel. Записи из клиентских tunnel не могут пересекаться с прямыми поступлениями.</p>
<p>Каждый netDb отслеживает, поступили ли записи как store (в ответ на запросы поиска) или как ответы на поиск (отвечают только если ранее были сохранены для того же назначения). Клиенты никогда не отвечают на запросы записями из основного netDb, только записями из клиентского netDb.</p>
<p>Комбинированные стратегии <strong>сегментируют</strong> netDb против атак на установление соответствия между клиентом и router.</p>
<hr>
<h2 id="8-хранение-проверка-и-поиск">8. Хранение, проверка и поиск</h2>
<h3 id="81-сохранение-routerinfo-информация-о-router-у-пиров">8.1 Сохранение RouterInfo (информация о router) у пиров</h3>
<p>I2NP <code>DatabaseStoreMessage</code>, содержащее локальный RouterInfo (информация о маршрутизаторе) для обмена во время инициализации транспортного соединения NTCP или SSU.</p>
<h3 id="82-хранение-leaseset-у-пиров">8.2 Хранение LeaseSet у пиров</h3>
<p>I2NP <code>DatabaseStoreMessage</code>, содержащие локальный LeaseSet, периодически передаются через сообщения, зашифрованные с помощью garlic encryption, в составе трафика Destination (адрес назначения в I2P), что позволяет отвечать без запросов к LeaseSet.</p>
<h3 id="83-выбор-floodfill">8.3 Выбор Floodfill</h3>
<p><code>DatabaseStoreMessage</code> отправляет ближайшему к текущему ключу маршрутизации floodfill. Ближайший floodfill определяется посредством поиска по локальной базе данных. Даже если это фактически не самый близкий, flooding (широковещательная рассылка) распространяет его &ldquo;ближе&rdquo;, отправляя нескольким floodfill.</p>
<p>Традиционная Kademlia использует поиск &ldquo;find-closest&rdquo; (поиск ближайших узлов) перед вставкой. Хотя в I2NP нет таких сообщений, routers могут выполнять итеративный поиск с инверсией младшего значащего бита (<code>key ^ 0x01</code>), чтобы обеспечить обнаружение действительно ближайшего узла.</p>
<h3 id="84-сохранение-routerinfo-на-floodfill-узлах">8.4 Сохранение RouterInfo на floodfill-узлах</h3>
<p>Routers публикуют RouterInfo (информация о router), напрямую подключаясь к floodfill и отправляя I2NP <code>DatabaseStoreMessage</code> с ненулевым Reply Token (токеном ответа). Сообщение не использует сквозное garlic encryption (прямое соединение, без посредников). Floodfill отвечает <code>DeliveryStatusMessage</code>, используя Reply Token в качестве ID сообщения.</p>
<p>Routers также могут отправлять RouterInfo через исследовательский tunnel (ограничения на соединения, несовместимость, сокрытие IP). Floodfills могут отклонять такие операции хранения при перегрузке.</p>
<h3 id="85-хранение-leaseset-в-узлах-floodfill">8.5 Хранение LeaseSet в узлах Floodfill</h3>
<p>Хранение LeaseSet более чувствительно, чем хранение RouterInfo. Routers должны предотвращать привязку LeaseSet к себе.</p>
<p>Routers публикуют LeaseSet, отправляя через исходящий клиентский tunnel <code>DatabaseStoreMessage</code> с ненулевым токеном ответа. Сообщение сквозным образом зашифровано с использованием garlic encryption и менеджера сеансовых ключей Destination (идентификатор назначения в I2P), что скрывает его от конечной точки исходящего tunnel. Floodfill отвечает <code>DeliveryStatusMessage</code>, который возвращается через входящий tunnel.</p>
<h3 id="86-процесс-flooding-массовой-рассылки">8.6 Процесс flooding (массовой рассылки)</h3>
<p>Floodfills (специализированные узлы netdb) проверяют RouterInfo/LeaseSet перед локальным сохранением, используя адаптивные критерии, зависящие от нагрузки, размера netdb и других факторов.</p>
<p>После получения более новых корректных данных floodfills &ldquo;flood&rdquo; их, находя 3 ближайших floodfill routers к ключу маршрутизации. Прямые соединения отправляют I2NP <code>DatabaseStoreMessage</code> с нулевым Reply Token (токен ответа). Другие routers не отвечают и не выполняют повторный flood.</p>
<p><strong>Важные ограничения:</strong> - Floodfills не должны рассылать через tunnels; только прямые соединения - Floodfills никогда не рассылают устаревший LeaseSet или RouterInfo, опубликованные более часа назад</p>
<h3 id="87-поиск-routerinfo-и-leaseset">8.7 Поиск RouterInfo и LeaseSet</h3>
<p>I2NP <code>DatabaseLookupMessage</code> запрашивает записи netdb у floodfill routers. Запросы отправляются через исходящий исследовательский tunnel; в ответах указывается входящий исследовательский tunnel для возврата.</p>
<p>Запросы поиска обычно отправляются к двум &ldquo;хорошим&rdquo; floodfill routers, ближайшим к запрашиваемому ключу, параллельно.</p>
<ul>
<li><strong>Локальное совпадение</strong>: получает ответ I2NP <code>DatabaseStoreMessage</code></li>
<li><strong>Нет локального совпадения</strong>: получает I2NP <code>DatabaseSearchReplyMessage</code> со ссылками на другие floodfill router (узлы индексирования), близкие к ключу</li>
</ul>
<p>Запросы LeaseSet используют сквозное garlic encryption (начиная с 0.9.5). Запросы RouterInfo (описание узла I2P) не шифруются из-за высокой вычислительной стоимости алгоритма Эль-Гамаля, что делает их уязвимыми для перехвата на выходной конечной точке.</p>
<p>Начиная с версии 0.9.7, ответы на запросы поиска включают сеансовый ключ и тег, скрывая ответы от входного шлюза.</p>
<h3 id="88-итеративные-поиски">8.8 Итеративные поиски</h3>
<p>До 0.8.9: два параллельных избыточных поиска без рекурсивной или итеративной маршрутизации.</p>
<p>Начиная с 0.8.9: <strong>Итеративные поиски</strong> реализованы без избыточности — более эффективны, надёжны и лучше подходят для неполного знания о floodfill. По мере роста сетей и уменьшения числа floodfills, известных routers, сложность поисков приближается к O(log n).</p>
<p>Итеративные поиски продолжаются даже при отсутствии ссылок на более близких узлов, что предотвращает злонамеренный black-holing (скрытое «поглощение» запросов без ответов). Действуют текущие значения максимального числа запросов и тайм-аута.</p>
<h3 id="89-проверка">8.9 Проверка</h3>
<p><strong>Проверка RouterInfo (запись с данными узла I2P)</strong>: Отключена начиная с версии 0.9.7.1, чтобы предотвратить атаки, описанные в статье &ldquo;Practical Attacks Against the I2P Network&rdquo;.</p>
<p><strong>Проверка LeaseSet</strong>: Routers ждут ~10 секунд, затем выполняют запрос к другому floodfill (специализированному узлу каталога) через исходящий клиентский tunnel. Сквозное garlic encryption (многосообщенческое шифрование в I2P) скрывает это от исходящей конечной точки. Ответы возвращаются через входящие tunnels.</p>
<p>Начиная с 0.9.7, ответы шифруются с применением сокрытия ключа/тега сеанса от входного шлюза.</p>
<h3 id="810-исследование">8.10 Исследование</h3>
<p><strong>Исследование</strong> включает поиск в netdb по случайным ключам, чтобы обнаруживать новые router. Узлы floodfill отвечают сообщением <code>DatabaseSearchReplyMessage</code>, содержащим хэши router, не являющихся floodfill, близкие к запрошенному ключу. Исследовательские запросы устанавливают специальный флаг в <code>DatabaseLookupMessage</code>.</p>
<hr>
<h2 id="9-мультихоминг">9. Мультихоминг</h2>
<p>Назначения, использующие идентичные закрытые/открытые ключи (традиционный <code>eepPriv.dat</code>), могут одновременно размещаться на нескольких router. Каждый экземпляр периодически публикует подписанные LeaseSets; наиболее недавно опубликованный LeaseSet отдаётся запрашивающим при поиске. При максимальном времени жизни LeaseSet в 10 минут простои длятся не более ~10 минут.</p>
<p>Начиная с 0.9.38, <strong>Meta LeaseSets</strong> поддерживают крупные мультихоминговые сервисы, использующие отдельные Destinations (адреса назначения в I2P), предоставляющие общие сервисы. Записи Meta LeaseSet — это Destinations или другие Meta LeaseSets со сроком действия до 18,2 часа, что позволяет иметь сотни/тысячи Destinations, размещающих общие сервисы.</p>
<hr>
<h2 id="10-анализ-угроз">10. Анализ угроз</h2>
<p>В настоящее время работают примерно 1700 floodfill routers (специализированных узлов для распространения netDb). Рост сети делает большинство атак более сложными или менее эффективными.</p>
<h3 id="101-общие-меры-по-смягчению-рисков">10.1 Общие меры по смягчению рисков</h3>
<ul>
<li><strong>Рост</strong>: Увеличение числа floodfills делает атаки сложнее или менее ощутимыми</li>
<li><strong>Избыточность</strong>: Все записи netdb хранятся на 3 floodfill routers, ближайших к ключу, посредством flooding (массовой рассылки)</li>
<li><strong>Подписи</strong>: Все записи подписаны создателем; их подделка невозможна</li>
</ul>
<h3 id="102-медленные-или-не-отвечающие-routers">10.2 Медленные или не отвечающие routers</h3>
<p>Routers ведут расширенную статистику профилей пиров для floodfills: - Среднее время отклика - Процент отвеченных запросов - Процент успешной проверки сохранения - Последнее успешное сохранение - Последний успешный поиск - Последний ответ</p>
<p>Routers используют эти метрики при оценке «качества» для выбора ближайшего floodfill. Полностью не отвечающие routers быстро выявляются и избегаются; частично вредоносные routers представляют более серьёзную сложность.</p>
<h3 id="103-атака-сивиллы-полное-пространство-ключей">10.3 Атака Сивиллы (полное пространство ключей)</h3>
<p>Злоумышленники могут создать многочисленные floodfill routers, распределённые по всему пространству ключей, в качестве эффективной DoS-атаки.</p>
<p>Если подозрительное поведение недостаточно серьёзно для присвоения статуса &ldquo;bad&rdquo;, возможные меры включают: - Составление списков хэшей router и IP, публикуемых через новости консоли, веб‑сайт, форум - Включение floodfill по всей сети («бороться с Sybil ещё большим количеством Sybil») - Новые версии ПО с жёстко заданными списками &ldquo;bad&rdquo; - Улучшенные метрики профилей пиров и пороги для автоматической идентификации - Квалификация IP‑блоков, запрещающая несколько floodfill в одном IP‑блоке - Автоматический чёрный список по подписке (аналогичный консенсусу Tor)</p>
<p>Более крупные сети делают это сложнее.</p>
<h3 id="104-атака-сивиллы-частичное-пространство-ключей">10.4 Атака Сивиллы (частичное пространство ключей)</h3>
<p>Злоумышленники могут создать 8–15 экземпляров floodfill router, тесно сгруппированных в пространстве ключей. Все операции поиска/сохранения для этого пространства ключей будут направляться к router, контролируемым злоумышленником, что позволяет проводить DoS-атаку на конкретные I2P-сайты.</p>
<p>Поскольку пространство ключей индексирует криптографические хэши SHA256, атакующим требуется перебор, чтобы создать routers, расположенные достаточно близко (в пространстве ключей).</p>
<p><strong>Защита</strong>: Алгоритм близости Kademlia со временем варьируется с использованием <code>SHA256(key + YYYYMMDD)</code>, обновляясь ежедневно в полночь по UTC. Эта <strong>ротация пространства ключей</strong> вынуждает ежедневную регенерацию атаки.</p>
<blockquote>
<p><strong>Примечание</strong>: Недавние исследования показывают, что ротация пространства ключей не особенно эффективна — атакующие могут заранее предвычислить хэши router, и им достаточно нескольких router, чтобы затмить части пространства ключей в течение получаса после ротации.</p></blockquote>
<p>Последствие ежедневной ротации: распределённая netdb становится ненадёжной на несколько минут после ротации — запросы поиска завершаются неудачей до того, как новый ближайший router получит вставки (stores).</p>
<h3 id="105-атаки-на-инициализацию">10.5 Атаки на инициализацию</h3>
<p>Злоумышленники могут перехватить контроль над reseed websites (сайтами начальной загрузки сети) или обманом склонить разработчиков добавить в список враждебные reseed websites, из‑за чего новые router будут запускаться в изолированных или контролируемых большинством сетях.</p>
<p><strong>Реализованные меры защиты:</strong> - Получение подмножеств RouterInfo (запись с информацией о маршрутизаторе) с нескольких reseed-сайтов (сайтов первичной загрузки узлов) вместо одного сайта - Внешний по отношению к сети мониторинг reseed с периодическим опросом сайтов - Начиная с 0.9.14, наборы данных reseed распространяются как подписанные zip-файлы с проверкой загруженной подписи (см. <a href="../../../../ru/docs/specs/updates">спецификацию su3</a>
)</p>
<h3 id="106-перехват-запросов">10.6 Перехват запросов</h3>
<p>Floodfill routers могут «направлять» пиров к контролируемым атакующим routers через возвращаемые ссылки.</p>
<p>Маловероятно через exploration (процедуру исследования пиров) из-за низкой частоты; routers получают ссылки на пиров главным образом в ходе обычного построения tunnel&rsquo;ов.</p>
<p>Начиная с 0.8.9 реализованы итеративные поиски. Ссылки floodfill из <code>DatabaseSearchReplyMessage</code> используются, если они ближе к ключу поиска. Запрашивающие routers не доверяют оценке близости ссылок. Поиски продолжаются, даже при отсутствии более близких ключей, до истечения тайм-аута/достижения максимального числа запросов, что предотвращает злонамеренное black-holing (направление запросов в «черную дыру»).</p>
<h3 id="107-утечки-информации">10.7 Утечки информации</h3>
<p>Утечка информации в DHT (распределённая хеш-таблица) в I2P требует дальнейшего исследования. Floodfill routers наблюдают за запросами, собирая информацию. При доле вредоносных узлов в 20% ранее описанные атаки Sybil (атаки с множественными личностями) становятся проблематичными по нескольким причинам.</p>
<hr>
<h2 id="11-дальнейшая-работа">11. Дальнейшая работа</h2>
<ul>
<li>Сквозное шифрование дополнительных запросов и ответов netDb</li>
<li>Улучшенные методы отслеживания ответов на поисковые запросы</li>
<li>Методы смягчения проблем надежности, связанных с ротацией пространства ключей</li>
</ul>
<hr>
<h2 id="12-ссылки">12. Ссылки</h2>
<ul>
<li><a href="../../../../ru/docs/specs/common-structures/">Спецификация общих структур</a>
 – структуры RouterInfo и LeaseSet</li>
<li><a href="../../../../ru/docs/specs/i2np/">Спецификация I2NP</a>
 – типы сообщений базы данных</li>
<li><a href="../../../../ru/proposals/123-new-netdb-entries">Предложение 123: Новые записи netDb</a>
 – спецификация LeaseSet2</li>
<li><a href="../../../../ru/docs/netdb/">Историческое обсуждение netDb</a>
 – история разработки и архивные обсуждения</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    
                        <a href="../../../../ru/docs/overview/restrictive-countries/" class="page-nav-link prev">
                            <span class="nav-label">← Previous</span>
                            <span class="nav-title">Строгие/Ограничивающие страны</span>
                        </a>
                    
                    
                        <a href="../../../../ru/docs/overview/performance/" class="page-nav-link next">
                            <span class="nav-label">Next →</span>
                            <span class="nav-title">Производительность</span>
                        </a>
                    
                </nav>

                
                <div class="docs-feedback">
                    <p>Was this page helpful?</p>
                    <div class="feedback-buttons" id="feedback-buttons">
                        <button class="feedback-btn" id="feedback-yes">👍 Yes</button>
                        <button class="feedback-btn" id="feedback-no">👎 No</button>
                    </div>

                    
                    <div class="feedback-form-container" id="feedback-form-container" style="display: none;">
                        <p class="feedback-form-title">We're sorry to hear that. How can we improve this page?</p>
                        <form id="feedback-form">
                            <div class="form-group">
                                <label for="feedback-email">Email (optional - if you'd like a response)</label>
                                <input type="email" id="feedback-email" name="email" placeholder="your@email.com">
                            </div>
                            <div class="form-group">
                                <label for="feedback-message">Feedback *</label>
                                <textarea id="feedback-message" name="message" rows="4" required placeholder="Tell us what we can improve..."></textarea>
                            </div>
                            <button type="submit" class="btn-submit-feedback" id="feedback-submit-btn">
                                <span class="btn-text">Submit Feedback</span>
                                <span class="btn-loading" style="display: none;">Sending...</span>
                            </button>
                        </form>
                    </div>

                    
                    <div class="feedback-message" id="feedback-success" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/>
                        </svg>
                        <span id="feedback-success-text">Thanks for your feedback!</span>
                    </div>
                    <div class="feedback-message feedback-error" id="feedback-error" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10" stroke-width="2"/>
                            <path d="M12 8v4M12 16h.01" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span id="feedback-error-text">Something went wrong. Please try again.</span>
                    </div>

                    <p class="feedback-note">
                        Found an issue? <a href="https://gitlab.com/stormycloud-group/i-2-p-www-v-2/-/blob/main/hugo-site/content/ru/docs/overview/network-database.md?ref_type=heads" target="_blank">Edit this page on GitLab</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.docs-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.article-header {
    margin-bottom: var(--spacing-2xl);
}

.article-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--color-text);
}

.article-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-md);
}

.article-meta {
    display: flex;
    gap: var(--spacing-lg);
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.meta-item svg {
    color: var(--color-primary);
}

 
.docs-layout {
    display: block;
}

.docs-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.docs-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.docs-main {
    min-width: 0;
    max-width: 900px;
}

 
.article-content {
    line-height: 1.8;
    color: var(--color-text);
}

.article-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.article-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.article-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.article-content p {
    margin-bottom: var(--spacing-md);
}

.article-content ul,
.article-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.article-content li {
    margin-bottom: var(--spacing-xs);
}

.article-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.article-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
}

.article-content pre code {
    background: none;
    padding: 0;
}

.article-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

.article-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.article-content a:hover {
    border-bottom-color: var(--color-primary);
}

 
.page-nav {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
}

.page-nav-link {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
}

.page-nav-link.next {
    text-align: right;
}

.nav-label {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-xs);
}

.nav-title {
    font-weight: 600;
    color: var(--color-text);
}

 
.docs-feedback {
    margin-top: var(--spacing-2xl);
    padding: var(--spacing-lg);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-md);
    text-align: center;
}

.feedback-buttons {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
    margin: var(--spacing-md) 0;
}

.feedback-btn {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.feedback-btn:hover {
    border-color: var(--color-primary);
    background: var(--color-primary);
    color: white;
}

.feedback-note {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-top: var(--spacing-md);
}

.feedback-note a {
    color: var(--color-primary);
    text-decoration: none;
}

.feedback-note a:hover {
    text-decoration: underline;
}

 
.feedback-form-container {
    margin-top: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    text-align: left;
}

.feedback-form-title {
    font-weight: 600;
    margin-bottom: var(--spacing-md);
    color: var(--color-text);
}

.form-group {
    margin-bottom: var(--spacing-md);
}

.form-group label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
    color: var(--color-text);
}

.form-group input[type="email"],
.form-group textarea {
    width: 100%;
    padding: var(--spacing-sm);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background: var(--color-bg);
    color: var(--color-text);
    font-family: inherit;
    font-size: 0.9375rem;
    transition: border-color var(--transition-fast);
}

.form-group input[type="email"]:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary);
}

.form-group textarea {
    resize: vertical;
    min-height: 100px;
}

.btn-submit-feedback {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-submit-feedback:hover:not(:disabled) {
    background: var(--color-primary-dark);
    transform: translateY(-1px);
}

.btn-submit-feedback:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

 
.feedback-message {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: #d1fae5;
    color: #065f46;
    border-radius: var(--radius-md);
    margin-top: var(--spacing-md);
}

.feedback-message.feedback-error {
    background: #fee2e2;
    color: #991b1b;
}

.feedback-message svg {
    flex-shrink: 0;
}

 
@media (max-width: 1024px) {
    .docs-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .docs-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .article-title {
        font-size: 1.75rem;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



<script>
(function() {
    'use strict';
    
    
    let baseUrl = window.feedbackBaseUrl;
    if (!baseUrl) {
        const hostname = window.location.hostname;
        
        if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
            baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
        } else if (hostname.endsWith('.onion')) {
            baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
        } else {
            baseUrl = 'https://feedback.i2p.net';
        }
    }
    
    const script = document.createElement('script');
    script.src = baseUrl + '/widgets/docs-feedback.js';
    script.async = true;
    script.onerror = function() {
        console.error('[Docs Feedback] Failed to load docs-feedback.js from:', baseUrl);
    };
    document.body.appendChild(script);
})();
</script>


    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Следите за новостями I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Введите ваш email" required>
                            <button type="submit">Подписаться</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Быстрые ссылки</h3>
                <ul>
                    <li><a href="../../../../ru/financial-support/">Пожертвовать</a></li>
                    <li><a href="../../../../ru/docs/overview/intro/">Введение в I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Сообщество</h3>
                <ul>
                    <li><a href="../../../../ru/get-involved/">Присоединяйтесь</a></li>
                    <li><a href="../../../../ru/blog/">Блог</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Официальные форумы</a></li>
                    <li><a href="../../../../ru/contact/">Контакты</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Ресурсы</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">I2P Метрики</a></li>
                    <li><a href="../../../../ru/papers/">Исследование</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Проект Невидимый Интернет. Лицензировано под Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../../ru/privacy/">Конфиденциальность</a>
                <a href="../../../../ru/terms/">Условия</a>
                <a href="../../../../ru/about/media/">Пресса</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Закрыть">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Опрос сообщества</h2>
            <p class="modal-subtitle">Мы хотели бы услышать ваше мнение</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Ваш голос помогает формировать будущее I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
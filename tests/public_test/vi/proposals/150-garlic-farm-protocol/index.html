<!DOCTYPE html>
<html lang="vi" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Giao Thức Garlic Farm | I2P - Dự án Internet vô hình</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Giao Thức Garlic Farm | I2P - Dự án Internet vô hình">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/vi/proposals/150-garlic-farm-protocol/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Trang I2P Beta Đã Hoạt Động Gửi báo cáo lỗi tới stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Đóng banner" title="Đóng banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../vi/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../vi/about/" class="">Giới thiệu</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../vi/about/">Tổng quan</a></li>
                            <li><a href="../../../vi/papers/">Bài Nghiên Cứu</a></li>
                            <li><a href="../../../vi/about/media/">Báo chí</a></li>
                            <li><a href="../../../vi/contact/">Liên hệ</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../vi/docs/" class="">Tài liệu</a></li>
                    <li><a href="../../../vi/downloads/" class="">Tải xuống</a></li>
                    <li><a href="../../../vi/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../vi/get-involved/" class="">Tham gia</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../vi/get-involved/">Tổng quan</a></li>
                            <li><a href="../../../vi/feedback/">Đề xuất Tính năng</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">vi</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Anh</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Tây Ban Nha</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Hàn</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Trung</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Nga</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Séc</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Đức</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Pháp</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Thổ Nhĩ Kỳ</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/150-garlic-farm-protocol/"
                                class="lang-option active">Tiếng Việt</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Ả Rập</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/150-garlic-farm-protocol/"
                                class="lang-option">Tiếng Bồ Đào Nha</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../vi/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../vi/downloads/" class="btn btn-primary">Tải I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../vi/">Home</a>
            <span class="separator">/</span>
            <a href="../../../vi/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Giao Thức Garlic Farm</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Bản dịch này được tạo bằng máy học và có thể không chính xác 100%.</span>
    
    
    <a href="../../../en/proposals/150-garlic-farm-protocol/" class="disclaimer-link">Xem phiên bản tiếng Anh</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Giao Thức Garlic Farm</h1>
                <div class="proposal-number">Proposal 150</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-open">
                    Open
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2019-05-02</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2019-05-20</span>
                    </div>
                    

                    

                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#tổng-quan">Tổng Quan</a></li>
    <li><a href="#mục-tiêu">Mục Tiêu</a></li>
    <li><a href="#thiết-kế">Thiết Kế</a></li>
    <li><a href="#đặc-tả">Đặc Tả</a>
      <ul>
        <li><a href="#bắt-tay-và-xác-thực">Bắt Tay và Xác Thực</a></li>
        <li><a href="#loại-tin-nhắn">Loại Tin Nhắn</a></li>
        <li><a href="#thiết-lập">Thiết Lập</a></li>
        <li><a href="#định-nghĩa">Định nghĩa</a></li>
        <li><a href="#yêu-cầu">Yêu cầu</a></li>
        <li><a href="#phản-hồi">Phản hồi</a></li>
      </ul>
    </li>
    <li><a href="#lớp-ứng-dụng">Lớp Ứng Dụng</a>
      <ul>
        <li><a href="#nội-dung-dữ-liệu-ứng-dụng">Nội Dung Dữ Liệu Ứng Dụng</a></li>
      </ul>
    </li>
    <li><a href="#giao-diện-quản-trị">Giao Diện Quản Trị</a></li>
    <li><a href="#giao-diện-router">Giao Diện Router</a></li>
    <li><a href="#lý-do">Lý Do</a></li>
    <li><a href="#ghi-chú-2">Ghi chú</a></li>
    <li><a href="#vấn-đề">Vấn đề</a></li>
    <li><a href="#di-cư">Di cư</a></li>
    <li><a href="#tài-liệu">Tài liệu</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="tổng-quan">Tổng Quan</h2>
<p>Đây là đặc tả cho giao thức dây Garlic Farm,
dựa trên JRaft, mã &ldquo;exts&rdquo; của nó để triển khai qua TCP,
và ứng dụng mẫu &ldquo;dmprinter&rdquo; của nó <a href="https://github.com/datatechnology/jraft">JRAFT</a>
.
JRaft là một triển khai của giao thức Raft <a href="https://ramcloud.stanford.edu/wiki/download/attachments/11370504/raft.pdf">RAFT</a>
.</p>
<p>Chúng tôi không thể tìm thấy bất kỳ triển khai nào có tài liệu về giao thức dây.
Tuy nhiên, triển khai JRaft đủ đơn giản để chúng tôi có thể
kiểm tra mã và sau đó ghi lại giao thức của nó.
Đề xuất này là kết quả của nỗ lực đó.</p>
<p>Đây sẽ là phần backend để điều phối các router xuất bản
những mục trong Meta LeaseSet. Xem đề xuất 123.</p>
<h2 id="mục-tiêu">Mục Tiêu</h2>
<ul>
<li>Kích thước mã nhỏ</li>
<li>Dựa trên triển khai sẵn có</li>
<li>Không sử dụng các đối tượng Java được tuần tự hóa hoặc bất kỳ tính năng hay mã hóa đặc trưng nào của Java</li>
<li>Việc khởi động lại không nằm trong phạm vi. Ít nhất một máy chủ khác được giả định
là được mã hóa cứng hoặc cấu hình ngoài băng tần của giao thức này.</li>
<li>Hỗ trợ cả trường hợp sử dụng ngoài băng tần và trong I2P.</li>
</ul>
<h2 id="thiết-kế">Thiết Kế</h2>
<p>Giao thức Raft không phải là một giao thức cụ thể; nó chỉ định nghĩa một máy trạng thái.
Do đó, chúng tôi ghi lại giao thức cụ thể của JRaft và dựa giao thức của chúng tôi trên đó.
Không có thay đổi nào đối với giao thức JRaft ngoài việc bổ sung
một bắt tay xác thực.</p>
<p>Raft bầu cử một Leader có nhiệm vụ xuất bản một nhật ký.
Nhật ký chứa dữ liệu Cấu hình Raft và dữ liệu Ứng dụng.
Dữ liệu Ứng dụng chứa trạng thái của mỗi Router của Máy chủ và Đích
cho cụm Meta LS2.
Các máy chủ sử dụng thuật toán chung để xác định nhà xuất bản và nội dung
của Meta LS2.
Nhà xuất bản của Meta LS2 không nhất thiết phải là Nhà lãnh đạo Raft.</p>
<h2 id="đặc-tả">Đặc Tả</h2>
<p>Giao thức dây hoạt động trên các socket SSL hoặc socket I2P không SSL.
Socket I2P được proxy thông qua HTTP Proxy.
Không có hỗ trợ cho các socket không SSL trên mạng rõ.</p>
<h3 id="bắt-tay-và-xác-thực">Bắt Tay và Xác Thực</h3>
<p>Không được định nghĩa bởi JRaft.</p>
<p>Mục tiêu:</p>
<ul>
<li>Phương thức xác thực người dùng/mật khẩu</li>
<li>Nhận diện phiên bản</li>
<li>Nhận diện cụm</li>
<li>Có thể mở rộng</li>
<li>Dễ dàng proxy khi sử dụng cho socket I2P</li>
<li>Không phơi bày không cần thiết máy chủ là máy chủ Garlic Farm</li>
<li>Giao thức đơn giản để không cần một triển khai máy chủ web hoàn chỉnh</li>
<li>Tương thích với các tiêu chuẩn phổ biến, để các triển khai có thể sử dụng
thư viện tiêu chuẩn nếu muốn</li>
</ul>
<p>Chúng tôi sẽ sử dụng một bắt tay giống như websocket <a href="https://en.wikipedia.org/wiki/WebSocket">WEBSOCKET</a>
 và xác thực HTTP Digest <a href="https://tools.ietf.org/html/rfc2617">RFC-2617</a>
.
Xác thực cơ bản RFC 2617 KHÔNG được hỗ trợ.
Khi proxy thông qua HTTP proxy, giao tiếp với
proxy như được chỉ định trong <a href="https://tools.ietf.org/html/rfc2616">RFC-2616</a>
.</p>
<h4 id="thông-tin-đăng-nhập">Thông tin đăng nhập</h4>
<p>Việc tên người dùng và mật khẩu dựa trên cụm, hoặc
dựa trên máy chủ, phụ thuộc vào triển khai.</p>
<h4 id="yêu-cầu-http-1">Yêu Cầu HTTP 1</h4>
<p>Người khởi tạo sẽ gửi những điều sau.</p>
<p>Tất cả các dòng đều được kết thúc bằng CRLF như được yêu cầu bởi HTTP.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>GET /GarlicFarm/CLUSTER/VERSION/websocket HTTP/1.1
</span></span><span style="display:flex;"><span>  Host: (ip):(port)
</span></span><span style="display:flex;"><span>  Cache-Control: no-cache
</span></span><span style="display:flex;"><span>  Connection: close
</span></span><span style="display:flex;"><span>  (bất kỳ tiêu đề nào khác bị bỏ qua)
</span></span><span style="display:flex;"><span>  (dòng trống)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  CLUSTER là tên của cụm (mặc định là &#34;farm&#34;)
</span></span><span style="display:flex;"><span>  VERSION là phiên bản của Garlic Farm (hiện tại là &#34;1&#34;)
</span></span></code></pre></div><h4 id="phản-hồi-http-1">Phản Hồi HTTP 1</h4>
<p>Nếu đường dẫn không chính xác, người nhận sẽ gửi một phản hồi &ldquo;HTTP/1.1 404 Not Found&rdquo; tiêu chuẩn,
như trong <a href="https://tools.ietf.org/html/rfc2616">RFC-2616</a>
.</p>
<p>Nếu đường dẫn là chính xác, người nhận sẽ gửi một phản hồi &ldquo;HTTP/1.1 401 Unauthorized&rdquo; tiêu chuẩn,
bao gồm tiêu đề xác thực HTTP digest WWW-Authenticate,
như trong <a href="https://tools.ietf.org/html/rfc2617">RFC-2617</a>
.</p>
<p>Cả hai bên sau đó sẽ đóng socket.</p>
<h4 id="yêu-cầu-http-2">Yêu Cầu HTTP 2</h4>
<p>Người khởi tạo sẽ gửi những điều sau,
như trong <a href="https://tools.ietf.org/html/rfc2617">RFC-2617</a>
 và <a href="https://en.wikipedia.org/wiki/WebSocket">WEBSOCKET</a>
.</p>
<p>Tất cả các dòng đều được kết thúc bằng CRLF như được yêu cầu bởi HTTP.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>GET /GarlicFarm/CLUSTER/VERSION/websocket HTTP/1.1
</span></span><span style="display:flex;"><span>  Host: (ip):(port)
</span></span><span style="display:flex;"><span>  Cache-Control: no-cache
</span></span><span style="display:flex;"><span>  Connection: keep-alive, Upgrade
</span></span><span style="display:flex;"><span>  Upgrade: websocket
</span></span><span style="display:flex;"><span>  (Sec-Websocket-* tiêu đề nếu được proxy)
</span></span><span style="display:flex;"><span>  Authorization: (tiêu đề xác thực HTTP digest như trong RFC 2617)
</span></span><span style="display:flex;"><span>  (bất kỳ tiêu đề nào khác bị bỏ qua)
</span></span><span style="display:flex;"><span>  (dòng trống)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  CLUSTER là tên của cụm (mặc định là &#34;farm&#34;)
</span></span><span style="display:flex;"><span>  VERSION là phiên bản của Garlic Farm (hiện tại là &#34;1&#34;)
</span></span></code></pre></div><h4 id="phản-hồi-http-2">Phản Hồi HTTP 2</h4>
<p>Nếu xác thực không chính xác, người nhận sẽ gửi một phản hồi &ldquo;HTTP/1.1 401 Unauthorized&rdquo; tiêu chuẩn khác,
như trong <a href="https://tools.ietf.org/html/rfc2617">RFC-2617</a>
.</p>
<p>Nếu xác thực là chính xác, người nhận sẽ gửi phản hồi sau,
như trong <a href="https://en.wikipedia.org/wiki/WebSocket">WEBSOCKET</a>
.</p>
<p>Tất cả các dòng đều được kết thúc bằng CRLF như được yêu cầu bởi HTTP.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>HTTP/1.1 101 Switching Protocols
</span></span><span style="display:flex;"><span>  Connection: Upgrade
</span></span><span style="display:flex;"><span>  Upgrade: websocket
</span></span><span style="display:flex;"><span>  (Sec-Websocket-* tiêu đề)
</span></span><span style="display:flex;"><span>  (bất kỳ tiêu đề nào khác bị bỏ qua)
</span></span><span style="display:flex;"><span>  (dòng trống)
</span></span></code></pre></div><p>Sau khi nhận được phản hồi này, socket vẫn mở.
Giao thức Raft như được định nghĩa dưới đây bắt đầu, trên cùng một socket.</p>
<h4 id="bộ-nhớ-đệm">Bộ Nhớ Đệm</h4>
<p>Thông tin đăng nhập sẽ được lưu vào bộ nhớ đệm ít nhất một giờ, để
các kết nối tiếp theo có thể nhảy trực tiếp đến
&ldquo;Yêu Cầu HTTP 2&rdquo; ở trên.</p>
<h3 id="loại-tin-nhắn">Loại Tin Nhắn</h3>
<p>Có hai loại tin nhắn, yêu cầu và phản hồi.
Yêu cầu có thể chứa Nhật ký Đăng nhập, và có kích thước biến đổi;
phản hồi không chứa Nhật ký Đăng nhập, và có kích thước cố định.</p>
<p>Các loại tin nhắn 1-4 là các tin nhắn RPC tiêu chuẩn được định nghĩa bởi Raft.
Đây là giao thức Raft cốt lõi.</p>
<p>Các loại tin nhắn 5-15 là các tin nhắn RPC mở rộng được định nghĩa bởi
JRaft, để hỗ trợ khách hàng, thay đổi máy chủ động, và
đồng bộ hóa nhật ký hiệu quả.</p>
<p>Các loại tin nhắn 16-17 là các tin nhắn RFC Nén Nhật ký được định nghĩa
trong phần 7 của Raft.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Message</th>
          <th style="text-align: left">Số lượng</th>
          <th style="text-align: left">Gửi bởi</th>
          <th style="text-align: left">Gửi tới</th>
          <th style="text-align: left">Ghi chú</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">RequestVoteRequest</td>
          <td style="text-align: left">1</td>
          <td style="text-align: left">Candidate</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">RPC tiêu chuẩn Raft; không được chứa nhật ký đăng nhập</td>
      </tr>
      <tr>
          <td style="text-align: left">RequestVoteResponse</td>
          <td style="text-align: left">2</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Candidate</td>
          <td style="text-align: left">RPC tiêu chuẩn Raft</td>
      </tr>
      <tr>
          <td style="text-align: left">AppendEntriesRequest</td>
          <td style="text-align: left">3</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">RPC tiêu chuẩn Raft</td>
      </tr>
      <tr>
          <td style="text-align: left">AppendEntriesResponse</td>
          <td style="text-align: left">4</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Leader / Client</td>
          <td style="text-align: left">RPC tiêu chuẩn Raft</td>
      </tr>
      <tr>
          <td style="text-align: left">ClientRequest</td>
          <td style="text-align: left">5</td>
          <td style="text-align: left">Client</td>
          <td style="text-align: left">Leader / Follower</td>
          <td style="text-align: left">Phản hồi là AppendEntriesResponse; phải chứa các nhật ký ứng dụng chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">AddServerRequest</td>
          <td style="text-align: left">6</td>
          <td style="text-align: left">Client</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Phải chứa một mục duy nhất của nhật lý ClusterServer chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">AddServerResponse</td>
          <td style="text-align: left">7</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Client</td>
          <td style="text-align: left">Leader cũng sẽ gửi một JoinClusterRequest</td>
      </tr>
      <tr>
          <td style="text-align: left">RemoveServerRequest</td>
          <td style="text-align: left">8</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Phải chứa một mục duy nhất của nhật lý ClusterServer chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">RemoveServerResponse</td>
          <td style="text-align: left">9</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">SyncLogRequest</td>
          <td style="text-align: left">10</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Phải chứa một mục duy nhất của nhật lý LogPack chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">SyncLogResponse</td>
          <td style="text-align: left">11</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">JoinClusterRequest</td>
          <td style="text-align: left">12</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">New Server</td>
          <td style="text-align: left">Lời mời tham gia; phải chứa một mục duy nhất của nhật lý Cấu hình chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">JoinClusterResponse</td>
          <td style="text-align: left">13</td>
          <td style="text-align: left">New Server</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">LeaveClusterRequest</td>
          <td style="text-align: left">14</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Lệnh rời khỏi</td>
      </tr>
      <tr>
          <td style="text-align: left">LeaveClusterResponse</td>
          <td style="text-align: left">15</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left"></td>
      </tr>
      <tr>
          <td style="text-align: left">InstallSnapshotRequest</td>
          <td style="text-align: left">16</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Phần 7 Raft; Phải chứa một mục duy nhất của yêu cầu đồng bộ hóa Snapshotsync chỉ</td>
      </tr>
      <tr>
          <td style="text-align: left">InstallSnapshotResponse</td>
          <td style="text-align: left">17</td>
          <td style="text-align: left">Follower</td>
          <td style="text-align: left">Leader</td>
          <td style="text-align: left">Phần 7 Raft</td>
      </tr>
  </tbody>
</table>
<h3 id="thiết-lập">Thiết Lập</h3>
<p>Sau bắt tay qua HTTP, chuỗi thiết lập như sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Máy chủ mới Alice              Người theo Bob ngẫu nhiên
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ClientRequest   -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   AppendEntriesResponse
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Nếu Bob nói rằng ông ấy là nhà lãnh đạo, tiếp tục như sau.
</span></span><span style="display:flex;"><span>  Nếu không, Alice phải ngắt kết nối khỏi Bob và kết nối với nhà lãnh đạo.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Máy chủ mới Alice              Nhà lãnh đạo Charlie
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ClientRequest   -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   AppendEntriesResponse
</span></span><span style="display:flex;"><span>  AddServerRequest   -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   AddServerResponse
</span></span><span style="display:flex;"><span>          &lt;---------   JoinClusterRequest
</span></span><span style="display:flex;"><span>  JoinClusterResponse  -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   SyncLogRequest
</span></span><span style="display:flex;"><span>                       HOẶC InstallSnapshotRequest
</span></span><span style="display:flex;"><span>  SyncLogResponse  -------&gt;
</span></span><span style="display:flex;"><span>  HOẶC InstallSnapshotResponse
</span></span></code></pre></div><p>Chuỗi Ngắt Kết Nối:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Người theo dõi Alice              Nhà lãnh đạo Charlie
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RemoveServerRequest   -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   RemoveServerResponse
</span></span><span style="display:flex;"><span>          &lt;---------   LeaveClusterRequest
</span></span><span style="display:flex;"><span>  LeaveClusterResponse  -------&gt;
</span></span></code></pre></div><p>Chuỗi Bầu cử:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Người ứng cử Alice               Người theo dõi Bob
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  RequestVoteRequest   -------&gt;
</span></span><span style="display:flex;"><span>          &lt;---------   RequestVoteResponse
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  nếu Alice thắng cử:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Nhà lãnh đạo Alice                Người theo dõi Bob
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  AppendEntriesRequest   -------&gt;
</span></span><span style="display:flex;"><span>  (nhịp tim)
</span></span><span style="display:flex;"><span>          &lt;---------   AppendEntriesResponse
</span></span></code></pre></div><h3 id="định-nghĩa">Định nghĩa</h3>
<ul>
<li>Nguồn: Xác định nguồn của thông điệp</li>
<li>Đích: Xác định người nhận thông điệp</li>
<li>Thuật ngữ: Xem Raft. Khởi đầu từ 0, tăng dần</li>
<li>Chỉ số: Xem Raft. Khởi đầu từ 0, tăng dần</li>
</ul>
<h3 id="yêu-cầu">Yêu cầu</h3>
<p>Yêu cầu chứa tiêu đề và không hoặc nhiều nhật ký đăng nhập.
Yêu cầu chứa một tiêu đề có kích thước cố định và Nhật ký Đăng nhập Tùy chọn có kích thước thay đổi.</p>
<h4 id="tiêu-đề-yêu-cầu">Tiêu đề Yêu cầu</h4>
<p>Tiêu đề yêu cầu là 45 byte, như sau.
Tất cả các giá trị đều là big-endian không dấu.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Loại tin nhắn:  1 byte
  Nguồn:          ID, số nguyên 4 byte
  Đích:           ID, số nguyên 4 byte
  Thuật ngữ:      Thuật ngữ hiện tại (xem ghi chú), số nguyên 8 byte
  Thuật ngữ nhật lý: 8 byte integer
  Chỉ số nhật lý cuối cùng:    8 byte integer
  Chỉ số cam kết:      8 byte integer
  Kích thước nhật lý:  Tổng kích thước tính bằng byte, số nguyên 4 byte
  Nhật lý:       xem bên dưới, tổng chiều dài như đã chỉ định
</code></pre><h4 id="ghi-chú">Ghi chú</h4>
<p>Trong RequestVoteRequest, Thuật ngữ là thuật ngữ của ứng cử viên.
Nếu không, nó là thuật ngữ hiện tại của nhà lãnh đạo.</p>
<p>Trong AppendEntriesRequest, khi kích thước nhật lý là số không,
tin nhắn này là tin nhắn duy trì kết nối (keepalive).</p>
<h4 id="nhật-ký-đăng-nhập">Nhật ký Đăng nhập</h4>
<p>Nhật lý chứa không hay nhiều mục nhật lý.
Mỗi mục nhật lý như sau.
Tất cả các giá trị đều là big-endian không dấu.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Thuật ngữ:  8 byte integer
  Loại giá trị:  1 byte
  Kích thước mục:    Tính bằng byte, số nguyên 4 byte
  Mục:          chiều dài như đã chỉ định
</code></pre><h4 id="nội-dung-nhật-lý">Nội Dung Nhật lý</h4>
<p>Tất cả các giá trị đều là big-endian không dấu.</p>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Loại Giá Trị Nhật lý</th>
          <th style="text-align: left">Số</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">Ứng dụng</td>
          <td style="text-align: left">1</td>
      </tr>
      <tr>
          <td style="text-align: left">Cấu hình</td>
          <td style="text-align: left">2</td>
      </tr>
      <tr>
          <td style="text-align: left">Máy chủ Cluster</td>
          <td style="text-align: left">3</td>
      </tr>
      <tr>
          <td style="text-align: left">Gói Nhật ký</td>
          <td style="text-align: left">4</td>
      </tr>
      <tr>
          <td style="text-align: left">Yêu cầu Đồng bộ hóa Snapshot</td>
          <td style="text-align: left">5</td>
      </tr>
  </tbody>
</table>
<h4 id="ứng-dụng">Ứng dụng</h4>
<p>Nội dung ứng dụng được mã hóa chuỗi <a href="https://json.org/">JSON</a>
 UTF-8.
Xem phần Lớp Ứng dụng bên dưới.</p>
<h4 id="cấu-hình">Cấu hình</h4>
<p>Điều này được sử dụng để nhà lãnh đạo tuần tự hóa một cấu hình cụm mới và sao chép tới các đối tác.
Nó chứa không hoặc nhiều cấu hình Máy chủ Cluster.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Chỉ số Nhật ký:  8 byte integer
  Chỉ số Nhật ký Cuối cùng:  8 byte integer
  Dữ liệu Máy chủ Cluster cho mỗi máy chủ:
    ID:                số nguyên 4 byte
    Độ dài dữ liệu điểm cuối: Tính bằng byte, số nguyên 4 byte
    Dữ liệu điểm cuối: Chuỗi ASCII theo định dạng &#34;tcp://localhost:9001&#34;, chiều dài như đã chỉ định
</code></pre><h4 id="máy-chủ-cluster">Máy chủ Cluster</h4>
<p>Thông tin cấu hình cho một máy chủ trong một cụm.
Điều này chỉ được bao gồm trong một thông điệp AddServerRequest hoặc RemoveServerRequest.</p>
<p>Khi được sử dụng trong một Thông điệp AddServerRequest:</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">ID:                số nguyên 4 byte
  Độ dài dữ liệu điểm cuối: Tính bằng byte, số nguyên 4 byte
  Dữ liệu điểm cuối: Chuỗi ASCII theo định dạng &#34;tcp://localhost:9001&#34;, chiều dài như đã chỉ định
</code></pre><p>Khi được sử dụng trong một Thông điệp RemoveServerRequest:</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">ID:                số nguyên 4 byte
</code></pre><h4 id="gói-nhật-ký">Gói Nhật ký</h4>
<p>Điều này chỉ được bao gồm trong một thông điệp SyncLogRequest.</p>
<p>Thông tin sau đây được nén trước khi truyền:</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Độ dài dữ liệu chỉ số: Tính bằng byte, số nguyên 4 byte
  Độ dài dữ liệu nhật ký:   Tính bằng byte, số nguyên 4 byte
  Dữ liệu chỉ số:     8 byte cho mỗi chỉ số, chiều dài như đã chỉ định
  Dữ liệu nhật ký:       chiều dài như đã chỉ định
</code></pre><h4 id="yêu-cầu-đồng-bộ-hóa-snapshot">Yêu cầu Đồng bộ hóa Snapshot</h4>
<p>Điều này chỉ được bao gồm trong một thông điệp InstallSnapshotRequest.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Chỉ số Nhật ký Cuối cùng:  8 byte integer
  Thuật ngữ Nhật ký Cuối cùng:   8 byte integer
  Độ dài dữ liệu Cấu hình: Tính bằng byte, số nguyên 4 byte
  Dữ liệu Cấu hình:     chiều dài như đã chỉ định
  Bù đắp:          Bù đắp của dữ liệu trong cơ sở dữ liệu, tính bằng byte, số nguyên 8 byte
  Độ dài Dữ liệu:        Tính bằng byte, số nguyên 4 byte
  Dữ liệu:            chiều dài như đã chỉ định
  Hoàn Tất:         1 nếu hoàn tất, 0 nếu chưa hoàn tất (1 byte)
</code></pre><h3 id="phản-hồi">Phản hồi</h3>
<p>Tất cả các phản hồi đều dài 26 byte, như sau.
Tất cả các giá trị đều là big-endian không dấu.</p>
<pre tabindex="0"><code class="language-dataspec" data-lang="dataspec">Loại tin nhắn:   1 byte
  Nguồn:         ID, số nguyên 4 byte
  Đích:          Thông thường là ID đích thực (xem ghi chú), số nguyên 4 byte
  Thuật ngữ:     Thuật ngữ hiện tại, số nguyên 8 byte
  Chỉ số Tiếp theo:     Khởi đầu từ chỉ số nhật ký cuối cùng của nhà lãnh đạo + 1, số nguyên 8 byte
  Được chấp nhận:    1 nếu được chấp nhận, 0 nếu không được chấp nhận (xem ghi chú), 1 byte
</code></pre><h4 id="ghi-chú-1">Ghi chú</h4>
<p>ID Đích thông thường là đích thực sự cho tin nhắn này.
Nhưng, với AppendEntriesResponse, AddServerResponse, và RemoveServerResponse,
đó là ID của nhà lãnh đạo hiện tại.</p>
<p>Trong RequestVoteResponse, Được chấp nhận là 1 cho một phiếu cho ứng cử viên (người yêu cầu),
và 0 cho không phiếu.</p>
<h2 id="lớp-ứng-dụng">Lớp Ứng Dụng</h2>
<p>Mỗi Máy chủ định kỳ đăng dữ liệu Ứng dụng vào nhật ký trong một ClientRequest.
Dữ liệu Ứng dụng chứa trạng thái của mỗi Router của Máy chủ và Đích
cho cụm Meta LS2.
Các máy chủ sử dụng một thuật toán chung để xác định nhà xuất bản và nội dung
của Meta LS2.
Máy chủ có trạng thái gần đây &ldquo;tốt nhất&rdquo; trong nhật ký là nhà xuất bản Meta LS2.
Nhà xuất bản của Meta LS2 không nhất thiết phải là Nhà lãnh đạo Raft.</p>
<h3 id="nội-dung-dữ-liệu-ứng-dụng">Nội Dung Dữ Liệu Ứng Dụng</h3>
<p>Nội dung ứng dụng được mã hóa chuỗi <a href="https://json.org/">JSON</a>
 UTF-8,
cho sự đơn giản và khả năng mở rộng.
Đặc tả đầy đủ chưa được xác định.
Mục tiêu là cung cấp đủ dữ liệu để viết một thuật toán để xác định router &ldquo;tốt nhất&rdquo;
để xuất bản Meta LS2, và cho nhà xuất bản có đủ thông tin
để đánh giá Đích trong Meta LS2.
Dữ liệu sẽ chứa cả thống kê của router và Đích.</p>
<p>Dữ liệu có thể tùy chọn chứa dữ liệu cảm biến từ xa về sức khỏe của
các máy chủ khác, và khả năng tải Meta LS.
Những dữ liệu này sẽ không được hỗ trợ trong lần phát hành đầu tiên.</p>
<p>Dữ liệu có thể tùy chọn chứa thông tin cấu hình được đăng
bởi một máy khách quản trị.
Những dữ liệu này sẽ không được hỗ trợ trong lần phát hành đầu tiên.</p>
<p>Nếu &ldquo;tên: giá trị&rdquo; được liệt kê, điều đó chỉ định khóa và giá trị của bản đồ JSON.
Nếu không, đặc tả chưa được xác định.</p>
<p>Dữ liệu cụm (cấp cao nhất):</p>
<ul>
<li>cluster: Tên cụm</li>
<li>date: Ngày của dữ liệu này (đơn vị thời gian dài, ms kể từ epoch)</li>
<li>id: ID Raft (số nguyên)</li>
</ul>
<p>Dữ liệu cấu hình (config):</p>
<ul>
<li>Các tham số cấu hình bất kỳ</li>
</ul>
<p>Trạng thái xuất bản MetaLS (meta):</p>
<ul>
<li>destination: điểm đến của metals, base64</li>
<li>lastPublishedLS: nếu có mặt, mã hóa base64 của metals đã xuất bản cuối cùng</li>
<li>lastPublishedTime: tính bằng ms, hoặc 0 nếu chưa từng</li>
<li>publishConfig: Trạng thái cấu hình xuất bản tắt/bật/tự động</li>
<li>publishing: trạng thái nhà xuất bản metals boolean true/false</li>
</ul>
<p>Dữ liệu Router (router):</p>
<ul>
<li>lastPublishedRI: nếu có mặt, mã hóa base64 của thông tin router đã xuất bản cuối cùng</li>
<li>uptime: Thời gian hoạt động tính bằng ms</li>
<li>Công việc chậm trễ</li>
<li>Đường hầm khám phá</li>
<li>Đường hầm tham gia</li>
<li>Băng thông đã cấu hình</li>
<li>Băng thông hiện tại</li>
</ul>
<p>Đích (destinations):
Danh sách</p>
<p>Dữ liệu đích:</p>
<ul>
<li>destination: đích, base64</li>
<li>uptime: Thời gian hoạt động tính bằng ms</li>
<li>Đường hầm đã cấu hình</li>
<li>Đường hầm hiện tại</li>
<li>Băng thông đã cấu hình</li>
<li>Băng thông hiện tại</li>
<li>Kết nối đã cấu hình</li>
<li>Kết nối hiện tại</li>
<li>Dữ liệu danh sách đen</li>
</ul>
<p>Dữ liệu cảm nhận router từ xa:</p>
<ul>
<li>Phiên bản RI cuối cùng đã thấy</li>
<li>Thời gian tải LS</li>
<li>Dữ liệu kiểm tra kết nối</li>
<li>Dữ liệu hồ sơ floodfill gần nhất
cho các khoảng thời gian ngày hôm qua, hôm nay, và ngày mai</li>
</ul>
<p>Dữ liệu cảm nhận đích từ xa:</p>
<ul>
<li>Phiên bản LS cuối cùng đã thấy</li>
<li>Thời gian tải LS</li>
<li>Dữ liệu kiểm tra kết nối</li>
<li>Dữ liệu hồ sơ floodfill gần nhất
cho các khoảng thời gian ngày hôm qua, hôm nay, và ngày mai</li>
</ul>
<p>Dữ liệu cảm nhận Meta LS:</p>
<ul>
<li>Phiên bản cuối cùng đã thấy</li>
<li>Thời gian tải</li>
<li>Dữ liệu hồ sơ floodfill gần nhất
cho các khoảng thời gian ngày hôm qua, hôm nay, và ngày mai</li>
</ul>
<h2 id="giao-diện-quản-trị">Giao Diện Quản Trị</h2>
<p>TBD, có thể là một đề xuất riêng.
Không yêu cầu cho lần phát hành đầu tiên.</p>
<p>Yêu cầu của một giao diện quản trị:</p>
<ul>
<li>Hỗ trợ cho nhiều điểm đến chính, tỷ dụ nhiều cụm ảo (trang trại)</li>
<li>Cung cấp cái nhìn toàn diện về trạng thái cụm được chia sẻ - tất cả thống kê do các thành viên công bố, ai là nhà lãnh đạo hiện tại, vv.</li>
<li>Khả năng buộc loại bỏ một người tham gia hoặc lãnh đạo từ cụm</li>
<li>Khả năng buộc xuất bản metaLS (nếu node hiện tại là nhà xuất bản)</li>
<li>Khả năng loại trừ các băm khỏi metaLS (nếu node hiện tại là nhà xuất bản)</li>
<li>Chức năng nhập/xuất cấu hình cho việc triển khai hàng loạt</li>
</ul>
<h2 id="giao-diện-router">Giao Diện Router</h2>
<p>TBD, có thể là một đề xuất riêng.
i2pcontrol không yêu cầu cho lần phát hành đầu tiên và những thay đổi chi tiết sẽ bao gồm trong một đề xuất riêng.</p>
<p>Yêu cầu cho Garlic Farm tới API router (in-JVM java hoặc i2pcontrol)</p>
<ul>
<li>getLocalRouterStatus()</li>
<li>getLocalLeafHash(Hash masterHash)</li>
<li>getLocalLeafStatus(Hash leaf)</li>
<li>getRemoteMeasuredStatus(Hash masterOrLeaf) // probably not in MVP</li>
<li>publishMetaLS(Hash masterHash, List<MetaLease> contents) // or signed MetaLeaseSet? Who signs?</li>
<li>stopPublishingMetaLS(Hash masterHash)</li>
<li>authentication TBD?</li>
</ul>
<h2 id="lý-do">Lý Do</h2>
<p>Atomix quá lớn và không cho phép tùy chỉnh cho chúng tôi để định tuyến
giao thức qua I2P. Ngoài ra, định dạng dây của nó chưa được tài liệu hóa, và phụ thuộc
vào tuần tự hóa Java.</p>
<h2 id="ghi-chú-2">Ghi chú</h2>
<h2 id="vấn-đề">Vấn đề</h2>
<ul>
<li>Không có cách nào cho một khách hàng để tìm ra và kết nối với một nhà lãnh đạo không xác định.
Đây sẽ là một thay đổi nhỏ để một Follower gửi Cấu hình như một Nhật lý trong AppendEntriesResponse.</li>
</ul>
<h2 id="di-cư">Di cư</h2>
<p>Không có vấn đề tương thích ngược.</p>
<h2 id="tài-liệu">Tài liệu</h2>
<ul>
<li><a href="https://github.com/datatechnology/jraft">JRAFT</a>
</li>
<li><a href="https://json.org/">JSON</a>
</li>
<li><a href="https://ramcloud.stanford.edu/wiki/download/attachments/11370504/raft.pdf">RAFT</a>
</li>
<li><a href="https://tools.ietf.org/html/rfc2616">RFC-2616</a>
</li>
<li><a href="https://tools.ietf.org/html/rfc2617">RFC-2617</a>
</li>
<li><a href="https://en.wikipedia.org/wiki/WebSocket">WEBSOCKET</a>
</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../vi/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/150-garlic-farm-protocol.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Cập nhật tin tức I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Nhập email của bạn" required>
                            <button type="submit">Đăng ký</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liên kết nhanh</h3>
                <ul>
                    <li><a href="../../../vi/financial-support/">Quyên góp</a></li>
                    <li><a href="../../../vi/docs/overview/intro/">Giới thiệu I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Cộng đồng</h3>
                <ul>
                    <li><a href="../../../vi/get-involved/">Tham Gia</a></li>
                    <li><a href="../../../vi/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Diễn đàn chính thức</a></li>
                    <li><a href="../../../vi/contact/">Liên hệ</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Tài nguyên</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Thống kê I2P</a></li>
                    <li><a href="../../../vi/papers/">Nghiên cứu</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Dự án Internet Vô hình. Được cấp phép theo Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../vi/privacy/">Quyền riêng tư</a>
                <a href="../../../vi/terms/">Điều khoản</a>
                <a href="../../../vi/about/media/">Báo chí</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Đóng">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Thăm dò ý kiến cộng đồng</h2>
            <p class="modal-subtitle">Chúng tôi rất muốn nghe ý kiến từ bạn</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Phiếu bầu của bạn giúp định hình tương lai của I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
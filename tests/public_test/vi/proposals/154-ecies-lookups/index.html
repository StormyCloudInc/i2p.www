<!DOCTYPE html>
<html lang="vi" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Tra cứu cơ sở dữ liệu từ các đích đến ECIES | I2P - Dự án Internet vô hình</title>

    <meta name="description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Tra cứu cơ sở dữ liệu từ các đích đến ECIES | I2P - Dự án Internet vô hình">
    <meta property="og:description" content="The Invisible Internet Project - A privacy-focused, anonymous network layer">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/vi/proposals/154-ecies-lookups/">

    
    <link rel="icon" type="image/svg+xml" href="../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Trang I2P Beta Đã Hoạt Động Gửi báo cáo lỗi tới stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Đóng banner" title="Đóng banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../vi/" class="logo-link">
                    <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../vi/about/" class="">Giới thiệu</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../vi/about/">Tổng quan</a></li>
                            <li><a href="../../../vi/papers/">Bài Nghiên Cứu</a></li>
                            <li><a href="../../../vi/about/media/">Báo chí</a></li>
                            <li><a href="../../../vi/contact/">Liên hệ</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../vi/docs/" class="">Tài liệu</a></li>
                    <li><a href="../../../vi/downloads/" class="">Tải xuống</a></li>
                    <li><a href="../../../vi/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../vi/get-involved/" class="">Tham gia</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../vi/get-involved/">Tổng quan</a></li>
                            <li><a href="../../../vi/feedback/">Đề xuất Tính năng</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">vi</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../en/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Anh</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../es/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Tây Ban Nha</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ko/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Hàn</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../zh/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Trung</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ru/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Nga</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../cs/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Séc</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../de/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Đức</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../fr/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Pháp</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../tr/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Thổ Nhĩ Kỳ</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../vi/proposals/154-ecies-lookups/"
                                class="lang-option active">Tiếng Việt</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../hi/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../ar/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Ả Rập</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../pt/proposals/154-ecies-lookups/"
                                class="lang-option">Tiếng Bồ Đào Nha</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../vi/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../vi/downloads/" class="btn btn-primary">Tải I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        



<div class="proposals-page">
    <div class="container">
        
        <nav class="breadcrumbs">
            <a href="../../../vi/">Home</a>
            <span class="separator">/</span>
            <a href="../../../vi/proposals/">Proposals</a>
            <span class="separator">/</span>
            <span class="current">Tra cứu cơ sở dữ liệu từ các đích đến ECIES</span>
        </nav>

        
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Bản dịch này được tạo bằng máy học và có thể không chính xác 100%.</span>
    
    
    <a href="../../../en/proposals/154-ecies-lookups/" class="disclaimer-link">Xem phiên bản tiếng Anh</a>
    
</div>



        
        <header class="proposal-header">
            <div class="proposal-title-section">
                <h1 class="proposal-title">Tra cứu cơ sở dữ liệu từ các đích đến ECIES</h1>
                <div class="proposal-number">Proposal 154</div>
            </div>

            
            <div class="proposal-meta-box">
                <div class="proposal-status status-đã đóng">
                    Đã đóng
                </div>

                
                <div class="proposal-info-grid">
                    
                    <div class="info-item">
                        <span class="info-label">Author</span>
                        <span class="info-value">zzz</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Created</span>
                        <span class="info-value">2020-03-23</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Last Updated</span>
                        <span class="info-value">2021-01-08</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Target Version</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    

                    
                    <div class="info-item">
                        <span class="info-label">Implemented In</span>
                        <span class="info-value">0.9.46</span>
                    </div>
                    
                </div>

                
                
            </div>
        </header>

        
        <div class="proposal-layout proposal-layout--with-toc">
            
            
            <aside class="proposal-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#lưu-ý">Lưu ý</a></li>
    <li><a href="#tổng-quan">Tổng quan</a>
      <ul>
        <li><a href="#định-nghĩa">Định nghĩa</a></li>
        <li><a href="#tóm-tắt">Tóm tắt</a></li>
        <li><a href="#mục-tiêu">Mục tiêu</a></li>
        <li><a href="#không-phải-là-mục-tiêu">Không phải là mục tiêu</a></li>
      </ul>
    </li>
    <li><a href="#các-lựa-chọn-thay-thế">Các lựa chọn thay thế</a></li>
    <li><a href="#thiết-kế">Thiết kế</a></li>
    <li><a href="#thông-số-kỹ-thuật">Thông số kỹ thuật</a>
      <ul>
        <li><a href="#elg-đến-elg">ElG đến ElG</a></li>
        <li><a href="#ecies-đến-elg">ECIES đến ElG</a></li>
        <li><a href="#ecies-đến-ecies-0949">ECIES đến ECIES (0.9.49)</a></li>
        <li><a href="#ecies-đến-ecies-tương-lai">ECIES đến ECIES (tương lai)</a></li>
        <li><a href="#định-dạng-phản-hồi">Định dạng phản hồi</a></li>
      </ul>
    </li>
    <li><a href="#lý-do">Lý do</a></li>
    <li><a href="#ghi-chú">Ghi chú</a></li>
    <li><a href="#vấn-đề">Vấn đề</a></li>
    <li><a href="#di-chuyển">Di chuyển</a></li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="proposal-main">
                <article class="proposal-content">
                    <h2 id="lưu-ý">Lưu ý</h2>
<p>ECIES đến ElG đã được triển khai trong 0.9.46 và giai đoạn đề xuất đã khép lại.
Xem <a href="../../../vi/docs/specs/i2np/">I2NP</a>
 để biết thông số kỹ thuật chính thức.
Đề xuất này vẫn có thể được tham khảo để có thông tin nền tảng.
ECIES đến ECIES với các khóa được bao gồm đã được thực hiện kể từ 0.9.48.
Phần ECIES-to-ECIES (khóa dẫn xuất) có thể được mở lại hoặc kết hợp
trong một đề xuất tương lai.</p>
<h2 id="tổng-quan">Tổng quan</h2>
<h3 id="định-nghĩa">Định nghĩa</h3>
<ul>
<li>AEAD: ChaCha20/Poly1305</li>
<li>DLM: Thông báo tra cứu cơ sở dữ liệu I2NP</li>
<li>DSM: Thông báo lưu trữ cơ sở dữ liệu I2NP</li>
<li>DSRM: Thông báo phản hồi tìm kiếm cơ sở dữ liệu I2NP</li>
<li>ECIES: ECIES-X25519-AEAD-Ratchet (đề xuất 144)</li>
<li>ElG: ElGamal</li>
<li>ENCRYPT(k, n, payload, ad): Như đã định nghĩa trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>
</li>
<li>LS: Leaseset</li>
<li>tra cứu: DLM I2NP</li>
<li>phản hồi: DSM hoặc DSRM I2NP</li>
</ul>
<h3 id="tóm-tắt">Tóm tắt</h3>
<p>Khi gửi một DLM cho một LS đến floodfill, DLM thường chỉ định
rằng phản hồi được gắn nhãn, mã hóa AES, và gửi xuống thông qua một đường hầm đến đích.
Hỗ trợ cho việc phản hồi mã hóa AES đã được thêm vào trong 0.9.7.</p>
<p>Phản hồi mã hóa AES đã được chỉ định trong 0.9.7 để giảm thiểu chi phí lớn của mật mã
của ElG, và bởi vì nó tái sử dụng khả năng thẻ/AES
trong ElGamal/AES+SessionTags.
Tuy nhiên, phản hồi AES có thể bị sửa đổi tại IBEP vì không có xác thực,
và phản hồi không có bảo mật chuyển tiếp.</p>
<p>Với các đích đến <a href="../../../vi/docs/specs/ecies/">ECIES</a>
, ý định của đề xuất 144 là
các đích không còn hỗ trợ các thẻ 32 byte và giải mã AES.
Các chi tiết đã được cố ý không bao gồm trong đề xuất đó.</p>
<p>Đề xuất này tài liệu hóa một tùy chọn mới trong DLM để yêu cầu các phản hồi mã hóa ECIES.</p>
<h3 id="mục-tiêu">Mục tiêu</h3>
<ul>
<li>Các cờ mới cho DLM khi một phản hồi mã hóa được yêu cầu thông qua một đường hầm đến một đích ECIES</li>
<li>Đối với phản hồi, thêm bảo mật chuyển tiếp và xác thực người gửi chống lại
việc chiếm đoạt khóa của người yêu cầu (đích đến).</li>
<li>Duy trì ẩn danh của người yêu cầu</li>
<li>Giảm thiểu chi phí lớn của mật mã</li>
</ul>
<h3 id="không-phải-là-mục-tiêu">Không phải là mục tiêu</h3>
<ul>
<li>Không có thay đổi nào đối với mã hóa hoặc tính năng bảo mật của tra cứu (DLM).
Tra cứu chỉ có bảo mật chuyển tiếp cho việc chiếm đoạt khóa của người yêu cầu.
Mã hóa là cho khóa tĩnh của floodfill.</li>
<li>Không có vấn đề bảo mật chuyển tiếp hoặc xác thực người gửi chống lại
việc chiếm đoạt khóa của người phản hồi (floodfill).
Floodfill là một cơ sở dữ liệu công cộng và sẽ phản hồi tra cứu từ bất kỳ ai.</li>
<li>Không thiết kế các bộ định tuyến ECIES trong đề xuất này.
Nơi mà khóa công cộng X25519 của một bộ định tuyến đi là TBD.</li>
</ul>
<h2 id="các-lựa-chọn-thay-thế">Các lựa chọn thay thế</h2>
<p>Trong trường hợp không có cách đã định nào để mã hóa các phản hồi đến các đích ECIES, có
một số lựa chọn thay thế:</p>
<ol>
<li>
<p>Không yêu cầu phản hồi mã hóa. Phản hồi sẽ không mã hóa.
Java I2P hiện sử dụng cách tiếp cận này.</p>
</li>
<li>
<p>Thêm hỗ trợ cho thẻ 32 byte và các phản hồi mã hóa AES đến các đích chỉ ECIES,
và yêu cầu phản hồi mã hóa AES như thường lệ. i2pd hiện sử dụng cách tiếp cận này.</p>
</li>
<li>
<p>Yêu cầu phản hồi mã hóa AES như thường lệ, nhưng định tuyến lại thông qua
các đường hầm thăm dò đến bộ định tuyến.
Java I2P hiện sử dụng cách tiếp cận này trong một số trường hợp.</p>
</li>
<li>
<p>Đối với các đích đến kép ElG và ECIES,
yêu cầu phản hồi mã hóa AES như thường lệ. Java I2P hiện sử dụng cách tiếp cận này.
i2pd chưa thực hiện các đích đến mã hóa kép.</p>
</li>
</ol>
<h2 id="thiết-kế">Thiết kế</h2>
<ul>
<li>
<p>Định dạng DLM mới sẽ thêm một bit vào trường cờ để chỉ định phản hồi mã hóa ECIES.
Các phản hồi mã hóa ECIES sẽ sử dụng định dạng thông điệp Phiên hiện có <a href="../../../vi/docs/specs/ecies/">ECIES</a>
,
với một thẻ đi kèm và một payload và MAC ChaCha/Poly.</p>
</li>
<li>
<p>Định nghĩa hai biến thể. Một dành cho các bộ định tuyến ElG, nơi mà một thao tác DH không thể thực hiện,
và một cho các bộ định tuyến ECIES trong tương lai, nơi mà một thao tác DH có thể thực hiện và có thể cung cấp
thêm bảo mật. Cần nghiên cứu thêm.</p>
</li>
</ul>
<p>Thao tác DH không thể thực hiện được cho các phản hồi từ các bộ định tuyến ElG vì chúng không công bố
một khóa công khai X25519.</p>
<h2 id="thông-số-kỹ-thuật">Thông số kỹ thuật</h2>
<p>Trong thông số kỹ thuật DLM (DatabaseLookup) <a href="../../../vi/docs/specs/i2np/">I2NP</a>
, thực hiện các thay đổi sau đây.</p>
<p>Thêm bit 4 &ldquo;ECIESFlag&rdquo; cho các tùy chọn mã hóa mới.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>flags ::
</span></span><span style="display:flex;"><span>       bit 4: ECIESFlag
</span></span><span style="display:flex;"><span>               trước bản phát hành 0.9.46 bị bỏ qua
</span></span><span style="display:flex;"><span>               kể từ bản phát hành 0.9.46:
</span></span><span style="display:flex;"><span>               0  =&gt; gửi phản hồi không mã hóa hoặc ElGamal
</span></span><span style="display:flex;"><span>               1  =&gt; gửi phản hồi mã hóa ChaCha/Poly sử dụng khóa kèm theo
</span></span><span style="display:flex;"><span>                     (thẻ có được đính kèm hay không phụ thuộc vào bit 1)
</span></span></code></pre></div><p>Bit cờ 4 được sử dụng kết hợp với bit 1 để xác định chế độ mã hóa phản hồi.
Bit cờ 4 chỉ nên được thiết lập khi gửi đến các bộ định tuyến phiên bản 0.9.46 hoặc cao hơn.</p>
<p>Trong bảng dưới,
&ldquo;DH n/a&rdquo; nghĩa là phản hồi không được mã hóa.
&ldquo;DH không&rdquo; nghĩa là các khóa phản hồi được bao gồm trong yêu cầu.
&ldquo;DH có&rdquo; nghĩa là các khóa phản hồi được dẫn xuất từ thao tác DH.</p>
<table>
  <thead>
      <tr>
          <th>Bits cờ 4,1</th>
          <th>Từ Đích</th>
          <th>Đến Bộ định tuyến</th>
          <th>Phản hồi</th>
          <th>DH?</th>
          <th>ghi chú</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0 0</td>
          <td>Bất kỳ</td>
          <td>Bất kỳ</td>
          <td>không mã hóa</td>
          <td>n/a</td>
          <td>hiện tại</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ElG</td>
          <td>ElG</td>
          <td>AES</td>
          <td>không</td>
          <td>hiện tại</td>
      </tr>
      <tr>
          <td>0 1</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AES</td>
          <td>không</td>
          <td>i2pd giải pháp tạm thời</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ElG</td>
          <td>AEAD</td>
          <td>không</td>
          <td>đề xuất này</td>
      </tr>
      <tr>
          <td>1 0</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>không</td>
          <td>0.9.49</td>
      </tr>
      <tr>
          <td>1 1</td>
          <td>ECIES</td>
          <td>ECIES</td>
          <td>AEAD</td>
          <td>có</td>
          <td>tương lai</td>
      </tr>
  </tbody>
</table>
<h3 id="elg-đến-elg">ElG đến ElG</h3>
<p>Đích ElG gửi một tra cứu đến một bộ định tuyến ElG.</p>
<p>Thay đổi nhỏ trong thông số kỹ thuật để kiểm tra bit mới 4.
Không có thay đổi nào đối với định dạng nhị phân hiện có.</p>
<p>Tạo khóa người yêu cầu (làm rõ):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 byte dữ liệu ngẫu nhiên
</span></span><span style="display:flex;"><span>  reply_tags :: Mỗi cái là CSRNG(32) 32 byte dữ liệu ngẫu nhiên
</span></span></code></pre></div><p>Định dạng thông điệp (thêm kiểm tra ECIESFlag):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 byte `SessionKey` big-endian
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 1 VÀ ECIESFlag == 0, chỉ kể từ bản phát hành 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 byte `Integer`
</span></span><span style="display:flex;"><span>       phạm vi hợp lệ: 1-32 (thường là 1)
</span></span><span style="display:flex;"><span>       số lượng thẻ phản hồi kèm theo
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 1 VÀ ECIESFlag == 0, chỉ kể từ bản phát hành 0.9.7
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       một hoặc nhiều 32 byte `SessionTag`s (thường là một)
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 1 VÀ ECIESFlag == 0, chỉ kể từ bản phát hành 0.9.7
</span></span></code></pre></div><h3 id="ecies-đến-elg">ECIES đến ElG</h3>
<p>Đích ECIES gửi một tra cứu đến một bộ định tuyến ElG.
Hỗ trợ kể từ 0.9.46.</p>
<p>Các trường reply_key và reply_tags được định nghĩa lại cho một phản hồi mã hóa ECIES.</p>
<p>Tạo khóa người yêu cầu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key :: CSRNG(32) 32 byte dữ liệu ngẫu nhiên
</span></span><span style="display:flex;"><span>  reply_tags :: Mỗi cái là CSRNG(8) 8 byte dữ liệu ngẫu nhiên
</span></span></code></pre></div><p>Định dạng thông điệp:
Định nghĩa lại các trường reply_key và reply_tags như sau:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 byte ECIES `SessionKey` big-endian
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 0 VÀ ECIESFlag == 1, chỉ kể từ bản phát hành 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tags ::
</span></span><span style="display:flex;"><span>       1 byte `Integer`
</span></span><span style="display:flex;"><span>       giá trị bắt buộc: 1
</span></span><span style="display:flex;"><span>       số lượng thẻ phản hồi tiếp theo
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 0 VÀ ECIESFlag == 1, chỉ kể từ bản phát hành 0.9.46
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  reply_tags ::
</span></span><span style="display:flex;"><span>       một 8 byte ECIES `SessionTag`
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 0 VÀ ECIESFlag == 1, chỉ kể từ bản phát hành 0.9.46
</span></span></code></pre></div><p>Phản hồi là một thông điệp Phiên hiện có ECIES, như đã định nghĩa trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>
.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>tag :: 8 byte reply_tag
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: 32 byte session key
</span></span><span style="display:flex;"><span>     Khóa phản hồi.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: 0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: Thẻ reply_tag dài 8 byte
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Dữ liệu văn bản thuần túy, DSM hoặc DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="ecies-đến-ecies-0949">ECIES đến ECIES (0.9.49)</h3>
<p>Đích hoặc bộ định tuyến ECIES gửi một tra cứu đến một bộ định tuyến ECIES, với các khóa phản hồi đi kèm.
Hỗ trợ kể từ 0.9.49.</p>
<p>Các bộ định tuyến ECIES đã được giới thiệu trong 0.9.48, xem <a href="../../../vi/proposals/156-ecies-routers/">Prop156</a>
.
Kể từ 0.9.49, các đích và bộ định tuyến ECIES có thể sử dụng cùng định dạng như trong
phần &ldquo;ECIES đến ElG&rdquo; ở trên, với các khóa phản hồi được bao gồm trong yêu cầu.
Tra cứu sẽ sử dụng &ldquo;định dạng một lần&rdquo; trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>

do người yêu cầu là ẩn danh.</p>
<p>Đối với một phương pháp mới với các khóa dẫn xuất, xem phần tiếp theo.</p>
<h3 id="ecies-đến-ecies-tương-lai">ECIES đến ECIES (tương lai)</h3>
<p>Đích hoặc bộ định tuyến ECIES gửi một tra cứu đến một bộ định tuyến ECIES, và các khóa phản hồi được dẫn xuất từ DH.
Chưa được định nghĩa đầy đủ hoặc hỗ trợ, triển khai là TBD.</p>
<p>Tra cứu sẽ sử dụng &ldquo;định dạng một lần&rdquo; trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>

do người yêu cầu là ẩn danh.</p>
<p>Định nghĩa lại trường reply_key như sau. Không có thẻ đi kèm nào.
Thẻ sẽ được tạo trong KDF dưới đây.</p>
<p>Phần này chưa hoàn chỉnh và cần nghiên cứu thêm.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>reply_key ::
</span></span><span style="display:flex;"><span>       32 byte khóa công khai X25519 tạm thời của người yêu cầu, little-endian
</span></span><span style="display:flex;"><span>       chỉ bao gồm nếu encryptionFlag == 1 VÀ ECIESFlag == 1, chỉ kể từ bản phát hành 0.9.TBD
</span></span></code></pre></div><p>Phản hồi là một thông điệp Phiên hiện có ECIES, như đã định nghĩa trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>
.
Xem <a href="../../../vi/docs/specs/ecies/">ECIES</a>
 để biết tất cả các định nghĩa.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>// Khóa tạm thời X25519 của Alice
</span></span><span style="display:flex;"><span>  // aesk = khóa riêng tạm thời của Alice
</span></span><span style="display:flex;"><span>  aesk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // aepk = khóa công khai tạm thời của Alice
</span></span><span style="display:flex;"><span>  aepk = DERIVE_PUBLIC(aesk)
</span></span><span style="display:flex;"><span>  // Khóa tĩnh X25519 của Bob
</span></span><span style="display:flex;"><span>  // bsk = khóa riêng tĩnh của Bob
</span></span><span style="display:flex;"><span>  bsk = GENERATE_PRIVATE()
</span></span><span style="display:flex;"><span>  // bpk = khóa công khai tĩnh của Bob
</span></span><span style="display:flex;"><span>  // bpk có thể là một phần của RouterIdentity, hoặc công bố trong RouterInfo (TBD)
</span></span><span style="display:flex;"><span>  bpk = DERIVE_PUBLIC(bsk)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // (DH()
</span></span><span style="display:flex;"><span>  //[chainKey, k] = MixKey(sharedSecret)
</span></span><span style="display:flex;"><span>  // chainKey từ ???
</span></span><span style="display:flex;"><span>  sharedSecret = DH(aesk, bpk) = DH(bsk, aepk)
</span></span><span style="display:flex;"><span>  keydata = HKDF(chainKey, sharedSecret, &#34;ECIES-DSM-Reply1&#34;, 32)
</span></span><span style="display:flex;"><span>  chainKey = keydata[0:31]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  1) rootKey = chainKey từ Phần Payload
</span></span><span style="display:flex;"><span>  2) k từ KDF Phiên Mới hoặc split()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // KDF_RK(rk, dh_out)
</span></span><span style="display:flex;"><span>  keydata = HKDF(rootKey, k, &#34;KDFDHRatchetStep&#34;, 64)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // Đầu ra 1: không sử dụng
</span></span><span style="display:flex;"><span>  unused = keydata[0:31]
</span></span><span style="display:flex;"><span>  // Đầu ra 2: Khóa chuỗi để khởi tạo
</span></span><span style="display:flex;"><span>  // các thẻ phiên và bánh răng khóa đối xứng
</span></span><span style="display:flex;"><span>  // cho các truyền từ Alice đến Bob
</span></span><span style="display:flex;"><span>  ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  // các khóa chuỗi khóa thẻ phiên và khóa đối xứng
</span></span><span style="display:flex;"><span>  keydata = HKDF(ck, ZEROLEN, &#34;TagAndKeyGenKeys&#34;, 64)
</span></span><span style="display:flex;"><span>  sessTag_ck = keydata[0:31]
</span></span><span style="display:flex;"><span>  symmKey_ck = keydata[32:63]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  tag :: 8 byte thẻ sinh ra từ RATCHET_TAG() trong [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  k :: 32 byte khóa sinh ra từ RATCHET_KEY() trong [ECIES](/docs/specs/ecies/)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  n :: Chỉ số của thẻ. Thường là 0.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ad :: Thẻ 8 byte
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  payload :: Dữ liệu văn bản thuần túy, DSM hoặc DSRM.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  ciphertext = ENCRYPT(k, n, payload, ad)
</span></span></code></pre></div><h3 id="định-dạng-phản-hồi">Định dạng phản hồi</h3>
<p>Đây là thông điệp phiên hiện có,
giống như trong <a href="../../../vi/docs/specs/ecies/">ECIES</a>
, được sao chép bên dưới để tham khảo.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>+----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |       Thẻ Phiên                      |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +            Phần Payload              +
</span></span><span style="display:flex;"><span>  |       Dữ liệu mã hóa ChaCha20     |
</span></span><span style="display:flex;"><span>  ~                                       ~
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +                                       +
</span></span><span style="display:flex;"><span>  |                                       |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>  |  Mã Xác thực Thông điệp Poly1305  |
</span></span><span style="display:flex;"><span>  +              (MAC)                    +
</span></span><span style="display:flex;"><span>  |             16 byte                  |
</span></span><span style="display:flex;"><span>  +----+----+----+----+----+----+----+----+
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Thẻ Phiên :: 8 byte, văn bản rõ
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Dữ liệu mã hóa Phần Payload :: dữ liệu còn lại trừ 16 byte
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  MAC :: mã xác thực thông điệp Poly1305, 16 byte
</span></span></code></pre></div><h2 id="lý-do">Lý do</h2>
<p>Các tham số mã hóa phản hồi trong tra cứu, đầu tiên được giới thiệu trong 0.9.7,
có phần nào là một vi phạm lớp. Nó được thực hiện theo cách này để đạt hiệu quả.
Nhưng cũng bởi vì tra cứu là ẩn danh.</p>
<p>Chúng ta có thể làm cho định dạng tra cứu tổng quát hơn, giống như với một trường loại mã hóa,
nhưng có lẽ điều đó gây phiền toái hơn là đáng giá.</p>
<p>Đề xuất trên là dễ dàng nhất và giảm thiểu thay đổi đối với định dạng tra cứu.</p>
<h2 id="ghi-chú">Ghi chú</h2>
<p>Các tra cứu và lưu trữ cơ sở dữ liệu đến các bộ định tuyến ElG cần được mã hóa ElGamal/AESSessionTag
như thường lệ.</p>
<h2 id="vấn-đề">Vấn đề</h2>
<p>Cần phân tích thêm về tính bảo mật của hai tùy chọn phản hồi ECIES.</p>
<h2 id="di-chuyển">Di chuyển</h2>
<p>Không có vấn đề tương thích ngược. Các bộ định tuyến quảng cáo phiên bản router.version 0.9.46 hoặc cao hơn
trong RouterInfo của họ phải hỗ trợ tính năng này.
Các bộ định tuyến không được gửi một DatabaseLookup với các cờ mới đến các bộ định tuyến với phiên bản dưới 0.9.46.
Nếu một thông điệp tra cứu cơ sở dữ liệu với bit 4 được thiết lập và bit 1 không thiết lập được gửi nhầm đến
một bộ định tuyến không có hỗ trợ, có thể nó sẽ bỏ qua khóa và thẻ được cung cấp, và
gửi phản hồi không mã hóa.</p>

                </article>

                
                <nav class="page-nav">
                    <a href="../../../vi/proposals/" class="page-nav-link">
                        ← Back to Proposals
                    </a>
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                            
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                        
                    
                    <a href="../../../proposals/154-ecies-lookups.txt" class="page-nav-link" download>
                        Download Source (.txt)
                    </a>
                    
                </nav>
            </div>
        </div>
    </div>
</div>

<style>
.proposals-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.proposal-header {
    margin-bottom: var(--spacing-2xl);
}

.proposal-title-section {
    margin-bottom: var(--spacing-lg);
}

.proposal-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-sm) 0;
    color: var(--color-text);
}

.proposal-number {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    font-weight: 600;
}

 
.proposal-meta-box {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-lg);
}

.proposal-status {
    display: inline-block;
    padding: var(--spacing-xs) var(--spacing-md);
    border-radius: var(--radius-md);
    font-weight: 600;
    font-size: 0.875rem;
    margin-bottom: var(--spacing-md);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

 
.status-open {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-open {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-accepted {
    background: #dbeafe;
    color: #0369a1;
}

.dark .status-accepted {
    background: #0c4a6e;
    color: #7dd3fc;
}

.status-finished {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-finished {
    background: #164e63;
    color: #86efac;
}

.status-closed {
    background: #dcfce7;
    color: #15803d;
}

.dark .status-closed {
    background: #164e63;
    color: #86efac;
}

.status-rejected {
    background: #fee2e2;
    color: #991b1b;
}

.dark .status-rejected {
    background: #7f1d1d;
    color: #fca5a5;
}

.status-draft,
.status-needs-revision,
.status-dead,
.status-needs-research {
    background: #fef3c7;
    color: #92400e;
}

.dark .status-draft,
.dark .status-needs-revision,
.dark .status-dead,
.dark .status-needs-research {
    background: #78350f;
    color: #fde047;
}

.status-meta,
.status-informational,
.status-reserve {
    background: #e9d5ff;
    color: #6b21a8;
}

.dark .status-meta,
.dark .status-informational,
.dark .status-reserve {
    background: #581c87;
    color: #e879f9;
}

 
.proposal-info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
}

.info-item {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-xs);
}

.info-label {
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-muted);
}

.info-value {
    font-size: 0.9375rem;
    color: var(--color-text);
    font-weight: 500;
}

 
.proposal-relationships {
    border-top: 1px solid var(--color-border);
    padding-top: var(--spacing-md);
}

.relationship {
    display: flex;
    gap: var(--spacing-md);
    margin-bottom: var(--spacing-sm);
}

.relationship:last-child {
    margin-bottom: 0;
}

.relationship-label {
    font-weight: 600;
    color: var(--color-text-muted);
    min-width: 120px;
}

.relationship-value {
    color: var(--color-text);
}

 
.proposal-layout {
    display: block;
}

.proposal-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.proposal-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.proposal-main {
    min-width: 0;
}

 
.proposal-content {
    line-height: 1.8;
    color: var(--color-text);
    max-width: 900px;
}

.proposal-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.proposal-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.proposal-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.proposal-content p {
    margin-bottom: var(--spacing-md);
}

.proposal-content ul,
.proposal-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.proposal-content li {
    margin-bottom: var(--spacing-xs);
}

.proposal-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.proposal-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
    font-size: 0.875rem;
}

.proposal-content pre code {
    background: none;
    padding: 0;
}

.proposal-content blockquote {
    border-left: 4px solid var(--color-primary);
    padding-left: var(--spacing-md);
    margin-left: 0;
    margin-bottom: var(--spacing-md);
    font-style: italic;
    color: var(--color-text-secondary);
}

.proposal-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.proposal-content a:hover {
    border-bottom-color: var(--color-primary);
}

.proposal-content table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: var(--spacing-md);
}

.proposal-content table th {
    background: var(--color-bg-secondary);
    padding: var(--spacing-sm);
    text-align: left;
    font-weight: 600;
    border-bottom: 2px solid var(--color-border);
}

.proposal-content table td {
    padding: var(--spacing-sm);
    border-bottom: 1px solid var(--color-border);
}

.proposal-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

 
.page-nav {
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
    display: flex;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.page-nav-link {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    color: var(--color-text);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    color: var(--color-primary);
}

 
@media (max-width: 1024px) {
    .proposal-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .proposal-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .proposal-title {
        font-size: 1.75rem;
    }

    .proposal-info-grid {
        grid-template-columns: 1fr;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Cập nhật tin tức I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Nhập email của bạn" required>
                            <button type="submit">Đăng ký</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liên kết nhanh</h3>
                <ul>
                    <li><a href="../../../vi/financial-support/">Quyên góp</a></li>
                    <li><a href="../../../vi/docs/overview/intro/">Giới thiệu I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Cộng đồng</h3>
                <ul>
                    <li><a href="../../../vi/get-involved/">Tham Gia</a></li>
                    <li><a href="../../../vi/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Diễn đàn chính thức</a></li>
                    <li><a href="../../../vi/contact/">Liên hệ</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Tài nguyên</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Thống kê I2P</a></li>
                    <li><a href="../../../vi/papers/">Nghiên cứu</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Dự án Internet Vô hình. Được cấp phép theo Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../vi/privacy/">Quyền riêng tư</a>
                <a href="../../../vi/terms/">Điều khoản</a>
                <a href="../../../vi/about/media/">Báo chí</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Đóng">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Thăm dò ý kiến cộng đồng</h2>
            <p class="modal-subtitle">Chúng tôi rất muốn nghe ý kiến từ bạn</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Phiếu bầu của bạn giúp định hình tương lai của I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
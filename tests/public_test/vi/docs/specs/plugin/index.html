<!DOCTYPE html>
<html lang="vi" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Định dạng gói plugin | I2P - Dự án Internet vô hình</title>

    <meta name="description" content="Quy tắc đóng gói .xpi2p / .su3 cho các plugin I2P">
    <meta name="keywords" content="i2p, privacy, anonymity, dark net, encryption, security">

    
    <meta property="og:title" content="Định dạng gói plugin | I2P - Dự án Internet vô hình">
    <meta property="og:description" content="Quy tắc đóng gói .xpi2p / .su3 cho các plugin I2P">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/vi/docs/specs/plugin/">

    
    <link rel="icon" type="image/svg+xml" href="../../../../images/favicon.svg">
    <link rel="icon" type="image/png" href="../../../../images/i2plogo.png" sizes="32x32">

    
    
    
    
    <link rel="stylesheet" href="../../../../css/main.min.be6880f32f5ff44e57579da7b11513b973319944ebe38748e3ac7f3268662d18.css" integrity="sha256-vmiA8y9f9E5XV52nsRUTuXMxmUTr44dI46x/MmhmLRg=">
    


    
</head>

<body>
    
    <input type="checkbox" id="theme-toggle-checkbox" class="theme-checkbox" aria-hidden="true">

    
<div class="site-banner" id="site-banner" data-banner-id="banner-3" role="alert" aria-live="polite">
    <div class="container">
        <div class="banner-content">
            <span class="banner-message">Trang I2P Beta Đã Hoạt Động Gửi báo cáo lỗi tới stormycloud@mail.i2p</span>
            
        </div>
        
        <form method="GET" action="../../../../api/banner/dismiss" style="display: inline;">
            <input type="hidden" name="id" value="banner-3">
            <button type="submit" class="banner-close" aria-label="Đóng banner" title="Đóng banner">
                <span aria-hidden="true">&times;</span>
            </button>
        </form>
        
    </div>
</div>


    <header class="site-header">
    <div class="container">
        <nav class="main-nav">
            <div class="nav-brand">
                <a href="../../../../vi/" class="logo-link">
                    <img src="../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="logo logo-light">
                    <img src="../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="logo logo-dark">
                </a>
            </div>

            
            <input type="checkbox" id="mobile-menu-checkbox" class="mobile-menu-checkbox"
                aria-label="Toggle navigation menu">
            <label for="mobile-menu-checkbox" class="mobile-menu-toggle" aria-label="Toggle navigation menu">
                <span class="hamburger"></span>
            </label>

            <div class="nav-menu">
                <ul class="nav-links">
                    <li class="nav-dropdown">
                        <a href="../../../../vi/about/" class="">Giới thiệu</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../vi/about/">Tổng quan</a></li>
                            <li><a href="../../../../vi/papers/">Bài Nghiên Cứu</a></li>
                            <li><a href="../../../../vi/about/media/">Báo chí</a></li>
                            <li><a href="../../../../vi/contact/">Liên hệ</a></li>
                        </ul>
                    </li>
                    <li><a href="../../../../vi/docs/" class="active">Tài liệu</a></li>
                    <li><a href="../../../../vi/downloads/" class="">Tải xuống</a></li>
                    <li><a href="../../../../vi/blog/" class="">Blog</a></li>
                    <li class="nav-dropdown">
                        <a href="../../../../vi/get-involved/" class="">Tham gia</a>
                        <ul class="dropdown-menu">
                            <li><a href="../../../../vi/get-involved/">Tổng quan</a></li>
                            <li><a href="../../../../vi/feedback/">Đề xuất Tính năng</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="nav-actions">
                    
                    <div class="language-selector">
                        <button class="language-toggle" aria-label="Select language" title="Language">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
                                <path
                                    d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"
                                    stroke="currentColor" stroke-width="2" />
                            </svg>
                            <span class="current-lang">vi</span>
                        </button>
                        <div class="language-dropdown">
                            
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../en/docs/specs/plugin/"
                                class="lang-option">Tiếng Anh</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../es/docs/specs/plugin/"
                                class="lang-option">Tiếng Tây Ban Nha</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ko/docs/specs/plugin/"
                                class="lang-option">Tiếng Hàn</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../zh/docs/specs/plugin/"
                                class="lang-option">Tiếng Trung</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ru/docs/specs/plugin/"
                                class="lang-option">Tiếng Nga</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../cs/docs/specs/plugin/"
                                class="lang-option">Tiếng Séc</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../de/docs/specs/plugin/"
                                class="lang-option">Tiếng Đức</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../fr/docs/specs/plugin/"
                                class="lang-option">Tiếng Pháp</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../tr/docs/specs/plugin/"
                                class="lang-option">Tiếng Thổ Nhĩ Kỳ</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../vi/docs/specs/plugin/"
                                class="lang-option active">Tiếng Việt</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../hi/docs/specs/plugin/"
                                class="lang-option">Tiếng Hindi</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../ar/docs/specs/plugin/"
                                class="lang-option">Tiếng Ả Rập</a>
                            
                            
                            
                            
                            
                            
                            
                            
                            <a href="../../../../pt/docs/specs/plugin/"
                                class="lang-option">Tiếng Bồ Đào Nha</a>
                            
                            
                        </div>
                    </div>

                    
                    <label for="theme-toggle-checkbox" class="theme-toggle" aria-label="Toggle dark mode"
                        title="Toggle theme">
                        <svg class="sun-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2" />
                            <path
                                d="M10 2V4M10 16V18M18 10H16M4 10H2M15.657 4.343L14.243 5.757M5.757 14.243L4.343 15.657M15.657 15.657L14.243 14.243M5.757 5.757L4.343 4.343"
                                stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                        </svg>
                        <svg class="moon-icon" width="20" height="20" viewBox="0 0 20 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                stroke="currentColor" stroke-width="2" stroke-linejoin="round" />
                        </svg>
                    </label>

                    
                    <a href="../../../../vi/financial-support/" class="btn btn-primary" id="donate-btn">Donate</a>

                    
                    <a href="../../../../vi/downloads/" class="btn btn-primary">Tải I2P</a>
                </div>
            </div>
        </nav>
    </div>
</header>

    <main id="main-content">
        




<div class="docs-page">
    <div class="container">
        
        <div class="docs-layout docs-layout--with-toc">
            
            
            <aside class="docs-toc-sidebar">
                <nav class="toc-nav">
                    <div class="toc-header">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        On This Page
                    </div>
                    <div class="toc-content">
                        <nav id="TableOfContents">
  <ul>
    <li><a href="#tổng-quan">Tổng quan</a>
      <ul>
        <li><a href="#các-loại-plugin-được-hỗ-trợ">Các loại plugin được hỗ trợ</a></li>
        <li><a href="#mô-hình-bảo-mật">Mô hình bảo mật</a></li>
      </ul>
    </li>
    <li><a href="#định-dạng-tệp">Định dạng tệp</a>
      <ul>
        <li><a href="#định-dạng-su3-rất-khuyến-nghị">Định dạng SU3 (Rất khuyến nghị)</a></li>
        <li><a href="#định-dạng-xpi2p-cũ-không-còn-được-khuyến-nghị">Định dạng XPI2P (cũ, không còn được khuyến nghị)</a></li>
      </ul>
    </li>
    <li><a href="#bố-cục-gói-nén-và-pluginconfig">Bố cục gói nén và plugin.config</a>
      <ul>
        <li><a href="#các-tệp-cần-thiết">Các tệp cần thiết</a></li>
        <li><a href="#thuộc-tính-bắt-buộc">Thuộc tính bắt buộc</a></li>
        <li><a href="#thuộc-tính-siêu-dữ-liệu-tùy-chọn">Thuộc tính siêu dữ liệu tùy chọn</a></li>
        <li><a href="#thay-thế-biến-trong-url-cập-nhật">Thay thế biến trong URL cập nhật</a></li>
      </ul>
    </li>
    <li><a href="#cấu-trúc-thư-mục">Cấu trúc thư mục</a>
      <ul>
        <li><a href="#bố-cục-tiêu-chuẩn">Bố cục tiêu chuẩn</a></li>
        <li><a href="#mục-đích-của-thư-mục">Mục đích của thư mục</a></li>
      </ul>
    </li>
    <li><a href="#cấu-hình-ứng-dụng-web">Cấu hình ứng dụng web</a>
      <ul>
        <li><a href="#định-dạng-webappsconfig">Định dạng webapps.config</a></li>
        <li><a href="#thực-tiễn-tốt-nhất-cho-ứng-dụng-web">Thực tiễn tốt nhất cho ứng dụng web</a></li>
      </ul>
    </li>
    <li><a href="#cấu-hình-máy-khách">Cấu hình máy khách</a>
      <ul>
        <li><a href="#định-dạng-clientsconfig">Định dạng clients.config</a></li>
        <li><a href="#tham-khảo-thuộc-tính">Tham khảo thuộc tính</a></li>
        <li><a href="#shellservice-kể-từ-phiên-bản-0953--170">ShellService (kể từ phiên bản 0.9.53 / 1.7.0)</a></li>
      </ul>
    </li>
    <li><a href="#quy-trình-cài-đặt">Quy trình cài đặt</a>
      <ul>
        <li><a href="#luồng-cài-đặt-dành-cho-người-dùng">Luồng cài đặt dành cho người dùng</a></li>
        <li><a href="#bảo-mật-và-tin-cậy">Bảo mật và Tin cậy</a></li>
      </ul>
    </li>
    <li><a href="#cơ-chế-cập-nhật">Cơ chế cập nhật</a>
      <ul>
        <li><a href="#quy-trình-kiểm-tra-cập-nhật">Quy trình kiểm tra cập nhật</a></li>
        <li><a href="#so-sánh-phiên-bản">So sánh phiên bản</a></li>
        <li><a href="#phương-pháp-hay-nhất-khi-cập-nhật">Phương pháp hay nhất khi cập nhật</a></li>
      </ul>
    </li>
    <li><a href="#classpath-đường-dẫn-lớp-và-thư-viện-chuẩn">Classpath (đường dẫn lớp) và Thư viện Chuẩn</a>
      <ul>
        <li><a href="#luôn-có-sẵn-trong-classpath-danh-sách-đường-dẫn-lớp">Luôn có sẵn trong Classpath (danh sách đường dẫn lớp)</a></li>
        <li><a href="#không-có-trong-classpath-đường-dẫn-lớp-của-java-phải-chỉ-định">Không có trong Classpath (đường dẫn lớp của Java) (Phải chỉ định)</a></li>
      </ul>
    </li>
    <li><a href="#yêu-cầu-về-phiên-bản-java">Yêu cầu về phiên bản Java</a>
      <ul>
        <li><a href="#các-yêu-cầu-hiện-tại-tháng-10-năm-2025">Các yêu cầu hiện tại (Tháng 10 năm 2025)</a></li>
        <li><a href="#chiến-lược-tương-thích-plugin">Chiến lược Tương thích Plugin</a></li>
        <li><a href="#thực-tiễn-tốt-nhất-về-biên-dịch">Thực tiễn tốt nhất về biên dịch</a></li>
      </ul>
    </li>
    <li><a href="#nén-pack200---đã-lỗi-thời">Nén Pack200 - ĐÃ LỖI THỜI</a>
      <ul>
        <li><a href="#cập-nhật-quan-trọng-không-sử-dụng-pack200">Cập nhật quan trọng: Không sử dụng Pack200</a></li>
      </ul>
    </li>
    <li><a href="#khóa-ký-và-bảo-mật">Khóa ký và bảo mật</a>
      <ul>
        <li><a href="#sinh-khóa-định-dạng-su3">Sinh khóa (định dạng SU3)</a></li>
        <li><a href="#ký-phần-bổ-trợ">Ký phần bổ trợ</a></li>
        <li><a href="#các-thực-tiễn-tốt-nhất-về-quản-lý-khóa">Các thực tiễn tốt nhất về quản lý khóa</a></li>
        <li><a href="#ký-số-dsa-kiểu-cũ-xpi2p">Ký số DSA kiểu cũ (XPI2P)</a></li>
      </ul>
    </li>
    <li><a href="#hướng-dẫn-phát-triển-plugin-phần-bổ-trợ">Hướng dẫn phát triển Plugin (phần bổ trợ)</a>
      <ul>
        <li><a href="#các-thực-hành-tốt-nhất-thiết-yếu">Các thực hành tốt nhất thiết yếu</a></li>
        <li><a href="#các-cân-nhắc-nâng-cao">Các cân nhắc nâng cao</a></li>
      </ul>
    </li>
    <li><a href="#các-phần-bổ-trợ-cho-eepsite">Các phần bổ trợ cho Eepsite</a>
      <ul>
        <li><a href="#tổng-quan-1">Tổng quan</a></li>
        <li><a href="#kiến-trúc">Kiến trúc</a></li>
        <li><a href="#cấu-trúc-ví-dụ">Cấu trúc ví dụ</a></li>
        <li><a href="#thay-thế-biến-trong-jettyxml">Thay thế biến trong jetty.xml</a></li>
        <li><a href="#ví-dụ">Ví dụ</a></li>
      </ul>
    </li>
    <li><a href="#tích-hợp-bảng-điều-khiển-1">Tích hợp Bảng điều khiển</a>
      <ul>
        <li><a href="#các-liên-kết-trên-thanh-tóm-tắt">Các liên kết trên Thanh tóm tắt</a></li>
        <li><a href="#biểu-tượng-bảng-điều-khiển">Biểu tượng bảng điều khiển</a></li>
      </ul>
    </li>
    <li><a href="#quốc-tế-hóa">Quốc tế hóa</a>
      <ul>
        <li><a href="#gói-dịch-thuật">Gói dịch thuật</a></li>
        <li><a href="#chuỗi-bản-địa-hóa-trong-pluginconfig">Chuỗi bản địa hóa trong plugin.config</a></li>
        <li><a href="#dịch-chủ-đề-bảng-điều-khiển">Dịch chủ đề bảng điều khiển</a></li>
      </ul>
    </li>
    <li><a href="#các-plugin-dành-riêng-cho-nền-tảng">Các plugin dành riêng cho nền tảng</a>
      <ul>
        <li><a href="#cách-tiếp-cận-các-gói-tách-biệt">Cách tiếp cận các gói tách biệt</a></li>
        <li><a href="#cách-tiếp-cận-thay-thế-biến">Cách tiếp cận thay thế biến</a></li>
        <li><a href="#phát-hiện-hệ-điều-hành-trong-thời-gian-chạy">Phát hiện hệ điều hành trong thời gian chạy</a></li>
      </ul>
    </li>
    <li><a href="#khắc-phục-sự-cố">Khắc phục sự cố</a>
      <ul>
        <li><a href="#các-vấn-đề-thường-gặp">Các vấn đề thường gặp</a></li>
        <li><a href="#ghi-nhật-ký-gỡ-lỗi">Ghi nhật ký gỡ lỗi</a></li>
      </ul>
    </li>
    <li><a href="#thông-tin-tham-khảo">Thông tin tham khảo</a>
      <ul>
        <li><a href="#đặc-tả-chính-thức">Đặc tả chính thức</a></li>
        <li><a href="#lịch-sử-phiên-bản-i2p">Lịch sử phiên bản I2P</a></li>
        <li><a href="#tài-nguyên-cho-nhà-phát-triển">Tài nguyên cho nhà phát triển</a></li>
        <li><a href="#hỗ-trợ-cộng-đồng">Hỗ trợ cộng đồng</a></li>
      </ul>
    </li>
    <li><a href="#phụ-lục-a-ví-dụ-pluginconfig-hoàn-chỉnh">Phụ lục A: Ví dụ plugin.config hoàn chỉnh</a></li>
    <li><a href="#phụ-lục-b-ví-dụ-clientsconfig-hoàn-chỉnh">Phụ lục B: Ví dụ clients.config hoàn chỉnh</a></li>
    <li><a href="#phụ-lục-c-ví-dụ-webappsconfig-đầy-đủ">Phụ lục C: Ví dụ webapps.config đầy đủ</a></li>
    <li><a href="#phụ-lục-d-danh-sách-kiểm-tra-chuyển-đổi-0953-đến-2100">Phụ lục D: Danh sách kiểm tra chuyển đổi (0.9.53 đến 2.10.0)</a>
      <ul>
        <li><a href="#các-thay-đổi-bắt-buộc">Các thay đổi bắt buộc</a></li>
        <li><a href="#các-thay-đổi-được-khuyến-nghị">Các thay đổi được khuyến nghị</a></li>
        <li><a href="#các-cải-tiến-tùy-chọn">Các cải tiến tùy chọn</a></li>
      </ul>
    </li>
  </ul>
</nav>
                    </div>
                </nav>
            </aside>
            

            
            <div class="docs-main">
                
                <nav class="breadcrumbs">
                    <a href="../../../../vi/">Home</a>
                    <span class="separator">/</span>
                    <a href="../../../../vi/docs/">Docs</a>
                    
                        
                            <span class="separator">/</span>
                            <a href="../../../../vi/docs/specs/">Specifications</a>
                        
                    
                    <span class="separator">/</span>
                    <span class="current">Định dạng gói plugin</span>
                </nav>

                
<div class="translation-disclaimer" role="note">
    <span class="disclaimer-message">Bản dịch này được tạo bằng máy học và có thể không chính xác 100%.</span>
    
    
    <a href="../../../../en/docs/specs/plugin/" class="disclaimer-link">Xem phiên bản tiếng Anh</a>
    
</div>



                
                <header class="article-header">
                    <h1 class="article-title">Định dạng gói plugin</h1>
                    
                        <p class="article-description">Quy tắc đóng gói .xpi2p / .su3 cho các plugin I2P</p>
                    
                    <div class="article-meta">
                        
                            <span class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                    <path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Updated: 2025-10
                            </span>
                        
                        
                            <span class="meta-item">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Accurate for: 2.10.0
                            </span>
                        
                    </div>
                </header>

                
                <article class="article-content">
                    <h2 id="tổng-quan">Tổng quan</h2>
<p>Các plugin I2P là các gói lưu trữ đã được ký nhằm mở rộng chức năng của router. Chúng được phát hành dưới dạng tệp <code>.xpi2p</code> hoặc <code>.su3</code>, cài đặt vào <code>~/.i2p/plugins/&lt;name&gt;/</code> (hoặc <code>%APPDIR%\I2P\plugins\&lt;name&gt;\</code> trên Windows), và chạy với toàn bộ quyền của router, không có sandboxing (cơ chế cô lập).</p>
<h3 id="các-loại-plugin-được-hỗ-trợ">Các loại plugin được hỗ trợ</h3>
<ul>
<li>Ứng dụng web của Bảng điều khiển</li>
<li>Các eepsites mới có cgi-bin, ứng dụng web</li>
<li>Chủ đề của Bảng điều khiển</li>
<li>Bản dịch cho Bảng điều khiển</li>
<li>Chương trình Java (chạy trong tiến trình hoặc JVM riêng)</li>
<li>Kịch bản shell và tệp nhị phân gốc</li>
</ul>
<h3 id="mô-hình-bảo-mật">Mô hình bảo mật</h3>
<p><strong>NGHIÊM TRỌNG:</strong> Các plugin chạy trong cùng một JVM với các quyền giống hệt như I2P router. Chúng có quyền truy cập không hạn chế vào:</p>
<ul>
<li>Hệ thống tệp (đọc và ghi)</li>
<li>API của router và trạng thái nội bộ</li>
<li>Kết nối mạng</li>
<li>Thực thi chương trình bên ngoài</li>
</ul>
<p>Các plugin nên được coi là mã được tin cậy hoàn toàn. Người dùng phải xác minh nguồn phát hành và chữ ký số của plugin trước khi cài đặt.</p>
<hr>
<h2 id="định-dạng-tệp">Định dạng tệp</h2>
<h3 id="định-dạng-su3-rất-khuyến-nghị">Định dạng SU3 (Rất khuyến nghị)</h3>
<p><strong>Trạng thái:</strong> Hoạt động, định dạng ưu tiên kể từ I2P 0.9.15 (Tháng 9 năm 2014)</p>
<p>Định dạng <code>.su3</code> cung cấp: - <strong>Khóa ký RSA-4096</strong> (so với DSA-1024 trong xpi2p) - Chữ ký được lưu trong phần đầu tệp - Số ma thuật (magic number): <code>I2Psu3</code> - Khả năng tương thích về sau tốt hơn</p>
<p><strong>Cấu trúc:</strong></p>
<pre tabindex="0"><code>[SU3 Header with RSA-4096 signature]
[ZIP Archive]
  ├── plugin.config (required)
  ├── console/
  ├── lib/
  ├── webapps/
  └── [other plugin files]
</code></pre><h3 id="định-dạng-xpi2p-cũ-không-còn-được-khuyến-nghị">Định dạng XPI2P (cũ, không còn được khuyến nghị)</h3>
<p><strong>Trạng thái:</strong> Được hỗ trợ vì lý do tương thích ngược, không khuyến nghị cho plugin mới</p>
<p>Định dạng <code>.xpi2p</code> sử dụng các chữ ký mật mã đời cũ: - <strong>Chữ ký DSA-1024</strong> (đã lỗi thời theo NIST-800-57) - Chữ ký DSA 40 byte được thêm vào đầu tệp ZIP - Yêu cầu trường <code>key</code> trong plugin.config</p>
<p><strong>Cấu trúc:</strong></p>
<pre tabindex="0"><code>[40-byte DSA signature]
[16-byte version string (UTF-8, zero-padded)]
[ZIP Archive]
</code></pre><p><strong>Lộ trình chuyển đổi:</strong> Khi chuyển từ xpi2p sang su3, hãy cung cấp cả <code>updateURL</code> và <code>updateURL.su3</code> trong giai đoạn chuyển tiếp. Các router hiện đại (0.9.15+) sẽ tự động ưu tiên SU3.</p>
<hr>
<h2 id="bố-cục-gói-nén-và-pluginconfig">Bố cục gói nén và plugin.config</h2>
<h3 id="các-tệp-cần-thiết">Các tệp cần thiết</h3>
<p><strong>plugin.config</strong> - Tệp cấu hình I2P tiêu chuẩn với các cặp khóa-giá trị</p>
<h3 id="thuộc-tính-bắt-buộc">Thuộc tính bắt buộc</h3>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Property</th>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Description</th>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Format</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>name</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Installation directory name, must match for updates</td><td style="border:1px solid var(--color-border); padding:0.5rem;">Alphanumeric, no spaces</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>signer</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Developer contact information</td><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>user@mail.i2p</code> format recommended</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>version</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Plugin version for update comparison</td><td style="border:1px solid var(--color-border); padding:0.5rem;">Max 16 bytes, parsed by VersionComparator</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>key</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">DSA public key (172 B64 chars ending with '=')</td><td style="border:1px solid var(--color-border); padding:0.5rem;"><strong>Omit for SU3 format</strong></td></tr>
  </tbody>
</table>
**Ví dụ về định dạng phiên bản:** - `1.2.3` - `1.2.3-4` - `2.0.0-beta.1`
<p>Các dấu phân cách hợp lệ: <code>.</code> (dấu chấm), <code>-</code> (dấu gạch ngang), <code>_</code> (dấu gạch dưới)</p>
<h3 id="thuộc-tính-siêu-dữ-liệu-tùy-chọn">Thuộc tính siêu dữ liệu tùy chọn</h3>
<h4 id="hiển-thị-thông-tin">Hiển thị thông tin</h4>
<ul>
<li><code>date</code> - Ngày phát hành (dấu thời gian kiểu long của Java)</li>
<li><code>author</code> - Tên nhà phát triển (khuyến nghị <code>user@mail.i2p</code>)</li>
<li><code>description</code> - Mô tả bằng tiếng Anh</li>
<li><code>description_xx</code> - Mô tả bản địa hóa (xx = mã ngôn ngữ)</li>
<li><code>websiteURL</code> - Trang chủ plugin (<code>http://foo.i2p/</code>)</li>
<li><code>license</code> - Mã định danh giấy phép (ví dụ: &ldquo;Apache-2.0&rdquo;, &ldquo;GPL-3.0&rdquo;)</li>
</ul>
<h4 id="cập-nhật-cấu-hình">Cập nhật cấu hình</h4>
<ul>
<li><code>updateURL</code> - Địa chỉ cập nhật XPI2P (cũ)</li>
<li><code>updateURL.su3</code> - Địa chỉ cập nhật SU3 (được khuyến nghị)</li>
<li><code>min-i2p-version</code> - Phiên bản I2P tối thiểu bắt buộc</li>
<li><code>max-i2p-version</code> - Phiên bản I2P tương thích tối đa</li>
<li><code>min-java-version</code> - Phiên bản Java tối thiểu (ví dụ: <code>1.7</code>, <code>17</code>)</li>
<li><code>min-jetty-version</code> - Phiên bản Jetty tối thiểu (dùng <code>6</code> cho Jetty 6+)</li>
<li><code>max-jetty-version</code> - Phiên bản Jetty tối đa (dùng <code>5.99999</code> cho Jetty 5)</li>
</ul>
<h4 id="hành-vi-cài-đặt">Hành vi cài đặt</h4>
<ul>
<li><code>dont-start-at-install</code> - Mặc định là <code>false</code>. Nếu <code>true</code>, yêu cầu khởi động thủ công</li>
<li><code>router-restart-required</code> - Mặc định là <code>false</code>. Thông báo cho người dùng rằng cần khởi động lại sau khi cập nhật</li>
<li><code>update-only</code> - Mặc định là <code>false</code>. Sẽ thất bại nếu plugin chưa được cài đặt</li>
<li><code>install-only</code> - Mặc định là <code>false</code>. Sẽ thất bại nếu plugin đã tồn tại</li>
<li><code>min-installed-version</code> - Phiên bản tối thiểu cần thiết để cập nhật</li>
<li><code>max-installed-version</code> - Phiên bản tối đa có thể được cập nhật</li>
<li><code>disableStop</code> - Mặc định là <code>false</code>. Ẩn nút dừng nếu <code>true</code></li>
</ul>
<h4 id="tích-hợp-bảng-điều-khiển">Tích hợp bảng điều khiển</h4>
<ul>
<li><code>consoleLinkName</code> - Văn bản cho liên kết trên thanh tóm tắt của bảng điều khiển</li>
<li><code>consoleLinkName_xx</code> - Văn bản liên kết đã bản địa hóa (xx = mã ngôn ngữ)</li>
<li><code>consoleLinkURL</code> - Đích liên kết (ví dụ: <code>/appname/index.jsp</code>)</li>
<li><code>consoleLinkTooltip</code> - Văn bản gợi ý khi di chuột (được hỗ trợ từ 0.7.12-6)</li>
<li><code>consoleLinkTooltip_xx</code> - Chú giải đã bản địa hóa</li>
<li><code>console-icon</code> - Đường dẫn tới biểu tượng 32x32 (được hỗ trợ từ 0.9.20)</li>
<li><code>icon-code</code> - PNG 32x32 được mã hóa Base64 dành cho plugin không có tài nguyên web (từ 0.9.25)</li>
</ul>
<h4 id="yêu-cầu-nền-tảng-chỉ-hiển-thị">Yêu cầu nền tảng (chỉ hiển thị)</h4>
<ul>
<li><code>required-platform-OS</code> - Yêu cầu hệ điều hành (không được áp dụng bắt buộc)</li>
<li><code>other-requirements</code> - Yêu cầu bổ sung (ví dụ: &ldquo;Python 3.8+&rdquo;)</li>
</ul>
<h4 id="quản-lý-phụ-thuộc-chưa-được-triển-khai">Quản lý phụ thuộc (Chưa được triển khai)</h4>
<ul>
<li><code>depends</code> - Các phụ thuộc của plugin, phân tách bằng dấu phẩy</li>
<li><code>depends-version</code> - Yêu cầu phiên bản đối với các phụ thuộc</li>
<li><code>langs</code> - Nội dung gói ngôn ngữ</li>
<li><code>type</code> - Loại plugin (app/theme/locale/webapp)</li>
</ul>
<h3 id="thay-thế-biến-trong-url-cập-nhật">Thay thế biến trong URL cập nhật</h3>
<p><strong>Trạng thái tính năng:</strong> Có sẵn từ I2P 1.7.0 (0.9.53)</p>
<p>Cả <code>updateURL</code> và <code>updateURL.su3</code> đều hỗ trợ các biến đặc thù theo nền tảng:</p>
<p><strong>Biến:</strong> - <code>$OS</code> - Hệ điều hành: <code>windows</code>, <code>linux</code>, <code>mac</code> - <code>$ARCH</code> - Kiến trúc: <code>386</code>, <code>amd64</code>, <code>arm64</code></p>
<p><strong>Ví dụ:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">updateURL.su3</span><span style="color:#f92672">=</span><span style="color:#e6db74">http://foo.i2p/downloads/foo-$OS-$ARCH.su3</span>
</span></span></code></pre></div><p><strong>Kết quả trên Windows AMD64:</strong></p>
<pre tabindex="0"><code>http://foo.i2p/downloads/foo-windows-amd64.su3
</code></pre><p>Điều này cho phép sử dụng một tệp plugin.config duy nhất cho các bản dựng dành riêng cho từng nền tảng.</p>
<hr>
<h2 id="cấu-trúc-thư-mục">Cấu trúc thư mục</h2>
<h3 id="bố-cục-tiêu-chuẩn">Bố cục tiêu chuẩn</h3>
<pre tabindex="0"><code>plugins/
└── pluginname/
    ├── plugin.config (required)
    ├── console/
    │   ├── locale/          # Translation JARs
    │   ├── themes/          # Console themes
    │   ├── webapps/         # Web applications
    │   └── webapps.config   # Webapp configuration
    ├── eepsite/
    │   ├── cgi-bin/
    │   ├── docroot/
    │   ├── logs/
    │   ├── webapps/
    │   └── jetty.xml
    ├── lib/
    │   └── *.jar            # Plugin libraries
    └── clients.config       # Client startup configuration
</code></pre><h3 id="mục-đích-của-thư-mục">Mục đích của thư mục</h3>
<p><strong>console/locale/</strong> - các tệp JAR chứa các gói tài nguyên cho các bản dịch cơ sở của I2P - các bản dịch dành riêng cho plugin nên đặt trong <code>console/webapps/*.war</code> hoặc <code>lib/*.jar</code></p>
<p><strong>console/themes/</strong> - Mỗi thư mục con chứa một chủ đề bảng điều khiển hoàn chỉnh - Tự động được thêm vào đường dẫn tìm kiếm chủ đề</p>
<p><strong>console/webapps/</strong> - các tệp <code>.war</code> dùng để tích hợp với bảng điều khiển - Được khởi động tự động trừ khi bị vô hiệu hóa trong <code>webapps.config</code> - Tên WAR không nhất thiết phải trùng với tên plugin</p>
<p><strong>eepsite/</strong> - eepsite hoàn chỉnh với một thể hiện Jetty riêng - Yêu cầu cấu hình <code>jetty.xml</code> với cơ chế thay thế biến - Xem các ví dụ plugin zzzot và pebble</p>
<p><strong>lib/</strong> - Thư viện JAR của plugin - Chỉ định trong classpath (đường dẫn lớp) qua <code>clients.config</code> hoặc <code>webapps.config</code></p>
<hr>
<h2 id="cấu-hình-ứng-dụng-web">Cấu hình ứng dụng web</h2>
<h3 id="định-dạng-webappsconfig">Định dạng webapps.config</h3>
<p>Tệp cấu hình I2P tiêu chuẩn kiểm soát cách ứng dụng web hoạt động.</p>
<p><strong>Cú pháp:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Disable autostart</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webapps.warname.startOnLoad</span><span style="color:#f92672">=</span><span style="color:#e6db74">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add classpath JARs (as of API 0.9.53, works for any warname)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webapps.warname.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/foo.jar,$I2P/lib/bar.jar</span>
</span></span></code></pre></div><p><strong>Lưu ý quan trọng:</strong> - Trước router 0.7.12-9, hãy dùng <code>plugin.warname.startOnLoad</code> để tương thích - Trước API 0.9.53, classpath (đường dẫn lớp) chỉ hoạt động nếu warname trùng với tên plugin - Kể từ 0.9.53+, classpath hoạt động với bất kỳ tên webapp nào</p>
<h3 id="thực-tiễn-tốt-nhất-cho-ứng-dụng-web">Thực tiễn tốt nhất cho ứng dụng web</h3>
<ol>
<li>
<p><strong>Triển khai ServletContextListener</strong></p>
<ul>
<li>Triển khai <code>javax.servlet.ServletContextListener</code> để dọn dẹp tài nguyên</li>
<li>Hoặc ghi đè <code>destroy()</code> trong servlet</li>
<li>Đảm bảo tắt đúng cách trong quá trình cập nhật và khi router dừng</li>
</ul>
</li>
<li>
<p><strong>Quản lý thư viện</strong></p>
<ul>
<li>Đặt các JAR dùng chung vào <code>lib/</code>, không nằm trong WAR</li>
<li>Tham chiếu thông qua classpath của <code>webapps.config</code></li>
<li>Cho phép cài đặt/cập nhật plugin tách biệt</li>
</ul>
</li>
<li>
<p><strong>Tránh xung đột thư viện</strong></p>
<ul>
<li>Không bao giờ đóng gói kèm các JAR của Jetty, Tomcat hoặc servlet</li>
<li>Không bao giờ đóng gói kèm các JAR từ bản cài đặt I2P tiêu chuẩn</li>
<li>Kiểm tra phần classpath cho các thư viện tiêu chuẩn</li>
</ul>
</li>
<li>
<p><strong>Yêu cầu biên dịch</strong></p>
<ul>
<li>Không bao gồm các tệp mã nguồn <code>.java</code> hoặc <code>.jsp</code></li>
<li>Biên dịch trước tất cả các JSP để tránh chậm trễ khi khởi động</li>
<li>Không thể giả định sự sẵn có của trình biên dịch Java/JSP</li>
</ul>
</li>
<li>
<p><strong>Khả năng tương thích Servlet API</strong></p>
<ul>
<li>I2P hỗ trợ Servlet 3.0 (từ 0.9.30)</li>
<li><strong>Không hỗ trợ quét Annotation (chú thích)</strong> (@WebContent)</li>
<li>Phải cung cấp tệp mô tả triển khai <code>web.xml</code> theo kiểu truyền thống</li>
</ul>
</li>
<li>
<p><strong>Phiên bản Jetty</strong></p>
<ul>
<li>Hiện tại: Jetty 9 (I2P 0.9.30+)</li>
<li>Sử dụng <code>net.i2p.jetty.JettyStart</code> để trừu tượng hóa</li>
<li>Bảo vệ trước các thay đổi Jetty API</li>
</ul>
</li>
</ol>
<hr>
<h2 id="cấu-hình-máy-khách">Cấu hình máy khách</h2>
<h3 id="định-dạng-clientsconfig">Định dạng clients.config</h3>
<p>Xác định các máy khách (dịch vụ) được khởi chạy cùng plugin.</p>
<p><strong>Máy khách cơ bản:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">com.example.PluginMain</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Plugin Service</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.delay</span><span style="color:#f92672">=</span><span style="color:#e6db74">30</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">arg1 arg2 $PLUGIN/config.properties</span>
</span></span></code></pre></div><p><strong>Ứng dụng khách có Dừng/Gỡ cài đặt:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.stopargs</span><span style="color:#f92672">=</span><span style="color:#e6db74">stop</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.uninstallargs</span><span style="color:#f92672">=</span><span style="color:#e6db74">uninstall</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/plugin.jar,$I2P/lib/i2p.jar</span>
</span></span></code></pre></div><h3 id="tham-khảo-thuộc-tính">Tham khảo thuộc tính</h3>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Property</th>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>main</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Fully qualified class name implementing ClientApp interface</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>name</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Display name for user interface</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>delay</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Startup delay in seconds (default: 0)</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>args</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Space-separated arguments passed to constructor</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>stopargs</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Arguments for shutdown (must handle gracefully)</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>uninstallargs</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Arguments called before plugin deletion</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>classpath</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Comma-separated JAR paths</td></tr>
  </tbody>
</table>
### Thay thế biến
<p>Các biến sau được thay thế trong <code>args</code>, <code>stopargs</code>, <code>uninstallargs</code> và <code>classpath</code>:</p>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Variable</th>
      <th style="border:1px solid var(--color-border); padding:0.5rem; background:var(--color-bg-secondary); text-align:left;">Replacement</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>$I2P</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">I2P base installation directory</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>$CONFIG</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">I2P configuration directory (typically <code>~/.i2p</code>)</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>$PLUGIN</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">This plugin's directory (<code>$CONFIG/plugins/name</code>)</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>$OS</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Operating system: <code>windows</code>, <code>linux</code>, <code>mac</code></td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.5rem;"><code>$ARCH</code></td><td style="border:1px solid var(--color-border); padding:0.5rem;">Architecture: <code>386</code>, <code>amd64</code>, <code>arm64</code></td></tr>
  </tbody>
</table>
### Máy khách được quản lý so với máy khách không được quản lý
<p><strong>Các client được quản lý (Khuyến nghị, từ 0.9.4):</strong> - Được khởi tạo bởi ClientAppManager (trình quản lý ứng dụng khách) - Duy trì tham chiếu và theo dõi trạng thái - Quản lý vòng đời dễ dàng hơn - Quản lý bộ nhớ tốt hơn</p>
<p><strong>Các ứng dụng khách không được quản lý:</strong> - Được khởi động bởi router, không theo dõi trạng thái - Phải xử lý nhiều lần gọi start/stop một cách ổn thỏa - Sử dụng trạng thái tĩnh hoặc tệp PID (định danh tiến trình) để điều phối - Được gọi khi router tắt (as of 0.7.12-3)</p>
<h3 id="shellservice-kể-từ-phiên-bản-0953--170">ShellService (kể từ phiên bản 0.9.53 / 1.7.0)</h3>
<p>Giải pháp tổng quát để chạy các chương trình bên ngoài với khả năng theo dõi trạng thái tự động.</p>
<p><strong>Tính năng:</strong> - Quản lý vòng đời tiến trình - Giao tiếp với ClientAppManager - Quản lý PID tự động - Hỗ trợ đa nền tảng</p>
<p><strong>Cách sử dụng:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">net.i2p.apps.ShellService</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/bin/myservice.sh</span>
</span></span></code></pre></div><p>Đối với các tập lệnh dành riêng cho từng nền tảng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/bin/myservice-$OS.$ARCH</span>
</span></span></code></pre></div><p><strong>Phương án thay thế (kiểu cũ):</strong> Viết Java wrapper (trình bao) kiểm tra loại hệ điều hành, gọi <code>ShellCommand</code> với tệp <code>.bat</code> hoặc <code>.sh</code> phù hợp.</p>
<hr>
<h2 id="quy-trình-cài-đặt">Quy trình cài đặt</h2>
<h3 id="luồng-cài-đặt-dành-cho-người-dùng">Luồng cài đặt dành cho người dùng</h3>
<ol>
<li>Người dùng dán URL plugin vào Trang cấu hình Plugin của Router Console (<code>/configplugins</code>)</li>
<li>Router tải xuống tệp plugin</li>
<li>Xác minh chữ ký (thất bại nếu khóa chưa biết và chế độ nghiêm ngặt được bật)</li>
<li>Kiểm tra tính toàn vẹn ZIP</li>
<li>Giải nén và phân tích <code>plugin.config</code></li>
<li>Xác minh tương thích phiên bản (<code>min-i2p-version</code>, <code>min-java-version</code>, v.v.)</li>
<li>Phát hiện xung đột tên ứng dụng web</li>
<li>Dừng plugin hiện có khi cập nhật</li>
<li>Xác thực thư mục (phải nằm dưới <code>plugins/</code>)</li>
<li>Giải nén toàn bộ tệp vào thư mục plugin</li>
<li>Cập nhật <code>plugins.config</code></li>
<li>Khởi động plugin (trừ khi <code>dont-start-at-install=true</code>)</li>
</ol>
<h3 id="bảo-mật-và-tin-cậy">Bảo mật và Tin cậy</h3>
<p><strong>Quản lý khóa:</strong> - Mô hình tin cậy &lsquo;first-key-seen&rsquo; (tin cậy theo khóa được thấy đầu tiên) cho người ký mới - Chỉ có các khóa jrandom và zzz được đóng gói sẵn - Kể từ 0.9.14.1, các khóa không xác định bị từ chối theo mặc định - Một thuộc tính nâng cao có thể ghi đè cho mục đích phát triển</p>
<p><strong>Hạn chế cài đặt:</strong> - Các gói nén chỉ được giải nén vào thư mục plugin - Trình cài đặt từ chối các đường dẫn bên ngoài <code>plugins/</code> - Các plugin có thể truy cập tệp ở nơi khác sau khi cài đặt - Không có sandboxing (cô lập môi trường chạy) hoặc cô lập đặc quyền</p>
<hr>
<h2 id="cơ-chế-cập-nhật">Cơ chế cập nhật</h2>
<h3 id="quy-trình-kiểm-tra-cập-nhật">Quy trình kiểm tra cập nhật</h3>
<ol>
<li>Router đọc <code>updateURL.su3</code> (ưu tiên) hoặc <code>updateURL</code> từ plugin.config</li>
<li>Yêu cầu HTTP HEAD hoặc GET một phần để lấy các byte 41-56</li>
<li>Trích xuất chuỗi phiên bản từ tệp từ xa</li>
<li>So sánh với phiên bản đã cài đặt bằng VersionComparator (bộ so sánh phiên bản)</li>
<li>Nếu mới hơn, nhắc người dùng hoặc tự động tải xuống (dựa trên cài đặt)</li>
<li>Dừng plugin</li>
<li>Cài đặt bản cập nhật</li>
<li>Khởi động plugin (trừ khi tùy chọn của người dùng đã thay đổi)</li>
</ol>
<h3 id="so-sánh-phiên-bản">So sánh phiên bản</h3>
<p>Các phiên bản được phân tích dưới dạng các thành phần tách nhau bằng dấu chấm/gạch ngang/gạch dưới: - <code>1.2.3</code> &lt; <code>1.2.4</code> - <code>1.2.3</code> &lt; <code>1.2.3-1</code> - <code>2.0.0</code> &gt; <code>1.9.9</code></p>
<p><strong>Độ dài tối đa:</strong> 16 byte (phải khớp với phần đầu SUD/SU3)</p>
<h3 id="phương-pháp-hay-nhất-khi-cập-nhật">Phương pháp hay nhất khi cập nhật</h3>
<ol>
<li>Luôn tăng phiên bản khi phát hành</li>
<li>Kiểm thử lộ trình cập nhật từ phiên bản trước đó</li>
<li>Cân nhắc <code>router-restart-required</code> cho các thay đổi lớn</li>
<li>Cung cấp cả <code>updateURL</code> và <code>updateURL.su3</code> trong quá trình chuyển đổi</li>
<li>Sử dụng hậu tố số bản dựng để kiểm thử (<code>1.2.3-456</code>)</li>
</ol>
<hr>
<h2 id="classpath-đường-dẫn-lớp-và-thư-viện-chuẩn">Classpath (đường dẫn lớp) và Thư viện Chuẩn</h2>
<h3 id="luôn-có-sẵn-trong-classpath-danh-sách-đường-dẫn-lớp">Luôn có sẵn trong Classpath (danh sách đường dẫn lớp)</h3>
<p>Các tệp JAR sau từ <code>$I2P/lib</code> luôn có trong classpath (đường dẫn lớp) cho I2P 0.9.30+:</p>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">JAR</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Contents</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Plugin Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>i2p.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Core API</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Required for all plugins</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>mstreaming.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Streaming API</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Most plugins need</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>streaming.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Streaming implementation</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Most plugins need</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>i2ptunnel.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">I2PTunnel</td><td style="border:1px solid var(--color-border); padding:0.6rem;">HTTP/server plugins</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>router.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Router internals</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Rarely needed, avoid if possible</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>javax.servlet.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Servlet 3.1, JSP 2.3 API</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Plugins with servlets/JSPs</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>jasper-runtime.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Jasper compiler/runtime</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Plugins with JSPs</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>commons-el.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">EL 3.0 API</td><td style="border:1px solid var(--color-border); padding:0.6rem;">JSPs using expression language</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>jetty-i2p.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Jetty utilities</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Plugins starting Jetty</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>org.mortbay.jetty.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Jetty 9 base</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Custom Jetty instances</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>sam.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">SAM API</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Rarely needed</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>addressbook.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Subscription/blockfile</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Use NamingService instead</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>routerconsole.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Console libraries</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Not public API, avoid</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>jbigi.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Native crypto</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Plugins should not need</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>systray.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">URL launcher</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Rarely needed</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>wrapper.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Service wrapper</td><td style="border:1px solid var(--color-border); padding:0.6rem;">Plugins should not need</td></tr>
  </tbody>
</table>
### Ghi chú đặc biệt
<p><strong>commons-logging.jar:</strong> - Trống kể từ 0.9.30 - Trước 0.9.30: Apache Tomcat JULI - Trước 0.9.24: Commons Logging + JULI - Trước 0.9: Chỉ Commons Logging</p>
<p><strong>jasper-compiler.jar:</strong> - Trống kể từ Jetty 6 (0.9)</p>
<p><strong>systray4j.jar:</strong> - Đã được loại bỏ từ 0.9.26</p>
<h3 id="không-có-trong-classpath-đường-dẫn-lớp-của-java-phải-chỉ-định">Không có trong Classpath (đường dẫn lớp của Java) (Phải chỉ định)</h3>
<table style="width:100%; border-collapse:collapse; margin-bottom:1.5rem;">
  <thead>
    <tr>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">JAR</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Contents</th>
      <th style="border:1px solid var(--color-border); padding:0.6rem; text-align:left; background:var(--color-bg-secondary);">Usage</th>
    </tr>
  </thead>
  <tbody>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>jstl.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Standard Taglib</td><td style="border:1px solid var(--color-border); padding:0.6rem;">JSP tag libraries</td></tr>
    <tr><td style="border:1px solid var(--color-border); padding:0.6rem;"><code>standard.jar</code></td><td style="border:1px solid var(--color-border); padding:0.6rem;">Standard Taglib</td><td style="border:1px solid var(--color-border); padding:0.6rem;">JSP tag libraries</td></tr>
  </tbody>
</table>
### Đặc tả Classpath (đường dẫn lớp)
<p><strong>Trong clients.config:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/mylib.jar,$I2P/lib/i2p.jar</span>
</span></span></code></pre></div><p><strong>Trong webapps.config:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">webapps.mywebapp.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/mylib.jar,$I2P/lib/jstl.jar</span>
</span></span></code></pre></div><p><strong>Quan trọng:</strong> Kể từ 0.7.13-3, các classpath (đường dẫn lớp) là riêng cho từng luồng, không mang tính toàn cục trên JVM (Máy ảo Java). Hãy chỉ định classpath đầy đủ cho từng client.</p>
<hr>
<h2 id="yêu-cầu-về-phiên-bản-java">Yêu cầu về phiên bản Java</h2>
<h3 id="các-yêu-cầu-hiện-tại-tháng-10-năm-2025">Các yêu cầu hiện tại (Tháng 10 năm 2025)</h3>
<p><strong>I2P 2.10.0 và các phiên bản trước:</strong> - Tối thiểu: Java 7 (bắt buộc kể từ 0.9.24, tháng 1 năm 2016) - Khuyến nghị: Java 8 hoặc cao hơn</p>
<p><strong>I2P 2.11.0 và các phiên bản sau (SẮP RA MẮT):</strong> - <strong>Tối thiểu: Java 17+</strong> (được công bố trong ghi chú phát hành 2.9.0) - Đã đưa ra cảnh báo trước hai bản phát hành (2.9.0 → 2.10.0 → 2.11.0)</p>
<h3 id="chiến-lược-tương-thích-plugin">Chiến lược Tương thích Plugin</h3>
<p><strong>Để có khả năng tương thích tối đa (tới I2P 2.10.x):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;javac</span> <span style="color:#a6e22e">source=</span><span style="color:#e6db74">&#34;1.7&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;1.7&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">min-java-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">1.7</span>
</span></span></code></pre></div><p><strong>Đối với các tính năng Java 8+:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;javac</span> <span style="color:#a6e22e">source=</span><span style="color:#e6db74">&#34;1.8&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;1.8&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">min-java-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">1.8</span>
</span></span></code></pre></div><p><strong>Đối với các tính năng của Java 11+:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;javac</span> <span style="color:#a6e22e">source=</span><span style="color:#e6db74">&#34;11&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;11&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">min-java-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">11</span>
</span></span></code></pre></div><p><strong>Chuẩn bị cho 2.11.0+:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;javac</span> <span style="color:#a6e22e">source=</span><span style="color:#e6db74">&#34;17&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;17&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">min-java-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">17</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">min-i2p-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">2.11.0</span>
</span></span></code></pre></div><h3 id="thực-tiễn-tốt-nhất-về-biên-dịch">Thực tiễn tốt nhất về biên dịch</h3>
<p><strong>Khi biên dịch với JDK mới cho mục tiêu cũ hơn:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;javac</span> <span style="color:#a6e22e">source=</span><span style="color:#e6db74">&#34;1.7&#34;</span> <span style="color:#a6e22e">target=</span><span style="color:#e6db74">&#34;1.7&#34;</span> 
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">bootclasspath=</span><span style="color:#e6db74">&#34;${java7.home}/jre/lib/rt.jar&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#a6e22e">includeantruntime=</span><span style="color:#e6db74">&#34;false&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><p>Điều này ngăn việc sử dụng các API không có sẵn trong phiên bản Java mục tiêu.</p>
<hr>
<h2 id="nén-pack200---đã-lỗi-thời">Nén Pack200 - ĐÃ LỖI THỜI</h2>
<h3 id="cập-nhật-quan-trọng-không-sử-dụng-pack200">Cập nhật quan trọng: Không sử dụng Pack200</h3>
<p><strong>Trạng thái:</strong> ĐÃ NGỪNG HỖ TRỢ VÀ ĐÃ GỠ BỎ</p>
<p>Đặc tả ban đầu đã khuyến nghị mạnh mẽ việc nén Pack200 để giảm kích thước 60-65%. <strong>Điều này không còn áp dụng nữa.</strong></p>
<p><strong>Dòng thời gian:</strong> - <strong>JEP 336:</strong> Pack200 được đánh dấu ngừng sử dụng trong Java 11 (Tháng 9 năm 2018) - <strong>JEP 367:</strong> Pack200 bị gỡ bỏ trong Java 14 (Tháng 3 năm 2020)</p>
<p><strong>Đặc tả Cập nhật I2P chính thức nêu rõ:</strong> &gt; &ldquo;Các tệp JAR và WAR trong gói zip không còn được nén bằng pack200 như đã mô tả ở trên cho các tệp &lsquo;su2&rsquo;, vì các runtime Java (môi trường chạy Java) gần đây không còn hỗ trợ pack200.&rdquo;</p>
<p><strong>Cần làm gì:</strong></p>
<ol>
<li><strong>Loại bỏ pack200 khỏi quy trình build ngay lập tức</strong></li>
<li><strong>Sử dụng nén ZIP tiêu chuẩn</strong></li>
<li><strong>Cân nhắc các lựa chọn thay thế:</strong>
<ul>
<li>ProGuard/R8 để thu gọn mã</li>
<li>UPX cho các tệp nhị phân native</li>
<li>Các thuật toán nén hiện đại (zstd, brotli) nếu có cung cấp bộ giải nén tùy chỉnh</li>
</ul>
</li>
</ol>
<p><strong>Đối với plugin hiện có:</strong> - Các router cũ (0.7.11-5 đến Java 10) vẫn có thể giải nén pack200 (định dạng nén JAR của Java) - Các router mới (Java 11+) không thể giải nén pack200 - Phát hành lại plugin không dùng nén pack200</p>
<hr>
<h2 id="khóa-ký-và-bảo-mật">Khóa ký và bảo mật</h2>
<h3 id="sinh-khóa-định-dạng-su3">Sinh khóa (định dạng SU3)</h3>
<p>Sử dụng tập lệnh <code>makeplugin.sh</code> từ kho lưu trữ i2p.scripts:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Generate new signing key</span>
</span></span><span style="display:flex;"><span>./makeplugin.sh keygen
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Keys stored in ~/.i2p-plugin-keys/</span>
</span></span></code></pre></div><p><strong>Thông tin chính:</strong> - Thuật toán: RSA_SHA512_4096 - Định dạng: chứng chỉ X.509 - Lưu trữ: định dạng Java keystore</p>
<h3 id="ký-phần-bổ-trợ">Ký phần bổ trợ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Create signed su3 file</span>
</span></span><span style="display:flex;"><span>./makeplugin.sh sign myplugin.zip myplugin.su3 keyname
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Verify signature</span>
</span></span><span style="display:flex;"><span>./makeplugin.sh verify myplugin.su3
</span></span></code></pre></div><h3 id="các-thực-tiễn-tốt-nhất-về-quản-lý-khóa">Các thực tiễn tốt nhất về quản lý khóa</h3>
<ol>
<li>
<p><strong>Tạo một lần, bảo vệ mãi mãi</strong></p>
<ul>
<li>Routers từ chối các tên khóa trùng lặp với các khóa khác nhau</li>
<li>Routers từ chối các khóa trùng lặp với các tên khóa khác nhau</li>
<li>Các bản cập nhật bị từ chối nếu khóa/tên không khớp</li>
</ul>
</li>
<li>
<p><strong>Lưu trữ an toàn</strong></p>
<ul>
<li>Sao lưu keystore (kho khóa) một cách an toàn</li>
<li>Sử dụng cụm từ mật khẩu mạnh</li>
<li>Không bao giờ commit vào hệ thống quản lý phiên bản</li>
</ul>
</li>
<li>
<p><strong>Xoay vòng khóa</strong></p>
<ul>
<li>Không được hỗ trợ bởi kiến trúc hiện tại</li>
<li>Lập kế hoạch cho việc sử dụng khóa dài hạn</li>
<li>Cân nhắc các lược đồ đa chữ ký cho phát triển theo nhóm</li>
</ul>
</li>
</ol>
<h3 id="ký-số-dsa-kiểu-cũ-xpi2p">Ký số DSA kiểu cũ (XPI2P)</h3>
<p><strong>Trạng thái:</strong> Hoạt động nhưng đã lỗi thời</p>
<p>Chữ ký DSA-1024 được dùng trong định dạng xpi2p: - chữ ký dài 40 byte - khóa công khai dài 172 ký tự base64 - NIST-800-57 khuyến nghị tối thiểu (L=2048, N=224) - I2P sử dụng mức yếu hơn (L=1024, N=160)</p>
<p><strong>Khuyến nghị:</strong> Thay vào đó, hãy sử dụng SU3 (định dạng gói cập nhật có chữ ký của I2P) với RSA-4096 (khóa RSA 4096-bit).</p>
<hr>
<h2 id="hướng-dẫn-phát-triển-plugin-phần-bổ-trợ">Hướng dẫn phát triển Plugin (phần bổ trợ)</h2>
<h3 id="các-thực-hành-tốt-nhất-thiết-yếu">Các thực hành tốt nhất thiết yếu</h3>
<ol>
<li>
<p><strong>Tài liệu</strong></p>
<ul>
<li>Cung cấp README rõ ràng kèm hướng dẫn cài đặt</li>
<li>Tài liệu hóa các tùy chọn cấu hình và giá trị mặc định</li>
<li>Bao gồm nhật ký thay đổi cho mỗi bản phát hành</li>
<li>Chỉ định các phiên bản I2P/Java yêu cầu</li>
</ul>
</li>
<li>
<p><strong>Tối ưu hóa dung lượng</strong></p>
<ul>
<li>Chỉ bao gồm các tệp cần thiết</li>
<li>Không bao giờ đóng gói kèm các JAR của router</li>
<li>Tách biệt gói cài đặt và gói cập nhật (thư viện trong lib/)</li>
<li><del>Sử dụng nén Pack200</del> <strong>LỖI THỜI - Sử dụng ZIP tiêu chuẩn</strong></li>
</ul>
</li>
<li>
<p><strong>Cấu hình</strong></p>
<ul>
<li>Không bao giờ chỉnh sửa <code>plugin.config</code> trong lúc chạy</li>
<li>Sử dụng tệp cấu hình riêng cho các thiết lập khi chạy</li>
<li>Tài liệu hóa các cấu hình bắt buộc của router (cổng SAM, tunnels, v.v.)</li>
<li>Tôn trọng cấu hình hiện có của người dùng</li>
</ul>
</li>
<li>
<p><strong>Sử dụng tài nguyên</strong></p>
<ul>
<li>Tránh mức tiêu thụ băng thông mặc định quá mức</li>
<li>Áp dụng giới hạn sử dụng CPU hợp lý</li>
<li>Giải phóng tài nguyên khi tắt ứng dụng</li>
<li>Sử dụng luồng daemon khi thích hợp</li>
</ul>
</li>
<li>
<p><strong>Kiểm thử</strong></p>
<ul>
<li>Kiểm thử cài đặt/nâng cấp/gỡ cài đặt trên tất cả các nền tảng</li>
<li>Kiểm thử cập nhật từ phiên bản trước</li>
<li>Xác minh ứng dụng web dừng/khởi động lại trong quá trình cập nhật</li>
<li>Kiểm thử với phiên bản I2P được hỗ trợ tối thiểu</li>
</ul>
</li>
<li>
<p><strong>Hệ thống tệp</strong></p>
<ul>
<li>Không bao giờ ghi vào <code>$I2P</code> (có thể chỉ đọc)</li>
<li>Ghi dữ liệu thời gian chạy vào <code>$PLUGIN</code> hoặc <code>$CONFIG</code></li>
<li>Sử dụng <code>I2PAppContext</code> để phát hiện vị trí thư mục</li>
<li>Không giả định vị trí của <code>$CWD</code></li>
</ul>
</li>
<li>
<p><strong>Tương thích</strong></p>
<ul>
<li>Không trùng lặp các lớp I2P chuẩn</li>
<li>Mở rộng các lớp khi cần, đừng thay thế</li>
<li>Kiểm tra <code>min-i2p-version</code>, <code>min-jetty-version</code> trong plugin.config</li>
<li>Kiểm thử với các phiên bản I2P cũ hơn nếu có hỗ trợ chúng</li>
</ul>
</li>
<li>
<p><strong>Xử lý tắt</strong></p>
<ul>
<li>Thiết lập <code>stopargs</code> phù hợp trong clients.config</li>
<li>Đăng ký shutdown hooks (móc gọi khi tắt): <code>I2PAppContext.addShutdownTask()</code></li>
<li>Xử lý nhiều lần gọi khởi động/dừng một cách an toàn</li>
<li>Đặt tất cả các luồng sang chế độ daemon (tiến trình nền)</li>
</ul>
</li>
<li>
<p><strong>Bảo mật</strong></p>
<ul>
<li>Xác thực mọi đầu vào từ bên ngoài</li>
<li>Không bao giờ gọi <code>System.exit()</code></li>
<li>Tôn trọng quyền riêng tư của người dùng</li>
<li>Tuân theo các thực hành lập trình an toàn</li>
</ul>
</li>
<li>
<p><strong>Giấy phép</strong></p>
<ul>
<li>Nêu rõ ràng giấy phép của plugin</li>
<li>Tuân thủ các giấy phép của những thư viện được đóng gói kèm</li>
<li>Bao gồm phần ghi công bắt buộc</li>
<li>Cung cấp quyền truy cập mã nguồn nếu được yêu cầu</li>
</ul>
</li>
</ol>
<h3 id="các-cân-nhắc-nâng-cao">Các cân nhắc nâng cao</h3>
<p><strong>Xử lý múi giờ:</strong> - Router đặt múi giờ JVM thành UTC - Múi giờ thực tế của người dùng: thuộc tính <code>i2p.systemTimeZone</code> trong <code>I2PAppContext</code></p>
<p><strong>Khám phá thư mục:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// Plugin directory</span>
</span></span><span style="display:flex;"><span>String pluginDir <span style="color:#f92672">=</span> I2PAppContext.<span style="color:#a6e22e">getGlobalContext</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">getAppDir</span>().<span style="color:#a6e22e">getAbsolutePath</span>() <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;/plugins/&#34;</span> <span style="color:#f92672">+</span> pluginName;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Or use $PLUGIN variable in clients.config args</span>
</span></span></code></pre></div><p><strong>Đánh số phiên bản:</strong> - Sử dụng phiên bản theo ngữ nghĩa (major.minor.patch) - Thêm số build phục vụ thử nghiệm (1.2.3-456) - Đảm bảo số phiên bản tăng đơn điệu qua các lần cập nhật</p>
<p><strong>Truy cập lớp router:</strong> - Nói chung nên tránh phụ thuộc vào <code>router.jar</code> - Thay vào đó, hãy dùng các API công khai trong <code>i2p.jar</code> - Trong tương lai, I2P có thể hạn chế quyền truy cập lớp router</p>
<p><strong>Ngăn ngừa sự cố JVM (trước đây):</strong> - Đã sửa trong 0.7.13-3 - Sử dụng class loader (bộ nạp lớp) đúng cách - Tránh cập nhật các tệp JAR trong phần bổ trợ đang chạy - Thiết kế để khởi động lại khi cập nhật nếu cần thiết</p>
<hr>
<h2 id="các-phần-bổ-trợ-cho-eepsite">Các phần bổ trợ cho Eepsite</h2>
<h3 id="tổng-quan-1">Tổng quan</h3>
<p>Các plugin có thể cung cấp các eepsites hoàn chỉnh với các thể hiện Jetty (máy chủ web) và I2PTunnel riêng của mình.</p>
<h3 id="kiến-trúc">Kiến trúc</h3>
<p><strong>Không được cố gắng:</strong> - Cài đặt vào eepsite hiện có - Hợp nhất với eepsite mặc định của router - Giả định chỉ có một eepsite khả dụng</p>
<p><strong>Thay vào đó:</strong> - Khởi chạy một thể hiện I2PTunnel mới (thông qua CLI (giao diện dòng lệnh)) - Khởi chạy một thể hiện Jetty mới - Cấu hình cả hai trong <code>clients.config</code></p>
<h3 id="cấu-trúc-ví-dụ">Cấu trúc ví dụ</h3>
<pre tabindex="0"><code>plugins/myeepsite/
├── plugin.config
├── clients.config          # Starts Jetty + I2PTunnel
├── eepsite/
│   ├── jetty.xml          # Requires variable substitution
│   ├── docroot/
│   ├── webapps/
│   └── logs/
└── lib/
    └── [dependencies]
</code></pre><h3 id="thay-thế-biến-trong-jettyxml">Thay thế biến trong jetty.xml</h3>
<p>Sử dụng biến <code>$PLUGIN</code> cho các đường dẫn:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;Set</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;resourceBase&#34;</span><span style="color:#f92672">&gt;</span>$PLUGIN/eepsite/docroot<span style="color:#f92672">&lt;/Set&gt;</span>
</span></span></code></pre></div><p>Router thực hiện việc thay thế trong quá trình khởi động plugin.</p>
<h3 id="ví-dụ">Ví dụ</h3>
<p>Các triển khai tham chiếu: - <strong>zzzot plugin</strong> - Trình theo dõi torrent - <strong>pebble plugin</strong> - Nền tảng blog</p>
<p>Cả hai đều có tại trang plugin của zzz (I2P-internal).</p>
<hr>
<h2 id="tích-hợp-bảng-điều-khiển-1">Tích hợp Bảng điều khiển</h2>
<h3 id="các-liên-kết-trên-thanh-tóm-tắt">Các liên kết trên Thanh tóm tắt</h3>
<p>Thêm liên kết có thể nhấp vào thanh tóm tắt của bảng điều khiển router:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkName</span><span style="color:#f92672">=</span><span style="color:#e6db74">My Plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkURL</span><span style="color:#f92672">=</span><span style="color:#e6db74">/myplugin/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkTooltip</span><span style="color:#f92672">=</span><span style="color:#e6db74">Open My Plugin Interface</span>
</span></span></code></pre></div><p>Các phiên bản đã được bản địa hóa:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkName_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Mein Plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkTooltip_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Öffne Mein Plugin Schnittstelle</span>
</span></span></code></pre></div><h3 id="biểu-tượng-bảng-điều-khiển">Biểu tượng bảng điều khiển</h3>
<p><strong>Tệp ảnh (kể từ 0.9.20):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">console-icon</span><span style="color:#f92672">=</span><span style="color:#e6db74">/myicon.png</span>
</span></span></code></pre></div><p>Đường dẫn tương đối so với <code>consoleLinkURL</code> nếu được chỉ định (kể từ 0.9.53), nếu không thì tương đối so với tên ứng dụng web.</p>
<p><strong>Biểu tượng nhúng (từ 0.9.25):</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">icon-code</span><span style="color:#f92672">=</span><span style="color:#e6db74">iVBORw0KGgoAAAANSUhEUgAAA...Base64EncodedPNG...</span>
</span></span></code></pre></div><p>Tạo bằng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>base64 -w <span style="color:#ae81ff">0</span> icon-32x32.png
</span></span></code></pre></div><p>Hoặc Java:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>java -cp i2p.jar net.i2p.data.Base64 encode icon.png
</span></span></code></pre></div><p>Yêu cầu: - 32x32 điểm ảnh - Định dạng PNG - Mã hóa Base64 (không ngắt dòng)</p>
<hr>
<h2 id="quốc-tế-hóa">Quốc tế hóa</h2>
<h3 id="gói-dịch-thuật">Gói dịch thuật</h3>
<p><strong>Đối với bản dịch cơ sở của I2P:</strong> - Đặt các tệp JAR vào <code>console/locale/</code> - Bao gồm các gói tài nguyên cho các ứng dụng I2P hiện có - Quy ước đặt tên: <code>messages_xx.properties</code> (xx = mã ngôn ngữ)</p>
<p><strong>Đối với bản dịch dành riêng cho plugin:</strong> - Bao gồm trong <code>console/webapps/*.war</code> - Hoặc bao gồm trong <code>lib/*.jar</code> - Sử dụng cách tiếp cận ResourceBundle chuẩn của Java</p>
<h3 id="chuỗi-bản-địa-hóa-trong-pluginconfig">Chuỗi bản địa hóa trong plugin.config</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">description</span><span style="color:#f92672">=</span><span style="color:#e6db74">My awesome plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Mein tolles Plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description_fr</span><span style="color:#f92672">=</span><span style="color:#e6db74">Mon plugin génial</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description_es</span><span style="color:#f92672">=</span><span style="color:#e6db74">Mi plugin increíble</span>
</span></span></code></pre></div><p>Các trường được hỗ trợ: - <code>description_xx</code> - <code>consoleLinkName_xx</code> - <code>consoleLinkTooltip_xx</code></p>
<h3 id="dịch-chủ-đề-bảng-điều-khiển">Dịch chủ đề bảng điều khiển</h3>
<p>Các chủ đề trong <code>console/themes/</code> được tự động thêm vào đường dẫn tìm kiếm chủ đề.</p>
<hr>
<h2 id="các-plugin-dành-riêng-cho-nền-tảng">Các plugin dành riêng cho nền tảng</h2>
<h3 id="cách-tiếp-cận-các-gói-tách-biệt">Cách tiếp cận các gói tách biệt</h3>
<p>Sử dụng các tên plugin khác nhau cho từng nền tảng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Windows package</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">myplugin-windows</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Linux package  </span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">myplugin-linux</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># macOS package</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">myplugin-mac</span>
</span></span></code></pre></div><h3 id="cách-tiếp-cận-thay-thế-biến">Cách tiếp cận thay thế biến</h3>
<p>Một plugin.config duy nhất với các biến theo nền tảng:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">myplugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">updateURL.su3</span><span style="color:#f92672">=</span><span style="color:#e6db74">http://myplugin.i2p/downloads/myplugin-$OS-$ARCH.su3</span>
</span></span></code></pre></div><p>Trong clients.config:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">net.i2p.apps.ShellService</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/bin/myapp-$OS-$ARCH</span>
</span></span></code></pre></div><h3 id="phát-hiện-hệ-điều-hành-trong-thời-gian-chạy">Phát hiện hệ điều hành trong thời gian chạy</h3>
<p>Cách tiếp cận trong Java cho việc thực thi có điều kiện:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String os <span style="color:#f92672">=</span> System.<span style="color:#a6e22e">getProperty</span>(<span style="color:#e6db74">&#34;os.name&#34;</span>).<span style="color:#a6e22e">toLowerCase</span>();
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (os.<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;win&#34;</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Windows-specific code</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (os.<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;nix&#34;</span>) <span style="color:#f92672">||</span> os.<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;nux&#34;</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Linux-specific code</span>
</span></span><span style="display:flex;"><span>} <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (os.<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;mac&#34;</span>)) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// macOS-specific code</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="khắc-phục-sự-cố">Khắc phục sự cố</h2>
<h3 id="các-vấn-đề-thường-gặp">Các vấn đề thường gặp</h3>
<p><strong>Plugin không khởi động:</strong> 1. Kiểm tra khả năng tương thích phiên bản I2P (<code>min-i2p-version</code>) 2. Xác minh phiên bản Java (<code>min-java-version</code>) 3. Kiểm tra nhật ký router để tìm lỗi 4. Xác minh tất cả các JAR bắt buộc trong classpath (đường dẫn lớp)</p>
<p><strong>Webapp không thể truy cập:</strong> 1. Xác nhận <code>webapps.config</code> không vô hiệu hóa webapp 2. Kiểm tra khả năng tương thích phiên bản Jetty (<code>min-jetty-version</code>) 3. Đảm bảo có <code>web.xml</code> (không hỗ trợ quét annotation (chú thích)) 4. Kiểm tra xung đột tên webapp</p>
<p><strong>Cập nhật thất bại:</strong> 1. Xác minh chuỗi phiên bản đã tăng 2. Kiểm tra chữ ký khớp với khóa ký 3. Đảm bảo tên plugin khớp với phiên bản đã cài đặt 4. Xem lại cài đặt <code>update-only</code>/<code>install-only</code></p>
<p><strong>Chương trình bên ngoài không dừng:</strong> 1. Dùng ShellService để quản lý vòng đời tự động 2. Triển khai xử lý <code>stopargs</code> đúng cách 3. Kiểm tra việc dọn dẹp tệp PID 4. Xác minh việc kết thúc tiến trình</p>
<h3 id="ghi-nhật-ký-gỡ-lỗi">Ghi nhật ký gỡ lỗi</h3>
<p>Kích hoạt ghi nhật ký gỡ lỗi trong router:</p>
<pre tabindex="0"><code>logger.record.net.i2p.router.web.ConfigPluginsHandler=DEBUG
</code></pre><p>Kiểm tra nhật ký:</p>
<pre tabindex="0"><code>~/.i2p/logs/log-router-0.txt
</code></pre><hr>
<h2 id="thông-tin-tham-khảo">Thông tin tham khảo</h2>
<h3 id="đặc-tả-chính-thức">Đặc tả chính thức</h3>
<ul>
<li><a href="../../../../vi/docs/specs/plugin/">Đặc tả Plugin</a>
</li>
<li><a href="../../../../vi/docs/specs/configuration/">Định dạng cấu hình</a>
</li>
<li><a href="../../../../vi/docs/specs/updates/">Đặc tả cập nhật</a>
</li>
<li><a href="../../../../vi/docs/specs/cryptography/">Mật mã học</a>
</li>
</ul>
<h3 id="lịch-sử-phiên-bản-i2p">Lịch sử phiên bản I2P</h3>
<p><strong>Bản phát hành hiện tại:</strong> - <strong>I2P 2.10.0</strong> (8 tháng 9 năm 2025)</p>
<p><strong>Các bản phát hành lớn kể từ 0.9.53:</strong> - 2.10.0 (Thg 9 2025) - thông báo Java 17+ - 2.9.0 (Thg 6 2025) - cảnh báo Java 17+ - 2.8.0 (Thg 10 2024) - thử nghiệm mật mã hậu lượng tử - 2.6.0 (Thg 5 2024) - chặn I2P-over-Tor - 2.4.0 (Thg 12 2023) - cải thiện bảo mật NetDB - 2.2.0 (Thg 3 2023) - điều khiển tắc nghẽn - 2.1.0 (Thg 1 2023) - cải thiện mạng - 2.0.0 (Thg 11 2022) - giao thức truyền tải SSU2 - 1.7.0/0.9.53 (Thg 2 2022) - ShellService, thay thế biến - 0.9.15 (Thg 9 2014) - giới thiệu định dạng SU3</p>
<p><strong>Đánh số phiên bản:</strong> - Dòng 0.9.x: Đến hết phiên bản 0.9.53 - Dòng 2.x: Bắt đầu từ 2.0.0 (giới thiệu SSU2)</p>
<h3 id="tài-nguyên-cho-nhà-phát-triển">Tài nguyên cho nhà phát triển</h3>
<p><strong>Mã nguồn:</strong> - Kho lưu trữ chính: <a href="https://i2pgit.org/I2P_Developers/i2p.i2p">https://i2pgit.org/I2P_Developers/i2p.i2p</a>
 - GitHub mirror (bản sao): <a href="https://github.com/i2p/i2p.i2p">https://github.com/i2p/i2p.i2p</a>
</p>
<p><strong>Ví dụ plugin:</strong> - zzzot (trình theo dõi BitTorrent) - pebble (nền tảng blog) - i2p-bote (email không máy chủ) - orchid (trình khách Tor) - seedless (trao đổi ngang hàng)</p>
<p><strong>Công cụ build:</strong> - makeplugin.sh - Sinh khóa và ký - Có trong kho i2p.scripts - Tự động hóa việc tạo và xác minh su3</p>
<h3 id="hỗ-trợ-cộng-đồng">Hỗ trợ cộng đồng</h3>
<p><strong>Diễn đàn:</strong> - <a href="https://i2pforum.net/">I2P Forum</a>
 - <a href="http://zzz.i2p/">zzz.i2p</a>
 (nội bộ I2P)</p>
<p><strong>IRC/Trò chuyện:</strong> - #i2p-dev trên OFTC - I2P IRC trong mạng</p>
<hr>
<h2 id="phụ-lục-a-ví-dụ-pluginconfig-hoàn-chỉnh">Phụ lục A: Ví dụ plugin.config hoàn chỉnh</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Required fields</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">example-plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">signer</span><span style="color:#f92672">=</span><span style="color:#e6db74">developer@mail.i2p</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">version</span><span style="color:#f92672">=</span><span style="color:#e6db74">1.2.3</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Update configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">updateURL.su3</span><span style="color:#f92672">=</span><span style="color:#e6db74">http://example.i2p/plugins/example-$OS-$ARCH.su3</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">min-i2p-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">2.0.0</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">min-java-version</span><span style="color:#f92672">=</span><span style="color:#e6db74">17</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Display information</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">date</span><span style="color:#f92672">=</span><span style="color:#e6db74">1698796800000</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">author</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Developer &lt;developer@mail.i2p&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">websiteURL</span><span style="color:#f92672">=</span><span style="color:#e6db74">http://example.i2p/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">license</span><span style="color:#f92672">=</span><span style="color:#e6db74">Apache-2.0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description</span><span style="color:#f92672">=</span><span style="color:#e6db74">An example I2P plugin demonstrating best practices</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Ein Beispiel-I2P-Plugin zur Demonstration bewährter Praktiken</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">description_es</span><span style="color:#f92672">=</span><span style="color:#e6db74">Un plugin I2P de ejemplo que demuestra las mejores prácticas</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Console integration</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkName</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkName_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Beispiel-Plugin</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkURL</span><span style="color:#f92672">=</span><span style="color:#e6db74">/example/</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkTooltip</span><span style="color:#f92672">=</span><span style="color:#e6db74">Open the Example Plugin control panel</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">consoleLinkTooltip_de</span><span style="color:#f92672">=</span><span style="color:#e6db74">Öffne das Beispiel-Plugin-Kontrollfeld</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console-icon</span><span style="color:#f92672">=</span><span style="color:#e6db74">/icon.png</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Installation behavior</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dont-start-at-install</span><span style="color:#f92672">=</span><span style="color:#e6db74">false</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">router-restart-required</span><span style="color:#f92672">=</span><span style="color:#e6db74">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Platform requirements (informational)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">required-platform-OS</span><span style="color:#f92672">=</span><span style="color:#e6db74">All platforms supported</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">other-requirements</span><span style="color:#f92672">=</span><span style="color:#e6db74">Requires 512MB free disk space</span>
</span></span></code></pre></div><hr>
<h2 id="phụ-lục-b-ví-dụ-clientsconfig-hoàn-chỉnh">Phụ lục B: Ví dụ clients.config hoàn chỉnh</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Main service client (managed)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">com.example.plugin.MainService</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Plugin Main Service</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.delay</span><span style="color:#f92672">=</span><span style="color:#e6db74">30</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/config.properties --port=7656</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.stopargs</span><span style="color:#f92672">=</span><span style="color:#e6db74">shutdown</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.uninstallargs</span><span style="color:#f92672">=</span><span style="color:#e6db74">cleanup</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.0.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/example.jar,$I2P/lib/i2p.jar,$I2P/lib/mstreaming.jar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># External program via ShellService</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.1.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">net.i2p.apps.ShellService</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.1.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Native Helper</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.1.delay</span><span style="color:#f92672">=</span><span style="color:#e6db74">35</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.1.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/bin/helper-$OS-$ARCH --config $PLUGIN/helper.conf</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.1.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$I2P/lib/i2p.jar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Jetty eepsite</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">net.i2p.jetty.JettyStart</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Eepsite</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.delay</span><span style="color:#f92672">=</span><span style="color:#e6db74">40</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/eepsite/jetty.xml</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.stopargs</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/eepsite/jetty.xml stop</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.2.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/example-web.jar,$I2P/lib/i2p.jar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># I2PTunnel for eepsite</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.3.main</span><span style="color:#f92672">=</span><span style="color:#e6db74">net.i2p.i2ptunnel.TunnelControllerGroup</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.3.name</span><span style="color:#f92672">=</span><span style="color:#e6db74">Example Eepsite Tunnel</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.3.delay</span><span style="color:#f92672">=</span><span style="color:#e6db74">45</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">clientApp.3.args</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/eepsite/i2ptunnel.config</span>
</span></span></code></pre></div><hr>
<h2 id="phụ-lục-c-ví-dụ-webappsconfig-đầy-đủ">Phụ lục C: Ví dụ webapps.config đầy đủ</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#75715e"># Disable autostart for admin webapp</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webapps.example-admin.startOnLoad</span><span style="color:#f92672">=</span><span style="color:#e6db74">false</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Main webapp with classpath</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webapps.example.startOnLoad</span><span style="color:#f92672">=</span><span style="color:#e6db74">true</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">webapps.example.classpath</span><span style="color:#f92672">=</span><span style="color:#e6db74">$PLUGIN/lib/example-core.jar,$PLUGIN/lib/commons-utils.jar,$I2P/lib/jstl.jar,$I2P/lib/standard.jar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Legacy support (pre-0.7.12-9)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">plugin.example.startOnLoad</span><span style="color:#f92672">=</span><span style="color:#e6db74">true</span>
</span></span></code></pre></div><hr>
<h2 id="phụ-lục-d-danh-sách-kiểm-tra-chuyển-đổi-0953-đến-2100">Phụ lục D: Danh sách kiểm tra chuyển đổi (0.9.53 đến 2.10.0)</h2>
<h3 id="các-thay-đổi-bắt-buộc">Các thay đổi bắt buộc</h3>
<ul>
<li>
<p><input disabled="" type="checkbox"> <strong>Loại bỏ nén Pack200 khỏi quy trình xây dựng</strong></p>
<ul>
<li>Loại bỏ các tác vụ pack200 khỏi các tập lệnh Ant/Maven/Gradle</li>
<li>Phát hành lại các plugin hiện có mà không dùng pack200</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Rà soát các yêu cầu về phiên bản Java</strong></p>
<ul>
<li>Cân nhắc yêu cầu Java 11+ cho các tính năng mới</li>
<li>Lên kế hoạch cho yêu cầu Java 17+ trong I2P 2.11.0</li>
<li>Cập nhật <code>min-java-version</code> trong plugin.config</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Cập nhật tài liệu</strong></p>
<ul>
<li>Loại bỏ các tham chiếu tới Pack200</li>
<li>Cập nhật yêu cầu phiên bản Java</li>
<li>Cập nhật các tham chiếu phiên bản I2P (0.9.x → 2.x)</li>
</ul>
</li>
</ul>
<h3 id="các-thay-đổi-được-khuyến-nghị">Các thay đổi được khuyến nghị</h3>
<ul>
<li>
<p><input disabled="" type="checkbox"> <strong>Tăng cường chữ ký số</strong></p>
<ul>
<li>Chuyển đổi từ XPI2P sang SU3 nếu chưa thực hiện</li>
<li>Sử dụng khóa RSA-4096 cho các plugin mới</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Tận dụng các tính năng mới (nếu dùng 0.9.53+)</strong></p>
<ul>
<li>Sử dụng biến <code>$OS</code> / <code>$ARCH</code> cho các cập nhật dành riêng cho nền tảng</li>
<li>Sử dụng ShellService (dịch vụ Shell) cho các chương trình bên ngoài</li>
<li>Sử dụng classpath của webapp đã được cải tiến (hoạt động với bất kỳ warname (tên WAR) nào)</li>
</ul>
</li>
<li>
<p><input disabled="" type="checkbox"> <strong>Kiểm tra khả năng tương thích</strong></p>
<ul>
<li>Kiểm tra trên I2P 2.10.0</li>
<li>Xác minh với Java 8, 11, 17</li>
<li>Kiểm tra trên Windows, Linux, macOS</li>
</ul>
</li>
</ul>
<h3 id="các-cải-tiến-tùy-chọn">Các cải tiến tùy chọn</h3>
<ul>
<li><input disabled="" type="checkbox"> Triển khai đúng cách ServletContextListener (trình lắng nghe ngữ cảnh Servlet)</li>
<li><input disabled="" type="checkbox"> Thêm mô tả được bản địa hóa</li>
<li><input disabled="" type="checkbox"> Cung cấp biểu tượng cho bảng điều khiển</li>
<li><input disabled="" type="checkbox"> Cải thiện xử lý khi tắt</li>
<li><input disabled="" type="checkbox"> Thêm ghi nhật ký toàn diện</li>
<li><input disabled="" type="checkbox"> Viết các bài kiểm thử tự động</li>
</ul>

                </article>

                
                <nav class="page-nav">
                    
                        <a href="../../../../vi/docs/specs/ecies-hybrid/" class="page-nav-link prev">
                            <span class="nav-label">← Previous</span>
                            <span class="nav-title">ECIES-X25519-AEAD-Ratchet Hybrid Encryption (lược đồ mã hóa lai sử dụng ECIES với X25519, AEAD và ratchet)</span>
                        </a>
                    
                    
                        <a href="../../../../vi/docs/specs/filter-format/" class="page-nav-link next">
                            <span class="nav-label">Next →</span>
                            <span class="nav-title">Định dạng Bộ lọc Truy cập</span>
                        </a>
                    
                </nav>

                
                <div class="docs-feedback">
                    <p>Was this page helpful?</p>
                    <div class="feedback-buttons" id="feedback-buttons">
                        <button class="feedback-btn" id="feedback-yes">👍 Yes</button>
                        <button class="feedback-btn" id="feedback-no">👎 No</button>
                    </div>

                    
                    <div class="feedback-form-container" id="feedback-form-container" style="display: none;">
                        <p class="feedback-form-title">We're sorry to hear that. How can we improve this page?</p>
                        <form id="feedback-form">
                            <div class="form-group">
                                <label for="feedback-email">Email (optional - if you'd like a response)</label>
                                <input type="email" id="feedback-email" name="email" placeholder="your@email.com">
                            </div>
                            <div class="form-group">
                                <label for="feedback-message">Feedback *</label>
                                <textarea id="feedback-message" name="message" rows="4" required placeholder="Tell us what we can improve..."></textarea>
                            </div>
                            <button type="submit" class="btn-submit-feedback" id="feedback-submit-btn">
                                <span class="btn-text">Submit Feedback</span>
                                <span class="btn-loading" style="display: none;">Sending...</span>
                            </button>
                        </form>
                    </div>

                    
                    <div class="feedback-message" id="feedback-success" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/>
                        </svg>
                        <span id="feedback-success-text">Thanks for your feedback!</span>
                    </div>
                    <div class="feedback-message feedback-error" id="feedback-error" style="display: none;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <circle cx="12" cy="12" r="10" stroke-width="2"/>
                            <path d="M12 8v4M12 16h.01" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        <span id="feedback-error-text">Something went wrong. Please try again.</span>
                    </div>

                    <p class="feedback-note">
                        Found an issue? <a href="https://gitlab.com/stormycloud-group/i-2-p-www-v-2/-/blob/main/hugo-site/content/vi/docs/specs/plugin.md?ref_type=heads" target="_blank">Edit this page on GitLab</a>
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.docs-page {
    min-height: 100vh;
    padding: var(--spacing-xl) 0;
}

.breadcrumbs {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    margin-bottom: var(--spacing-lg);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.breadcrumbs a {
    color: var(--color-text-muted);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.breadcrumbs a:hover {
    color: var(--color-primary);
}

.separator {
    color: var(--color-border);
}

.current {
    color: var(--color-text);
}

 
.translation-disclaimer {
    background: #fef3c7;
    border: 1px solid #f59e0b;
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    margin-bottom: var(--spacing-lg);
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--spacing-md);
    flex-wrap: wrap;
}

.dark .translation-disclaimer {
    background: #78350f;
    border-color: #d97706;
}

.disclaimer-message {
    color: #92400e;
    font-size: 0.875rem;
}

.dark .disclaimer-message {
    color: #fde047;
}

.disclaimer-link {
    color: #92400e;
    font-weight: 600;
    text-decoration: underline;
    white-space: nowrap;
}

.dark .disclaimer-link {
    color: #fde047;
}

 
.article-header {
    margin-bottom: var(--spacing-2xl);
}

.article-title {
    font-size: 2.5rem;
    margin: 0 0 var(--spacing-md) 0;
    color: var(--color-text);
}

.article-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin-bottom: var(--spacing-md);
}

.article-meta {
    display: flex;
    gap: var(--spacing-lg);
    flex-wrap: wrap;
}

.meta-item {
    display: flex;
    align-items: center;
    gap: var(--spacing-xs);
    font-size: 0.875rem;
    color: var(--color-text-muted);
}

.meta-item svg {
    color: var(--color-primary);
}

 
.docs-layout {
    display: block;
}

.docs-layout--with-toc {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: var(--spacing-2xl);
    align-items: start;
}

 
.docs-toc-sidebar {
    position: sticky;
    top: 100px;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
}

.toc-nav {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-md);
}

.toc-header {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    font-weight: 700;
    font-size: 0.875rem;
    color: var(--color-text);
    padding-bottom: var(--spacing-md);
    margin-bottom: var(--spacing-md);
    border-bottom: 1px solid var(--color-border);
}

.toc-content {
    max-height: calc(100vh - 250px);
    overflow-y: auto;
}

.toc-content::-webkit-scrollbar {
    width: 4px;
}

.toc-content::-webkit-scrollbar-track {
    background: transparent;
}

.toc-content::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 2px;
}

.toc-content::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-muted);
}

.toc-nav ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}

.toc-nav li {
    margin-bottom: 0.25rem;
}

.toc-nav ul ul {
    padding-left: var(--spacing-md);
    margin-top: 0.25rem;
}

.toc-nav a {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: 0.8125rem;
    display: block;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
    line-height: 1.4;
}

.toc-nav a:hover {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
}

 
.docs-main {
    min-width: 0;
    max-width: 900px;
}

 
.article-content {
    line-height: 1.8;
    color: var(--color-text);
}

.article-content h2 {
    margin-top: var(--spacing-2xl);
    margin-bottom: var(--spacing-md);
    font-size: 1.75rem;
    scroll-margin-top: 100px;
}

.article-content h3 {
    margin-top: var(--spacing-xl);
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
    scroll-margin-top: 100px;
}

.article-content h4 {
    margin-top: var(--spacing-lg);
    margin-bottom: var(--spacing-xs);
    font-size: 1.125rem;
    scroll-margin-top: 100px;
}

.article-content p {
    margin-bottom: var(--spacing-md);
}

.article-content ul,
.article-content ol {
    margin-bottom: var(--spacing-md);
    padding-left: var(--spacing-xl);
}

.article-content li {
    margin-bottom: var(--spacing-xs);
}

.article-content code {
    background: var(--color-bg-secondary);
    padding: 0.125rem 0.375rem;
    border-radius: var(--radius-sm);
    font-size: 0.875em;
    font-family: 'Courier New', monospace;
}

.article-content pre {
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: var(--spacing-md);
    overflow-x: auto;
    margin-bottom: var(--spacing-md);
}

.article-content pre code {
    background: none;
    padding: 0;
}

.article-content img {
    max-width: 100%;
    height: auto;
    border-radius: var(--radius-md);
    border: 1px solid var(--color-border);
    margin: var(--spacing-lg) 0;
    display: block;
}

.article-content a {
    color: var(--color-primary);
    text-decoration: none;
    border-bottom: 1px solid transparent;
    transition: border-color var(--transition-fast);
}

.article-content a:hover {
    border-bottom-color: var(--color-primary);
}

 
.page-nav {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: var(--spacing-md);
    margin-top: var(--spacing-2xl);
    padding-top: var(--spacing-xl);
    border-top: 1px solid var(--color-border);
}

.page-nav-link {
    display: flex;
    flex-direction: column;
    padding: var(--spacing-md);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    text-decoration: none;
    transition: all var(--transition-fast);
}

.page-nav-link:hover {
    border-color: var(--color-primary);
    box-shadow: var(--shadow-md);
}

.page-nav-link.next {
    text-align: right;
}

.nav-label {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-bottom: var(--spacing-xs);
}

.nav-title {
    font-weight: 600;
    color: var(--color-text);
}

 
.docs-feedback {
    margin-top: var(--spacing-2xl);
    padding: var(--spacing-lg);
    background: var(--color-bg-secondary);
    border-radius: var(--radius-md);
    text-align: center;
}

.feedback-buttons {
    display: flex;
    gap: var(--spacing-md);
    justify-content: center;
    margin: var(--spacing-md) 0;
}

.feedback-btn {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.feedback-btn:hover {
    border-color: var(--color-primary);
    background: var(--color-primary);
    color: white;
}

.feedback-note {
    font-size: 0.875rem;
    color: var(--color-text-muted);
    margin-top: var(--spacing-md);
}

.feedback-note a {
    color: var(--color-primary);
    text-decoration: none;
}

.feedback-note a:hover {
    text-decoration: underline;
}

 
.feedback-form-container {
    margin-top: var(--spacing-lg);
    padding: var(--spacing-lg);
    background: var(--color-bg);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    text-align: left;
}

.feedback-form-title {
    font-weight: 600;
    margin-bottom: var(--spacing-md);
    color: var(--color-text);
}

.form-group {
    margin-bottom: var(--spacing-md);
}

.form-group label {
    display: block;
    font-size: 0.875rem;
    font-weight: 600;
    margin-bottom: var(--spacing-xs);
    color: var(--color-text);
}

.form-group input[type="email"],
.form-group textarea {
    width: 100%;
    padding: var(--spacing-sm);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-md);
    background: var(--color-bg);
    color: var(--color-text);
    font-family: inherit;
    font-size: 0.9375rem;
    transition: border-color var(--transition-fast);
}

.form-group input[type="email"]:focus,
.form-group textarea:focus {
    outline: none;
    border-color: var(--color-primary);
}

.form-group textarea {
    resize: vertical;
    min-height: 100px;
}

.btn-submit-feedback {
    padding: var(--spacing-sm) var(--spacing-lg);
    background: var(--color-primary);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    font-weight: 600;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.btn-submit-feedback:hover:not(:disabled) {
    background: var(--color-primary-dark);
    transform: translateY(-1px);
}

.btn-submit-feedback:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

 
.feedback-message {
    display: flex;
    align-items: center;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: #d1fae5;
    color: #065f46;
    border-radius: var(--radius-md);
    margin-top: var(--spacing-md);
}

.feedback-message.feedback-error {
    background: #fee2e2;
    color: #991b1b;
}

.feedback-message svg {
    flex-shrink: 0;
}

 
@media (max-width: 1024px) {
    .docs-layout--with-toc {
        grid-template-columns: 1fr;
    }

    .docs-toc-sidebar {
        position: static;
        max-height: none;
        margin-bottom: var(--spacing-xl);
    }

    .toc-content {
        max-height: 300px;
    }
}

@media (max-width: 768px) {
    .article-title {
        font-size: 1.75rem;
    }
}
</style>



<script>
document.addEventListener('DOMContentLoaded', function() {
    const tocLinks = document.querySelectorAll('.toc-nav a');
    const headings = [];

    tocLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href && href.startsWith('#')) {
            const heading = document.getElementById(href.slice(1));
            if (heading) {
                headings.push({ element: heading, link: link });
            }
        }
    });

    function updateActiveLink() {
        const scrollPos = window.scrollY + 120;
        let activeIndex = 0;

        for (let i = 0; i < headings.length; i++) {
            if (headings[i].element.offsetTop <= scrollPos) {
                activeIndex = i;
            }
        }

        tocLinks.forEach(link => link.classList.remove('active'));
        if (headings[activeIndex]) {
            headings[activeIndex].link.classList.add('active');
        }
    }

    window.addEventListener('scroll', updateActiveLink);
    updateActiveLink();
});
</script>
<style>
.toc-nav a.active {
    color: var(--color-primary);
    background: var(--color-bg-tertiary);
    font-weight: 600;
}
</style>



<script>
(function() {
    'use strict';
    
    
    let baseUrl = window.feedbackBaseUrl;
    if (!baseUrl) {
        const hostname = window.location.hostname;
        
        if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
            baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
        } else if (hostname.endsWith('.onion')) {
            baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
        } else {
            baseUrl = 'https://feedback.i2p.net';
        }
    }
    
    const script = document.createElement('script');
    script.src = baseUrl + '/widgets/docs-feedback.js';
    script.async = true;
    script.onerror = function() {
        console.error('[Docs Feedback] Failed to load docs-feedback.js from:', baseUrl);
    };
    document.body.appendChild(script);
})();
</script>


    </main>

    <footer class="site-footer">
    <div class="container">
        <div class="footer-grid">
            <div class="footer-col footer-brand">
                <img src="../../../../images/i2plogo_lightmode.svg" alt="I2P Logo" class="footer-logo logo-light" loading="lazy" decoding="async">
                <img src="../../../../images/i2plogo_darkmode.svg" alt="I2P Logo" class="footer-logo logo-dark" loading="lazy" decoding="async">
                <p class="footer-tagline">Privacy. Security. Freedom.</p>
                <p class="footer-description">The Invisible Internet Project - A privacy-focused, anonymous network layer</p>

                <div class="footer-social-newsletter">
                    <div class="social-links">
                        <a href="https://mastodon.social/@i2p" target="_blank" rel="noopener" aria-label="Mastodon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M21.327 8.566c0-4.339-2.843-5.61-2.843-5.61-1.433-.658-3.894-.935-6.451-.956h-.063c-2.557.021-5.016.298-6.45.956 0 0-2.843 1.272-2.843 5.61 0 .993-.019 2.181.012 3.441.103 4.243.778 8.425 4.701 9.463 1.809.479 3.362.579 4.612.51 2.268-.126 3.541-.809 3.541-.809l-.075-1.646s-1.621.511-3.441.449c-1.804-.062-3.707-.194-3.999-2.409a4.523 4.523 0 0 1-.04-.621s1.77.433 4.014.536c1.372.063 2.658-.08 3.965-.236 2.506-.299 4.688-1.843 4.962-3.254.434-2.223.398-5.424.398-5.424zm-3.353 5.59h-2.081V9.057c0-1.075-.452-1.62-1.357-1.62-1 0-1.501.647-1.501 1.927v2.791h-2.069V9.364c0-1.28-.501-1.927-1.502-1.927-.905 0-1.357.546-1.357 1.62v5.099H6.026V8.903c0-1.074.273-1.927.823-2.558.566-.631 1.307-.955 2.228-.955 1.065 0 1.872.409 2.405 1.228l.518.869.519-.869c.533-.819 1.34-1.228 2.405-1.228.92 0 1.662.324 2.228.955.549.631.822 1.484.822 2.558v5.253z"/>
                            </svg>
                        </a>
                        <a href="https://twitter.com/GetI2P" target="_blank" rel="noopener" aria-label="Twitter">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                            </svg>
                        </a>
                        <a href="https://old.reddit.com/r/i2p" target="_blank" rel="noopener" aria-label="Reddit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/>
                            </svg>
                        </a>
                        <a href="https://signal.group/#CjQKIOSUTtxlhbumAKcRsthPFkxkTUrkWcX39bbN6njLEgAIEhCTNsR0KDuiehAXZnkt42v5" target="_blank" rel="noopener" aria-label="Signal" class="signal-link">
                            <img src="../../../../images/Signal-Logo-Black.svg" alt="Signal" class="signal-logo signal-logo-light" loading="lazy" decoding="async">
                            <img src="../../../../images/Signal-Logo-White.svg" alt="Signal" class="signal-logo signal-logo-dark" loading="lazy" decoding="async">
                        </a>
                    </div>

                    
                    <div class="footer-newsletter-inline">
                        <p class="newsletter-description">Cập nhật tin tức I2P:</p>
                        <form action="https://feedback.i2p.net/api/mailing-list/subscribe" method="POST" class="newsletter-form">
                            <input type="email" name="email" placeholder="Nhập email của bạn" required>
                            <button type="submit">Đăng ký</button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="footer-col">
                <h3>Liên kết nhanh</h3>
                <ul>
                    <li><a href="../../../../vi/financial-support/">Quyên góp</a></li>
                    <li><a href="../../../../vi/docs/overview/intro/">Giới thiệu I2P</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Cộng đồng</h3>
                <ul>
                    <li><a href="../../../../vi/get-involved/">Tham Gia</a></li>
                    <li><a href="../../../../vi/blog/">Blog</a></li>
                    <li><a href="http://i2pforum.net/" target="_blank" rel="noopener">Diễn đàn chính thức</a></li>
                    <li><a href="../../../../vi/contact/">Liên hệ</a></li>
                </ul>
            </div>

            <div class="footer-col">
                <h3>Tài nguyên</h3>
                <ul>
                    <li><a href="https://i2p-metrics.np-tokumei.net/" target="_blank" rel="noopener">Thống kê I2P</a></li>
                    <li><a href="../../../../vi/papers/">Nghiên cứu</a></li>
                    <li><a href="https://i2pgit.org/" target="_blank" rel="noopener">GitLab</a></li>
                    <li><a href="https://www.stormycloud.org/" target="_blank" rel="noopener">StormyCloud</a></li>
                </ul>
            </div>
        </div>

        <div class="footer-bottom">
            <p class="copyright">&copy; 2025 Dự án Internet Vô hình. Được cấp phép theo Creative Commons.</p>
            <div class="footer-links">
                <a href="../../../../vi/privacy/">Quyền riêng tư</a>
                <a href="../../../../vi/terms/">Điều khoản</a>
                <a href="../../../../vi/about/media/">Báo chí</a>
            </div>
        </div>
    </div>
</footer>


    
    
<div class="modal-overlay" id="poll">
    <div class="modal-content poll-modal-content">
        <a href="#" class="modal-close" aria-label="Đóng">
            <span aria-hidden="true">&times;</span>
        </a>

        <div class="modal-header">
            <h2>Thăm dò ý kiến cộng đồng</h2>
            <p class="modal-subtitle">Chúng tôi rất muốn nghe ý kiến từ bạn</p>
        </div>

        <div class="modal-body">
            
            <iframe 
                id="poll-iframe"
                data-poll-id="2"
                data-api-url="https://feedback.i2p.net"
                frameborder="0"
                scrolling="no"
                style="width: 100%; border: none; min-height: 400px;">
            </iframe>
        </div>

        <div class="modal-footer">
            <p class="modal-disclaimer">
                Phiếu bầu của bạn giúp định hình tương lai của I2P.
            </p>
        </div>
    </div>
</div>


<script>
(function() {
    const iframe = document.getElementById('poll-iframe');
    if (!iframe) return;
    
    const hostname = window.location.hostname;
    let apiUrl = 'https://feedback.i2p.net';
    const pollId = iframe.getAttribute('data-poll-id') || '1';

    
    if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
        apiUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
    }
    
    else if (hostname.endsWith('.onion')) {
        apiUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
    }

    
    const pollUrl = apiUrl + '/widgets/poll.html?poll_id=' + encodeURIComponent(pollId) + '&api_url=' + encodeURIComponent(apiUrl);
    iframe.src = pollUrl;
})();
</script>



    
    



    
    <script>
        (function () {
            'use strict';
            var hostname = window.location.hostname;
            var baseUrl;

            
            if (hostname.endsWith('.b32.i2p') || hostname.endsWith('.i2p')) {
                baseUrl = 'http://5kwyynf3eetgqa2nors6ctwo7doi7yu73k7uvypy5eqmm326zkiq.b32.i2p';
            } else if (hostname.endsWith('.onion')) {
                baseUrl = 'http://gfonxmohvarpmocsvllscsuszdu5rikipm6innvcwq4vpng7zzqmmfyd.onion';
            } else {
                baseUrl = 'https://feedback.i2p.net';
            }

            window.feedbackBaseUrl = baseUrl;

            
            document.querySelectorAll('[data-api-url]').forEach(function (widget) {
                widget.setAttribute('data-api-url', baseUrl);
            });

            
            document.write('<link rel="stylesheet" href="' + baseUrl + '/widgets/styles.css">');
            
        })();
    </script>

    

    
    
    

    

</body>

</html>
{{ define "main" }}
<div class="docs-container">
  <!-- Sidebar Navigation -->
  <aside class="docs-sidebar">
    <nav class="docs-nav">
      <div class="docs-nav-section">
        <h3 class="docs-nav-title">Getting Started</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#overview" class="docs-nav-link">Overview</a></li>
          <li><a href="{{ .RelPermalink }}#introduction" class="docs-nav-link">Introduction to I2P</a></li>
          <li><a href="{{ .RelPermalink }}#technical-intro" class="docs-nav-link">Technical Introduction</a></li>
          <li><a href="{{ .RelPermalink }}#threat-model" class="docs-nav-link">Threat Model</a></li>
        </ul>
      </div>

      <div class="docs-nav-section">
        <h3 class="docs-nav-title">User Guides</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#installation" class="docs-nav-link">Installation</a></li>
          <li><a href="{{ .RelPermalink }}#configuration" class="docs-nav-link">Configuration</a></li>
          <li><a href="{{ .RelPermalink }}#applications" class="docs-nav-link">Applications</a></li>
          <li><a href="{{ .RelPermalink }}#troubleshooting" class="docs-nav-link">Troubleshooting</a></li>
        </ul>
      </div>

      <div class="docs-nav-section">
        <h3 class="docs-nav-title">Developer Resources</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#api-overview" class="docs-nav-link">API Overview</a></li>
          <li><a href="{{ .RelPermalink }}#sam" class="docs-nav-link">SAM Protocol</a></li>
          <li><a href="{{ .RelPermalink }}#i2cp" class="docs-nav-link">I2CP Protocol</a></li>
          <li><a href="{{ .RelPermalink }}#streaming" class="docs-nav-link">Streaming API</a></li>
          <li><a href="{{ .RelPermalink }}#datagrams" class="docs-nav-link">Datagrams</a></li>
        </ul>
      </div>

      <div class="docs-nav-section">
        <h3 class="docs-nav-title">Technical Specifications</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#protocol-stack" class="docs-nav-link">Protocol Stack</a></li>
          <li><a href="{{ .RelPermalink }}#tunnels" class="docs-nav-link">Tunnel System</a></li>
          <li><a href="{{ .RelPermalink }}#netdb" class="docs-nav-link">Network Database</a></li>
          <li><a href="{{ .RelPermalink }}#transport" class="docs-nav-link">Transport Layer</a></li>
          <li><a href="{{ .RelPermalink }}#cryptography" class="docs-nav-link">Cryptography</a></li>
        </ul>
      </div>

      <div class="docs-nav-section">
        <h3 class="docs-nav-title">Advanced Topics</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#plugins" class="docs-nav-link">Plugins</a></li>
          <li><a href="{{ .RelPermalink }}#embedding" class="docs-nav-link">Embedding I2P</a></li>
          <li><a href="{{ .RelPermalink }}#reseeding" class="docs-nav-link">Reseeding</a></li>
          <li><a href="{{ .RelPermalink }}#performance" class="docs-nav-link">Performance</a></li>
        </ul>
      </div>

      <div class="docs-nav-section">
        <h3 class="docs-nav-title">Community</h3>
        <ul class="docs-nav-list">
          <li><a href="{{ .RelPermalink }}#contributing" class="docs-nav-link">Contributing</a></li>
          <li><a href="{{ .RelPermalink }}#research" class="docs-nav-link">Research Papers</a></li>
          <li><a href="{{ .RelPermalink }}#meetings" class="docs-nav-link">Meeting Logs</a></li>
        </ul>
      </div>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="docs-main">
    <div class="docs-content">
      {{ .Content }}

      <!-- Document Sections -->
      <div class="docs-sections">
        <!-- Overview Section -->
        <section id="overview" class="docs-section">
          <h2>Documentation Overview</h2>
          <p>Welcome to the I2P documentation. This comprehensive guide covers everything from basic usage to advanced development with the Invisible Internet Project.</p>

          <div class="docs-grid">
            <div class="docs-card">
              <h3>üöÄ Quick Start</h3>
              <p>New to I2P? Start here with the basics of installation and configuration.</p>
              <a href="#installation" class="docs-link">Get Started ‚Üí</a>
            </div>

            <div class="docs-card">
              <h3>üë• User Guides</h3>
              <p>Learn how to use I2P for anonymous browsing, hosting, and communication.</p>
              <a href="#user-guides" class="docs-link">User Guides ‚Üí</a>
            </div>

            <div class="docs-card">
              <h3>üíª Developers</h3>
              <p>Build applications on I2P using our APIs and development tools.</p>
              <a href="#developer-resources" class="docs-link">Developer Docs ‚Üí</a>
            </div>

            <div class="docs-card">
              <h3>üîß Technical</h3>
              <p>Deep dive into I2P's architecture, protocols, and technical specifications.</p>
              <a href="#technical-specs" class="docs-link">Technical Docs ‚Üí</a>
            </div>
          </div>
        </section>

        <!-- Introduction Section -->
        <section id="introduction" class="docs-section">
          <h2>Introduction to I2P</h2>
          <p>I2P (Invisible Internet Project) is a decentralized, privacy-focused network that allows people to communicate and share information anonymously. It works by routing data through multiple encrypted layers across volunteer-operated nodes, hiding both the sender's and receiver's locations.</p>

          <div class="docs-features">
            <div class="feature-item">
              <h4>üõ°Ô∏è Privacy First</h4>
              <p>End-to-end encryption with multiple layers protects your communication from surveillance.</p>
            </div>
            <div class="feature-item">
              <h4>üåê Decentralized</h4>
              <p>No central points of failure or control. The network is maintained by volunteers worldwide.</p>
            </div>
            <div class="feature-item">
              <h4>üîÑ Garlic Routing</h4>
              <p>Advanced routing technology that bundles and encrypts messages for maximum anonymity.</p>
            </div>
            <div class="feature-item">
              <h4>‚ö° High Performance</h4>
              <p>Optimized for speed while maintaining strong privacy guarantees.</p>
            </div>
          </div>
        </section>

        <!-- User Guides Section -->
        <section id="user-guides" class="docs-section">
          <h2>User Guides</h2>

          <div class="guide-list">
            <div class="guide-item">
              <h3>Installing I2P</h3>
              <p>Step-by-step installation instructions for Windows, macOS, Linux, and mobile devices.</p>
              <div class="guide-meta">
                <span class="difficulty beginner">Beginner</span>
                <span class="time">15 min</span>
              </div>
            </div>

            <div class="guide-item">
              <h3>Basic Configuration</h3>
              <p>Configure your I2P router for optimal performance and security.</p>
              <div class="guide-meta">
                <span class="difficulty beginner">Beginner</span>
                <span class="time">10 min</span>
              </div>
            </div>

            <div class="guide-item">
              <h3>Browsing Anonymously</h3>
              <p>Configure your browser to use I2P for anonymous web browsing.</p>
              <div class="guide-meta">
                <span class="difficulty beginner">Beginner</span>
                <span class="time">5 min</span>
              </div>
            </div>

            <div class="guide-item">
              <h3>Hosting I2P Services</h3>
              <p>Learn how to host websites, services, and applications on I2P.</p>
              <div class="guide-meta">
                <span class="difficulty intermediate">Intermediate</span>
                <span class="time">30 min</span>
              </div>
            </div>
          </div>
        </section>

        <!-- Developer Resources Section -->
        <section id="developer-resources" class="docs-section">
          <h2>Developer Resources</h2>

          <div class="api-grid">
            <div class="api-card">
              <div class="api-header">
                <h3>SAM v3</h3>
                <span class="api-status stable">Stable</span>
              </div>
              <p>Simple Application Interface for building I2P applications in any language.</p>
              <div class="api-languages">
                <span class="lang">Java</span>
                <span class="lang">Python</span>
                <span class="lang">C++</span>
                <span class="lang">Go</span>
                <span class="lang">+more</span>
              </div>
              <a href="#sam" class="api-link">View Documentation ‚Üí</a>
            </div>

            <div class="api-card">
              <div class="api-header">
                <h3>I2CP</h3>
                <span class="api-status advanced">Advanced</span>
              </div>
              <p>I2P Control Protocol for direct router communication (Java applications).</p>
              <div class="api-languages">
                <span class="lang">Java</span>
              </div>
              <a href="#i2cp" class="api-link">View Documentation ‚Üí</a>
            </div>

            <div class="api-card">
              <div class="api-header">
                <h3>Streaming API</h3>
                <span class="api-status stable">Stable</span>
              </div>
              <p>Reliable, ordered data transmission for TCP-like applications.</p>
              <div class="api-languages">
                <span class="lang">Java</span>
                <span class="lang">SAM</span>
              </div>
              <a href="#streaming" class="api-link">View Documentation ‚Üí</a>
            </div>

            <div class="api-card">
              <div class="api-header">
                <h3>Datagrams</h3>
                <span class="api-status stable">Stable</span>
              </div>
              <p>Fast, unreliable messaging for real-time applications.</p>
              <div class="api-languages">
                <span class="lang">Java</span>
                <span class="lang">SAM</span>
              </div>
              <a href="#datagrams" class="api-link">View Documentation ‚Üí</a>
            </div>
          </div>
        </section>

        <!-- Technical Specifications Section -->
        <section id="technical-specs" class="docs-section">
          <h2>Technical Specifications</h2>

          <div class="spec-timeline">
            <div class="spec-layer" data-layer="application">
              <h3>Application Layer</h3>
              <div class="spec-items">
                <div class="spec-item">I2PTunnel</div>
                <div class="spec-item">HTTP Proxy</div>
                <div class="spec-item">SOCKS Proxy</div>
                <div class="spec-item">SAM Bridge</div>
              </div>
            </div>

            <div class="spec-layer" data-layer="transport">
              <h3>Transport Layer</h3>
              <div class="spec-items">
                <div class="spec-item">Streaming</div>
                <div class="spec-item">Datagrams</div>
                <div class="spec-item">Reliable</div>
                <div class="spec-item">Anonymous</div>
              </div>
            </div>

            <div class="spec-layer" data-layer="routing">
              <h3>Routing Layer</h3>
              <div class="spec-items">
                <div class="spec-item">Garlic Routing</div>
                <div class="spec-item">Tunnel Management</div>
                <div class="spec-item">Peer Selection</div>
                <div class="spec-item">Load Balancing</div>
              </div>
            </div>

            <div class="spec-layer" data-layer="network">
              <h3>Network Layer</h3>
              <div class="spec-items">
                <div class="spec-item">I2NP Messages</div>
                <div class="spec-item">NTCP2 Transport</div>
                <div class="spec-item">SSU2 Transport</div>
                <div class="spec-item">Network Database</div>
              </div>
            </div>

            <div class="spec-layer" data-layer="crypto">
              <h3>Cryptography Layer</h3>
              <div class="spec-items">
                <div class="spec-item">ECIES-X25519</div>
                <div class="spec-item">Ed25519 Signatures</div>
                <div class="spec-item">AES Encryption</div>
                <div class="spec-item">SHA256 Hashes</div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </main>
</div>

<style>
.docs-container {
  display: grid;
  grid-template-columns: 280px 1fr;
  gap: 2rem;
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
}

.docs-sidebar {
  position: sticky;
  top: 2rem;
  height: fit-content;
  max-height: calc(100vh - 4rem);
  overflow-y: auto;
}

.docs-nav {
  background: var(--bg-color, #ffffff);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  padding: 1.5rem;
}

.docs-nav-section {
  margin-bottom: 2rem;
}

.docs-nav-section:last-child {
  margin-bottom: 0;
}

.docs-nav-title {
  font-size: 0.875rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--text-secondary, #6b7280);
  margin-bottom: 0.75rem;
}

.docs-nav-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.docs-nav-list li {
  margin-bottom: 0.5rem;
}

.docs-nav-link {
  display: block;
  padding: 0.5rem 0.75rem;
  color: var(--text-color, #374151);
  text-decoration: none;
  border-radius: 6px;
  transition: all 0.2s ease;
  font-size: 0.875rem;
}

.docs-nav-link:hover {
  background: var(--accent-bg, #f3f4f6);
  color: var(--accent-color, #1e40af);
}

.docs-main {
  min-height: 100vh;
}

.docs-content {
  background: var(--bg-color, #ffffff);
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.docs-section {
  margin-bottom: 4rem;
}

.docs-section:last-child {
  margin-bottom: 0;
}

.docs-section h2 {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text-color, #111827);
  margin-bottom: 1.5rem;
  border-bottom: 2px solid var(--accent-color, #1e40af);
  padding-bottom: 0.5rem;
}

.docs-section h3 {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-color, #111827);
  margin-bottom: 1rem;
}

.docs-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.docs-card {
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  padding: 1.5rem;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.docs-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.docs-card h3 {
  font-size: 1.125rem;
  margin-bottom: 0.75rem;
  color: var(--accent-color, #1e40af);
}

.docs-card p {
  color: var(--text-secondary, #6b7280);
  margin-bottom: 1rem;
  line-height: 1.6;
}

.docs-link {
  color: var(--accent-color, #1e40af);
  text-decoration: none;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  transition: color 0.2s ease;
}

.docs-link:hover {
  color: var(--accent-hover, #1e3a8a);
}

.docs-features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.feature-item {
  text-align: center;
  padding: 1.5rem;
  background: var(--bg-secondary, #f9fafb);
  border-radius: 8px;
  border: 1px solid var(--border-color, #e5e7eb);
}

.feature-item h4 {
  font-size: 1.125rem;
  margin-bottom: 0.75rem;
  color: var(--text-color, #111827);
}

.feature-item p {
  color: var(--text-secondary, #6b7280);
  line-height: 1.6;
}

.guide-list {
  display: grid;
  gap: 1rem;
  margin-top: 2rem;
}

.guide-item {
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  padding: 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.guide-item h3 {
  margin-bottom: 0.5rem;
}

.guide-item p {
  color: var(--text-secondary, #6b7280);
  margin-bottom: 0;
}

.guide-meta {
  display: flex;
  gap: 0.5rem;
  align-items: center;
}

.difficulty {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
  text-transform: uppercase;
}

.difficulty.beginner {
  background: #dcfce7;
  color: #166534;
}

.difficulty.intermediate {
  background: #fef3c7;
  color: #92400e;
}

.difficulty.advanced {
  background: #fee2e2;
  color: #991b1b;
}

.time {
  color: var(--text-secondary, #6b7280);
  font-size: 0.875rem;
}

.api-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.api-card {
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  padding: 1.5rem;
}

.api-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.api-header h3 {
  margin-bottom: 0;
}

.api-status {
  padding: 0.25rem 0.75rem;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 500;
}

.api-status.stable {
  background: #dcfce7;
  color: #166534;
}

.api-status.advanced {
  background: #fee2e2;
  color: #991b1b;
}

.api-card p {
  color: var(--text-secondary, #6b7280);
  margin-bottom: 1rem;
  line-height: 1.6;
}

.api-languages {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.lang {
  background: var(--accent-bg, #e0e7ff);
  color: var(--accent-color, #1e40af);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 500;
}

.api-link {
  color: var(--accent-color, #1e40af);
  text-decoration: none;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  transition: color 0.2s ease;
}

.api-link:hover {
  color: var(--accent-hover, #1e3a8a);
}

.spec-timeline {
  margin-top: 2rem;
}

.spec-layer {
  background: var(--bg-secondary, #f9fafb);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 8px;
  padding: 1.5rem;
  margin-bottom: 1rem;
}

.spec-layer h3 {
  margin-bottom: 1rem;
  color: var(--accent-color, #1e40af);
}

.spec-items {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
}

.spec-item {
  background: var(--bg-color, #ffffff);
  border: 1px solid var(--border-color, #e5e7eb);
  border-radius: 6px;
  padding: 0.5rem 1rem;
  font-size: 0.875rem;
  font-weight: 500;
  color: var(--text-color, #374151);
}

/* Dark mode styles */
@media (prefers-color-scheme: dark) {
  :root {
    --bg-color: #1f2937;
    --bg-secondary: #111827;
    --text-color: #f9fafb;
    --text-secondary: #9ca3af;
    --border-color: #374151;
    --accent-bg: #1e3a8a;
    --accent-color: #60a5fa;
    --accent-hover: #93c5fd;
  }
}

/* Mobile responsive */
@media (max-width: 768px) {
  .docs-container {
    grid-template-columns: 1fr;
    padding: 1rem;
  }

  .docs-sidebar {
    position: static;
    max-height: none;
    order: 2;
  }

  .docs-main {
    order: 1;
  }

  .docs-content {
    padding: 1.5rem;
  }

  .docs-grid,
  .docs-features,
  .api-grid {
    grid-template-columns: 1fr;
  }

  .guide-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
  }

  .guide-meta {
    align-self: flex-end;
  }
}
</style>
{{ end }}